var YD=Object.defineProperty,KD=Object.defineProperties;var QD=Object.getOwnPropertyDescriptors;var $p=Object.getOwnPropertySymbols;var XD=Object.prototype.hasOwnProperty,JD=Object.prototype.propertyIsEnumerable;var jp=(t,e,n)=>e in t?YD(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,fe=(t,e)=>{for(var n in e||={})XD.call(e,n)&&jp(t,n,e[n]);if($p)for(var n of $p(e))JD.call(e,n)&&jp(t,n,e[n]);return t},at=(t,e)=>KD(t,QD(e));function Hp(t,e){return Object.is(t,e)}var gt=null,Ps=!1,Cc=1,_i=Symbol("SIGNAL");function Oe(t){let e=gt;return gt=t,e}function zp(){return gt}var Ls={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Up(t){if(Ps)throw new Error("");if(gt===null)return;gt.consumerOnSignalRead(t);let e=gt.nextProducerIndex++;if(Bs(gt),e<gt.producerNode.length&&gt.producerNode[e]!==t&&Jo(gt)){let n=gt.producerNode[e];Fs(n,gt.producerIndexOfThis[e])}gt.producerNode[e]!==t&&(gt.producerNode[e]=t,gt.producerIndexOfThis[e]=Jo(gt)?Zp(t,gt,e):0),gt.producerLastReadVersion[e]=t.version}function eE(){Cc++}function qp(t){if(!(Jo(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===Cc)){if(!t.producerMustRecompute(t)&&!Sc(t)){Ec(t);return}t.producerRecomputeValue(t),Ec(t)}}function Gp(t){if(t.liveConsumerNode===void 0)return;let e=Ps;Ps=!0;try{for(let n of t.liveConsumerNode)n.dirty||nE(n)}finally{Ps=e}}function tE(){return gt?.consumerAllowSignalWrites!==!1}function nE(t){t.dirty=!0,Gp(t),t.consumerMarkedDirty?.(t)}function Ec(t){t.dirty=!1,t.lastCleanEpoch=Cc}function Ic(t){return t&&(t.nextProducerIndex=0),Oe(t)}function Wp(t,e){if(Oe(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(Jo(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)Fs(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function Sc(t){Bs(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(qp(n),r!==n.version))return!0}return!1}function xc(t){if(Bs(t),Jo(t))for(let e=0;e<t.producerNode.length;e++)Fs(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function Zp(t,e,n){if(Yp(t),t.liveConsumerNode.length===0&&Kp(t))for(let r=0;r<t.producerNode.length;r++)t.producerIndexOfThis[r]=Zp(t.producerNode[r],t,r);return t.liveConsumerIndexOfThis.push(n),t.liveConsumerNode.push(e)-1}function Fs(t,e){if(Yp(t),t.liveConsumerNode.length===1&&Kp(t))for(let r=0;r<t.producerNode.length;r++)Fs(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];Bs(i),i.producerIndexOfThis[r]=e}}function Jo(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function Bs(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function Yp(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function Kp(t){return t.producerNode!==void 0}function rE(){throw new Error}var Qp=rE;function iE(){Qp()}function Xp(t){Qp=t}var oE=null;function Jp(t,e){tE()||iE(),t.equal(t.value,e)||(t.value=e,aE(t))}var eg=at(fe({},Ls),{equal:Hp,value:void 0});function aE(t){t.version++,eE(),Gp(t),oE?.()}function Se(t){return typeof t=="function"}function ki(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Vs=ki(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function ea(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var ht=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(Se(r))try{r()}catch(o){e=o instanceof Vs?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{tg(o)}catch(a){e=e??[],a instanceof Vs?e=[...e,...a.errors]:e.push(a)}}if(e)throw new Vs(e)}}add(e){var n;if(e&&e!==this)if(this.closed)tg(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&ea(n,e)}remove(e){let{_finalizers:n}=this;n&&ea(n,e),e instanceof t&&e._removeParent(this)}};ht.EMPTY=(()=>{let t=new ht;return t.closed=!0,t})();var Tc=ht.EMPTY;function $s(t){return t instanceof ht||t&&"closed"in t&&Se(t.remove)&&Se(t.add)&&Se(t.unsubscribe)}function tg(t){Se(t)?t():t.unsubscribe()}var Tn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Oi={setTimeout(t,e,...n){let{delegate:r}=Oi;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=Oi;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function js(t){Oi.setTimeout(()=>{let{onUnhandledError:e}=Tn;if(e)e(t);else throw t})}function ta(){}var ng=Mc("C",void 0,void 0);function rg(t){return Mc("E",void 0,t)}function ig(t){return Mc("N",t,void 0)}function Mc(t,e,n){return{kind:t,value:e,error:n}}var Zr=null;function Pi(t){if(Tn.useDeprecatedSynchronousErrorHandling){let e=!Zr;if(e&&(Zr={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=Zr;if(Zr=null,n)throw r}}else t()}function og(t){Tn.useDeprecatedSynchronousErrorHandling&&Zr&&(Zr.errorThrown=!0,Zr.error=t)}var Yr=class extends ht{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,$s(e)&&e.add(this)):this.destination=lE}static create(e,n,r){return new Li(e,n,r)}next(e){this.isStopped?Ac(ig(e),this):this._next(e)}error(e){this.isStopped?Ac(rg(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Ac(ng,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},sE=Function.prototype.bind;function Nc(t,e){return sE.call(t,e)}var Rc=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){Hs(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){Hs(r)}else Hs(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Hs(n)}}},Li=class extends Yr{constructor(e,n,r){super();let i;if(Se(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&Tn.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Nc(e.next,o),error:e.error&&Nc(e.error,o),complete:e.complete&&Nc(e.complete,o)}):i=e}this.destination=new Rc(i)}};function Hs(t){Tn.useDeprecatedSynchronousErrorHandling?og(t):js(t)}function uE(t){throw t}function Ac(t,e){let{onStoppedNotification:n}=Tn;n&&Oi.setTimeout(()=>n(t,e))}var lE={closed:!0,next:ta,error:uE,complete:ta};var Fi=typeof Symbol=="function"&&Symbol.observable||"@@observable";function rn(t){return t}function _c(...t){return kc(t)}function kc(t){return t.length===0?rn:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var Xe=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=dE(n)?n:new Li(n,r,i);return Pi(()=>{let{operator:a,source:s}=this;o.add(a?a.call(o,s):s?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=ag(r),new r((i,o)=>{let a=new Li({next:s=>{try{n(s)}catch(u){o(u),a.unsubscribe()}},error:o,complete:i});this.subscribe(a)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[Fi](){return this}pipe(...n){return kc(n)(this)}toPromise(n){return n=ag(n),new n((r,i)=>{let o;this.subscribe(a=>o=a,a=>i(a),()=>r(o))})}}return t.create=e=>new t(e),t})();function ag(t){var e;return(e=t??Tn.Promise)!==null&&e!==void 0?e:Promise}function cE(t){return t&&Se(t.next)&&Se(t.error)&&Se(t.complete)}function dE(t){return t&&t instanceof Yr||cE(t)&&$s(t)}function Oc(t){return Se(t?.lift)}function Fe(t){return e=>{if(Oc(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Be(t,e,n,r,i){return new Pc(t,e,n,r,i)}var Pc=class extends Yr{constructor(e,n,r,i,o,a){super(e),this.onFinalize=o,this.shouldUnsubscribe=a,this._next=n?function(s){try{n(s)}catch(u){e.error(u)}}:super._next,this._error=i?function(s){try{i(s)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(s){e.error(s)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Bi(){return Fe((t,e)=>{let n=null;t._refCount++;let r=Be(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var Vi=class extends Xe{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,Oc(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new ht;let n=this.getSubject();e.add(this.source.subscribe(Be(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=ht.EMPTY)}return e}refCount(){return Bi()(this)}};var sg=ki(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Mt=(()=>{class t extends Xe{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new zs(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new sg}next(n){Pi(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){Pi(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Pi(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Tc:(this.currentObservers=null,o.push(n),new ht(()=>{this.currentObservers=null,ea(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new Xe;return n.source=this,n}}return t.create=(e,n)=>new zs(e,n),t})(),zs=class extends Mt{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:Tc}};var Nt=class extends Mt{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var on=new Xe(t=>t.complete());function ug(t){return t&&Se(t.schedule)}function lg(t){return t[t.length-1]}function cg(t){return Se(lg(t))?t.pop():void 0}function Dr(t){return ug(lg(t))?t.pop():void 0}function fg(t,e,n,r){function i(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function s(c){try{l(r.next(c))}catch(d){a(d)}}function u(c){try{l(r.throw(c))}catch(d){a(d)}}function l(c){c.done?o(c.value):i(c.value).then(s,u)}l((r=r.apply(t,e||[])).next())})}function dg(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Kr(t){return this instanceof Kr?(this.v=t,this):new Kr(t)}function hg(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),s("next"),s("throw"),s("return",a),i[Symbol.asyncIterator]=function(){return this},i;function a(h){return function(p){return Promise.resolve(p).then(h,d)}}function s(h,p){r[h]&&(i[h]=function(m){return new Promise(function(g,v){o.push([h,m,g,v])>1||u(h,m)})},p&&(i[h]=p(i[h])))}function u(h,p){try{l(r[h](p))}catch(m){f(o[0][3],m)}}function l(h){h.value instanceof Kr?Promise.resolve(h.value.v).then(c,d):f(o[0][2],h)}function c(h){u("next",h)}function d(h){u("throw",h)}function f(h,p){h(p),o.shift(),o.length&&u(o[0][0],o[0][1])}}function pg(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof dg=="function"?dg(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(a){return new Promise(function(s,u){a=t[o](a),i(s,u,a.done,a.value)})}}function i(o,a,s,u){Promise.resolve(u).then(function(l){o({value:l,done:s})},a)}}var Us=t=>t&&typeof t.length=="number"&&typeof t!="function";function qs(t){return Se(t?.then)}function Gs(t){return Se(t[Fi])}function Ws(t){return Symbol.asyncIterator&&Se(t?.[Symbol.asyncIterator])}function Zs(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function fE(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Ys=fE();function Ks(t){return Se(t?.[Ys])}function Qs(t){return hg(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield Kr(n.read());if(i)return yield Kr(void 0);yield yield Kr(r)}}finally{n.releaseLock()}})}function Xs(t){return Se(t?.getReader)}function xt(t){if(t instanceof Xe)return t;if(t!=null){if(Gs(t))return hE(t);if(Us(t))return pE(t);if(qs(t))return gE(t);if(Ws(t))return gg(t);if(Ks(t))return vE(t);if(Xs(t))return mE(t)}throw Zs(t)}function hE(t){return new Xe(e=>{let n=t[Fi]();if(Se(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function pE(t){return new Xe(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function gE(t){return new Xe(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,js)})}function vE(t){return new Xe(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function gg(t){return new Xe(e=>{yE(t,e).catch(n=>e.error(n))})}function mE(t){return gg(Qs(t))}function yE(t,e){var n,r,i,o;return fg(this,void 0,void 0,function*(){try{for(n=pg(t);r=yield n.next(),!r.done;){let a=r.value;if(e.next(a),e.closed)return}}catch(a){i={error:a}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}e.complete()})}function Xt(t,e,n,r=0,i=!1){let o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function Js(t,e=0){return Fe((n,r)=>{n.subscribe(Be(r,i=>Xt(r,t,()=>r.next(i),e),()=>Xt(r,t,()=>r.complete(),e),i=>Xt(r,t,()=>r.error(i),e)))})}function eu(t,e=0){return Fe((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function vg(t,e){return xt(t).pipe(eu(e),Js(e))}function mg(t,e){return xt(t).pipe(eu(e),Js(e))}function yg(t,e){return new Xe(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function wg(t,e){return new Xe(n=>{let r;return Xt(n,e,()=>{r=t[Ys](),Xt(n,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(a){n.error(a);return}o?n.complete():n.next(i)},0,!0)}),()=>Se(r?.return)&&r.return()})}function tu(t,e){if(!t)throw new Error("Iterable cannot be null");return new Xe(n=>{Xt(n,e,()=>{let r=t[Symbol.asyncIterator]();Xt(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function bg(t,e){return tu(Qs(t),e)}function Dg(t,e){if(t!=null){if(Gs(t))return vg(t,e);if(Us(t))return yg(t,e);if(qs(t))return mg(t,e);if(Ws(t))return tu(t,e);if(Ks(t))return wg(t,e);if(Xs(t))return bg(t,e)}throw Zs(t)}function vt(t,e){return e?Dg(t,e):xt(t)}function Me(...t){let e=Dr(t);return vt(t,e)}function $i(t,e){let n=Se(t)?t:()=>t,r=i=>i.error(n());return new Xe(e?i=>e.schedule(r,0,i):r)}function Lc(t){return!!t&&(t instanceof Xe||Se(t.lift)&&Se(t.subscribe))}var ar=ki(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function Pe(t,e){return Fe((n,r)=>{let i=0;n.subscribe(Be(r,o=>{r.next(t.call(e,o,i++))}))})}var{isArray:wE}=Array;function bE(t,e){return wE(e)?t(...e):t(e)}function Eg(t){return Pe(e=>bE(t,e))}var{isArray:DE}=Array,{getPrototypeOf:EE,prototype:CE,keys:IE}=Object;function Cg(t){if(t.length===1){let e=t[0];if(DE(e))return{args:e,keys:null};if(SE(e)){let n=IE(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function SE(t){return t&&typeof t=="object"&&EE(t)===CE}function Ig(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function nu(...t){let e=Dr(t),n=cg(t),{args:r,keys:i}=Cg(t);if(r.length===0)return vt([],e);let o=new Xe(xE(r,e,i?a=>Ig(i,a):rn));return n?o.pipe(Eg(n)):o}function xE(t,e,n=rn){return r=>{Sg(e,()=>{let{length:i}=t,o=new Array(i),a=i,s=i;for(let u=0;u<i;u++)Sg(e,()=>{let l=vt(t[u],e),c=!1;l.subscribe(Be(r,d=>{o[u]=d,c||(c=!0,s--),s||r.next(n(o.slice()))},()=>{--a||r.complete()}))},r)},r)}}function Sg(t,e,n){t?Xt(n,t,e):e()}function xg(t,e,n,r,i,o,a,s){let u=[],l=0,c=0,d=!1,f=()=>{d&&!u.length&&!l&&e.complete()},h=m=>l<r?p(m):u.push(m),p=m=>{o&&e.next(m),l++;let g=!1;xt(n(m,c++)).subscribe(Be(e,v=>{i?.(v),o?h(v):e.next(v)},()=>{g=!0},void 0,()=>{if(g)try{for(l--;u.length&&l<r;){let v=u.shift();a?Xt(e,a,()=>p(v)):p(v)}f()}catch(v){e.error(v)}}))};return t.subscribe(Be(e,h,()=>{d=!0,f()})),()=>{s?.()}}function mt(t,e,n=1/0){return Se(e)?mt((r,i)=>Pe((o,a)=>e(r,o,i,a))(xt(t(r,i))),n):(typeof e=="number"&&(n=e),Fe((r,i)=>xg(r,i,t,n)))}function Fc(t=1/0){return mt(rn,t)}function Tg(){return Fc(1)}function ji(...t){return Tg()(vt(t,Dr(t)))}function ru(t){return new Xe(e=>{xt(t()).subscribe(e)})}function Mn(t,e){return Fe((n,r)=>{let i=0;n.subscribe(Be(r,o=>t.call(e,o,i++)&&r.next(o)))})}function Er(t){return Fe((e,n)=>{let r=null,i=!1,o;r=e.subscribe(Be(n,void 0,void 0,a=>{o=xt(t(a,Er(t)(e))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function Mg(t,e,n,r,i){return(o,a)=>{let s=n,u=e,l=0;o.subscribe(Be(a,c=>{let d=l++;u=s?t(u,c,d):(s=!0,c),r&&a.next(u)},i&&(()=>{s&&a.next(u),a.complete()})))}}function Hi(t,e){return Se(e)?mt(t,e,1):mt(t,1)}function Cr(t){return Fe((e,n)=>{let r=!1;e.subscribe(Be(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function sr(t){return t<=0?()=>on:Fe((e,n)=>{let r=0;e.subscribe(Be(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function Bc(t){return Pe(()=>t)}function iu(t=TE){return Fe((e,n)=>{let r=!1;e.subscribe(Be(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function TE(){return new ar}function na(t){return Fe((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function ur(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Mn((i,o)=>t(i,o,r)):rn,sr(1),n?Cr(e):iu(()=>new ar))}function zi(t){return t<=0?()=>on:Fe((e,n)=>{let r=[];e.subscribe(Be(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function Vc(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Mn((i,o)=>t(i,o,r)):rn,zi(1),n?Cr(e):iu(()=>new ar))}function $c(t,e){return Fe(Mg(t,e,arguments.length>=2,!0))}function jc(...t){let e=Dr(t);return Fe((n,r)=>{(e?ji(t,n,e):ji(t,n)).subscribe(r)})}function Nn(t,e){return Fe((n,r)=>{let i=null,o=0,a=!1,s=()=>a&&!i&&r.complete();n.subscribe(Be(r,u=>{i?.unsubscribe();let l=0,c=o++;xt(t(u,c)).subscribe(i=Be(r,d=>r.next(e?e(u,d,c,l++):d),()=>{i=null,s()}))},()=>{a=!0,s()}))})}function Hc(t){return Fe((e,n)=>{xt(t).subscribe(Be(n,()=>n.complete(),ta)),!n.closed&&e.subscribe(n)})}function At(t,e,n){let r=Se(t)||e||n?{next:t,error:e,complete:n}:t;return r?Fe((i,o)=>{var a;(a=r.subscribe)===null||a===void 0||a.call(r);let s=!0;i.subscribe(Be(o,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),o.next(u)},()=>{var u;s=!1,(u=r.complete)===null||u===void 0||u.call(r),o.complete()},u=>{var l;s=!1,(l=r.error)===null||l===void 0||l.call(r,u),o.error(u)},()=>{var u,l;s&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):rn}var be=class extends Error{code;constructor(e,n){super(qd(e,n)),this.code=e}};function qd(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}var dv=Symbol("InputSignalNode#UNSET"),NE=at(fe({},eg),{transformFn:void 0,applyValueToInputSignal(t,e){Jp(t,e)}});function fv(t,e){let n=Object.create(NE);n.value=t,n.transformFn=e?.transform;function r(){if(Up(n),n.value===dv)throw new be(-950,!1);return n.value}return r[_i]=n,r}function Gd(t){return{toString:t}.toString()}function et(t){for(let e in t)if(t[e]===et)return e;throw Error("Could not find renamed property on target object.")}function sn(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(sn).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function Ng(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var AE=et({__forward_ref__:et});function hv(t){return t.__forward_ref__=hv,t.toString=function(){return sn(this())},t}function yn(t){return pv(t)?t():t}function pv(t){return typeof t=="function"&&t.hasOwnProperty(AE)&&t.__forward_ref__===hv}function Te(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function _u(t){return Ag(t,vv)||Ag(t,mv)}function gv(t){return _u(t)!==null}function Ag(t,e){return t.hasOwnProperty(e)?t[e]:null}function RE(t){let e=t&&(t[vv]||t[mv]);return e||null}function Rg(t){return t&&(t.hasOwnProperty(_g)||t.hasOwnProperty(_E))?t[_g]:null}var vv=et({\u0275prov:et}),_g=et({\u0275inj:et}),mv=et({ngInjectableDef:et}),_E=et({ngInjectorDef:et}),Ne=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,n){this._desc=e,this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=Te({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function yv(t){return t&&!!t.\u0275providers}var kE=et({\u0275cmp:et}),OE=et({\u0275dir:et}),PE=et({\u0275pipe:et}),LE=et({\u0275mod:et}),fu=et({\u0275fac:et}),oa=et({__NG_ELEMENT_ID__:et}),kg=et({__NG_ENV_ID__:et});function wv(t){return typeof t=="string"?t:t==null?"":String(t)}function FE(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():wv(t)}function BE(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new be(-200,t)}function Wd(t,e){throw new be(-201,!1)}var _e=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(_e||{}),Qc;function bv(){return Qc}function mn(t){let e=Qc;return Qc=t,e}function Dv(t,e,n){let r=_u(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&_e.Optional)return null;if(e!==void 0)return e;Wd(t,"Injector")}var VE={},aa=VE,$E="__NG_DI_FLAG__",hu="ngTempTokenPath",jE="ngTokenPath",HE=/\n/gm,zE="\u0275",Og="__source",Wi;function UE(){return Wi}function Ir(t){let e=Wi;return Wi=t,e}function qE(t,e=_e.Default){if(Wi===void 0)throw new be(-203,!1);return Wi===null?Dv(t,void 0,e):Wi.get(t,e&_e.Optional?null:void 0,e)}function Le(t,e=_e.Default){return(bv()||qE)(yn(t),e)}function ue(t,e=_e.Default){return Le(t,ku(e))}function ku(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Xc(t){let e=[];for(let n=0;n<t.length;n++){let r=yn(t[n]);if(Array.isArray(r)){if(r.length===0)throw new be(900,!1);let i,o=_e.Default;for(let a=0;a<r.length;a++){let s=r[a],u=GE(s);typeof u=="number"?u===-1?i=s.token:o|=u:i=s}e.push(Le(i,o))}else e.push(Le(r))}return e}function GE(t){return t[$E]}function WE(t,e,n,r){let i=t[hu];throw e[Og]&&i.unshift(e[Og]),t.message=ZE(`
`+t.message,i,n,r),t[jE]=i,t[hu]=null,t}function ZE(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==zE?t.slice(2):t;let i=sn(e);if(Array.isArray(e))i=e.map(sn).join(" -> ");else if(typeof e=="object"){let o=[];for(let a in e)if(e.hasOwnProperty(a)){let s=e[a];o.push(a+":"+(typeof s=="string"?JSON.stringify(s):sn(s)))}i=`{${o.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(HE,`
  `)}`}function Yi(t,e){let n=t.hasOwnProperty(fu);return n?t[fu]:null}function YE(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],o=e[r];if(n&&(i=n(i),o=n(o)),o!==i)return!1}return!0}function KE(t){return t.flat(Number.POSITIVE_INFINITY)}function Zd(t,e){t.forEach(n=>Array.isArray(n)?Zd(n,e):e(n))}function Ev(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function pu(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}var sa={},Ki=[],Qi=new Ne(""),Cv=new Ne("",-1),Iv=new Ne(""),gu=class{get(e,n=aa){if(n===aa){let r=new Error(`NullInjectorError: No provider for ${sn(e)}!`);throw r.name="NullInjectorError",r}return n}};function Sv(t,e){let n=t[LE]||null;if(!n&&e===!0)throw new Error(`Type ${sn(t)} does not have '\u0275mod' property.`);return n}function Jr(t){return t[kE]||null}function xv(t){return t[OE]||null}function Tv(t){return t[PE]||null}function Mv(t){let e=Jr(t)||xv(t)||Tv(t);return e!==null?e.standalone:!1}function Ou(t){return{\u0275providers:t}}function QE(...t){return{\u0275providers:Nv(!0,t),\u0275fromNgModule:!0}}function Nv(t,...e){let n=[],r=new Set,i,o=a=>{n.push(a)};return Zd(e,a=>{let s=a;Jc(s,o,[],r)&&(i||=[],i.push(s))}),i!==void 0&&Av(i,o),n}function Av(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];Yd(i,o=>{e(o,r)})}}function Jc(t,e,n,r){if(t=yn(t),!t)return!1;let i=null,o=Rg(t),a=!o&&Jr(t);if(!o&&!a){let u=t.ngModule;if(o=Rg(u),o)i=u;else return!1}else{if(a&&!a.standalone)return!1;i=t}let s=r.has(i);if(a){if(s)return!1;if(r.add(i),a.dependencies){let u=typeof a.dependencies=="function"?a.dependencies():a.dependencies;for(let l of u)Jc(l,e,n,r)}}else if(o){if(o.imports!=null&&!s){r.add(i);let l;try{Zd(o.imports,c=>{Jc(c,e,n,r)&&(l||=[],l.push(c))})}finally{}l!==void 0&&Av(l,e)}if(!s){let l=Yi(i)||(()=>new i);e({provide:i,useFactory:l,deps:Ki},i),e({provide:Iv,useValue:i,multi:!0},i),e({provide:Qi,useValue:()=>Le(i),multi:!0},i)}let u=o.providers;if(u!=null&&!s){let l=t;Yd(u,c=>{e(c,l)})}}else return!1;return i!==t&&t.providers!==void 0}function Yd(t,e){for(let n of t)yv(n)&&(n=n.\u0275providers),Array.isArray(n)?Yd(n,e):e(n)}var XE=et({provide:String,useValue:et});function Rv(t){return t!==null&&typeof t=="object"&&XE in t}function JE(t){return!!(t&&t.useExisting)}function eC(t){return!!(t&&t.useFactory)}function ed(t){return typeof t=="function"}var Pu=new Ne(""),au={},tC={},zc;function Kd(){return zc===void 0&&(zc=new gu),zc}var wn=class{},ua=class extends wn{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,nd(e,a=>this.processProvider(a)),this.records.set(Cv,Ui(void 0,this)),i.has("environment")&&this.records.set(wn,Ui(void 0,this));let o=this.records.get(Pu);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(Iv,Ki,_e.Self))}destroy(){ra(this),this._destroyed=!0;let e=Oe(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Oe(e)}}onDestroy(e){return ra(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){ra(this);let n=Ir(this),r=mn(void 0),i;try{return e()}finally{Ir(n),mn(r)}}get(e,n=aa,r=_e.Default){if(ra(this),e.hasOwnProperty(kg))return e[kg](this);r=ku(r);let i,o=Ir(this),a=mn(void 0);try{if(!(r&_e.SkipSelf)){let u=this.records.get(e);if(u===void 0){let l=sC(e)&&_u(e);l&&this.injectableDefInScope(l)?u=Ui(td(e),au):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u)}let s=r&_e.Self?Kd():this.parent;return n=r&_e.Optional&&n===aa?null:n,s.get(e,n)}catch(s){if(s.name==="NullInjectorError"){if((s[hu]=s[hu]||[]).unshift(sn(e)),o)throw s;return WE(s,e,"R3InjectorError",this.source)}else throw s}finally{mn(a),Ir(o)}}resolveInjectorInitializers(){let e=Oe(null),n=Ir(this),r=mn(void 0),i;try{let o=this.get(Qi,Ki,_e.Self);for(let a of o)a()}finally{Ir(n),mn(r),Oe(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(sn(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=yn(e);let n=ed(e)?e:yn(e&&e.provide),r=rC(e);if(!ed(e)&&e.multi===!0){let i=this.records.get(n);i||(i=Ui(void 0,au,!0),i.factory=()=>Xc(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){let r=Oe(null);try{return n.value===au&&(n.value=tC,n.value=n.factory()),typeof n.value=="object"&&n.value&&aC(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{Oe(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=yn(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function td(t){let e=_u(t),n=e!==null?e.factory:Yi(t);if(n!==null)return n;if(t instanceof Ne)throw new be(204,!1);if(t instanceof Function)return nC(t);throw new be(204,!1)}function nC(t){if(t.length>0)throw new be(204,!1);let n=RE(t);return n!==null?()=>n.factory(t):()=>new t}function rC(t){if(Rv(t))return Ui(void 0,t.useValue);{let e=iC(t);return Ui(e,au)}}function iC(t,e,n){let r;if(ed(t)){let i=yn(t);return Yi(i)||td(i)}else if(Rv(t))r=()=>yn(t.useValue);else if(eC(t))r=()=>t.useFactory(...Xc(t.deps||[]));else if(JE(t))r=()=>Le(yn(t.useExisting));else{let i=yn(t&&(t.useClass||t.provide));if(oC(t))r=()=>new i(...Xc(t.deps));else return Yi(i)||td(i)}return r}function ra(t){if(t.destroyed)throw new be(205,!1)}function Ui(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function oC(t){return!!t.deps}function aC(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function sC(t){return typeof t=="function"||typeof t=="object"&&t instanceof Ne}function nd(t,e){for(let n of t)Array.isArray(n)?nd(n,e):n&&yv(n)?nd(n.\u0275providers,e):e(n)}function On(t,e){t instanceof ua&&ra(t);let n,r=Ir(t),i=mn(void 0);try{return e()}finally{Ir(r),mn(i)}}function uC(){return bv()!==void 0||UE()!=null}function lC(t){return typeof t=="function"}var cr=0,xe=1,Ee=2,$t=3,Rn=4,Pn=5,la=6,vu=7,Bt=8,Xi=9,xr=10,ln=11,ca=12,Pg=13,io=14,_n=15,ei=16,qi=17,lr=18,Lu=19,_v=20,Sr=21,Uc=22,mu=23,un=24,kn=25,kv=1;var ti=7,yu=8,Ji=9,Vt=10,wu=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(wu||{});function Qr(t){return Array.isArray(t)&&typeof t[kv]=="object"}function dr(t){return Array.isArray(t)&&t[kv]===!0}function Ov(t){return(t.flags&4)!==0}function Qd(t){return t.componentOffset>-1}function Xd(t){return(t.flags&1)===1}function wa(t){return!!t.template}function rd(t){return(t[Ee]&512)!==0}var id=class{previousValue;currentValue;firstChange;constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function Pv(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}var Jd=(()=>{let t=()=>Lv;return t.ngInherit=!0,t})();function Lv(t){return t.type.prototype.ngOnChanges&&(t.setInput=dC),cC}function cC(){let t=Bv(this),e=t?.current;if(e){let n=t.previous;if(n===sa)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function dC(t,e,n,r,i){let o=this.declaredInputs[r],a=Bv(t)||fC(t,{previous:sa,current:null}),s=a.current||(a.current={}),u=a.previous,l=u[o];s[o]=new id(l&&l.currentValue,n,u===sa),Pv(t,e,i,n)}var Fv="__ngSimpleChanges__";function Bv(t){return t[Fv]||null}function fC(t,e){return t[Fv]=e}var Lg=null;var qn=function(t,e,n){Lg?.(t,e,n)},hC="svg",pC="math";function Wn(t){for(;Array.isArray(t);)t=t[cr];return t}function gC(t,e){return Wn(e[t])}function Yn(t,e){return Wn(e[t.index])}function Vv(t,e){return t.data[e]}function oo(t,e){let n=e[t];return Qr(n)?n:n[cr]}function vC(t){return(t[Ee]&4)===4}function ef(t){return(t[Ee]&128)===128}function mC(t){return dr(t[$t])}function eo(t,e){return e==null?null:t[e]}function $v(t){t[qi]=0}function tf(t){t[Ee]&1024||(t[Ee]|=1024,ef(t)&&Bu(t))}function yC(t,e){for(;t>0;)e=e[io],t--;return e}function Fu(t){return!!(t[Ee]&9216||t[un]?.dirty)}function od(t){t[xr].changeDetectionScheduler?.notify(9),t[Ee]&64&&(t[Ee]|=1024),Fu(t)&&Bu(t)}function Bu(t){t[xr].changeDetectionScheduler?.notify(0);let e=ni(t);for(;e!==null&&!(e[Ee]&8192||(e[Ee]|=8192,!ef(e)));)e=ni(e)}function jv(t,e){if((t[Ee]&256)===256)throw new be(911,!1);t[Sr]===null&&(t[Sr]=[]),t[Sr].push(e)}function wC(t,e){if(t[Sr]===null)return;let n=t[Sr].indexOf(e);n!==-1&&t[Sr].splice(n,1)}function ni(t){let e=t[$t];return dr(e)?e[$t]:e}var Ve={lFrame:Yv(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var ad=!1;function bC(){return Ve.lFrame.elementDepthCount}function DC(){Ve.lFrame.elementDepthCount++}function EC(){Ve.lFrame.elementDepthCount--}function Hv(){return Ve.bindingsEnabled}function CC(){return Ve.skipHydrationRootTNode!==null}function IC(t){return Ve.skipHydrationRootTNode===t}function SC(){Ve.skipHydrationRootTNode=null}function st(){return Ve.lFrame.lView}function fr(){return Ve.lFrame.tView}function ba(t){return Ve.lFrame.contextLView=t,t[Bt]}function Da(t){return Ve.lFrame.contextLView=null,t}function Ln(){let t=zv();for(;t!==null&&t.type===64;)t=t.parent;return t}function zv(){return Ve.lFrame.currentTNode}function xC(){let t=Ve.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function Ea(t,e){let n=Ve.lFrame;n.currentTNode=t,n.isParent=e}function Uv(){return Ve.lFrame.isParent}function TC(){Ve.lFrame.isParent=!1}function qv(){return ad}function Fg(t){let e=ad;return ad=t,e}function MC(t){return Ve.lFrame.bindingIndex=t}function nf(){return Ve.lFrame.bindingIndex++}function NC(){return Ve.lFrame.inI18n}function AC(t,e){let n=Ve.lFrame;n.bindingIndex=n.bindingRootIndex=t,sd(e)}function RC(){return Ve.lFrame.currentDirectiveIndex}function sd(t){Ve.lFrame.currentDirectiveIndex=t}function Gv(){return Ve.lFrame.currentQueryIndex}function rf(t){Ve.lFrame.currentQueryIndex=t}function _C(t){let e=t[xe];return e.type===2?e.declTNode:e.type===1?t[Pn]:null}function Wv(t,e,n){if(n&_e.SkipSelf){let i=e,o=t;for(;i=i.parent,i===null&&!(n&_e.Host);)if(i=_C(o),i===null||(o=o[io],i.type&10))break;if(i===null)return!1;e=i,t=o}let r=Ve.lFrame=Zv();return r.currentTNode=e,r.lView=t,!0}function of(t){let e=Zv(),n=t[xe];Ve.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function Zv(){let t=Ve.lFrame,e=t===null?null:t.child;return e===null?Yv(t):e}function Yv(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function Kv(){let t=Ve.lFrame;return Ve.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var Qv=Kv;function af(){let t=Kv();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function kC(t){return(Ve.lFrame.contextLView=yC(t,Ve.lFrame.contextLView))[Bt]}function Vu(){return Ve.lFrame.selectedIndex}function ri(t){Ve.lFrame.selectedIndex=t}function OC(){return Ve.lFrame.currentNamespace}var Xv=!0;function sf(){return Xv}function uf(t){Xv=t}function PC(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let a=Lv(e);(n.preOrderHooks??=[]).push(t,a),(n.preOrderCheckHooks??=[]).push(t,a)}i&&(n.preOrderHooks??=[]).push(0-t,i),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}function lf(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let o=t.data[n].type.prototype,{ngAfterContentInit:a,ngAfterContentChecked:s,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:c}=o;a&&(t.contentHooks??=[]).push(-n,a),s&&((t.contentHooks??=[]).push(n,s),(t.contentCheckHooks??=[]).push(n,s)),u&&(t.viewHooks??=[]).push(-n,u),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),c!=null&&(t.destroyHooks??=[]).push(n,c)}}function su(t,e,n){Jv(t,e,3,n)}function uu(t,e,n,r){(t[Ee]&3)===n&&Jv(t,e,n,r)}function qc(t,e){let n=t[Ee];(n&3)===e&&(n&=16383,n+=1,t[Ee]=n)}function Jv(t,e,n,r){let i=r!==void 0?t[qi]&65535:0,o=r??-1,a=e.length-1,s=0;for(let u=i;u<a;u++)if(typeof e[u+1]=="number"){if(s=e[u],r!=null&&s>=r)break}else e[u]<0&&(t[qi]+=65536),(s<o||o==-1)&&(LC(t,n,e,u),t[qi]=(t[qi]&4294901760)+u+2),u++}function Bg(t,e){qn(4,t,e);let n=Oe(null);try{e.call(t)}finally{Oe(n),qn(5,t,e)}}function LC(t,e,n,r){let i=n[r]<0,o=n[r+1],a=i?-n[r]:n[r],s=t[a];i?t[Ee]>>14<t[qi]>>16&&(t[Ee]&3)===e&&(t[Ee]+=16384,Bg(s,o)):Bg(s,o)}var Zi=-1,da=class{factory;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,n,r){this.factory=e,this.canSeeViewProviders=n,this.injectImpl=r}};function FC(t){return t instanceof da}function BC(t){return(t.flags&8)!==0}function VC(t){return(t.flags&16)!==0}function ud(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],a=n[r++],s=n[r++];t.setAttribute(e,a,s,o)}else{let o=i,a=n[++r];jC(o)?t.setProperty(e,o,a):t.setAttribute(e,o,a),r++}}return r}function $C(t){return t===3||t===4||t===6}function jC(t){return t.charCodeAt(0)===64}function cf(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?Vg(t,n,i,null,e[++r]):Vg(t,n,i,null,null))}}return t}function Vg(t,e,n,r,i){let o=0,a=t.length;if(e===-1)a=-1;else for(;o<t.length;){let s=t[o++];if(typeof s=="number"){if(s===e){a=-1;break}else if(s>e){a=o-1;break}}}for(;o<t.length;){let s=t[o];if(typeof s=="number")break;if(s===n){if(r===null){i!==null&&(t[o+1]=i);return}else if(r===t[o+1]){t[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}a!==-1&&(t.splice(a,0,e),o=a+1),t.splice(o++,0,n),r!==null&&t.splice(o++,0,r),i!==null&&t.splice(o++,0,i)}var Gc={},ld=class{injector;parentInjector;constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=ku(r);let i=this.injector.get(e,Gc,r);return i!==Gc||n===Gc?i:this.parentInjector.get(e,n,r)}};function em(t){return t!==Zi}function bu(t){return t&32767}function HC(t){return t>>16}function Du(t,e){let n=HC(t),r=e;for(;n>0;)r=r[io],n--;return r}var cd=!0;function $g(t){let e=cd;return cd=t,e}var zC=256,tm=zC-1,nm=5,UC=0,Gn={};function qC(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(oa)&&(r=n[oa]),r==null&&(r=n[oa]=UC++);let i=r&tm,o=1<<i;e.data[t+(i>>nm)]|=o}function rm(t,e){let n=im(t,e);if(n!==-1)return n;let r=e[xe];r.firstCreatePass&&(t.injectorIndex=e.length,Wc(r.data,t),Wc(e,null),Wc(r.blueprint,null));let i=df(t,e),o=t.injectorIndex;if(em(i)){let a=bu(i),s=Du(i,e),u=s[xe].data;for(let l=0;l<8;l++)e[o+l]=s[a+l]|u[a+l]}return e[o+8]=i,o}function Wc(t,e){t.push(0,0,0,0,0,0,0,0,e)}function im(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function df(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=lm(i),r===null)return Zi;if(n++,i=i[io],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return Zi}function GC(t,e,n){qC(t,e,n)}function om(t,e,n){if(n&_e.Optional||t!==void 0)return t;Wd(e,"NodeInjector")}function am(t,e,n,r){if(n&_e.Optional&&r===void 0&&(r=null),!(n&(_e.Self|_e.Host))){let i=t[Xi],o=mn(void 0);try{return i?i.get(e,r,n&_e.Optional):Dv(e,r,n&_e.Optional)}finally{mn(o)}}return om(r,e,n)}function sm(t,e,n,r=_e.Default,i){if(t!==null){if(e[Ee]&2048&&!(r&_e.Self)){let a=KC(t,e,n,r,Gn);if(a!==Gn)return a}let o=um(t,e,n,r,Gn);if(o!==Gn)return o}return am(e,n,r,i)}function um(t,e,n,r,i){let o=ZC(n);if(typeof o=="function"){if(!Wv(e,t,r))return r&_e.Host?om(i,n,r):am(e,n,r,i);try{let a;if(a=o(r),a==null&&!(r&_e.Optional))Wd(n);else return a}finally{Qv()}}else if(typeof o=="number"){let a=null,s=im(t,e),u=Zi,l=r&_e.Host?e[_n][Pn]:null;for((s===-1||r&_e.SkipSelf)&&(u=s===-1?df(t,e):e[s+8],u===Zi||!Hg(r,!1)?s=-1:(a=e[xe],s=bu(u),e=Du(u,e)));s!==-1;){let c=e[xe];if(jg(o,s,c.data)){let d=WC(s,e,n,a,r,l);if(d!==Gn)return d}u=e[s+8],u!==Zi&&Hg(r,e[xe].data[s+8]===l)&&jg(o,s,e)?(a=c,s=bu(u),e=Du(u,e)):s=-1}}return i}function WC(t,e,n,r,i,o){let a=e[xe],s=a.data[t+8],u=r==null?Qd(s)&&cd:r!=a&&(s.type&3)!==0,l=i&_e.Host&&o===s,c=lu(s,a,n,u,l);return c!==null?to(e,a,c,s):Gn}function lu(t,e,n,r,i){let o=t.providerIndexes,a=e.data,s=o&1048575,u=t.directiveStart,l=t.directiveEnd,c=o>>20,d=r?s:s+c,f=i?s+c:l;for(let h=d;h<f;h++){let p=a[h];if(h<u&&n===p||h>=u&&p.type===n)return h}if(i){let h=a[u];if(h&&wa(h)&&h.type===n)return u}return null}function to(t,e,n,r){let i=t[n],o=e.data;if(FC(i)){let a=i;a.resolving&&BE(FE(o[n]));let s=$g(a.canSeeViewProviders);a.resolving=!0;let u,l=a.injectImpl?mn(a.injectImpl):null,c=Wv(t,r,_e.Default);try{i=t[n]=a.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&PC(n,o[n],e)}finally{l!==null&&mn(l),$g(s),a.resolving=!1,Qv()}}return i}function ZC(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(oa)?t[oa]:void 0;return typeof e=="number"?e>=0?e&tm:YC:e}function jg(t,e,n){let r=1<<t;return!!(n[e+(t>>nm)]&r)}function Hg(t,e){return!(t&_e.Self)&&!(t&_e.Host&&e)}var Xr=class{_tNode;_lView;constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return sm(this._tNode,this._lView,e,ku(r),n)}};function YC(){return new Xr(Ln(),st())}function ff(t){return Gd(()=>{let e=t.prototype.constructor,n=e[fu]||dd(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let o=i[fu]||dd(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function dd(t){return pv(t)?()=>{let e=dd(yn(t));return e&&e()}:Yi(t)}function KC(t,e,n,r,i){let o=t,a=e;for(;o!==null&&a!==null&&a[Ee]&2048&&!(a[Ee]&512);){let s=um(o,a,n,r|_e.Self,Gn);if(s!==Gn)return s;let u=o.parent;if(!u){let l=a[_v];if(l){let c=l.get(n,Gn,r);if(c!==Gn)return c}u=lm(a),a=a[io]}o=u}return i}function lm(t){let e=t[xe],n=e.type;return n===2?e.declTNode:n===1?t[Pn]:null}function zg(t,e=null,n=null,r){let i=cm(t,e,n,r);return i.resolveInjectorInitializers(),i}function cm(t,e=null,n=null,r,i=new Set){let o=[n||Ki,QE(t)];return r=r||(typeof t=="object"?void 0:sn(t)),new ua(o,e||Kd(),r||null,i)}var Tr=class t{static THROW_IF_NOT_FOUND=aa;static NULL=new gu;static create(e,n){if(Array.isArray(e))return zg({name:""},n,e,"");{let r=e.name??"";return zg({name:r},e.parent,e.providers,r)}}static \u0275prov=Te({token:t,providedIn:"any",factory:()=>Le(Cv)});static __NG_ELEMENT_ID__=-1};var QC=new Ne("");QC.__NG_ELEMENT_ID__=t=>{let e=Ln();if(e===null)throw new be(204,!1);if(e.type&2)return e.value;if(t&_e.Optional)return null;throw new be(204,!1)};var dm=!1,fm=(()=>{class t{static __NG_ELEMENT_ID__=XC;static __NG_ENV_ID__=n=>n}return t})(),fd=class extends fm{_lView;constructor(e){super(),this._lView=e}onDestroy(e){return jv(this._lView,e),()=>wC(this._lView,e)}};function XC(){return new fd(st())}var fa=class{},$u=new Ne("",{providedIn:"root",factory:()=>!1});var hm=new Ne(""),pm=new Ne(""),ao=(()=>{class t{taskId=0;pendingTasks=new Set;get _hasPendingTasks(){return this.hasPendingTasks.value}hasPendingTasks=new Nt(!1);add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}has(n){return this.pendingTasks.has(n)}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static \u0275prov=Te({token:t,providedIn:"root",factory:()=>new t})}return t})();var hd=class extends Mt{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,uC()&&(this.destroyRef=ue(fm,{optional:!0})??void 0,this.pendingTasks=ue(ao,{optional:!0})??void 0)}emit(e){let n=Oe(null);try{super.next(e)}finally{Oe(n)}}subscribe(e,n,r){let i=e,o=n||(()=>null),a=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),a=u.complete?.bind(u)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),a&&(a=this.wrapInTimeout(a)));let s=super.subscribe({next:i,error:o,complete:a});return e instanceof ht&&e.add(s),s}wrapInTimeout(e){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(n),r!==void 0&&this.pendingTasks?.remove(r)})}}},an=hd;function Eu(...t){}function gm(t){let e,n;function r(){t=Eu;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{t(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{t(),r()})),()=>r()}function Ug(t){return queueMicrotask(()=>t()),()=>{t=Eu}}var hf="isAngularZone",Cu=hf+"_ID",JC=0,yt=class t{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new an(!1);onMicrotaskEmpty=new an(!1);onStable=new an(!1);onError=new an(!1);constructor(e){let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=dm}=e;if(typeof Zone>"u")throw new be(908,!1);Zone.assertZonePatched();let a=this;a._nesting=0,a._outer=a._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(a._inner=a._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(a._inner=a._inner.fork(Zone.longStackTraceZoneSpec)),a.shouldCoalesceEventChangeDetection=!i&&r,a.shouldCoalesceRunChangeDetection=i,a.callbackScheduled=!1,a.scheduleInRootZone=o,nI(a)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(hf)===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new be(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new be(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let o=this._inner,a=o.scheduleEventTask("NgZoneEvent: "+i,e,eI,Eu,Eu);try{return o.runTask(a,n,r)}finally{o.cancelTask(a)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},eI={};function pf(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function tI(t){if(t.isCheckStableRunning||t.callbackScheduled)return;t.callbackScheduled=!0;function e(){gm(()=>{t.callbackScheduled=!1,pd(t),t.isCheckStableRunning=!0,pf(t),t.isCheckStableRunning=!1})}t.scheduleInRootZone?Zone.root.run(()=>{e()}):t._outer.run(()=>{e()}),pd(t)}function nI(t){let e=()=>{tI(t)},n=JC++;t._inner=t._inner.fork({name:"angular",properties:{[hf]:!0,[Cu]:n,[Cu+n]:!0},onInvokeTask:(r,i,o,a,s,u)=>{if(rI(u))return r.invokeTask(o,a,s,u);try{return qg(t),r.invokeTask(o,a,s,u)}finally{(t.shouldCoalesceEventChangeDetection&&a.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),Gg(t)}},onInvoke:(r,i,o,a,s,u,l)=>{try{return qg(t),r.invoke(o,a,s,u,l)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!iI(u)&&e(),Gg(t)}},onHasTask:(r,i,o,a)=>{r.hasTask(o,a),i===o&&(a.change=="microTask"?(t._hasPendingMicrotasks=a.microTask,pd(t),pf(t)):a.change=="macroTask"&&(t.hasPendingMacrotasks=a.macroTask))},onHandleError:(r,i,o,a)=>(r.handleError(o,a),t.runOutsideAngular(()=>t.onError.emit(a)),!1)})}function pd(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function qg(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function Gg(t){t._nesting--,pf(t)}var gd=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new an;onMicrotaskEmpty=new an;onStable=new an;onError=new an;run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function rI(t){return vm(t,"__ignore_ng_zone__")}function iI(t){return vm(t,"__scheduler_tick__")}function vm(t,e){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[e]===!0}var Mr=class{_console=console;handleError(e){this._console.error("ERROR",e)}},oI=new Ne("",{providedIn:"root",factory:()=>{let t=ue(yt),e=ue(Mr);return n=>t.runOutsideAngular(()=>e.handleError(n))}});function Wg(t,e){return fv(t,e)}function aI(t){return fv(dv,t)}var mm=(Wg.required=aI,Wg);function sI(){return so(Ln(),st())}function so(t,e){return new ai(Yn(t,e))}var ai=(()=>{class t{nativeElement;constructor(n){this.nativeElement=n}static __NG_ELEMENT_ID__=sI}return t})();function uI(t){return t instanceof ai?t.nativeElement:t}function lI(){return this._results[Symbol.iterator]()}var vd=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new Mt}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,n){return this._results.reduce(e,n)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,n){this.dirty=!1;let r=KE(e);(this._changesDetected=!YE(this._results,r,n))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=lI};function ym(t){return(t.flags&128)===128}var wm=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(wm||{}),bm=new Map,cI=0;function dI(){return cI++}function fI(t){bm.set(t[Lu],t)}function md(t){bm.delete(t[Lu])}var Zg="__ngContext__";function ii(t,e){Qr(e)?(t[Zg]=e[Lu],fI(e)):t[Zg]=e}function Dm(t){return Cm(t[ca])}function Em(t){return Cm(t[Rn])}function Cm(t){for(;t!==null&&!dr(t);)t=t[Rn];return t}var yd;function Im(t){yd=t}function hI(){if(yd!==void 0)return yd;if(typeof document<"u")return document;throw new be(210,!1)}var gf=new Ne("",{providedIn:"root",factory:()=>pI}),pI="ng",vf=new Ne(""),uo=new Ne("",{providedIn:"platform",factory:()=>"unknown"});var mf=new Ne("",{providedIn:"root",factory:()=>hI().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var gI="h",vI="b";var Sm=!1,mI=new Ne("",{providedIn:"root",factory:()=>Sm});var xm=function(t){return t[t.CHANGE_DETECTION=0]="CHANGE_DETECTION",t[t.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",t}(xm||{}),Tm=new Ne(""),Yg=new Set;function Ca(t){Yg.has(t)||(Yg.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}var yI=(()=>{class t{impl=null;execute(){this.impl?.execute()}static \u0275prov=Te({token:t,providedIn:"root",factory:()=>new t})}return t})();var wI=()=>null;function yf(t,e,n=!1){return wI(t,e,n)}var Zn=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(Zn||{});function Mm(t){return t instanceof Function?t():t}var Nr=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(Nr||{}),si=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(si||{}),bI;function wf(t,e){return bI(t,e)}function Gi(t,e,n,r,i){if(r!=null){let o,a=!1;dr(r)?o=r:Qr(r)&&(a=!0,r=r[cr]);let s=Wn(r);t===0&&n!==null?i==null?_m(e,n,s):Iu(e,n,s,i||null,!0):t===1&&n!==null?Iu(e,n,s,i||null,!0):t===2?PI(e,s,a):t===3&&e.destroyNode(s),o!=null&&FI(e,t,o,n,i)}}function DI(t,e){return t.createText(e)}function EI(t,e,n){t.setValue(e,n)}function Nm(t,e,n){return t.createElement(e,n)}function CI(t,e){Am(t,e),e[cr]=null,e[Pn]=null}function II(t,e,n,r,i,o){r[cr]=i,r[Pn]=e,Hu(t,r,n,1,i,o)}function Am(t,e){e[xr].changeDetectionScheduler?.notify(10),Hu(t,e,e[ln],2,null,null)}function SI(t){let e=t[ca];if(!e)return Zc(t[xe],t);for(;e;){let n=null;if(Qr(e))n=e[ca];else{let r=e[Vt];r&&(n=r)}if(!n){for(;e&&!e[Rn]&&e!==t;)Qr(e)&&Zc(e[xe],e),e=e[$t];e===null&&(e=t),Qr(e)&&Zc(e[xe],e),n=e&&e[Rn]}e=n}}function xI(t,e,n,r){let i=Vt+r,o=n.length;r>0&&(n[i-1][Rn]=e),r<o-Vt?(e[Rn]=n[i],Ev(n,Vt+r,e)):(n.push(e),e[Rn]=null),e[$t]=n;let a=e[ei];a!==null&&n!==a&&Rm(a,e);let s=e[lr];s!==null&&s.insertView(t),od(e),e[Ee]|=128}function Rm(t,e){let n=t[Ji],r=e[$t];if(Qr(r))t[Ee]|=wu.HasTransplantedViews;else{let i=r[$t][_n];e[_n]!==i&&(t[Ee]|=wu.HasTransplantedViews)}n===null?t[Ji]=[e]:n.push(e)}function bf(t,e){let n=t[Ji],r=n.indexOf(e);n.splice(r,1)}function ha(t,e){if(t.length<=Vt)return;let n=Vt+e,r=t[n];if(r){let i=r[ei];i!==null&&i!==t&&bf(i,r),e>0&&(t[n-1][Rn]=r[Rn]);let o=pu(t,Vt+e);CI(r[xe],r);let a=o[lr];a!==null&&a.detachView(o[xe]),r[$t]=null,r[Rn]=null,r[Ee]&=-129}return r}function ju(t,e){if(!(e[Ee]&256)){let n=e[ln];n.destroyNode&&Hu(t,e,n,3,null,null),SI(e)}}function Zc(t,e){if(e[Ee]&256)return;let n=Oe(null);try{e[Ee]&=-129,e[Ee]|=256,e[un]&&xc(e[un]),MI(t,e),TI(t,e),e[xe].type===1&&e[ln].destroy();let r=e[ei];if(r!==null&&dr(e[$t])){r!==e[$t]&&bf(r,e);let i=e[lr];i!==null&&i.detachView(t)}md(e)}finally{Oe(n)}}function TI(t,e){let n=t.cleanup,r=e[vu];if(n!==null)for(let a=0;a<n.length-1;a+=2)if(typeof n[a]=="string"){let s=n[a+3];s>=0?r[s]():r[-s].unsubscribe(),a+=2}else{let s=r[n[a+1]];n[a].call(s)}r!==null&&(e[vu]=null);let i=e[Sr];if(i!==null){e[Sr]=null;for(let a=0;a<i.length;a++){let s=i[a];s()}}let o=e[mu];if(o!==null){e[mu]=null;for(let a of o)a.destroy()}}function MI(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof da)){let o=n[r+1];if(Array.isArray(o))for(let a=0;a<o.length;a+=2){let s=i[o[a]],u=o[a+1];qn(4,s,u);try{u.call(s)}finally{qn(5,s,u)}}else{qn(4,i,o);try{o.call(i)}finally{qn(5,i,o)}}}}}function NI(t,e,n){return AI(t,e.parent,n)}function AI(t,e,n){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return n[cr];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=t.data[r.directiveStart+i];if(o===Zn.None||o===Zn.Emulated)return null}return Yn(r,n)}}function Iu(t,e,n,r,i){t.insertBefore(e,n,r,i)}function _m(t,e,n){t.appendChild(e,n)}function Kg(t,e,n,r,i){r!==null?Iu(t,e,n,r,i):_m(t,e,n)}function km(t,e){return t.parentNode(e)}function RI(t,e){return t.nextSibling(e)}function _I(t,e,n){return OI(t,e,n)}function kI(t,e,n){return t.type&40?Yn(t,n):null}var OI=kI,Qg;function Df(t,e,n,r){let i=NI(t,r,e),o=e[ln],a=r.parent||e[Pn],s=_I(a,r,e);if(i!=null)if(Array.isArray(n))for(let u=0;u<n.length;u++)Kg(o,i,n[u],s,!1);else Kg(o,i,n,s,!1);Qg!==void 0&&Qg(o,r,e,n,i)}function ia(t,e){if(e!==null){let n=e.type;if(n&3)return Yn(e,t);if(n&4)return wd(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return ia(t,r);{let i=t[e.index];return dr(i)?wd(-1,i):Wn(i)}}else{if(n&128)return ia(t,e.next);if(n&32)return wf(e,t)()||Wn(t[e.index]);{let r=Om(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=ni(t[_n]);return ia(i,r)}else return ia(t,e.next)}}}return null}function Om(t,e){if(e!==null){let r=t[_n][Pn],i=e.projection;return r.projection[i]}return null}function wd(t,e){let n=Vt+t+1;if(n<e.length){let r=e[n],i=r[xe].firstChild;if(i!==null)return ia(r,i)}return e[ti]}function PI(t,e,n){t.removeChild(null,e,n)}function Ef(t,e,n,r,i,o,a){for(;n!=null;){if(n.type===128){n=n.next;continue}let s=r[n.index],u=n.type;if(a&&e===0&&(s&&ii(Wn(s),r),n.flags|=2),(n.flags&32)!==32)if(u&8)Ef(t,e,n.child,r,i,o,!1),Gi(e,t,i,s,o);else if(u&32){let l=wf(n,r),c;for(;c=l();)Gi(e,t,i,c,o);Gi(e,t,i,s,o)}else u&16?LI(t,e,r,n,i,o):Gi(e,t,i,s,o);n=a?n.projectionNext:n.next}}function Hu(t,e,n,r,i,o){Ef(n,r,t.firstChild,e,i,o,!1)}function LI(t,e,n,r,i,o){let a=n[_n],u=a[Pn].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let c=u[l];Gi(e,t,i,c,o)}else{let l=u,c=a[$t];ym(r)&&(l.flags|=128),Ef(t,e,l,c,i,o,!0)}}function FI(t,e,n,r,i){let o=n[ti],a=Wn(n);o!==a&&Gi(e,t,r,o,i);for(let s=Vt;s<n.length;s++){let u=n[s];Hu(u[xe],u,t,e,r,o)}}function BI(t,e,n){t.setAttribute(e,"style",n)}function Pm(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function Lm(t,e,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&ud(t,e,r),i!==null&&Pm(t,e,i),o!==null&&BI(t,e,o)}function VI(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}var Fm="ng-template";function $I(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&VI(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(Cf(t))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===n)return!0}return!1}function Cf(t){return t.type===4&&t.value!==Fm}function jI(t,e,n){let r=t.type===4&&!n?Fm:t.value;return e===r}function HI(t,e,n){let r=4,i=t.attrs,o=i!==null?qI(i):0,a=!1;for(let s=0;s<e.length;s++){let u=e[s];if(typeof u=="number"){if(!a&&!An(r)&&!An(u))return!1;if(a&&An(u))continue;a=!1,r=u|r&1;continue}if(!a)if(r&4){if(r=2|r&1,u!==""&&!jI(t,u,n)||u===""&&e.length===1){if(An(r))return!1;a=!0}}else if(r&8){if(i===null||!$I(t,i,u,n)){if(An(r))return!1;a=!0}}else{let l=e[++s],c=zI(u,i,Cf(t),n);if(c===-1){if(An(r))return!1;a=!0;continue}if(l!==""){let d;if(c>o?d="":d=i[c+1].toLowerCase(),r&2&&l!==d){if(An(r))return!1;a=!0}}}}return An(r)||a}function An(t){return(t&1)===0}function zI(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){let a=e[i];if(a===t)return i;if(a===3||a===6)o=!0;else if(a===1||a===2){let s=e[++i];for(;typeof s=="string";)s=e[++i];continue}else{if(a===4)break;if(a===0){i+=4;continue}}i+=o?1:2}return-1}else return GI(e,t)}function UI(t,e,n=!1){for(let r=0;r<e.length;r++)if(HI(t,e[r],n))return!0;return!1}function qI(t){for(let e=0;e<t.length;e++){let n=t[e];if($C(n))return e}return t.length}function GI(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function Xg(t,e){return t?":not("+e.trim()+")":e}function WI(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let a=t[n];if(typeof a=="string")if(r&2){let s=t[++n];i+="["+a+(s.length>0?'="'+s+'"':"")+"]"}else r&8?i+="."+a:r&4&&(i+=" "+a);else i!==""&&!An(a)&&(e+=Xg(o,i),i=""),r=a,o=o||!An(r);n++}return i!==""&&(e+=Xg(o,i)),e}function ZI(t){return t.map(WI).join(",")}function YI(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let o=t[r];if(typeof o=="string")i===2?o!==""&&e.push(o,t[++r]):i===8&&n.push(o);else{if(!An(i))break;i=o}r++}return{attrs:e,classes:n}}var Ia={};function If(t=1){Bm(fr(),st(),Vu()+t,!1)}function Bm(t,e,n,r){if(!r)if((e[Ee]&3)===3){let o=t.preOrderCheckHooks;o!==null&&su(e,o,n)}else{let o=t.preOrderHooks;o!==null&&uu(e,o,0,n)}ri(n)}function Sf(t,e=_e.Default){let n=st();if(n===null)return Le(t,e);let r=Ln();return sm(r,n,yn(t),e)}function Vm(t,e,n,r,i,o){let a=Oe(null);try{let s=null;i&Nr.SignalBased&&(s=e[r][_i]),s!==null&&s.transformFn!==void 0&&(o=s.transformFn(o)),i&Nr.HasDecoratorInputTransform&&(o=t.inputTransforms[r].call(e,o)),t.setInput!==null?t.setInput(e,s,o,n,r):Pv(e,s,r,o)}finally{Oe(a)}}function KI(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)ri(~i);else{let o=i,a=n[++r],s=n[++r];AC(a,o);let u=e[o];s(2,u)}}}finally{ri(-1)}}function zu(t,e,n,r,i,o,a,s,u,l,c){let d=e.blueprint.slice();return d[cr]=i,d[Ee]=r|4|128|8|64|1024,(l!==null||t&&t[Ee]&2048)&&(d[Ee]|=2048),$v(d),d[$t]=d[io]=t,d[Bt]=n,d[xr]=a||t&&t[xr],d[ln]=s||t&&t[ln],d[Xi]=u||t&&t[Xi]||null,d[Pn]=o,d[Lu]=dI(),d[la]=c,d[_v]=l,d[_n]=e.type==2?t[_n]:d,d}function Uu(t,e,n,r,i){let o=t.data[e];if(o===null)o=QI(t,e,n,r,i),NC()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let a=xC();o.injectorIndex=a===null?-1:a.injectorIndex}return Ea(o,!0),o}function QI(t,e,n,r,i){let o=zv(),a=Uv(),s=a?o:o&&o.parent,u=t.data[e]=rS(t,s,n,e,r,i);return t.firstChild===null&&(t.firstChild=u),o!==null&&(a?o.child==null&&u.parent!==null&&(o.child=u):o.next===null&&(o.next=u,u.prev=o)),u}function $m(t,e,n,r){if(n===0)return-1;let i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function jm(t,e,n,r,i){let o=Vu(),a=r&2;try{ri(-1),a&&e.length>kn&&Bm(t,e,kn,!1),qn(a?2:0,i),n(r,i)}finally{ri(o),qn(a?3:1,i)}}function Hm(t,e,n){if(Ov(e)){let r=Oe(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let a=i;a<o;a++){let s=t.data[a];if(s.contentQueries){let u=n[a];s.contentQueries(1,u,a)}}}finally{Oe(r)}}}function zm(t,e,n){Hv()&&(sS(t,e,n,Yn(n,e)),(n.flags&64)===64&&Zm(t,e,n))}function Um(t,e,n=Yn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let a=r[o+1],s=a===-1?n(e,t):t[a];t[i++]=s}}}function qm(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=xf(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function xf(t,e,n,r,i,o,a,s,u,l,c){let d=kn+r,f=d+i,h=XI(d,f),p=typeof l=="function"?l():l;return h[xe]={type:t,blueprint:h,template:n,queries:null,viewQuery:s,declTNode:e,data:h.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:f,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof a=="function"?a():a,firstChild:null,schemas:u,consts:p,incompleteFirstPass:!1,ssrId:c}}function XI(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:Ia);return n}function JI(t,e,n,r){let o=r.get(mI,Sm)||n===Zn.ShadowDom,a=t.selectRootElement(e,o);return eS(a),a}function eS(t){tS(t)}var tS=()=>null;function nS(t,e,n,r){let i=Xm(e);i.push(n),t.firstCreatePass&&Jm(t).push(r,i.length-1)}function rS(t,e,n,r,i,o){let a=e?e.injectorIndex:-1,s=0;return CC()&&(s|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:a,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:s,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function Jg(t,e,n,r,i){for(let o in e){if(!e.hasOwnProperty(o))continue;let a=e[o];if(a===void 0)continue;r??={};let s,u=Nr.None;Array.isArray(a)?(s=a[0],u=a[1]):s=a;let l=o;if(i!==null){if(!i.hasOwnProperty(o))continue;l=i[o]}t===0?ev(r,n,l,s,u):ev(r,n,l,s)}return r}function ev(t,e,n,r,i){let o;t.hasOwnProperty(n)?(o=t[n]).push(e,r):o=t[n]=[e,r],i!==void 0&&o.push(i)}function iS(t,e,n){let r=e.directiveStart,i=e.directiveEnd,o=t.data,a=e.attrs,s=[],u=null,l=null;for(let c=r;c<i;c++){let d=o[c],f=n?n.get(d):null,h=f?f.inputs:null,p=f?f.outputs:null;u=Jg(0,d.inputs,c,u,h),l=Jg(1,d.outputs,c,l,p);let m=u!==null&&a!==null&&!Cf(e)?vS(u,c,a):null;s.push(m)}u!==null&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=s,e.inputs=u,e.outputs=l}function Gm(t,e,n,r){if(Hv()){let i=r===null?null:{"":-1},o=lS(t,n),a,s;o===null?a=s=null:[a,s]=o,a!==null&&Wm(t,e,n,a,i,s),i&&cS(n,r,i)}n.mergedAttrs=cf(n.mergedAttrs,n.attrs)}function Wm(t,e,n,r,i,o){for(let l=0;l<r.length;l++)GC(rm(n,e),t,r[l].type);fS(n,t.data.length,r.length);for(let l=0;l<r.length;l++){let c=r[l];c.providersResolver&&c.providersResolver(c)}let a=!1,s=!1,u=$m(t,e,r.length,null);for(let l=0;l<r.length;l++){let c=r[l];n.mergedAttrs=cf(n.mergedAttrs,c.hostAttrs),hS(t,n,e,u,c),dS(u,c,i),c.contentQueries!==null&&(n.flags|=4),(c.hostBindings!==null||c.hostAttrs!==null||c.hostVars!==0)&&(n.flags|=64);let d=c.type.prototype;!a&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),a=!0),!s&&(d.ngOnChanges||d.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),s=!0),u++}iS(t,n,o)}function oS(t,e,n,r,i){let o=i.hostBindings;if(o){let a=t.hostBindingOpCodes;a===null&&(a=t.hostBindingOpCodes=[]);let s=~e.index;aS(a)!=s&&a.push(s),a.push(n,r,o)}}function aS(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function sS(t,e,n,r){let i=n.directiveStart,o=n.directiveEnd;Qd(n)&&pS(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||rm(n,e),ii(r,e);let a=n.initialInputs;for(let s=i;s<o;s++){let u=t.data[s],l=to(e,t,s,n);if(ii(l,e),a!==null&&gS(e,s-i,l,u,n,a),wa(u)){let c=oo(n.index,e);c[Bt]=to(e,t,s,n)}}}function Zm(t,e,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,a=RC();try{ri(o);for(let s=r;s<i;s++){let u=t.data[s],l=e[s];sd(s),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&uS(u,l)}}finally{ri(-1),sd(a)}}function uS(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function lS(t,e){let n=t.directiveRegistry,r=null,i=null;if(n)for(let o=0;o<n.length;o++){let a=n[o];if(UI(e,a.selectors,!1))if(r||(r=[]),wa(a))if(a.findHostDirectiveDefs!==null){let s=[];i=i||new Map,a.findHostDirectiveDefs(a,s,i),r.unshift(...s,a);let u=s.length;bd(t,e,u)}else r.unshift(a),bd(t,e,0);else i=i||new Map,a.findHostDirectiveDefs?.(a,r,i),r.push(a)}return r===null?null:[r,i]}function bd(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function cS(t,e,n){if(e){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let o=n[e[i+1]];if(o==null)throw new be(-301,!1);r.push(e[i],o)}}}function dS(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;wa(e)&&(n[""]=t)}}function fS(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function hS(t,e,n,r,i){t.data[r]=i;let o=i.factory||(i.factory=Yi(i.type,!0)),a=new da(o,wa(i),Sf);t.blueprint[r]=a,n[r]=a,oS(t,e,r,$m(t,n,i.hostVars,Ia),i)}function Ym(t){let e=16;return t.signals?e=4096:t.onPush&&(e=64),e}function pS(t,e,n){let r=Yn(e,t),i=qm(n),o=t[xr].rendererFactory,a=qu(t,zu(t,i,null,Ym(n),r,e,null,o.createRenderer(r,n),null,null,null));t[e.index]=a}function gS(t,e,n,r,i,o){let a=o[e];if(a!==null)for(let s=0;s<a.length;){let u=a[s++],l=a[s++],c=a[s++],d=a[s++];Vm(r,n,u,l,c,d)}}function vS(t,e,n){let r=null,i=0;for(;i<n.length;){let o=n[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(t.hasOwnProperty(o)){r===null&&(r=[]);let a=t[o];for(let s=0;s<a.length;s+=3)if(a[s]===e){r.push(o,a[s+1],a[s+2],n[i+1]);break}}i+=2}return r}function Km(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function Qm(t,e){let n=t.contentQueries;if(n!==null){let r=Oe(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],a=n[i+1];if(a!==-1){let s=t.data[a];rf(o),s.contentQueries(2,e[a],a)}}}finally{Oe(r)}}}function qu(t,e){return t[ca]?t[Pg][Rn]=e:t[ca]=e,t[Pg]=e,e}function Dd(t,e,n){rf(0);let r=Oe(null);try{e(t,n)}finally{Oe(r)}}function Xm(t){return t[vu]??=[]}function Jm(t){return t.cleanup??=[]}function ey(t,e){let n=t[Xi],r=n?n.get(Mr,null):null;r&&r.handleError(e)}function ty(t,e,n,r,i){for(let o=0;o<n.length;){let a=n[o++],s=n[o++],u=n[o++],l=e[a],c=t.data[a];Vm(c,l,r,s,u,i)}}function mS(t,e,n){let r=gC(e,t);EI(t[ln],r,n)}function yS(t,e){let n=oo(e,t),r=n[xe];wS(r,n);let i=n[cr];i!==null&&n[la]===null&&(n[la]=yf(i,n[Xi])),Tf(r,n,n[Bt])}function wS(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function Tf(t,e,n){of(e);try{let r=t.viewQuery;r!==null&&Dd(1,r,n);let i=t.template;i!==null&&jm(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[lr]?.finishViewCreation(t),t.staticContentQueries&&Qm(t,e),t.staticViewQueries&&Dd(2,t.viewQuery,n);let o=t.components;o!==null&&bS(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[Ee]&=-5,af()}}function bS(t,e){for(let n=0;n<e.length;n++)yS(t,e[n])}function Gu(t,e,n,r){let i=Oe(null);try{let o=e.tView,s=t[Ee]&4096?4096:16,u=zu(t,o,n,s,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=t[e.index];u[ei]=l;let c=t[lr];return c!==null&&(u[lr]=c.createEmbeddedView(o)),Tf(o,u,n),u}finally{Oe(i)}}function ny(t,e){let n=Vt+e;if(n<t.length)return t[n]}function pa(t,e){return!e||e.firstChild===null||ym(t)}function Wu(t,e,n,r=!0){let i=e[xe];if(xI(i,e,t,n),r){let a=wd(n,t),s=e[ln],u=km(s,t[ti]);u!==null&&II(i,t[Pn],s,e,u,a)}let o=e[la];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function ry(t,e){let n=ha(t,e);return n!==void 0&&ju(n[xe],n),n}function Su(t,e,n,r,i=!1){for(;n!==null;){if(n.type===128){n=i?n.projectionNext:n.next;continue}let o=e[n.index];o!==null&&r.push(Wn(o)),dr(o)&&DS(o,r);let a=n.type;if(a&8)Su(t,e,n.child,r);else if(a&32){let s=wf(n,e),u;for(;u=s();)r.push(u)}else if(a&16){let s=Om(e,n);if(Array.isArray(s))r.push(...s);else{let u=ni(e[_n]);Su(u[xe],u,s,r,!0)}}n=i?n.projectionNext:n.next}return r}function DS(t,e){for(let n=Vt;n<t.length;n++){let r=t[n],i=r[xe].firstChild;i!==null&&Su(r[xe],r,i,e)}t[ti]!==t[cr]&&e.push(t[ti])}var iy=[];function ES(t){return t[un]??CS(t)}function CS(t){let e=iy.pop()??Object.create(SS);return e.lView=t,e}function IS(t){t.lView[un]!==t&&(t.lView=null,iy.push(t))}var SS=at(fe({},Ls),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{Bu(t.lView)},consumerOnSignalRead(){this.lView[un]=this}});function xS(t){let e=t[un]??Object.create(TS);return e.lView=t,e}var TS=at(fe({},Ls),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{let e=ni(t.lView);for(;e&&!oy(e[xe]);)e=ni(e);e&&tf(e)},consumerOnSignalRead(){this.lView[un]=this}});function oy(t){return t.type!==2}function ay(t){if(t[mu]===null)return;let e=!0;for(;e;){let n=!1;for(let r of t[mu])r.dirty&&(n=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=n&&!!(t[Ee]&8192)}}var MS=100;function sy(t,e=!0,n=0){let i=t[xr].rendererFactory,o=!1;o||i.begin?.();try{NS(t,n)}catch(a){throw e&&ey(t,a),a}finally{o||i.end?.()}}function NS(t,e){let n=qv();try{Fg(!0),Ed(t,e);let r=0;for(;Fu(t);){if(r===MS)throw new be(103,!1);r++,Ed(t,1)}}finally{Fg(n)}}function AS(t,e,n,r){let i=e[Ee];if((i&256)===256)return;let o=!1,a=!1;of(e);let s=!0,u=null,l=null;o||(oy(t)?(l=ES(e),u=Ic(l)):zp()===null?(s=!1,l=xS(e),u=Ic(l)):e[un]&&(xc(e[un]),e[un]=null));try{$v(e),MC(t.bindingStartIndex),n!==null&&jm(t,e,n,2,r);let c=(i&3)===3;if(!o)if(c){let h=t.preOrderCheckHooks;h!==null&&su(e,h,null)}else{let h=t.preOrderHooks;h!==null&&uu(e,h,0,null),qc(e,0)}if(a||RS(e),ay(e),uy(e,0),t.contentQueries!==null&&Qm(t,e),!o)if(c){let h=t.contentCheckHooks;h!==null&&su(e,h)}else{let h=t.contentHooks;h!==null&&uu(e,h,1),qc(e,1)}KI(t,e);let d=t.components;d!==null&&cy(e,d,0);let f=t.viewQuery;if(f!==null&&Dd(2,f,r),!o)if(c){let h=t.viewCheckHooks;h!==null&&su(e,h)}else{let h=t.viewHooks;h!==null&&uu(e,h,2),qc(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[Uc]){for(let h of e[Uc])h();e[Uc]=null}o||(e[Ee]&=-73)}catch(c){throw o||Bu(e),c}finally{l!==null&&(Wp(l,u),s&&IS(l)),af()}}function uy(t,e){for(let n=Dm(t);n!==null;n=Em(n))for(let r=Vt;r<n.length;r++){let i=n[r];ly(i,e)}}function RS(t){for(let e=Dm(t);e!==null;e=Em(e)){if(!(e[Ee]&wu.HasTransplantedViews))continue;let n=e[Ji];for(let r=0;r<n.length;r++){let i=n[r];tf(i)}}}function _S(t,e,n){let r=oo(e,t);ly(r,n)}function ly(t,e){ef(t)&&Ed(t,e)}function Ed(t,e){let r=t[xe],i=t[Ee],o=t[un],a=!!(e===0&&i&16);if(a||=!!(i&64&&e===0),a||=!!(i&1024),a||=!!(o?.dirty&&Sc(o)),a||=!1,o&&(o.dirty=!1),t[Ee]&=-9217,a)AS(r,t,r.template,t[Bt]);else if(i&8192){ay(t),uy(t,1);let s=r.components;s!==null&&cy(t,s,1)}}function cy(t,e,n){for(let r=0;r<e.length;r++)_S(t,e[r],n)}function Mf(t,e){let n=qv()?64:1088;for(t[xr].changeDetectionScheduler?.notify(e);t;){t[Ee]|=n;let r=ni(t);if(rd(t)&&!r)return t;t=r}return null}var oi=class{_lView;_cdRefInjectingView;notifyErrorHandler;_appRef=null;_attachedToViewContainer=!1;get rootNodes(){let e=this._lView,n=e[xe];return Su(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r}get context(){return this._lView[Bt]}get dirty(){return!!(this._lView[Ee]&9280)||!!this._lView[un]?.dirty}set context(e){this._lView[Bt]=e}get destroyed(){return(this._lView[Ee]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[$t];if(dr(e)){let n=e[yu],r=n?n.indexOf(this):-1;r>-1&&(ha(e,r),pu(n,r))}this._attachedToViewContainer=!1}ju(this._lView[xe],this._lView)}onDestroy(e){jv(this._lView,e)}markForCheck(){Mf(this._cdRefInjectingView||this._lView,4)}markForRefresh(){tf(this._cdRefInjectingView||this._lView)}detach(){this._lView[Ee]&=-129}reattach(){od(this._lView),this._lView[Ee]|=128}detectChanges(){this._lView[Ee]|=1024,sy(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new be(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=rd(this._lView),n=this._lView[ei];n!==null&&!e&&bf(n,this._lView),Am(this._lView[xe],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new be(902,!1);this._appRef=e;let n=rd(this._lView),r=this._lView[ei];r!==null&&!n&&Rm(r,this._lView),od(this._lView)}},ga=(()=>{class t{static __NG_ELEMENT_ID__=PS}return t})(),kS=ga,OS=class extends kS{_declarationLView;_declarationTContainer;elementRef;constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){let i=Gu(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:n,dehydratedView:r});return new oi(i)}};function PS(){return Nf(Ln(),st())}function Nf(t,e){return t.type&4?new OS(e,t,so(t,e)):null}var P$=new RegExp(`^(\\d+)*(${vI}|${gI})*(.*)`);var LS=()=>null;function va(t,e){return LS(t,e)}var Cd=class{},xu=class{},Id=class{resolveComponentFactory(e){throw Error(`No component factory found for ${sn(e)}.`)}},no=class{static NULL=new Id},ro=class{};var FS=(()=>{class t{static \u0275prov=Te({token:t,providedIn:"root",factory:()=>null})}return t})();function Sd(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(e!==null)for(let a=0;a<e.length;a++){let s=e[a];if(typeof s=="number")o=s;else if(o==1)i=Ng(i,s);else if(o==2){let u=s,l=e[++a];r=Ng(r,u+": "+l+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}var Tu=class extends no{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=Jr(e);return new ma(n,this.ngModule)}};function tv(t,e){let n=[];for(let r in t){if(!t.hasOwnProperty(r))continue;let i=t[r];if(i===void 0)continue;let o=Array.isArray(i),a=o?i[0]:i,s=o?i[1]:Nr.None;e?n.push({propName:a,templateName:r,isSignal:(s&Nr.SignalBased)!==0}):n.push({propName:a,templateName:r})}return n}function BS(t){let e=t.toLowerCase();return e==="svg"?hC:e==="math"?pC:null}var ma=class extends xu{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;get inputs(){let e=this.componentDef,n=e.inputTransforms,r=tv(e.inputs,!0);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return tv(this.componentDef.outputs,!1)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=ZI(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let o=Oe(null);try{i=i||this.ngModule;let a=i instanceof wn?i:i?.injector;a&&this.componentDef.getStandaloneInjector!==null&&(a=this.componentDef.getStandaloneInjector(a)||a);let s=a?new ld(e,a):e,u=s.get(ro,null);if(u===null)throw new be(407,!1);let l=s.get(FS,null),c=s.get(fa,null),d={rendererFactory:u,sanitizer:l,changeDetectionScheduler:c},f=u.createRenderer(null,this.componentDef),h=this.componentDef.selectors[0][0]||"div",p=r?JI(f,r,this.componentDef.encapsulation,s):Nm(f,h,BS(h)),m=512;this.componentDef.signals?m|=4096:this.componentDef.onPush||(m|=16);let g=null;p!==null&&(g=yf(p,s,!0));let v=xf(0,null,null,1,0,null,null,null,null,null,null),y=zu(null,v,null,m,null,null,d,f,s,null,g);of(y);let w,b,I=null;try{let E=this.componentDef,D,S=null;E.findHostDirectiveDefs?(D=[],S=new Map,E.findHostDirectiveDefs(E,D,S),D.push(E)):D=[E];let C=VS(y,p);I=$S(C,p,E,D,y,d,f),b=Vv(v,kn),p&&zS(f,E,p,r),n!==void 0&&US(b,this.ngContentSelectors,n),w=HS(I,E,D,S,y,[qS]),Tf(v,y,null)}catch(E){throw I!==null&&md(I),md(y),E}finally{af()}return new xd(this.componentType,w,so(b,y),y,b)}finally{Oe(o)}}},xd=class extends Cd{location;_rootLView;_tNode;instance;hostView;changeDetectorRef;componentType;previousInputValues=null;constructor(e,n,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.instance=n,this.hostView=this.changeDetectorRef=new oi(i,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let o=this._rootLView;ty(o[xe],o,i,e,n),this.previousInputValues.set(e,n);let a=oo(this._tNode.index,o);Mf(a,1)}}get injector(){return new Xr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function VS(t,e){let n=t[xe],r=kn;return t[r]=e,Uu(n,r,2,"#host",null)}function $S(t,e,n,r,i,o,a){let s=i[xe];jS(r,t,e,a);let u=null;e!==null&&(u=yf(e,i[Xi]));let l=o.rendererFactory.createRenderer(e,n),c=zu(i,qm(n),null,Ym(n),i[t.index],t,o,l,null,null,u);return s.firstCreatePass&&bd(s,t,r.length-1),qu(i,c),i[t.index]=c}function jS(t,e,n,r){for(let i of t)e.mergedAttrs=cf(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(Sd(e,e.mergedAttrs,!0),n!==null&&Lm(r,n,e))}function HS(t,e,n,r,i,o){let a=Ln(),s=i[xe],u=Yn(a,i);Wm(s,i,a,n,null,r);for(let c=0;c<n.length;c++){let d=a.directiveStart+c,f=to(i,s,d,a);ii(f,i)}Zm(s,i,a),u&&ii(u,i);let l=to(i,s,a.directiveStart+a.componentOffset,a);if(t[Bt]=i[Bt]=l,o!==null)for(let c of o)c(l,e);return Hm(s,a,i),l}function zS(t,e,n,r){if(r)ud(t,n,["ng-version","19.0.3"]);else{let{attrs:i,classes:o}=YI(e.selectors[0]);i&&ud(t,n,i),o&&o.length>0&&Pm(t,n,o.join(" "))}}function US(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let o=n[i];r.push(o!=null&&o.length?Array.from(o):null)}}function qS(){let t=Ln();lf(st()[xe],t)}var lo=(()=>{class t{static __NG_ELEMENT_ID__=GS}return t})();function GS(){let t=Ln();return fy(t,st())}var WS=lo,dy=class extends WS{_lContainer;_hostTNode;_hostLView;constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return so(this._hostTNode,this._hostLView)}get injector(){return new Xr(this._hostTNode,this._hostLView)}get parentInjector(){let e=df(this._hostTNode,this._hostLView);if(em(e)){let n=Du(e,this._hostLView),r=bu(e),i=n[xe].data[r+8];return new Xr(i,n)}else return new Xr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=nv(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-Vt}createEmbeddedView(e,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let a=va(this._lContainer,e.ssrId),s=e.createEmbeddedViewImpl(n||{},o,a);return this.insertImpl(s,i,pa(this._hostTNode,a)),s}createComponent(e,n,r,i,o){let a=e&&!lC(e),s;if(a)s=n;else{let p=n||{};s=p.index,r=p.injector,i=p.projectableNodes,o=p.environmentInjector||p.ngModuleRef}let u=a?e:new ma(Jr(e)),l=r||this.parentInjector;if(!o&&u.ngModule==null){let m=(a?l:this.parentInjector).get(wn,null);m&&(o=m)}let c=Jr(u.componentType??{}),d=va(this._lContainer,c?.id??null),f=d?.firstChild??null,h=u.create(l,i,f,o);return this.insertImpl(h.hostView,s,pa(this._hostTNode,d)),h}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(mC(i)){let s=this.indexOf(e);if(s!==-1)this.detach(s);else{let u=i[$t],l=new dy(u,u[Pn],u[$t]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(n),a=this._lContainer;return Wu(a,i,o,r),e.attachToViewContainerRef(),Ev(Yc(a),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=nv(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=ha(this._lContainer,n);r&&(pu(Yc(this._lContainer),n),ju(r[xe],r))}detach(e){let n=this._adjustIndex(e,-1),r=ha(this._lContainer,n);return r&&pu(Yc(this._lContainer),n)!=null?new oi(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function nv(t){return t[yu]}function Yc(t){return t[yu]||(t[yu]=[])}function fy(t,e){let n,r=e[t.index];return dr(r)?n=r:(n=Km(r,e,null,t),e[t.index]=n,qu(e,n)),YS(n,e,t,r),new dy(n,t,e)}function ZS(t,e){let n=t[ln],r=n.createComment(""),i=Yn(e,t),o=km(n,i);return Iu(n,o,r,RI(n,i),!1),r}var YS=XS,KS=()=>!1;function QS(t,e,n){return KS(t,e,n)}function XS(t,e,n,r){if(t[ti])return;let i;n.type&8?i=Wn(r):i=ZS(e,n),t[ti]=i}var Td=class t{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new t(this.queryList)}setDirty(){this.queryList.setDirty()}},Md=class t{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let n=e.queries;if(n!==null){let r=e.contentQueries!==null?e.contentQueries[0]:n.length,i=[];for(let o=0;o<r;o++){let a=n.getByIndex(o),s=this.queries[a.indexInDeclarationView];i.push(s.clone())}return new t(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let n=0;n<this.queries.length;n++)Af(e,n).matches!==null&&this.queries[n].setDirty()}},Nd=class{flags;read;predicate;constructor(e,n,r=null){this.flags=n,this.read=r,typeof e=="string"?this.predicate=ax(e):this.predicate=e}},Ad=class t{queries;constructor(e=[]){this.queries=e}elementStart(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,n)}elementEnd(e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(e)}embeddedTView(e){let n=null;for(let r=0;r<this.length;r++){let i=n!==null?n.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,n!==null?n.push(o):n=[o])}return n!==null?new t(n):null}template(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,n)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},Rd=class t{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,n=-1){this.metadata=e,this._declarationNodeIndex=n}elementStart(e,n){this.isApplyingToNode(n)&&this.matchTNode(e,n)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,n){this.elementStart(e,n)}embeddedTView(e,n){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,n),new t(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let n=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==n;)r=r.parent;return n===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,n){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(e,n,JS(n,o)),this.matchTNodeWithReadOption(e,n,lu(n,e,o,!1,!1))}else r===ga?n.type&4&&this.matchTNodeWithReadOption(e,n,-1):this.matchTNodeWithReadOption(e,n,lu(n,e,r,!1,!1))}matchTNodeWithReadOption(e,n,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===ai||i===lo||i===ga&&n.type&4)this.addMatch(n.index,-2);else{let o=lu(n,e,i,!1,!1);o!==null&&this.addMatch(n.index,o)}else this.addMatch(n.index,r)}}addMatch(e,n){this.matches===null?this.matches=[e,n]:this.matches.push(e,n)}};function JS(t,e){let n=t.localNames;if(n!==null){for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1]}return null}function ex(t,e){return t.type&11?so(t,e):t.type&4?Nf(t,e):null}function tx(t,e,n,r){return n===-1?ex(e,t):n===-2?nx(t,e,r):to(t,t[xe],n,e)}function nx(t,e,n){if(n===ai)return so(e,t);if(n===ga)return Nf(e,t);if(n===lo)return fy(e,t)}function hy(t,e,n,r){let i=e[lr].queries[r];if(i.matches===null){let o=t.data,a=n.matches,s=[];for(let u=0;a!==null&&u<a.length;u+=2){let l=a[u];if(l<0)s.push(null);else{let c=o[l];s.push(tx(e,c,a[u+1],n.metadata.read))}}i.matches=s}return i.matches}function _d(t,e,n,r){let i=t.queries.getByIndex(n),o=i.matches;if(o!==null){let a=hy(t,e,i,n);for(let s=0;s<o.length;s+=2){let u=o[s];if(u>0)r.push(a[s/2]);else{let l=o[s+1],c=e[-u];for(let d=Vt;d<c.length;d++){let f=c[d];f[ei]===f[$t]&&_d(f[xe],f,l,r)}if(c[Ji]!==null){let d=c[Ji];for(let f=0;f<d.length;f++){let h=d[f];_d(h[xe],h,l,r)}}}}}return r}function rx(t,e){return t[lr].queries[e].queryList}function ix(t,e,n){let r=new vd((n&4)===4);return nS(t,e,r,r.destroy),(e[lr]??=new Md).queries.push(new Td(r))-1}function ox(t,e,n){let r=fr();return r.firstCreatePass&&(sx(r,new Nd(t,e,n),-1),(e&2)===2&&(r.staticViewQueries=!0)),ix(r,st(),e)}function ax(t){return t.split(",").map(e=>e.trim())}function sx(t,e,n){t.queries===null&&(t.queries=new Ad),t.queries.track(new Rd(e,n))}function Af(t,e){return t.queries.getByIndex(e)}function ux(t,e){let n=t[xe],r=Af(n,e);return r.crossesNgTemplate?_d(n,t,e,[]):hy(n,t,r,e)}var Ar=class{},ya=class{};var kd=class extends Ar{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new Tu(this);constructor(e,n,r,i=!0){super(),this.ngModuleType=e,this._parent=n;let o=Sv(e);this._bootstrapComponents=Mm(o.bootstrap),this._r3Injector=cm(e,n,[{provide:Ar,useValue:this},{provide:no,useValue:this.componentFactoryResolver},...r],sn(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Od=class extends ya{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new kd(this.moduleType,e,[])}};var Mu=class extends Ar{injector;componentFactoryResolver=new Tu(this);instance=null;constructor(e){super();let n=new ua([...e.providers,{provide:Ar,useValue:this},{provide:no,useValue:this.componentFactoryResolver}],e.parent||Kd(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Rf(t,e,n=null){return new Mu({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var lx=(()=>{class t{_injector;cachedInjectors=new Map;constructor(n){this._injector=n}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let r=Nv(!1,n.type),i=r.length>0?Rf([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=Te({token:t,providedIn:"environment",factory:()=>new t(Le(wn))})}return t})();function Zu(t){return Gd(()=>{let e=py(t),n=at(fe({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===wm.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(lx).getOrCreateStandaloneInjector(n):null,getExternalStyles:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Zn.Emulated,styles:t.styles||Ki,_:null,schemas:t.schemas||null,tView:null,id:""});e.standalone&&Ca("NgStandalone"),gy(n);let r=t.dependencies;return n.directiveDefs=iv(r,!1),n.pipeDefs=iv(r,!0),n.id=fx(n),n})}function cx(t){return Jr(t)||xv(t)}function dx(t){return t!==null}function rv(t,e){if(t==null)return sa;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],o,a,s=Nr.None;Array.isArray(i)?(s=i[0],o=i[1],a=i[2]??o):(o=i,a=i),e?(n[o]=s!==Nr.None?[r,s]:r,e[o]=a):n[o]=r}return n}function _f(t){return Gd(()=>{let e=py(t);return gy(e),e})}function py(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||sa,exportAs:t.exportAs||null,standalone:t.standalone??!0,signals:t.signals===!0,selectors:t.selectors||Ki,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:rv(t.inputs,e),outputs:rv(t.outputs),debugInfo:null}}function gy(t){t.features?.forEach(e=>e(t))}function iv(t,e){if(!t)return null;let n=e?Tv:cx;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(dx)}function fx(t){let e=0,n=typeof t.consts=="function"?"":t.consts,r=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,n,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function kf(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function hx(t){return(t.flags&32)===32}function px(t,e,n,r,i,o,a,s,u){let l=e.consts,c=Uu(e,t,4,a||null,s||null);Gm(e,n,c,eo(l,u)),lf(e,c);let d=c.tView=xf(2,c,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,c),d.queries=e.queries.embeddedTView(c)),c}function Pd(t,e,n,r,i,o,a,s,u,l){let c=n+kn,d=e.firstCreatePass?px(c,e,t,r,i,o,a,s,u):e.data[c];Ea(d,!1);let f=gx(e,t,d,n);sf()&&Df(e,t,f,d),ii(f,t);let h=Km(f,t,f,d);return t[c]=h,qu(t,h),QS(h,d,t),Xd(d)&&zm(e,t,d),u!=null&&Um(t,d,l),d}function Of(t,e,n,r,i,o,a,s){let u=st(),l=fr(),c=eo(l.consts,o);return Pd(u,l,t,e,n,r,i,c,a,s),Of}var gx=vx;function vx(t,e,n,r){return uf(!0),e[ln].createComment("")}var Yu=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=Te({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();var vy=new Ne("");function Sa(t){return!!t&&typeof t.then=="function"}function my(t){return!!t&&typeof t.subscribe=="function"}var yy=new Ne("");var wy=(()=>{class t{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r});appInits=ue(yy,{optional:!0})??[];injector=ue(Tr);constructor(){}runInitializers(){if(this.initialized)return;let n=[];for(let i of this.appInits){let o=On(this.injector,i);if(Sa(o))n.push(o);else if(my(o)){let a=new Promise((s,u)=>{o.subscribe({complete:s,error:u})});n.push(a)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),n.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||t)};static \u0275prov=Te({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),mx=(()=>{class t{static \u0275prov=Te({token:t,providedIn:"root",factory:()=>new Ld})}return t})(),Ld=class{queuedEffectCount=0;queues=new Map;schedule(e){this.enqueue(e)}enqueue(e){let n=e.zone;this.queues.has(n)||this.queues.set(n,new Set);let r=this.queues.get(n);r.has(e)||(this.queuedEffectCount++,r.add(e))}flush(){for(;this.queuedEffectCount>0;)for(let[e,n]of this.queues)e===null?this.flushQueue(n):e.run(()=>this.flushQueue(n))}flushQueue(e){for(let n of e)e.delete(n),this.queuedEffectCount--,n.run()}},Pf=new Ne("");function yx(){Xp(()=>{throw new be(600,!1)})}function wx(t){return t.isBoundToModule}var bx=10;function Dx(t,e,n){try{let r=n();return Sa(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}var ui=(()=>{class t{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=ue(oI);afterRenderManager=ue(yI);zonelessEnabled=ue($u);rootEffectScheduler=ue(mx);dirtyFlags=0;deferredDirtyFlags=0;tracingSnapshot=null;externalTestViews=new Set;afterTick=new Mt;get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];isStable=ue(ao).hasPendingTasks.pipe(Pe(n=>!n));constructor(){ue(Tm,{optional:!0})}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{n.unsubscribe()})}_injector=ue(wn);_rendererFactory=null;get injector(){return this._injector}bootstrap(n,r){let i=n instanceof xu;if(!this._injector.get(wy).done){let f=!i&&Mv(n),h=!1;throw new be(405,h)}let a;i?a=n:a=this._injector.get(no).resolveComponentFactory(n),this.componentTypes.push(a.componentType);let s=wx(a)?void 0:this._injector.get(Ar),u=r||a.selector,l=a.create(Tr.NULL,[],u,s),c=l.location.nativeElement,d=l.injector.get(vy,null);return d?.registerApplication(c),l.onDestroy(()=>{this.detachView(l.hostView),cu(this.components,l),d?.unregisterApplication(c)}),this._loadComponent(l),l}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick=()=>{if(this.tracingSnapshot!==null){let r=this.tracingSnapshot;this.tracingSnapshot=null,r.run(xm.CHANGE_DETECTION,this._tick),r.dispose();return}if(this._runningTick)throw new be(101,!1);let n=Oe(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,Oe(n),this.afterTick.next()}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(ro,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let n=0;for(;this.dirtyFlags!==0&&n++<bx;)this.synchronizeOnce()}synchronizeOnce(){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush()),this.dirtyFlags&7){let n=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:r,notifyErrorHandler:i}of this.allViews)Ex(r,i,n,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}else this._rendererFactory?.begin?.(),this._rendererFactory?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>Fu(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;cu(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n),this._injector.get(Pf,[]).forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>cu(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new be(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static \u0275fac=function(r){return new(r||t)};static \u0275prov=Te({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function cu(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function Ex(t,e,n,r){if(!n&&!Fu(t))return;sy(t,e,n&&!r?0:1)}function Cx(t,e,n,r){return kf(t,nf(),n)?e+wv(n)+r:Ia}function ov(t,e,n,r,i){let o=e.inputs,a=i?"class":"style";ty(t,n,o[a],a,r)}var Fd=class{destroy(e){}updateValue(e,n){}swap(e,n){let r=Math.min(e,n),i=Math.max(e,n),o=this.detach(i);if(i-r>1){let a=this.detach(r);this.attach(r,o),this.attach(i,a)}else this.attach(r,o)}move(e,n){this.attach(n,this.detach(e))}};function Kc(t,e,n,r,i){return t===n&&Object.is(e,r)?1:Object.is(i(t,e),i(n,r))?-1:0}function Ix(t,e,n){let r,i,o=0,a=t.length-1,s=void 0;if(Array.isArray(e)){let u=e.length-1;for(;o<=a&&o<=u;){let l=t.at(o),c=e[o],d=Kc(o,l,o,c,n);if(d!==0){d<0&&t.updateValue(o,c),o++;continue}let f=t.at(a),h=e[u],p=Kc(a,f,u,h,n);if(p!==0){p<0&&t.updateValue(a,h),a--,u--;continue}let m=n(o,l),g=n(a,f),v=n(o,c);if(Object.is(v,g)){let y=n(u,h);Object.is(y,m)?(t.swap(o,a),t.updateValue(a,h),u--,a--):t.move(a,o),t.updateValue(o,c),o++;continue}if(r??=new Nu,i??=sv(t,o,a,n),Bd(t,r,o,v))t.updateValue(o,c),o++,a++;else if(i.has(v))r.set(m,t.detach(o)),a--;else{let y=t.create(o,e[o]);t.attach(o,y),o++,a++}}for(;o<=u;)av(t,r,n,o,e[o]),o++}else if(e!=null){let u=e[Symbol.iterator](),l=u.next();for(;!l.done&&o<=a;){let c=t.at(o),d=l.value,f=Kc(o,c,o,d,n);if(f!==0)f<0&&t.updateValue(o,d),o++,l=u.next();else{r??=new Nu,i??=sv(t,o,a,n);let h=n(o,d);if(Bd(t,r,o,h))t.updateValue(o,d),o++,a++,l=u.next();else if(!i.has(h))t.attach(o,t.create(o,d)),o++,a++,l=u.next();else{let p=n(o,c);r.set(p,t.detach(o)),a--}}}for(;!l.done;)av(t,r,n,t.length,l.value),l=u.next()}for(;o<=a;)t.destroy(t.detach(a--));r?.forEach(u=>{t.destroy(u)})}function Bd(t,e,n,r){return e!==void 0&&e.has(r)?(t.attach(n,e.get(r)),e.delete(r),!0):!1}function av(t,e,n,r,i){if(Bd(t,e,r,n(r,i)))t.updateValue(r,i);else{let o=t.create(r,i);t.attach(r,o)}}function sv(t,e,n,r){let i=new Set;for(let o=e;o<=n;o++)i.add(r(o,t.at(o)));return i}var Nu=class{kvMap=new Map;_vMap=void 0;has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let n=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(n)?(this.kvMap.set(e,this._vMap.get(n)),this._vMap.delete(n)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,n){if(this.kvMap.has(e)){let r=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,n)}else this.kvMap.set(e,n)}forEach(e){for(let[n,r]of this.kvMap)if(e(r,n),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,n)}}};function by(t,e){Ca("NgControlFlow");let n=st(),r=nf(),i=n[r]!==Ia?n[r]:-1,o=i!==-1?Au(n,kn+i):void 0,a=0;if(kf(n,r,t)){let s=Oe(null);try{if(o!==void 0&&ry(o,a),t!==-1){let u=kn+t,l=Au(n,u),c=Hd(n[xe],u),d=va(l,c.tView.ssrId),f=Gu(n,c,e,{dehydratedView:d});Wu(l,f,a,pa(c,d))}}finally{Oe(s)}}else if(o!==void 0){let s=ny(o,a);s!==void 0&&(s[Bt]=e)}}var Vd=class{lContainer;$implicit;$index;constructor(e,n,r){this.lContainer=e,this.$implicit=n,this.$index=r}get $count(){return this.lContainer.length-Vt}};function Dy(t){return t}var $d=class{hasEmptyBlock;trackByFn;liveCollection;constructor(e,n,r){this.hasEmptyBlock=e,this.trackByFn=n,this.liveCollection=r}};function Ey(t,e,n,r,i,o,a,s,u,l,c,d,f){Ca("NgControlFlow");let h=st(),p=fr(),m=u!==void 0,g=st(),v=s?a.bind(g[_n][Bt]):a,y=new $d(m,v);g[kn+t]=y,Pd(h,p,t+1,e,n,r,i,eo(p.consts,o)),m&&Pd(h,p,t+2,u,l,c,d,eo(p.consts,f))}var jd=class extends Fd{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(e,n,r){super(),this.lContainer=e,this.hostLView=n,this.templateTNode=r}get length(){return this.lContainer.length-Vt}at(e){return this.getLView(e)[Bt].$implicit}attach(e,n){let r=n[la];this.needsIndexUpdate||=e!==this.length,Wu(this.lContainer,n,e,pa(this.templateTNode,r))}detach(e){return this.needsIndexUpdate||=e!==this.length-1,Sx(this.lContainer,e)}create(e,n){let r=va(this.lContainer,this.templateTNode.tView.ssrId),i=Gu(this.hostLView,this.templateTNode,new Vd(this.lContainer,n,e),{dehydratedView:r});return this.operationsCounter?.recordCreate(),i}destroy(e){ju(e[xe],e),this.operationsCounter?.recordDestroy()}updateValue(e,n){this.getLView(e)[Bt].$implicit=n}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[Bt].$index=e}getLView(e){return xx(this.lContainer,e)}};function Cy(t){let e=Oe(null),n=Vu();try{let r=st(),i=r[xe],o=r[n],a=n+1,s=Au(r,a);if(o.liveCollection===void 0){let l=Hd(i,a);o.liveCollection=new jd(s,r,l)}else o.liveCollection.reset();let u=o.liveCollection;if(Ix(u,t,o.trackByFn),u.updateIndexes(),o.hasEmptyBlock){let l=nf(),c=u.length===0;if(kf(r,l,c)){let d=n+2,f=Au(r,d);if(c){let h=Hd(i,d),p=va(f,h.tView.ssrId),m=Gu(r,h,void 0,{dehydratedView:p});Wu(f,m,0,pa(h,p))}else ry(f,0)}}}finally{Oe(e)}}function Au(t,e){return t[e]}function Sx(t,e){return ha(t,e)}function xx(t,e){return ny(t,e)}function Hd(t,e){return Vv(t,e)}function Tx(t,e,n,r,i,o){let a=e.consts,s=eo(a,i),u=Uu(e,t,2,r,s);return Gm(e,n,u,eo(a,o)),u.attrs!==null&&Sd(u,u.attrs,!1),u.mergedAttrs!==null&&Sd(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function Rr(t,e,n,r){let i=st(),o=fr(),a=kn+t,s=i[ln],u=o.firstCreatePass?Tx(a,o,i,e,n,r):o.data[a],l=Mx(o,i,u,s,e,t);i[a]=l;let c=Xd(u);return Ea(u,!0),Lm(s,l,u),!hx(u)&&sf()&&Df(o,i,l,u),bC()===0&&ii(l,i),DC(),c&&(zm(o,i,u),Hm(o,u,i)),r!==null&&Um(i,u),Rr}function li(){let t=Ln();Uv()?TC():(t=t.parent,Ea(t,!1));let e=t;IC(e)&&SC(),EC();let n=fr();return n.firstCreatePass&&(lf(n,t),Ov(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&BC(e)&&ov(n,e,st(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&VC(e)&&ov(n,e,st(),e.stylesWithoutHost,!1),li}function xa(t,e,n,r){return Rr(t,e,n,r),li(),xa}var Mx=(t,e,n,r,i,o)=>(uf(!0),Nm(r,i,OC()));function Lf(){return st()}var Ru="en-US";var Nx=Ru;function Ax(t){typeof t=="string"&&(Nx=t.toLowerCase().replace(/_/g,"-"))}var Rx=(t,e,n)=>{};function ci(t,e,n,r){let i=st(),o=fr(),a=Ln();return kx(o,i,i[ln],a,t,e,r),ci}function _x(t,e,n,r){let i=t.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let a=i[o];if(a===n&&i[o+1]===r){let s=e[vu],u=i[o+2];return s.length>u?s[u]:null}typeof a=="string"&&(o+=2)}return null}function kx(t,e,n,r,i,o,a){let s=Xd(r),l=t.firstCreatePass&&Jm(t),c=e[Bt],d=Xm(e),f=!0;if(r.type&3||a){let m=Yn(r,e),g=a?a(m):m,v=d.length,y=a?b=>a(Wn(b[r.index])):r.index,w=null;if(!a&&s&&(w=_x(t,e,i,r.index)),w!==null){let b=w.__ngLastListenerFn__||w;b.__ngNextListenerFn__=o,w.__ngLastListenerFn__=o,f=!1}else{o=lv(r,e,c,o),Rx(m,i,o);let b=n.listen(g,i,o);d.push(o,b),l&&l.push(i,y,v,v+1)}}else o=lv(r,e,c,o);let h=r.outputs,p;if(f&&h!==null&&(p=h[i])){let m=p.length;if(m)for(let g=0;g<m;g+=2){let v=p[g],y=p[g+1],I=e[v][y].subscribe(o),E=d.length;d.push(o,I),l&&l.push(i,r.index,E,-(E+1))}}}function uv(t,e,n,r){let i=Oe(null);try{return qn(6,e,n),n(r)!==!1}catch(o){return ey(t,o),!1}finally{qn(7,e,n),Oe(i)}}function lv(t,e,n,r){return function i(o){if(o===Function)return r;let a=t.componentOffset>-1?oo(t.index,e):e;Mf(a,5);let s=uv(e,n,r,o),u=i.__ngNextListenerFn__;for(;u;)s=uv(e,n,u,o)&&s,u=u.__ngNextListenerFn__;return s}}function Ff(t=1){return kC(t)}function Iy(t,e,n){ox(t,e,n)}function Bf(t){let e=st(),n=fr(),r=Gv();rf(r+1);let i=Af(n,r);if(t.dirty&&vC(e)===((i.metadata.flags&2)===2)){if(i.matches===null)t.reset([]);else{let o=ux(e,r);t.reset(o,uI),t.notifyOnChanges()}return!0}return!1}function Vf(){return rx(st(),Gv())}function co(t,e=""){let n=st(),r=fr(),i=t+kn,o=r.firstCreatePass?Uu(r,i,1,e,null):r.data[i],a=Ox(r,n,o,e,t);n[i]=a,sf()&&Df(r,n,a,o),Ea(o,!1)}var Ox=(t,e,n,r,i)=>(uf(!0),DI(e[ln],r));function $f(t,e,n){let r=st(),i=Cx(r,t,e,n);return i!==Ia&&mS(r,Vu(),i),$f}var zd=class{ngModuleFactory;componentFactories;constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},jf=(()=>{class t{compileModuleSync(n){return new Od(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let r=this.compileModuleSync(n),i=Sv(n),o=Mm(i.declarations).reduce((a,s)=>{let u=Jr(s);return u&&a.push(new ma(u)),a},[]);return new zd(r,o)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static \u0275fac=function(r){return new(r||t)};static \u0275prov=Te({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var Px=(()=>{class t{zone=ue(yt);changeDetectionScheduler=ue(fa);applicationRef=ue(ui);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=Te({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Lx=new Ne("",{factory:()=>!1});function Sy({ngZoneFactory:t,ignoreChangesOutsideZone:e,scheduleInRootZone:n}){return t??=()=>new yt(at(fe({},Ty()),{scheduleInRootZone:n})),[{provide:yt,useFactory:t},{provide:Qi,multi:!0,useFactory:()=>{let r=ue(Px,{optional:!0});return()=>r.initialize()}},{provide:Qi,multi:!0,useFactory:()=>{let r=ue(Fx);return()=>{r.initialize()}}},e===!0?{provide:hm,useValue:!0}:[],{provide:pm,useValue:n??dm}]}function xy(t){let e=t?.ignoreChangesOutsideZone,n=t?.scheduleInRootZone,r=Sy({ngZoneFactory:()=>{let i=Ty(t);return i.scheduleInRootZone=n,i.shouldCoalesceEventChangeDetection&&Ca("NgZone_CoalesceEvent"),new yt(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:n});return Ou([{provide:Lx,useValue:!0},{provide:$u,useValue:!1},r])}function Ty(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var Fx=(()=>{class t{subscription=new ht;initialized=!1;zone=ue(yt);pendingTasks=ue(ao);initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{yt.assertNotInAngularZone(),queueMicrotask(()=>{n!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{yt.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=Te({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var Bx=(()=>{class t{appRef=ue(ui);taskService=ue(ao);ngZone=ue(yt);zonelessEnabled=ue($u);tracing=ue(Tm,{optional:!0});disableScheduling=ue(hm,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new ht;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Cu):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(ue(pm,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof gd||!this.zoneIsDefined)}notify(n){if(!this.zonelessEnabled&&n===5)return;let r=!1;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 8:{this.appRef.deferredDirtyFlags|=8;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 13:{this.appRef.dirtyFlags|=16,r=!0;break}case 14:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{r=!0;break}case 10:case 9:case 7:case 11:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?Ug:gm;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(n){return!(this.disableScheduling&&!n||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Cu+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(n),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,Ug(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static \u0275fac=function(r){return new(r||t)};static \u0275prov=Te({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Vx(){return typeof $localize<"u"&&$localize.locale||Ru}var Hf=new Ne("",{providedIn:"root",factory:()=>ue(Hf,_e.Optional|_e.SkipSelf)||Vx()});var Ud=new Ne("");function ou(t){return!t.moduleRef}function $x(t){let e=ou(t)?t.r3Injector:t.moduleRef.injector,n=e.get(yt);return n.run(()=>{ou(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();let r=e.get(Mr,null),i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:o=>{r.handleError(o)}})}),ou(t)){let o=()=>e.destroy(),a=t.platformInjector.get(Ud);a.add(o),e.onDestroy(()=>{i.unsubscribe(),a.delete(o)})}else{let o=()=>t.moduleRef.destroy(),a=t.platformInjector.get(Ud);a.add(o),t.moduleRef.onDestroy(()=>{cu(t.allPlatformModules,t.moduleRef),i.unsubscribe(),a.delete(o)})}return Dx(r,n,()=>{let o=e.get(wy);return o.runInitializers(),o.donePromise.then(()=>{let a=e.get(Hf,Ru);if(Ax(a||Ru),ou(t)){let s=e.get(ui);return t.rootComponent!==void 0&&s.bootstrap(t.rootComponent),s}else return jx(t.moduleRef,t.allPlatformModules),t.moduleRef})})})}function jx(t,e){let n=t.injector.get(ui);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(r=>n.bootstrap(r));else if(t.instance.ngDoBootstrap)t.instance.ngDoBootstrap(n);else throw new be(-403,!1);e.push(t)}var du=null;function Hx(t=[],e){return Tr.create({name:e,providers:[{provide:Pu,useValue:"platform"},{provide:Ud,useValue:new Set([()=>du=null])},...t]})}function zx(t=[]){if(du)return du;let e=Hx(t);return du=e,yx(),Ux(e),e}function Ux(t){let e=t.get(vf,null);On(t,()=>{e?.forEach(n=>n())})}var Ta=(()=>{class t{static __NG_ELEMENT_ID__=qx}return t})();function qx(t){return Gx(Ln(),st(),(t&16)===16)}function Gx(t,e,n){if(Qd(t)&&!n){let r=oo(t.index,e);return new oi(r,r)}else if(t.type&175){let r=e[_n];return new oi(r,e)}return null}function My(t){try{let{rootComponent:e,appProviders:n,platformProviders:r}=t,i=zx(r),o=[Sy({}),{provide:fa,useExisting:Bx},...n||[]],a=new Mu({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1});return $x({r3Injector:a.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}}var cv=class{[_i];constructor(e){this[_i]=e}destroy(){this[_i].destroy()}};var Py=null;function fo(){return Py}function Ly(t){Py??=t}var Qu=class{};var bn=new Ne(""),Fy=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=Te({token:t,factory:()=>ue(Qx),providedIn:"platform"})}return t})();var Qx=(()=>{class t extends Fy{_location;_history;_doc=ue(bn);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return fo().getBaseHref(this._doc)}onPopState(n){let r=fo().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){let r=fo().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||t)};static \u0275prov=Te({token:t,factory:()=>new t,providedIn:"platform"})}return t})();function By(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function Ny(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,r=n-(t[n-1]==="/"?1:0);return t.slice(0,r)+t.slice(n)}function di(t){return t&&t[0]!=="?"?"?"+t:t}var Ju=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=Te({token:t,factory:()=>ue(Vy),providedIn:"root"})}return t})(),Xx=new Ne(""),Vy=(()=>{class t extends Ju{_platformLocation;_baseHref;_removeListenerFns=[];constructor(n,r){super(),this._platformLocation=n,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??ue(bn).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return By(this._baseHref,n)}path(n=!1){let r=this._platformLocation.pathname+di(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,o){let a=this.prepareExternalUrl(i+di(o));this._platformLocation.pushState(n,r,a)}replaceState(n,r,i,o){let a=this.prepareExternalUrl(i+di(o));this._platformLocation.replaceState(n,r,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static \u0275fac=function(r){return new(r||t)(Le(Fy),Le(Xx,8))};static \u0275prov=Te({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var Ma=(()=>{class t{_subject=new Mt;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(n){this._locationStrategy=n;let r=this._locationStrategy.getBaseHref();this._basePath=tT(Ny(Ay(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+di(r))}normalize(n){return t.stripTrailingSlash(eT(this._basePath,Ay(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+di(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+di(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=di;static joinWithSlash=By;static stripTrailingSlash=Ny;static \u0275fac=function(r){return new(r||t)(Le(Ju))};static \u0275prov=Te({token:t,factory:()=>Jx(),providedIn:"root"})}return t})();function Jx(){return new Ma(Le(Ju))}function eT(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function Ay(t){return t.replace(/\/index.html$/,"")}function tT(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}function $y(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var jy="browser",nT="server";function zf(t){return t===nT}var Xu=class{};var qf=class extends Qu{supportsDOMEvents=!0},Gf=class t extends qf{static makeCurrent(){Ly(new t)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.remove()}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=iT();return n==null?null:oT(n)}resetBaseElement(){Na=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return $y(document.cookie,e)}},Na=null;function iT(){return Na=Na||document.querySelector("base"),Na?Na.getAttribute("href"):null}function oT(t){return new URL(t,document.baseURI).pathname}var aT=(()=>{class t{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||t)};static \u0275prov=Te({token:t,factory:t.\u0275fac})}return t})(),Wf=new Ne(""),Wy=(()=>{class t{_zone;_plugins;_eventNameToPlugin=new Map;constructor(n,r){this._zone=r,n.forEach(i=>{i.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,i){return this._findPluginFor(r).addEventListener(n,r,i)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(o=>o.supports(n)),!r)throw new be(5101,!1);return this._eventNameToPlugin.set(n,r),r}static \u0275fac=function(r){return new(r||t)(Le(Wf),Le(yt))};static \u0275prov=Te({token:t,factory:t.\u0275fac})}return t})(),el=class{_doc;constructor(e){this._doc=e}manager},Zf="ng-app-id";function Hy(t){for(let e of t)e.remove()}function zy(t,e){let n=e.createElement("style");return n.textContent=t,n}function sT(t,e,n){let r=t.head?.querySelectorAll(`style[${Zf}="${e}"]`);if(r)for(let i of r)i.textContent&&(i.removeAttribute(Zf),n.set(i.textContent,{usage:0,elements:[i]}))}function Yf(t,e){let n=e.createElement("link");return n.setAttribute("rel","stylesheet"),n.setAttribute("href",t),n}var Zy=(()=>{class t{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(n,r,i,o={}){this.doc=n,this.appId=r,this.nonce=i,this.isServer=zf(o),sT(n,r,this.inline),this.hosts.add(n.head)}addStyles(n,r){for(let i of n)this.addUsage(i,this.inline,zy);r?.forEach(i=>this.addUsage(i,this.external,Yf))}removeStyles(n,r){for(let i of n)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(n,r,i){let o=r.get(n);o?o.usage++:r.set(n,{usage:1,elements:[...this.hosts].map(a=>this.addElement(a,i(n,this.doc)))})}removeUsage(n,r){let i=r.get(n);i&&(i.usage--,i.usage<=0&&(Hy(i.elements),r.delete(n)))}ngOnDestroy(){for(let[,{elements:n}]of[...this.inline,...this.external])Hy(n);this.hosts.clear()}addHost(n){this.hosts.add(n);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(n,zy(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(n,Yf(r,this.doc)))}removeHost(n){this.hosts.delete(n)}addElement(n,r){return this.nonce&&r.setAttribute("nonce",this.nonce),this.isServer&&r.setAttribute(Zf,this.appId),n.appendChild(r)}static \u0275fac=function(r){return new(r||t)(Le(bn),Le(gf),Le(mf,8),Le(uo))};static \u0275prov=Te({token:t,factory:t.\u0275fac})}return t})(),Uf={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Qf=/%COMP%/g,Yy="%COMP%",uT=`_nghost-${Yy}`,lT=`_ngcontent-${Yy}`,cT=!0,dT=new Ne("",{providedIn:"root",factory:()=>cT});function fT(t){return lT.replace(Qf,t)}function hT(t){return uT.replace(Qf,t)}function Ky(t,e){return e.map(n=>n.replace(Qf,t))}var Uy=(()=>{class t{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(n,r,i,o,a,s,u,l=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=a,this.platformId=s,this.ngZone=u,this.nonce=l,this.platformIsServer=zf(s),this.defaultRenderer=new Aa(n,a,u,this.platformIsServer)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Zn.ShadowDom&&(r=at(fe({},r),{encapsulation:Zn.Emulated}));let i=this.getOrCreateRenderer(n,r);return i instanceof tl?i.applyToHost(n):i instanceof Ra&&i.applyStyles(),i}getOrCreateRenderer(n,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let a=this.doc,s=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,c=this.removeStylesOnCompDestroy,d=this.platformIsServer;switch(r.encapsulation){case Zn.Emulated:o=new tl(u,l,r,this.appId,c,a,s,d);break;case Zn.ShadowDom:return new Kf(u,l,n,r,a,s,this.nonce,d);default:o=new Ra(u,l,r,c,a,s,d);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static \u0275fac=function(r){return new(r||t)(Le(Wy),Le(Zy),Le(gf),Le(dT),Le(bn),Le(uo),Le(yt),Le(mf))};static \u0275prov=Te({token:t,factory:t.\u0275fac})}return t})(),Aa=class{eventManager;doc;ngZone;platformIsServer;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i}destroy(){}destroyNode=null;createElement(e,n){return n?this.doc.createElementNS(Uf[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(qy(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(qy(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){n.remove()}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new be(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let o=Uf[i];o?e.setAttributeNS(o,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=Uf[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(si.DashCase|si.Important)?e.style.setProperty(n,r,i&si.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&si.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if(typeof e=="string"&&(e=fo().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function qy(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var Kf=class extends Aa{sharedStylesHost;hostEl;shadowRoot;constructor(e,n,r,i,o,a,s,u){super(e,o,a,u),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=Ky(i.id,i.styles);for(let d of l){let f=document.createElement("style");s&&f.setAttribute("nonce",s),f.textContent=d,this.shadowRoot.appendChild(f)}let c=i.getExternalStyles?.();if(c)for(let d of c){let f=Yf(d,o);s&&f.setAttribute("nonce",s),this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(null,n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Ra=class extends Aa{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,n,r,i,o,a,s,u){super(e,o,a,s),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=u?Ky(u,r.styles):r.styles,this.styleUrls=r.getExternalStyles?.(u)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},tl=class extends Ra{contentAttr;hostAttr;constructor(e,n,r,i,o,a,s,u){let l=i+"-"+r.id;super(e,n,r,o,a,s,u,l),this.contentAttr=fT(l),this.hostAttr=hT(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}},pT=(()=>{class t extends el{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i){return n.addEventListener(r,i,!1),()=>this.removeEventListener(n,r,i)}removeEventListener(n,r,i){return n.removeEventListener(r,i)}static \u0275fac=function(r){return new(r||t)(Le(bn))};static \u0275prov=Te({token:t,factory:t.\u0275fac})}return t})(),Gy=["alt","control","meta","shift"],gT={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},vT={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},mT=(()=>{class t extends el{constructor(n){super(n)}supports(n){return t.parseEventName(n)!=null}addEventListener(n,r,i){let o=t.parseEventName(r),a=t.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>fo().onAndCancel(n,o.domEventName,a))}static parseEventName(n){let r=n.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=t._normalizeKey(r.pop()),a="",s=r.indexOf("code");if(s>-1&&(r.splice(s,1),a="code."),Gy.forEach(l=>{let c=r.indexOf(l);c>-1&&(r.splice(c,1),a+=l+".")}),a+=o,r.length!=0||o.length===0)return null;let u={};return u.domEventName=i,u.fullKey=a,u}static matchEventFullKeyCode(n,r){let i=gT[n.key]||n.key,o="";return r.indexOf("code.")>-1&&(i=n.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),Gy.forEach(a=>{if(a!==i){let s=vT[a];s(n)&&(o+=a+".")}}),o+=i,o===r)}static eventCallback(n,r,i){return o=>{t.matchEventFullKeyCode(o,n)&&i.runGuarded(()=>r(o))}}static _normalizeKey(n){return n==="esc"?"escape":n}static \u0275fac=function(r){return new(r||t)(Le(bn))};static \u0275prov=Te({token:t,factory:t.\u0275fac})}return t})();function Qy(t,e){return My(fe({rootComponent:t},yT(e)))}function yT(t){return{appProviders:[...CT,...t?.providers??[]],platformProviders:ET}}function wT(){Gf.makeCurrent()}function bT(){return new Mr}function DT(){return Im(document),document}var ET=[{provide:uo,useValue:jy},{provide:vf,useValue:wT,multi:!0},{provide:bn,useFactory:DT,deps:[]}];var CT=[{provide:Pu,useValue:"root"},{provide:Mr,useFactory:bT,deps:[]},{provide:Wf,useClass:pT,multi:!0,deps:[bn,yt,uo]},{provide:Wf,useClass:mT,multi:!0,deps:[bn]},Uy,Zy,Wy,{provide:ro,useExisting:Uy},{provide:Xu,useClass:aT,deps:[]},[]];var Xy=(()=>{class t{_doc;constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static \u0275fac=function(r){return new(r||t)(Le(bn))};static \u0275prov=Te({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var Ae="primary",Za=Symbol("RouteTitle"),nh=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function yo(t){return new nh(t)}function ST(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let o=0;o<r.length;o++){let a=r[o],s=t[o];if(a[0]===":")i[a.substring(1)]=s;else if(a!==s.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function xT(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Kn(t[n],e[n]))return!1;return!0}function Kn(t,e){let n=t?rh(t):void 0,r=e?rh(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!a0(t[i],e[i]))return!1;return!0}function rh(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function a0(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,o)=>r[o]===i)}else return t===e}function s0(t){return t.length>0?t[t.length-1]:null}function _r(t){return Lc(t)?t:Sa(t)?vt(Promise.resolve(t)):Me(t)}var TT={exact:l0,subset:c0},u0={exact:MT,subset:NT,ignored:()=>!0};function Jy(t,e,n){return TT[n.paths](t.root,e.root,n.matrixParams)&&u0[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function MT(t,e){return Kn(t,e)}function l0(t,e,n){if(!hi(t.segments,e.segments)||!il(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!l0(t.children[r],e.children[r],n))return!1;return!0}function NT(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>a0(t[n],e[n]))}function c0(t,e,n){return d0(t,e,e.segments,n)}function d0(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!hi(i,n)||e.hasChildren()||!il(i,n,r))}else if(t.segments.length===n.length){if(!hi(t.segments,n)||!il(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!c0(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!hi(t.segments,i)||!il(t.segments,i,r)||!t.children[Ae]?!1:d0(t.children[Ae],e,o,r)}}function il(t,e,n){return e.every((r,i)=>u0[n](t[i].parameters,r.parameters))}var pr=class{root;queryParams;fragment;_queryParamMap;constructor(e=new Ge([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=yo(this.queryParams),this._queryParamMap}toString(){return _T.serialize(this)}},Ge=class{segments;children;parent=null;constructor(e,n){this.segments=e,this.children=n,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ol(this)}},fi=class{path;parameters;_parameterMap;constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=yo(this.parameters),this._parameterMap}toString(){return h0(this)}};function AT(t,e){return hi(t,e)&&t.every((n,r)=>Kn(n.parameters,e[r].parameters))}function hi(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function RT(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===Ae&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==Ae&&(n=n.concat(e(i,r)))}),n}var Nh=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=Te({token:t,factory:()=>new Ba,providedIn:"root"})}return t})(),Ba=class{parse(e){let n=new oh(e);return new pr(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${_a(e.root,!0)}`,r=PT(e.queryParams),i=typeof e.fragment=="string"?`#${kT(e.fragment)}`:"";return`${n}${r}${i}`}},_T=new Ba;function ol(t){return t.segments.map(e=>h0(e)).join("/")}function _a(t,e){if(!t.hasChildren())return ol(t);if(e){let n=t.children[Ae]?_a(t.children[Ae],!1):"",r=[];return Object.entries(t.children).forEach(([i,o])=>{i!==Ae&&r.push(`${i}:${_a(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=RT(t,(r,i)=>i===Ae?[_a(t.children[Ae],!1)]:[`${i}:${_a(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[Ae]!=null?`${ol(t)}/${n[0]}`:`${ol(t)}/(${n.join("//")})`}}function f0(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function nl(t){return f0(t).replace(/%3B/gi,";")}function kT(t){return encodeURI(t)}function ih(t){return f0(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function al(t){return decodeURIComponent(t)}function e0(t){return al(t.replace(/\+/g,"%20"))}function h0(t){return`${ih(t.path)}${OT(t.parameters)}`}function OT(t){return Object.entries(t).map(([e,n])=>`;${ih(e)}=${ih(n)}`).join("")}function PT(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${nl(n)}=${nl(i)}`).join("&"):`${nl(n)}=${nl(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var LT=/^[^\/()?;#]+/;function Xf(t){let e=t.match(LT);return e?e[0]:""}var FT=/^[^\/()?;=#]+/;function BT(t){let e=t.match(FT);return e?e[0]:""}var VT=/^[^=?&#]+/;function $T(t){let e=t.match(VT);return e?e[0]:""}var jT=/^[^&#]+/;function HT(t){let e=t.match(jT);return e?e[0]:""}var oh=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ge([],{}):new Ge([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[Ae]=new Ge(e,n)),r}parseSegment(){let e=Xf(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new be(4009,!1);return this.capture(e),new fi(al(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=BT(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=Xf(this.remaining);i&&(r=i,this.capture(r))}e[al(n)]=al(r)}parseQueryParam(e){let n=$T(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let a=HT(this.remaining);a&&(r=a,this.capture(r))}let i=e0(n),o=e0(r);if(e.hasOwnProperty(i)){let a=e[i];Array.isArray(a)||(a=[a],e[i]=a),a.push(o)}else e[i]=o}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Xf(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new be(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=Ae);let a=this.parseChildren();n[o]=Object.keys(a).length===1?a[Ae]:new Ge([],a),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new be(4011,!1)}};function p0(t){return t.segments.length>0?new Ge([],{[Ae]:t}):t}function g0(t){let e={};for(let[r,i]of Object.entries(t.children)){let o=g0(i);if(r===Ae&&o.segments.length===0&&o.hasChildren())for(let[a,s]of Object.entries(o.children))e[a]=s;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let n=new Ge(t.segments,e);return zT(n)}function zT(t){if(t.numberOfChildren===1&&t.children[Ae]){let e=t.children[Ae];return new Ge(t.segments.concat(e.segments),e.children)}return t}function Va(t){return t instanceof pr}function UT(t,e,n=null,r=null){let i=v0(t);return m0(i,e,n,r)}function v0(t){let e;function n(o){let a={};for(let u of o.children){let l=n(u);a[u.outlet]=l}let s=new Ge(o.url,a);return o===t&&(e=s),s}let r=n(t.root),i=p0(r);return e??i}function m0(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return Jf(i,i,i,n,r);let o=qT(e);if(o.toRoot())return Jf(i,i,new Ge([],{}),n,r);let a=GT(o,i,t),s=a.processChildren?Pa(a.segmentGroup,a.index,o.commands):w0(a.segmentGroup,a.index,o.commands);return Jf(i,a.segmentGroup,s,n,r)}function sl(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function $a(t){return typeof t=="object"&&t!=null&&t.outlets}function Jf(t,e,n,r,i){let o={};r&&Object.entries(r).forEach(([u,l])=>{o[u]=Array.isArray(l)?l.map(c=>`${c}`):`${l}`});let a;t===e?a=n:a=y0(t,e,n);let s=p0(g0(a));return new pr(s,o,i)}function y0(t,e,n){let r={};return Object.entries(t.children).forEach(([i,o])=>{o===e?r[i]=n:r[i]=y0(o,e,n)}),new Ge(t.segments,r)}var ul=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&sl(r[0]))throw new be(4003,!1);let i=r.find($a);if(i&&i!==s0(r))throw new be(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function qT(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new ul(!0,0,t);let e=0,n=!1,r=t.reduce((i,o,a)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let s={};return Object.entries(o.outlets).forEach(([u,l])=>{s[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:s}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:a===0?(o.split("/").forEach((s,u)=>{u==0&&s==="."||(u==0&&s===""?n=!0:s===".."?e++:s!=""&&i.push(s))}),i):[...i,o]},[]);return new ul(n,e,r)}var go=class{segmentGroup;processChildren;index;constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function GT(t,e,n){if(t.isAbsolute)return new go(e,!0,0);if(!n)return new go(e,!1,NaN);if(n.parent===null)return new go(n,!0,0);let r=sl(t.commands[0])?0:1,i=n.segments.length-1+r;return WT(n,i,t.numberOfDoubleDots)}function WT(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new be(4005,!1);i=r.segments.length}return new go(r,!1,i-o)}function ZT(t){return $a(t[0])?t[0].outlets:{[Ae]:t}}function w0(t,e,n){if(t??=new Ge([],{}),t.segments.length===0&&t.hasChildren())return Pa(t,e,n);let r=YT(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let o=new Ge(t.segments.slice(0,r.pathIndex),{});return o.children[Ae]=new Ge(t.segments.slice(r.pathIndex),t.children),Pa(o,0,i)}else return r.match&&i.length===0?new Ge(t.segments,{}):r.match&&!t.hasChildren()?ah(t,e,n):r.match?Pa(t,0,i):ah(t,e,n)}function Pa(t,e,n){if(n.length===0)return new Ge(t.segments,{});{let r=ZT(n),i={};if(Object.keys(r).some(o=>o!==Ae)&&t.children[Ae]&&t.numberOfChildren===1&&t.children[Ae].segments.length===0){let o=Pa(t.children[Ae],e,n);return new Ge(t.segments,o.children)}return Object.entries(r).forEach(([o,a])=>{typeof a=="string"&&(a=[a]),a!==null&&(i[o]=w0(t.children[o],e,a))}),Object.entries(t.children).forEach(([o,a])=>{r[o]===void 0&&(i[o]=a)}),new Ge(t.segments,i)}}function YT(t,e,n){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;let a=t.segments[i],s=n[r];if($a(s))break;let u=`${s}`,l=r<n.length-1?n[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!n0(u,l,a))return o;r+=2}else{if(!n0(u,{},a))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function ah(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let o=n[i];if($a(o)){let u=KT(o.outlets);return new Ge(r,u)}if(i===0&&sl(n[0])){let u=t.segments[e];r.push(new fi(u.path,t0(n[0]))),i++;continue}let a=$a(o)?o.outlets[Ae]:`${o}`,s=i<n.length-1?n[i+1]:null;a&&s&&sl(s)?(r.push(new fi(a,t0(s))),i+=2):(r.push(new fi(a,{})),i++)}return new Ge(r,{})}function KT(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=ah(new Ge([],{}),0,r))}),e}function t0(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function n0(t,e,n){return t==n.path&&Kn(e,n.parameters)}var La="imperative",Rt=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(Rt||{}),Dn=class{id;url;constructor(e,n){this.id=e,this.url=n}},ja=class extends Dn{type=Rt.NavigationStart;navigationTrigger;restoredState;constructor(e,n,r="imperative",i=null){super(e,n),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},pi=class extends Dn{urlAfterRedirects;type=Rt.NavigationEnd;constructor(e,n,r){super(e,n),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},dn=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(dn||{}),sh=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(sh||{}),hr=class extends Dn{reason;code;type=Rt.NavigationCancel;constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},gi=class extends Dn{reason;code;type=Rt.NavigationSkipped;constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i}},Ha=class extends Dn{error;target;type=Rt.NavigationError;constructor(e,n,r,i){super(e,n),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},ll=class extends Dn{urlAfterRedirects;state;type=Rt.RoutesRecognized;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},uh=class extends Dn{urlAfterRedirects;state;type=Rt.GuardsCheckStart;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},lh=class extends Dn{urlAfterRedirects;state;shouldActivate;type=Rt.GuardsCheckEnd;constructor(e,n,r,i,o){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},ch=class extends Dn{urlAfterRedirects;state;type=Rt.ResolveStart;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},dh=class extends Dn{urlAfterRedirects;state;type=Rt.ResolveEnd;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},fh=class{route;type=Rt.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},hh=class{route;type=Rt.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},ph=class{snapshot;type=Rt.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},gh=class{snapshot;type=Rt.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},vh=class{snapshot;type=Rt.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},mh=class{snapshot;type=Rt.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var za=class{},wo=class{url;navigationBehaviorOptions;constructor(e,n){this.url=e,this.navigationBehaviorOptions=n}};function QT(t,e){return t.providers&&!t._injector&&(t._injector=Rf(t.providers,e,`Route: ${t.path}`)),t._injector??e}function Fn(t){return t.outlet||Ae}function XT(t,e){let n=t.filter(r=>Fn(r)===e);return n.push(...t.filter(r=>Fn(r)!==e)),n}function Ya(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var yh=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Ya(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new vl(this.rootInjector)}},vl=(()=>{class t{rootInjector;contexts=new Map;constructor(n){this.rootInjector=n}onChildOutletCreated(n,r){let i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){let r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new yh(this.rootInjector),this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static \u0275fac=function(r){return new(r||t)(Le(wn))};static \u0275prov=Te({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),cl=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=wh(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=wh(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=bh(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return bh(e,this._root).map(n=>n.value)}};function wh(t,e){if(t===e.value)return e;for(let n of e.children){let r=wh(t,n);if(r)return r}return null}function bh(t,e){if(t===e.value)return[e];for(let n of e.children){let r=bh(t,n);if(r.length)return r.unshift(e),r}return[]}var cn=class{value;children;constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function po(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var dl=class extends cl{snapshot;constructor(e,n){super(e),this.snapshot=n,Ah(this,e)}toString(){return this.snapshot.toString()}};function b0(t){let e=JT(t),n=new Nt([new fi("",{})]),r=new Nt({}),i=new Nt({}),o=new Nt({}),a=new Nt(""),s=new bo(n,r,o,a,i,Ae,t,e.root);return s.snapshot=e.root,new dl(new cn(s,[]),e)}function JT(t){let e={},n={},r={},i="",o=new vo([],e,r,i,n,Ae,t,null,{});return new hl("",new cn(o,[]))}var bo=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,n,r,i,o,a,s,u){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=a,this.component=s,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(Pe(l=>l[Za]))??Me(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Pe(e=>yo(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Pe(e=>yo(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function fl(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:fe(fe({},e.params),t.params),data:fe(fe({},e.data),t.data),resolve:fe(fe(fe(fe({},t.data),e.data),i?.data),t._resolvedData)}:r={params:fe({},t.params),data:fe({},t.data),resolve:fe(fe({},t.data),t._resolvedData??{})},i&&E0(i)&&(r.resolve[Za]=i.title),r}var vo=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Za]}constructor(e,n,r,i,o,a,s,u,l){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=a,this.component=s,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=yo(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=yo(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},hl=class extends cl{url;constructor(e,n){super(n),this.url=e,Ah(this,n)}toString(){return D0(this._root)}};function Ah(t,e){e.value._routerState=t,e.children.forEach(n=>Ah(t,n))}function D0(t){let e=t.children.length>0?` { ${t.children.map(D0).join(", ")} } `:"";return`${t.value}${e}`}function eh(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Kn(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),Kn(e.params,n.params)||t.paramsSubject.next(n.params),xT(e.url,n.url)||t.urlSubject.next(n.url),Kn(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function Dh(t,e){let n=Kn(t.params,e.params)&&AT(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||Dh(t.parent,e.parent))}function E0(t){return typeof t.title=="string"||t.title===null}var eM=new Ne(""),tM=(()=>{class t{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=Ae;activateEvents=new an;deactivateEvents=new an;attachEvents=new an;detachEvents=new an;routerOutletData=mm(void 0);parentContexts=ue(vl);location=ue(lo);changeDetector=ue(Ta);inputBinder=ue(Rh,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(n){if(n.name){let{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new be(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new be(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new be(4012,!1);this.location.detach();let n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){let n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new be(4013,!1);this._activatedRoute=n;let i=this.location,a=n.snapshot.component,s=this.parentContexts.getOrCreateContext(this.name).children,u=new Eh(n,s,i.injector,this.routerOutletData);this.activated=i.createComponent(a,{index:i.length,injector:u,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||t)};static \u0275dir=_f({type:t,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Jd]})}return t})(),Eh=class t{route;childContexts;parent;outletData;__ngOutletInjector(e){return new t(this.route,this.childContexts,e,this.outletData)}constructor(e,n,r,i){this.route=e,this.childContexts=n,this.parent=r,this.outletData=i}get(e,n){return e===bo?this.route:e===vl?this.childContexts:e===eM?this.outletData:this.parent.get(e,n)}},Rh=new Ne("");function nM(t,e,n){let r=Ua(t,e._root,n?n._root:void 0);return new dl(r,e)}function Ua(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=rM(t,e,n);return new cn(r,i)}else{if(t.shouldAttach(e.value)){let o=t.retrieve(e.value);if(o!==null){let a=o.route;return a.value._futureSnapshot=e.value,a.children=e.children.map(s=>Ua(t,s)),a}}let r=iM(e.value),i=e.children.map(o=>Ua(t,o));return new cn(r,i)}}function rM(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return Ua(t,r,i);return Ua(t,r)})}function iM(t){return new bo(new Nt(t.url),new Nt(t.params),new Nt(t.queryParams),new Nt(t.fragment),new Nt(t.data),t.outlet,t.component,t)}var qa=class{redirectTo;navigationBehaviorOptions;constructor(e,n){this.redirectTo=e,this.navigationBehaviorOptions=n}},C0="ngNavigationCancelingError";function pl(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=Va(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=I0(!1,dn.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function I0(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[C0]=!0,n.cancellationCode=e,n}function oM(t){return S0(t)&&Va(t.url)}function S0(t){return!!t&&t[C0]}var aM=(t,e,n,r)=>Pe(i=>(new Ch(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),Ch=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,n,r,i,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),eh(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=po(n);e.children.forEach(o=>{let a=o.value.outlet;this.deactivateRoutes(o,i[a],r),delete i[a]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(i===o)if(i.component){let a=r.getContext(i.outlet);a&&this.deactivateChildRoutes(e,n,a.children)}else this.deactivateChildRoutes(e,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=po(e);for(let a of Object.values(o))this.deactivateRouteAndItsChildren(a,i);if(r&&r.outlet){let a=r.outlet.detach(),s=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:a,route:e,contexts:s})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=po(e);for(let a of Object.values(o))this.deactivateRouteAndItsChildren(a,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=po(n);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new mh(o.value.snapshot))}),e.children.length&&this.forwardEvent(new gh(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(eh(i),i===o)if(i.component){let a=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,a.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let a=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let s=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),a.children.onOutletReAttached(s.contexts),a.attachRef=s.componentRef,a.route=s.route.value,a.outlet&&a.outlet.attach(s.componentRef,s.route.value),eh(s.route.value),this.activateChildRoutes(e,null,a.children)}else a.attachRef=null,a.route=i,a.outlet&&a.outlet.activateWith(i,a.injector),this.activateChildRoutes(e,null,a.children)}else this.activateChildRoutes(e,null,r)}},gl=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},mo=class{component;route;constructor(e,n){this.component=e,this.route=n}};function sM(t,e,n){let r=t._root,i=e?e._root:null;return ka(r,i,n,[r.value])}function uM(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function Eo(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!gv(t)?t:e.get(t):r}function ka(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=po(e);return t.children.forEach(a=>{lM(a,o[a.value.outlet],n,r.concat([a.value]),i),delete o[a.value.outlet]}),Object.entries(o).forEach(([a,s])=>Fa(s,n.getContext(a),i)),i}function lM(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=t.value,a=e?e.value:null,s=n?n.getContext(t.value.outlet):null;if(a&&o.routeConfig===a.routeConfig){let u=cM(a,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new gl(r)):(o.data=a.data,o._resolvedData=a._resolvedData),o.component?ka(t,e,s?s.children:null,r,i):ka(t,e,n,r,i),u&&s&&s.outlet&&s.outlet.isActivated&&i.canDeactivateChecks.push(new mo(s.outlet.component,a))}else a&&Fa(e,s,i),i.canActivateChecks.push(new gl(r)),o.component?ka(t,null,s?s.children:null,r,i):ka(t,null,n,r,i);return i}function cM(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!hi(t.url,e.url);case"pathParamsOrQueryParamsChange":return!hi(t.url,e.url)||!Kn(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Dh(t,e)||!Kn(t.queryParams,e.queryParams);case"paramsChange":default:return!Dh(t,e)}}function Fa(t,e,n){let r=po(t),i=t.value;Object.entries(r).forEach(([o,a])=>{i.component?e?Fa(a,e.children.getContext(o),n):Fa(a,null,n):Fa(a,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new mo(e.outlet.component,i)):n.canDeactivateChecks.push(new mo(null,i)):n.canDeactivateChecks.push(new mo(null,i))}function Ka(t){return typeof t=="function"}function dM(t){return typeof t=="boolean"}function fM(t){return t&&Ka(t.canLoad)}function hM(t){return t&&Ka(t.canActivate)}function pM(t){return t&&Ka(t.canActivateChild)}function gM(t){return t&&Ka(t.canDeactivate)}function vM(t){return t&&Ka(t.canMatch)}function x0(t){return t instanceof ar||t?.name==="EmptyError"}var rl=Symbol("INITIAL_VALUE");function Do(){return Nn(t=>nu(t.map(e=>e.pipe(sr(1),jc(rl)))).pipe(Pe(e=>{for(let n of e)if(n!==!0){if(n===rl)return rl;if(n===!1||mM(n))return n}return!0}),Mn(e=>e!==rl),sr(1)))}function mM(t){return Va(t)||t instanceof qa}function yM(t,e){return mt(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:a}}=n;return a.length===0&&o.length===0?Me(at(fe({},n),{guardsResult:!0})):wM(a,r,i,t).pipe(mt(s=>s&&dM(s)?bM(r,o,t,e):Me(s)),Pe(s=>at(fe({},n),{guardsResult:s})))})}function wM(t,e,n,r){return vt(t).pipe(mt(i=>SM(i.component,i.route,n,e,r)),ur(i=>i!==!0,!0))}function bM(t,e,n,r){return vt(e).pipe(Hi(i=>ji(EM(i.route.parent,r),DM(i.route,r),IM(t,i.path,n),CM(t,i.route,n))),ur(i=>i!==!0,!0))}function DM(t,e){return t!==null&&e&&e(new vh(t)),Me(!0)}function EM(t,e){return t!==null&&e&&e(new ph(t)),Me(!0)}function CM(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return Me(!0);let i=r.map(o=>ru(()=>{let a=Ya(e)??n,s=Eo(o,a),u=hM(s)?s.canActivate(e,t):On(a,()=>s(e,t));return _r(u).pipe(ur())}));return Me(i).pipe(Do())}function IM(t,e,n){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(a=>uM(a)).filter(a=>a!==null).map(a=>ru(()=>{let s=a.guards.map(u=>{let l=Ya(a.node)??n,c=Eo(u,l),d=pM(c)?c.canActivateChild(r,t):On(l,()=>c(r,t));return _r(d).pipe(ur())});return Me(s).pipe(Do())}));return Me(o).pipe(Do())}function SM(t,e,n,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return Me(!0);let a=o.map(s=>{let u=Ya(e)??i,l=Eo(s,u),c=gM(l)?l.canDeactivate(t,e,n,r):On(u,()=>l(t,e,n,r));return _r(c).pipe(ur())});return Me(a).pipe(Do())}function xM(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return Me(!0);let o=i.map(a=>{let s=Eo(a,t),u=fM(s)?s.canLoad(e,n):On(t,()=>s(e,n));return _r(u)});return Me(o).pipe(Do(),T0(r))}function T0(t){return _c(At(e=>{if(typeof e!="boolean")throw pl(t,e)}),Pe(e=>e===!0))}function TM(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return Me(!0);let o=i.map(a=>{let s=Eo(a,t),u=vM(s)?s.canMatch(e,n):On(t,()=>s(e,n));return _r(u)});return Me(o).pipe(Do(),T0(r))}var Ga=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},Wa=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function ho(t){return $i(new Ga(t))}function MM(t){return $i(new be(4e3,!1))}function NM(t){return $i(I0(!1,dn.GuardRejected))}var Ih=class{urlSerializer;urlTree;constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return Me(r);if(i.numberOfChildren>1||!i.children[Ae])return MM(`${e.redirectTo}`);i=i.children[Ae]}}applyRedirectCommands(e,n,r,i,o){if(typeof n!="string"){let s=n,{queryParams:u,fragment:l,routeConfig:c,url:d,outlet:f,params:h,data:p,title:m}=i,g=On(o,()=>s({params:h,data:p,queryParams:u,fragment:l,routeConfig:c,url:d,outlet:f,title:m}));if(g instanceof pr)throw new Wa(g);n=g}let a=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n[0]==="/")throw new Wa(a);return a}applyRedirectCreateUrlTree(e,n,r,i){let o=this.createSegmentGroup(e,n.root,r,i);return new pr(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let s=o.substring(1);r[i]=n[s]}else r[i]=o}),r}createSegmentGroup(e,n,r,i){let o=this.createSegments(e,n.segments,r,i),a={};return Object.entries(n.children).forEach(([s,u])=>{a[s]=this.createSegmentGroup(e,u,r,i)}),new Ge(o,a)}createSegments(e,n,r,i){return n.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new be(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}},Sh={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function AM(t,e,n,r,i){let o=M0(t,e,n);return o.matched?(r=QT(e,r),TM(r,e,n,i).pipe(Pe(a=>a===!0?o:fe({},Sh)))):Me(o)}function M0(t,e,n){if(e.path==="**")return RM(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?fe({},Sh):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||ST)(n,t,e);if(!i)return fe({},Sh);let o={};Object.entries(i.posParams??{}).forEach(([s,u])=>{o[s]=u.path});let a=i.consumed.length>0?fe(fe({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:a,positionalParamSegments:i.posParams??{}}}function RM(t){return{matched:!0,parameters:t.length>0?s0(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function r0(t,e,n,r){return n.length>0&&OM(t,n,r)?{segmentGroup:new Ge(e,kM(r,new Ge(n,t.children))),slicedSegments:[]}:n.length===0&&PM(t,n,r)?{segmentGroup:new Ge(t.segments,_M(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new Ge(t.segments,t.children),slicedSegments:n}}function _M(t,e,n,r){let i={};for(let o of n)if(ml(t,e,o)&&!r[Fn(o)]){let a=new Ge([],{});i[Fn(o)]=a}return fe(fe({},r),i)}function kM(t,e){let n={};n[Ae]=e;for(let r of t)if(r.path===""&&Fn(r)!==Ae){let i=new Ge([],{});n[Fn(r)]=i}return n}function OM(t,e,n){return n.some(r=>ml(t,e,r)&&Fn(r)!==Ae)}function PM(t,e,n){return n.some(r=>ml(t,e,r))}function ml(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function LM(t,e,n){return e.length===0&&!t.children[n]}var xh=class{};function FM(t,e,n,r,i,o,a="emptyOnly"){return new Th(t,e,n,r,i,a,o).recognize()}var BM=31,Th=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,n,r,i,o,a,s){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=a,this.urlSerializer=s,this.applyRedirects=new Ih(this.urlSerializer,this.urlTree)}noMatchError(e){return new be(4002,`'${e.segmentGroup}'`)}recognize(){let e=r0(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(Pe(({children:n,rootSnapshot:r})=>{let i=new cn(r,n),o=new hl("",i),a=UT(r,[],this.urlTree.queryParams,this.urlTree.fragment);return a.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(a),{state:o,tree:a}}))}match(e){let n=new vo([],Object.freeze({}),Object.freeze(fe({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),Ae,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,Ae,n).pipe(Pe(r=>({children:r,rootSnapshot:n})),Er(r=>{if(r instanceof Wa)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Ga?this.noMatchError(r):r}))}processSegmentGroup(e,n,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r,o):this.processSegment(e,n,r,r.segments,i,!0,o).pipe(Pe(a=>a instanceof cn?[a]:[]))}processChildren(e,n,r,i){let o=[];for(let a of Object.keys(r.children))a==="primary"?o.unshift(a):o.push(a);return vt(o).pipe(Hi(a=>{let s=r.children[a],u=XT(n,a);return this.processSegmentGroup(e,u,s,a,i)}),$c((a,s)=>(a.push(...s),a)),Cr(null),Vc(),mt(a=>{if(a===null)return ho(r);let s=N0(a);return VM(s),Me(s)}))}processSegment(e,n,r,i,o,a,s){return vt(n).pipe(Hi(u=>this.processSegmentAgainstRoute(u._injector??e,n,u,r,i,o,a,s).pipe(Er(l=>{if(l instanceof Ga)return Me(null);throw l}))),ur(u=>!!u),Er(u=>{if(x0(u))return LM(r,i,o)?Me(new xh):ho(r);throw u}))}processSegmentAgainstRoute(e,n,r,i,o,a,s,u){return Fn(r)!==a&&(a===Ae||!ml(i,o,r))?ho(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,a,u):this.allowRedirects&&s?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,o,a,u):ho(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,o,a,s){let{matched:u,parameters:l,consumedSegments:c,positionalParamSegments:d,remainingSegments:f}=M0(n,i,o);if(!u)return ho(n);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>BM&&(this.allowRedirects=!1));let h=new vo(o,l,Object.freeze(fe({},this.urlTree.queryParams)),this.urlTree.fragment,i0(i),Fn(i),i.component??i._loadedComponent??null,i,o0(i)),p=fl(h,s,this.paramsInheritanceStrategy);h.params=Object.freeze(p.params),h.data=Object.freeze(p.data);let m=this.applyRedirects.applyRedirectCommands(c,i.redirectTo,d,h,e);return this.applyRedirects.lineralizeSegments(i,m).pipe(mt(g=>this.processSegment(e,r,n,g.concat(f),a,!1,s)))}matchSegmentAgainstRoute(e,n,r,i,o,a){let s=AM(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),s.pipe(Nn(u=>u.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Nn(({routes:l})=>{let c=r._loadedInjector??e,{parameters:d,consumedSegments:f,remainingSegments:h}=u,p=new vo(f,d,Object.freeze(fe({},this.urlTree.queryParams)),this.urlTree.fragment,i0(r),Fn(r),r.component??r._loadedComponent??null,r,o0(r)),m=fl(p,a,this.paramsInheritanceStrategy);p.params=Object.freeze(m.params),p.data=Object.freeze(m.data);let{segmentGroup:g,slicedSegments:v}=r0(n,f,h,l);if(v.length===0&&g.hasChildren())return this.processChildren(c,l,g,p).pipe(Pe(w=>new cn(p,w)));if(l.length===0&&v.length===0)return Me(new cn(p,[]));let y=Fn(r)===o;return this.processSegment(c,l,g,v,y?Ae:o,!0,p).pipe(Pe(w=>new cn(p,w instanceof cn?[w]:[])))}))):ho(n)))}getChildConfig(e,n,r){return n.children?Me({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?Me({routes:n._loadedRoutes,injector:n._loadedInjector}):xM(e,n,r,this.urlSerializer).pipe(mt(i=>i?this.configLoader.loadChildren(e,n).pipe(At(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):NM(n))):Me({routes:[],injector:e})}};function VM(t){t.sort((e,n)=>e.value.outlet===Ae?-1:n.value.outlet===Ae?1:e.value.outlet.localeCompare(n.value.outlet))}function $M(t){let e=t.value.routeConfig;return e&&e.path===""}function N0(t){let e=[],n=new Set;for(let r of t){if(!$M(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=N0(r.children);e.push(new cn(r.value,i))}return e.filter(r=>!n.has(r))}function i0(t){return t.data||{}}function o0(t){return t.resolve||{}}function jM(t,e,n,r,i,o){return mt(a=>FM(t,e,n,r,a.extractedUrl,i,o).pipe(Pe(({state:s,tree:u})=>at(fe({},a),{targetSnapshot:s,urlAfterRedirects:u}))))}function HM(t,e){return mt(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return Me(n);let o=new Set(i.map(u=>u.route)),a=new Set;for(let u of o)if(!a.has(u))for(let l of A0(u))a.add(l);let s=0;return vt(a).pipe(Hi(u=>o.has(u)?zM(u,r,t,e):(u.data=fl(u,u.parent,t).resolve,Me(void 0))),At(()=>s++),zi(1),mt(u=>s===a.size?Me(n):on))})}function A0(t){let e=t.children.map(n=>A0(n)).flat();return[t,...e]}function zM(t,e,n,r){let i=t.routeConfig,o=t._resolve;return i?.title!==void 0&&!E0(i)&&(o[Za]=i.title),UM(o,t,e,r).pipe(Pe(a=>(t._resolvedData=a,t.data=fl(t,t.parent,n).resolve,null)))}function UM(t,e,n,r){let i=rh(t);if(i.length===0)return Me({});let o={};return vt(i).pipe(mt(a=>qM(t[a],e,n,r).pipe(ur(),At(s=>{if(s instanceof qa)throw pl(new Ba,s);o[a]=s}))),zi(1),Bc(o),Er(a=>x0(a)?on:$i(a)))}function qM(t,e,n,r){let i=Ya(e)??r,o=Eo(t,i),a=o.resolve?o.resolve(e,n):On(i,()=>o(e,n));return _r(a)}function th(t){return Nn(e=>{let n=t(e);return n?vt(n).pipe(Pe(()=>e)):Me(e)})}var R0=(()=>{class t{buildTitle(n){let r,i=n.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===Ae);return r}getResolvedTitleForRoute(n){return n.data[Za]}static \u0275fac=function(r){return new(r||t)};static \u0275prov=Te({token:t,factory:()=>ue(GM),providedIn:"root"})}return t})(),GM=(()=>{class t extends R0{title;constructor(n){super(),this.title=n}updateTitle(n){let r=this.buildTitle(n);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||t)(Le(Xy))};static \u0275prov=Te({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),_h=new Ne("",{providedIn:"root",factory:()=>({})}),WM=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275cmp=Zu({type:t,selectors:[["ng-component"]],decls:1,vars:0,template:function(r,i){r&1&&xa(0,"router-outlet")},dependencies:[tM],encapsulation:2})}return t})();function kh(t){let e=t.children&&t.children.map(kh),n=e?at(fe({},t),{children:e}):fe({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==Ae&&(n.component=WM),n}var Oh=new Ne(""),ZM=(()=>{class t{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=ue(jf);loadComponent(n){if(this.componentLoaders.get(n))return this.componentLoaders.get(n);if(n._loadedComponent)return Me(n._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(n);let r=_r(n.loadComponent()).pipe(Pe(_0),At(o=>{this.onLoadEndListener&&this.onLoadEndListener(n),n._loadedComponent=o}),na(()=>{this.componentLoaders.delete(n)})),i=new Vi(r,()=>new Mt).pipe(Bi());return this.componentLoaders.set(n,i),i}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Me({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=YM(r,this.compiler,n,this.onLoadEndListener).pipe(na(()=>{this.childrenLoaders.delete(r)})),a=new Vi(o,()=>new Mt).pipe(Bi());return this.childrenLoaders.set(r,a),a}static \u0275fac=function(r){return new(r||t)};static \u0275prov=Te({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function YM(t,e,n,r){return _r(t.loadChildren()).pipe(Pe(_0),mt(i=>i instanceof ya||Array.isArray(i)?Me(i):vt(e.compileModuleAsync(i))),Pe(i=>{r&&r(t);let o,a,s=!1;return Array.isArray(i)?(a=i,s=!0):(o=i.create(n).injector,a=o.get(Oh,[],{optional:!0,self:!0}).flat()),{routes:a.map(kh),injector:o}}))}function KM(t){return t&&typeof t=="object"&&"default"in t}function _0(t){return KM(t)?t.default:t}var Ph=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=Te({token:t,factory:()=>ue(QM),providedIn:"root"})}return t})(),QM=(()=>{class t{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static \u0275fac=function(r){return new(r||t)};static \u0275prov=Te({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),XM=new Ne("");var JM=new Ne(""),e1=(()=>{class t{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new Mt;transitionAbortSubject=new Mt;configLoader=ue(ZM);environmentInjector=ue(wn);urlSerializer=ue(Nh);rootContexts=ue(vl);location=ue(Ma);inputBindingEnabled=ue(Rh,{optional:!0})!==null;titleStrategy=ue(R0);options=ue(_h,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=ue(Ph);createViewTransition=ue(XM,{optional:!0});navigationErrorHandler=ue(JM,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>Me(void 0);rootComponentType=null;constructor(){let n=i=>this.events.next(new fh(i)),r=i=>this.events.next(new hh(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=n}complete(){this.transitions?.complete()}handleNavigationRequest(n){let r=++this.navigationId;this.transitions?.next(at(fe(fe({},this.transitions.value),n),{id:r}))}setupNavigations(n,r,i){return this.transitions=new Nt({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:La,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Mn(o=>o.id!==0),Pe(o=>at(fe({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Nn(o=>{let a=!1,s=!1;return Me(o).pipe(Nn(u=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",dn.SupersededByNewNavigation),on;this.currentTransition=o,this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,targetBrowserUrl:typeof u.extras.browserUrl=="string"?this.urlSerializer.parse(u.extras.browserUrl):u.extras.browserUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?at(fe({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let l=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),c=u.extras.onSameUrlNavigation??n.onSameUrlNavigation;if(!l&&c!=="reload"){let d="";return this.events.next(new gi(u.id,this.urlSerializer.serialize(u.rawUrl),d,sh.IgnoredSameUrlNavigation)),u.resolve(!1),on}if(this.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return Me(u).pipe(Nn(d=>{let f=this.transitions?.getValue();return this.events.next(new ja(d.id,this.urlSerializer.serialize(d.extractedUrl),d.source,d.restoredState)),f!==this.transitions?.getValue()?on:Promise.resolve(d)}),jM(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy),At(d=>{o.targetSnapshot=d.targetSnapshot,o.urlAfterRedirects=d.urlAfterRedirects,this.currentNavigation=at(fe({},this.currentNavigation),{finalUrl:d.urlAfterRedirects});let f=new ll(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(f)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){let{id:d,extractedUrl:f,source:h,restoredState:p,extras:m}=u,g=new ja(d,this.urlSerializer.serialize(f),h,p);this.events.next(g);let v=b0(this.rootComponentType).snapshot;return this.currentTransition=o=at(fe({},u),{targetSnapshot:v,urlAfterRedirects:f,extras:at(fe({},m),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=f,Me(o)}else{let d="";return this.events.next(new gi(u.id,this.urlSerializer.serialize(u.extractedUrl),d,sh.IgnoredByUrlHandlingStrategy)),u.resolve(!1),on}}),At(u=>{let l=new uh(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}),Pe(u=>(this.currentTransition=o=at(fe({},u),{guards:sM(u.targetSnapshot,u.currentSnapshot,this.rootContexts)}),o)),yM(this.environmentInjector,u=>this.events.next(u)),At(u=>{if(o.guardsResult=u.guardsResult,u.guardsResult&&typeof u.guardsResult!="boolean")throw pl(this.urlSerializer,u.guardsResult);let l=new lh(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(l)}),Mn(u=>u.guardsResult?!0:(this.cancelNavigationTransition(u,"",dn.GuardRejected),!1)),th(u=>{if(u.guards.canActivateChecks.length)return Me(u).pipe(At(l=>{let c=new ch(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(c)}),Nn(l=>{let c=!1;return Me(l).pipe(HM(this.paramsInheritanceStrategy,this.environmentInjector),At({next:()=>c=!0,complete:()=>{c||this.cancelNavigationTransition(l,"",dn.NoDataFromResolver)}}))}),At(l=>{let c=new dh(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(c)}))}),th(u=>{let l=c=>{let d=[];c.routeConfig?.loadComponent&&!c.routeConfig._loadedComponent&&d.push(this.configLoader.loadComponent(c.routeConfig).pipe(At(f=>{c.component=f}),Pe(()=>{})));for(let f of c.children)d.push(...l(f));return d};return nu(l(u.targetSnapshot.root)).pipe(Cr(null),sr(1))}),th(()=>this.afterPreactivation()),Nn(()=>{let{currentSnapshot:u,targetSnapshot:l}=o,c=this.createViewTransition?.(this.environmentInjector,u.root,l.root);return c?vt(c).pipe(Pe(()=>o)):Me(o)}),Pe(u=>{let l=nM(n.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=o=at(fe({},u),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,o}),At(()=>{this.events.next(new za)}),aM(this.rootContexts,n.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),sr(1),At({next:u=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new pi(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),this.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{a=!0}}),Hc(this.transitionAbortSubject.pipe(At(u=>{throw u}))),na(()=>{!a&&!s&&this.cancelNavigationTransition(o,"",dn.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),Er(u=>{if(s=!0,S0(u))this.events.next(new hr(o.id,this.urlSerializer.serialize(o.extractedUrl),u.message,u.cancellationCode)),oM(u)?this.events.next(new wo(u.url,u.navigationBehaviorOptions)):o.resolve(!1);else{let l=new Ha(o.id,this.urlSerializer.serialize(o.extractedUrl),u,o.targetSnapshot??void 0);try{let c=On(this.environmentInjector,()=>this.navigationErrorHandler?.(l));if(c instanceof qa){let{message:d,cancellationCode:f}=pl(this.urlSerializer,c);this.events.next(new hr(o.id,this.urlSerializer.serialize(o.extractedUrl),d,f)),this.events.next(new wo(c.redirectTo,c.navigationBehaviorOptions))}else throw this.events.next(l),u}catch(c){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(c)}}return on}))}))}cancelNavigationTransition(n,r,i){let o=new hr(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(o),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let n=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return n.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||t)};static \u0275prov=Te({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function t1(t){return t!==La}var n1=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=Te({token:t,factory:()=>ue(r1),providedIn:"root"})}return t})(),Mh=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},r1=(()=>{class t extends Mh{static \u0275fac=(()=>{let n;return function(i){return(n||(n=ff(t)))(i||t)}})();static \u0275prov=Te({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),k0=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=Te({token:t,factory:()=>ue(i1),providedIn:"root"})}return t})(),i1=(()=>{class t extends k0{location=ue(Ma);urlSerializer=ue(Nh);options=ue(_h,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";urlHandlingStrategy=ue(Ph);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new pr;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}routerState=b0(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{r.type==="popstate"&&n(r.url,r.state)})}handleRouterEvent(n,r){if(n instanceof ja)this.stateMemento=this.createStateMemento();else if(n instanceof gi)this.rawUrlTree=r.initialUrl;else if(n instanceof ll){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else n instanceof za?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):n instanceof hr&&(n.code===dn.GuardRejected||n.code===dn.NoDataFromResolver)?this.restoreHistory(r):n instanceof Ha?this.restoreHistory(r,!0):n instanceof pi&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,r){let i=n instanceof pr?this.urlSerializer.serialize(n):n;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let o=this.browserPageId,a=fe(fe({},r.extras.state),this.generateNgRouterState(r.id,o));this.location.replaceState(i,"",a)}else{let o=fe(fe({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",o)}}restoreHistory(n,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.currentUrlTree===n.finalUrl&&o===0&&(this.resetState(n),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(n),this.resetUrlToCurrentUrlTree())}resetState(n){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return this.canceledNavigationResolution==="computed"?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static \u0275fac=(()=>{let n;return function(i){return(n||(n=ff(t)))(i||t)}})();static \u0275prov=Te({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Oa=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(Oa||{});function o1(t,e){t.events.pipe(Mn(n=>n instanceof pi||n instanceof hr||n instanceof Ha||n instanceof gi),Pe(n=>n instanceof pi||n instanceof gi?Oa.COMPLETE:(n instanceof hr?n.code===dn.Redirect||n.code===dn.SupersededByNewNavigation:!1)?Oa.REDIRECTING:Oa.FAILED),Mn(n=>n!==Oa.REDIRECTING),sr(1)).subscribe(()=>{e()})}var a1={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},s1={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},O0=(()=>{class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=ue(Yu);stateManager=ue(k0);options=ue(_h,{optional:!0})||{};pendingTasks=ue(ao);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=ue(e1);urlSerializer=ue(Nh);location=ue(Ma);urlHandlingStrategy=ue(Ph);_events=new Mt;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=ue(n1);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=ue(Oh,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!ue(Rh,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:n=>{this.console.warn(n)}}),this.subscribeToNavigationEvents()}eventsSubscription=new ht;subscribeToNavigationEvents(){let n=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof hr&&r.code!==dn.Redirect&&r.code!==dn.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof pi)this.navigated=!0;else if(r instanceof wo){let a=r.navigationBehaviorOptions,s=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),u=fe({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||t1(i.source)},a);this.scheduleNavigation(s,La,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}l1(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),La,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(n,"popstate",r)},0)})}navigateToSyncWithBrowser(n,r,i){let o={replaceUrl:!0},a=i?.navigationId?i:null;if(i){let u=fe({},i);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let s=this.parseUrl(n);this.scheduleNavigation(s,r,a,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(kh),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){let{relativeTo:i,queryParams:o,fragment:a,queryParamsHandling:s,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:a,c=null;switch(s??this.options.defaultQueryParamsHandling){case"merge":c=fe(fe({},this.currentUrlTree.queryParams),o);break;case"preserve":c=this.currentUrlTree.queryParams;break;default:c=o||null}c!==null&&(c=this.removeEmptyProps(c));let d;try{let f=i?i.snapshot:this.routerState.snapshot.root;d=v0(f)}catch{(typeof n[0]!="string"||n[0][0]!=="/")&&(n=[]),d=this.currentUrlTree.root}return m0(d,n,c,l??null)}navigateByUrl(n,r={skipLocationChange:!1}){let i=Va(n)?n:this.parseUrl(n),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,La,null,r)}navigate(n,r={skipLocationChange:!1}){return u1(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.urlSerializer.parse("/")}}isActive(n,r){let i;if(r===!0?i=fe({},a1):r===!1?i=fe({},s1):i=r,Va(n))return Jy(this.currentUrlTree,n,i);let o=this.parseUrl(n);return Jy(this.currentUrlTree,o,i)}removeEmptyProps(n){return Object.entries(n).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(n,r,i,o,a){if(this.disposed)return Promise.resolve(!1);let s,u,l;a?(s=a.resolve,u=a.reject,l=a.promise):l=new Promise((d,f)=>{s=d,u=f});let c=this.pendingTasks.add();return o1(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(c))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:o,resolve:s,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(d=>Promise.reject(d))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=Te({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function u1(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new be(4008,!1)}function l1(t){return!(t instanceof za)&&!(t instanceof wo)}var c1=new Ne("");function P0(t,...e){return Ou([{provide:Oh,multi:!0,useValue:t},[],{provide:bo,useFactory:d1,deps:[O0]},{provide:Pf,multi:!0,useFactory:f1},e.map(n=>n.\u0275providers)])}function d1(t){return t.routerState.root}function f1(){let t=ue(Tr);return e=>{let n=t.get(ui);if(e!==n.components[0])return;let r=t.get(O0),i=t.get(h1);t.get(p1)===1&&r.initialNavigation(),t.get(g1,null,_e.Optional)?.setUpPreloading(),t.get(c1,null,_e.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var h1=new Ne("",{factory:()=>new Mt}),p1=new Ne("",{providedIn:"root",factory:()=>1});var g1=new Ne("");var L0=[];var F0={providers:[xy({eventCoalescing:!0}),P0(L0)]};var fn=class{constructor(e,n,r){this.name=e;this.type=n;this.effects=r;this.name=e,this.effects=r}getColor(){switch(this.type){case 0:return"#0F0";case 3:return"#ffa500";case 1:return"#00F";case 7:return"#F00";default:return"#666"}}toNode(){}};var ct=class{constructor(e,n,r){this.triggers=e;this.effects=n;this.text=r}isTriggeredBy(e){return this.triggers.some(n=>e.effects.some(r=>n.isTriggeredBy(r)))}toString(){return`On ${this.triggers.map(e=>e.toString()).join("||")} -> ${this.effects.map(e=>e.toString()).join(",")}: ${this.text}`}};var jt=(g=>(g[g.Hit=0]="Hit",g[g.Heal=1]="Heal",g[g.ApplyStatus=2]="ApplyStatus",g[g.DealDamage=3]="DealDamage",g[g.Attack=4]="Attack",g[g.BeingAttacked=5]="BeingAttacked",g[g.Prayer=6]="Prayer",g[g.StandStill=7]="StandStill",g[g.Block=8]="Block",g[g.ShrugOff=9]="ShrugOff",g[g.GameTurn=10]="GameTurn",g[g.AllyAttack=11]="AllyAttack",g[g.Summon=12]="Summon",g[g.DivineIntervention=13]="DivineIntervention",g[g.Entrance=14]="Entrance",g[g.Learn=15]="Learn",g))(jt||{});var We=class{type;isTriggeredBy(e){return this.type==e.type}toString(){return jt[this.type]}};var Qa=class extends We{type=0};var Ht=class extends We{constructor(n,r=!1){super();this.status=n;this.self=r}type=2;isTriggeredBy(n){return super.isTriggeredBy(n)&&this.status==n.status&&(!this.self||this.self==n.self)}};var hn=class extends We{constructor(n,r=!1){super();this.damageType=n;this.self=r}type=3;isTriggeredBy(n){return super.isTriggeredBy(n)&&this.damageType==n.damageType&&(!this.self||this.self==n.self)}};var Xa=class extends We{type=4};var yl=class extends We{type=5};var wl=class extends We{type=1};var Ja=class extends We{type=6};var bl=class extends We{type=7};var Dl=class extends We{type=10};var es=class extends We{type=11};var kr=class extends We{type=12};var El=class extends We{type=13};var Co=class extends We{type=15};var Io=class extends We{type=14};var Lh=[new fn("Hemokinesis",7,[new ct([new Qa],[new Ht(0)],"5 bleed"),new ct([new Ht(0)],[new hn(0)],"30 * skill level blood damage")]),new fn("Toxokinesis",0,[new ct([new Xa],[new hn(1)],"30 * skill level poison damage"),new ct([new Qa],[new Ht(1)],"5 sickness"),new ct([new Ht(1)],[new hn(1)],"30 * skill level poison damage")]),new fn("Poison Skin",0,[new ct([new yl],[new Ht(1)],"2 * skill level sickness"),new ct([new hn(1)],[new wl],"2 * skill level heal yourself")]),new fn("Morbumancy",0,[new ct([new Ja,new bl],[new Ht(1)],"10 Sickness")]),new fn("Plague Chant",0,[new ct([new Dl,new Ja],[new hn(1,!0),new Ht(2)],"25 damage, 10 sickness"),new ct([new es],[new Ht(2)],"2 * skill level plague")]),new fn("Acidify",0,[new ct([new Xa,new kr],[new Ht(3)],"5 * skill level sickness"),new ct([new El],[new hn(1)],"10 * skill level poison")]),new fn("Burning Ooze",0,[new ct([new es],[new hn(1),new hn(2)],"10 * skill level"),new ct([new Io,new Co],[new kr],"skill level * ooze")]),new fn("Oozemancy",0,[new ct([new kr],[new hn(1)],"20 * number of allied oozes"),new ct([new Io,new Co],[new kr],"skill level * ooze")]),new fn("Poison Familiar",0,[new ct([new Io,new Co],[new kr],"Tsuchigumo"),new ct([new Ht(1),new Ht(3)],[new hn(1)],"tsuchigumo deals hit * poison")]),new fn("Snakeform",0,[new ct([new Ht(1)],[new Ht(4)],"2 * skill level")])];function Dt(t){"@babel/helpers - typeof";return Dt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Dt(t)}function fp(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function B0(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function hp(t,e,n){return e&&B0(t.prototype,e),n&&B0(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Jw(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Bn(t,e){return v1(t)||m1(t,e)||eb(t,e)||y1()}function v1(t){if(Array.isArray(t))return t}function m1(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r=[],i=!0,o=!1,a,s;try{for(n=n.call(t);!(i=(a=n.next()).done)&&(r.push(a.value),!(e&&r.length===e));i=!0);}catch(u){o=!0,s=u}finally{try{!i&&n.return!=null&&n.return()}finally{if(o)throw s}}return r}}function eb(t,e){if(t){if(typeof t=="string")return V0(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return V0(t,e)}}function V0(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function y1(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function tb(t,e){var n=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=eb(t))||e&&t&&typeof t.length=="number"){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o=!0,a=!1,s;return{s:function(){n=n.call(t)},n:function(){var u=n.next();return o=u.done,u},e:function(u){a=!0,s=u},f:function(){try{!o&&n.return!=null&&n.return()}finally{if(a)throw s}}}}var wt=typeof window>"u"?null:window,$0=wt?wt.navigator:null;wt&&wt.document;var w1=Dt(""),nb=Dt({}),b1=Dt(function(){}),D1=typeof HTMLElement>"u"?"undefined":Dt(HTMLElement),Is=function(e){return e&&e.instanceString&&lt(e.instanceString)?e.instanceString():null},pe=function(e){return e!=null&&Dt(e)==w1},lt=function(e){return e!=null&&Dt(e)===b1},tt=function(e){return!pn(e)&&(Array.isArray?Array.isArray(e):e!=null&&e instanceof Array)},He=function(e){return e!=null&&Dt(e)===nb&&!tt(e)&&e.constructor===Object},E1=function(e){return e!=null&&Dt(e)===nb},ie=function(e){return e!=null&&Dt(e)===Dt(1)&&!isNaN(e)},C1=function(e){return ie(e)&&Math.floor(e)===e},Ul=function(e){if(D1!=="undefined")return e!=null&&e instanceof HTMLElement},pn=function(e){return Ss(e)||rb(e)},Ss=function(e){return Is(e)==="collection"&&e._private.single},rb=function(e){return Is(e)==="collection"&&!e._private.single},pp=function(e){return Is(e)==="core"},ib=function(e){return Is(e)==="stylesheet"},I1=function(e){return Is(e)==="event"},$r=function(e){return e==null?!0:!!(e===""||e.match(/^\s+$/))},S1=function(e){return typeof HTMLElement>"u"?!1:e instanceof HTMLElement},x1=function(e){return He(e)&&ie(e.x1)&&ie(e.x2)&&ie(e.y1)&&ie(e.y2)},T1=function(e){return E1(e)&&lt(e.then)},M1=function(){return $0&&$0.userAgent.match(/msie|trident|edge/i)},hs=function(e,n){n||(n=function(){if(arguments.length===1)return arguments[0];if(arguments.length===0)return"undefined";for(var o=[],a=0;a<arguments.length;a++)o.push(arguments[a]);return o.join("$")});var r=function i(){var o=this,a=arguments,s,u=n.apply(o,a),l=i.cache;return(s=l[u])||(s=l[u]=e.apply(o,a)),s};return r.cache={},r},gp=hs(function(t){return t.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})}),tc=hs(function(t){return t.replace(/(-\w)/g,function(e){return e[1].toUpperCase()})}),ob=hs(function(t,e){return t+e[0].toUpperCase()+e.substring(1)},function(t,e){return t+"$"+e}),j0=function(e){return $r(e)?e:e.charAt(0).toUpperCase()+e.substring(1)},bt="(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))",N1="rgb[a]?\\(("+bt+"[%]?)\\s*,\\s*("+bt+"[%]?)\\s*,\\s*("+bt+"[%]?)(?:\\s*,\\s*("+bt+"))?\\)",A1="rgb[a]?\\((?:"+bt+"[%]?)\\s*,\\s*(?:"+bt+"[%]?)\\s*,\\s*(?:"+bt+"[%]?)(?:\\s*,\\s*(?:"+bt+"))?\\)",R1="hsl[a]?\\(("+bt+")\\s*,\\s*("+bt+"[%])\\s*,\\s*("+bt+"[%])(?:\\s*,\\s*("+bt+"))?\\)",_1="hsl[a]?\\((?:"+bt+")\\s*,\\s*(?:"+bt+"[%])\\s*,\\s*(?:"+bt+"[%])(?:\\s*,\\s*(?:"+bt+"))?\\)",k1="\\#[0-9a-fA-F]{3}",O1="\\#[0-9a-fA-F]{6}",ab=function(e,n){return e<n?-1:e>n?1:0},P1=function(e,n){return-1*ab(e,n)},ye=Object.assign!=null?Object.assign.bind(Object):function(t){for(var e=arguments,n=1;n<e.length;n++){var r=e[n];if(r!=null)for(var i=Object.keys(r),o=0;o<i.length;o++){var a=i[o];t[a]=r[a]}}return t},L1=function(e){if(!(!(e.length===4||e.length===7)||e[0]!=="#")){var n=e.length===4,r,i,o,a=16;return n?(r=parseInt(e[1]+e[1],a),i=parseInt(e[2]+e[2],a),o=parseInt(e[3]+e[3],a)):(r=parseInt(e[1]+e[2],a),i=parseInt(e[3]+e[4],a),o=parseInt(e[5]+e[6],a)),[r,i,o]}},F1=function(e){var n,r,i,o,a,s,u,l;function c(p,m,g){return g<0&&(g+=1),g>1&&(g-=1),g<1/6?p+(m-p)*6*g:g<1/2?m:g<2/3?p+(m-p)*(2/3-g)*6:p}var d=new RegExp("^"+R1+"$").exec(e);if(d){if(r=parseInt(d[1]),r<0?r=(360- -1*r%360)%360:r>360&&(r=r%360),r/=360,i=parseFloat(d[2]),i<0||i>100||(i=i/100,o=parseFloat(d[3]),o<0||o>100)||(o=o/100,a=d[4],a!==void 0&&(a=parseFloat(a),a<0||a>1)))return;if(i===0)s=u=l=Math.round(o*255);else{var f=o<.5?o*(1+i):o+i-o*i,h=2*o-f;s=Math.round(255*c(h,f,r+1/3)),u=Math.round(255*c(h,f,r)),l=Math.round(255*c(h,f,r-1/3))}n=[s,u,l,a]}return n},B1=function(e){var n,r=new RegExp("^"+N1+"$").exec(e);if(r){n=[];for(var i=[],o=1;o<=3;o++){var a=r[o];if(a[a.length-1]==="%"&&(i[o]=!0),a=parseFloat(a),i[o]&&(a=a/100*255),a<0||a>255)return;n.push(Math.floor(a))}var s=i[1]||i[2]||i[3],u=i[1]&&i[2]&&i[3];if(s&&!u)return;var l=r[4];if(l!==void 0){if(l=parseFloat(l),l<0||l>1)return;n.push(l)}}return n},V1=function(e){return j1[e.toLowerCase()]},$1=function(e){return(tt(e)?e:null)||V1(e)||L1(e)||B1(e)||F1(e)},j1={transparent:[0,0,0,0],aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},sb=function(e){for(var n=e.map,r=e.keys,i=r.length,o=0;o<i;o++){var a=r[o];if(He(a))throw Error("Tried to set map with object key");o<r.length-1?(n[a]==null&&(n[a]={}),n=n[a]):n[a]=e.value}},ub=function(e){for(var n=e.map,r=e.keys,i=r.length,o=0;o<i;o++){var a=r[o];if(He(a))throw Error("Tried to get map with object key");if(n=n[a],n==null)return n}return n};function H1(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var Ci=H1,as=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function z1(t,e){return e={exports:{}},t(e,e.exports),e.exports}var U1=typeof as=="object"&&as&&as.Object===Object&&as,q1=U1,G1=typeof self=="object"&&self&&self.Object===Object&&self,W1=q1||G1||Function("return this")(),nc=W1,Z1=function(){return nc.Date.now()},Fh=Z1,Y1=/\s/;function K1(t){for(var e=t.length;e--&&Y1.test(t.charAt(e)););return e}var Q1=K1,X1=/^\s+/;function J1(t){return t&&t.slice(0,Q1(t)+1).replace(X1,"")}var eN=J1,tN=nc.Symbol,Fo=tN,lb=Object.prototype,nN=lb.hasOwnProperty,rN=lb.toString,ts=Fo?Fo.toStringTag:void 0;function iN(t){var e=nN.call(t,ts),n=t[ts];try{t[ts]=void 0;var r=!0}catch{}var i=rN.call(t);return r&&(e?t[ts]=n:delete t[ts]),i}var oN=iN,aN=Object.prototype,sN=aN.toString;function uN(t){return sN.call(t)}var lN=uN,cN="[object Null]",dN="[object Undefined]",H0=Fo?Fo.toStringTag:void 0;function fN(t){return t==null?t===void 0?dN:cN:H0&&H0 in Object(t)?oN(t):lN(t)}var cb=fN;function hN(t){return t!=null&&typeof t=="object"}var pN=hN,gN="[object Symbol]";function vN(t){return typeof t=="symbol"||pN(t)&&cb(t)==gN}var xs=vN,z0=NaN,mN=/^[-+]0x[0-9a-f]+$/i,yN=/^0b[01]+$/i,wN=/^0o[0-7]+$/i,bN=parseInt;function DN(t){if(typeof t=="number")return t;if(xs(t))return z0;if(Ci(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=Ci(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=eN(t);var n=yN.test(t);return n||wN.test(t)?bN(t.slice(2),n?2:8):mN.test(t)?z0:+t}var U0=DN,EN="Expected a function",CN=Math.max,IN=Math.min;function SN(t,e,n){var r,i,o,a,s,u,l=0,c=!1,d=!1,f=!0;if(typeof t!="function")throw new TypeError(EN);e=U0(e)||0,Ci(n)&&(c=!!n.leading,d="maxWait"in n,o=d?CN(U0(n.maxWait)||0,e):o,f="trailing"in n?!!n.trailing:f);function h(E){var D=r,S=i;return r=i=void 0,l=E,a=t.apply(S,D),a}function p(E){return l=E,s=setTimeout(v,e),c?h(E):a}function m(E){var D=E-u,S=E-l,C=e-D;return d?IN(C,o-S):C}function g(E){var D=E-u,S=E-l;return u===void 0||D>=e||D<0||d&&S>=o}function v(){var E=Fh();if(g(E))return y(E);s=setTimeout(v,m(E))}function y(E){return s=void 0,f&&r?h(E):(r=i=void 0,a)}function w(){s!==void 0&&clearTimeout(s),l=0,r=u=i=s=void 0}function b(){return s===void 0?a:y(Fh())}function I(){var E=Fh(),D=g(E);if(r=arguments,i=this,u=E,D){if(s===void 0)return p(u);if(d)return clearTimeout(s),s=setTimeout(v,e),h(u)}return s===void 0&&(s=setTimeout(v,e)),a}return I.cancel=w,I.flush=b,I}var rc=SN,Bh=wt?wt.performance:null,db=Bh&&Bh.now?function(){return Bh.now()}:function(){return Date.now()},xN=function(){if(wt){if(wt.requestAnimationFrame)return function(t){wt.requestAnimationFrame(t)};if(wt.mozRequestAnimationFrame)return function(t){wt.mozRequestAnimationFrame(t)};if(wt.webkitRequestAnimationFrame)return function(t){wt.webkitRequestAnimationFrame(t)};if(wt.msRequestAnimationFrame)return function(t){wt.msRequestAnimationFrame(t)}}return function(t){t&&setTimeout(function(){t(db())},1e3/60)}}(),ql=function(e){return xN(e)},vr=db,Ao=9261,fb=65599,ss=5381,hb=function(e){for(var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ao,r=n,i;i=e.next(),!i.done;)r=r*fb+i.value|0;return r},ps=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ao;return n*fb+e|0},gs=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ss;return(n<<5)+n+e|0},TN=function(e,n){return e*2097152+n},Or=function(e){return e[0]*2097152+e[1]},Cl=function(e,n){return[ps(e[0],n[0]),gs(e[1],n[1])]},MN=function(e,n){var r={value:0,done:!1},i=0,o=e.length,a={next:function(){return i<o?r.value=e[i++]:r.done=!0,r}};return hb(a,n)},Ii=function(e,n){var r={value:0,done:!1},i=0,o=e.length,a={next:function(){return i<o?r.value=e.charCodeAt(i++):r.done=!0,r}};return hb(a,n)},pb=function(){return NN(arguments)},NN=function(e){for(var n,r=0;r<e.length;r++){var i=e[r];r===0?n=Ii(i):n=Ii(i,n)}return n},q0=!0,AN=console.warn!=null,RN=console.trace!=null,vp=Number.MAX_SAFE_INTEGER||9007199254740991,gb=function(){return!0},Gl=function(){return!1},G0=function(){return 0},mp=function(){},dt=function(e){throw new Error(e)},vb=function(e){if(e!==void 0)q0=!!e;else return q0},Ye=function(e){vb()&&(AN?console.warn(e):(console.log(e),RN&&console.trace()))},_N=function(e){return ye({},e)},Jn=function(e){return e==null?e:tt(e)?e.slice():He(e)?_N(e):e},kN=function(e){return e.slice()},mb=function(e,n){for(n=e="";e++<36;n+=e*51&52?(e^15?8^Math.random()*(e^20?16:4):4).toString(16):"-");return n},ON={},yb=function(){return ON},Pt=function(e){var n=Object.keys(e);return function(r){for(var i={},o=0;o<n.length;o++){var a=n[o],s=r?.[a];i[a]=s===void 0?e[a]:s}return i}},jr=function(e,n,r){for(var i=e.length-1;i>=0&&!(e[i]===n&&(e.splice(i,1),r));i--);},yp=function(e){e.splice(0,e.length)},PN=function(e,n){for(var r=0;r<n.length;r++){var i=n[r];e.push(i)}},$n=function(e,n,r){return r&&(n=ob(r,n)),e[n]},Lr=function(e,n,r,i){r&&(n=ob(r,n)),e[n]=i},LN=function(){function t(){fp(this,t),this._obj={}}return hp(t,[{key:"set",value:function(n,r){return this._obj[n]=r,this}},{key:"delete",value:function(n){return this._obj[n]=void 0,this}},{key:"clear",value:function(){this._obj={}}},{key:"has",value:function(n){return this._obj[n]!==void 0}},{key:"get",value:function(n){return this._obj[n]}}]),t}(),er=typeof Map<"u"?Map:LN,FN="undefined",BN=function(){function t(e){if(fp(this,t),this._obj=Object.create(null),this.size=0,e!=null){var n;e.instanceString!=null&&e.instanceString()===this.instanceString()?n=e.toArray():n=e;for(var r=0;r<n.length;r++)this.add(n[r])}}return hp(t,[{key:"instanceString",value:function(){return"set"}},{key:"add",value:function(n){var r=this._obj;r[n]!==1&&(r[n]=1,this.size++)}},{key:"delete",value:function(n){var r=this._obj;r[n]===1&&(r[n]=0,this.size--)}},{key:"clear",value:function(){this._obj=Object.create(null)}},{key:"has",value:function(n){return this._obj[n]===1}},{key:"toArray",value:function(){var n=this;return Object.keys(this._obj).filter(function(r){return n.has(r)})}},{key:"forEach",value:function(n,r){return this.toArray().forEach(n,r)}}]),t}(),jo=(typeof Set>"u"?"undefined":Dt(Set))!==FN?Set:BN,ic=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(e===void 0||n===void 0||!pp(e)){dt("An element must have a core reference and parameters set");return}var i=n.group;if(i==null&&(n.data&&n.data.source!=null&&n.data.target!=null?i="edges":i="nodes"),i!=="nodes"&&i!=="edges"){dt("An element must be of type `nodes` or `edges`; you specified `"+i+"`");return}this.length=1,this[0]=this;var o=this._private={cy:e,single:!0,data:n.data||{},position:n.position||{x:0,y:0},autoWidth:void 0,autoHeight:void 0,autoPadding:void 0,compoundBoundsClean:!1,listeners:[],group:i,style:{},rstyle:{},styleCxts:[],styleKeys:{},removed:!0,selected:!!n.selected,selectable:n.selectable===void 0?!0:!!n.selectable,locked:!!n.locked,grabbed:!1,grabbable:n.grabbable===void 0?!0:!!n.grabbable,pannable:n.pannable===void 0?i==="edges":!!n.pannable,active:!1,classes:new jo,animation:{current:[],queue:[]},rscratch:{},scratch:n.scratch||{},edges:[],children:[],parent:n.parent&&n.parent.isNode()?n.parent:null,traversalCache:{},backgrounding:!1,bbCache:null,bbCacheShift:{x:0,y:0},bodyBounds:null,overlayBounds:null,labelBounds:{all:null,source:null,target:null,main:null},arrowBounds:{source:null,target:null,"mid-source":null,"mid-target":null}};if(o.position.x==null&&(o.position.x=0),o.position.y==null&&(o.position.y=0),n.renderedPosition){var a=n.renderedPosition,s=e.pan(),u=e.zoom();o.position={x:(a.x-s.x)/u,y:(a.y-s.y)/u}}var l=[];tt(n.classes)?l=n.classes:pe(n.classes)&&(l=n.classes.split(/\s+/));for(var c=0,d=l.length;c<d;c++){var f=l[c];!f||f===""||o.classes.add(f)}this.createEmitter();var h=n.style||n.css;h&&(Ye("Setting a `style` bypass at element creation should be done only when absolutely necessary.  Try to use the stylesheet instead."),this.style(h)),(r===void 0||r)&&this.restore()},W0=function(e){return e={bfs:e.bfs||!e.dfs,dfs:e.dfs||!e.bfs},function(r,i,o){var a;He(r)&&!pn(r)&&(a=r,r=a.roots||a.root,i=a.visit,o=a.directed),o=arguments.length===2&&!lt(i)?i:o,i=lt(i)?i:function(){};for(var s=this._private.cy,u=r=pe(r)?this.filter(r):r,l=[],c=[],d={},f={},h={},p=0,m,g=this.byGroup(),v=g.nodes,y=g.edges,w=0;w<u.length;w++){var b=u[w],I=b.id();b.isNode()&&(l.unshift(b),e.bfs&&(h[I]=!0,c.push(b)),f[I]=0)}for(var E=function(){var R=e.bfs?l.shift():l.pop(),T=R.id();if(e.dfs){if(h[T])return"continue";h[T]=!0,c.push(R)}var O=f[T],_=d[T],k=_!=null?_.source():null,P=_!=null?_.target():null,V=_==null?void 0:R.same(k)?P[0]:k[0],z=void 0;if(z=i(R,_,V,p++,O),z===!0)return m=R,"break";if(z===!1)return"break";for(var B=R.connectedEdges().filter(function(X){return(!o||X.source().same(R))&&y.has(X)}),$=0;$<B.length;$++){var W=B[$],K=W.connectedNodes().filter(function(X){return!X.same(R)&&v.has(X)}),Q=K.id();K.length!==0&&!h[Q]&&(K=K[0],l.push(K),e.bfs&&(h[Q]=!0,c.push(K)),d[Q]=W,f[Q]=f[T]+1)}};l.length!==0;){var D=E();if(D!=="continue"&&D==="break")break}for(var S=s.collection(),C=0;C<c.length;C++){var A=c[C],M=d[A.id()];M!=null&&S.push(M),S.push(A)}return{path:s.collection(S),found:s.collection(m)}}},vs={breadthFirstSearch:W0({bfs:!0}),depthFirstSearch:W0({dfs:!0})};vs.bfs=vs.breadthFirstSearch;vs.dfs=vs.depthFirstSearch;var VN=z1(function(t,e){(function(){var n,r,i,o,a,s,u,l,c,d,f,h,p,m,g;i=Math.floor,d=Math.min,r=function(v,y){return v<y?-1:v>y?1:0},c=function(v,y,w,b,I){var E;if(w==null&&(w=0),I==null&&(I=r),w<0)throw new Error("lo must be non-negative");for(b==null&&(b=v.length);w<b;)E=i((w+b)/2),I(y,v[E])<0?b=E:w=E+1;return[].splice.apply(v,[w,w-w].concat(y)),y},s=function(v,y,w){return w==null&&(w=r),v.push(y),m(v,0,v.length-1,w)},a=function(v,y){var w,b;return y==null&&(y=r),w=v.pop(),v.length?(b=v[0],v[0]=w,g(v,0,y)):b=w,b},l=function(v,y,w){var b;return w==null&&(w=r),b=v[0],v[0]=y,g(v,0,w),b},u=function(v,y,w){var b;return w==null&&(w=r),v.length&&w(v[0],y)<0&&(b=[v[0],y],y=b[0],v[0]=b[1],g(v,0,w)),y},o=function(v,y){var w,b,I,E,D,S;for(y==null&&(y=r),E=function(){S=[];for(var C=0,A=i(v.length/2);0<=A?C<A:C>A;0<=A?C++:C--)S.push(C);return S}.apply(this).reverse(),D=[],b=0,I=E.length;b<I;b++)w=E[b],D.push(g(v,w,y));return D},p=function(v,y,w){var b;if(w==null&&(w=r),b=v.indexOf(y),b!==-1)return m(v,0,b,w),g(v,b,w)},f=function(v,y,w){var b,I,E,D,S;if(w==null&&(w=r),I=v.slice(0,y),!I.length)return I;for(o(I,w),S=v.slice(y),E=0,D=S.length;E<D;E++)b=S[E],u(I,b,w);return I.sort(w).reverse()},h=function(v,y,w){var b,I,E,D,S,C,A,M,N;if(w==null&&(w=r),y*10<=v.length){if(E=v.slice(0,y).sort(w),!E.length)return E;for(I=E[E.length-1],A=v.slice(y),D=0,C=A.length;D<C;D++)b=A[D],w(b,I)<0&&(c(E,b,0,null,w),E.pop(),I=E[E.length-1]);return E}for(o(v,w),N=[],S=0,M=d(y,v.length);0<=M?S<M:S>M;0<=M?++S:--S)N.push(a(v,w));return N},m=function(v,y,w,b){var I,E,D;for(b==null&&(b=r),I=v[w];w>y;){if(D=w-1>>1,E=v[D],b(I,E)<0){v[w]=E,w=D;continue}break}return v[w]=I},g=function(v,y,w){var b,I,E,D,S;for(w==null&&(w=r),I=v.length,S=y,E=v[y],b=2*y+1;b<I;)D=b+1,D<I&&!(w(v[b],v[D])<0)&&(b=D),v[y]=v[b],y=b,b=2*y+1;return v[y]=E,m(v,S,y,w)},n=function(){v.push=s,v.pop=a,v.replace=l,v.pushpop=u,v.heapify=o,v.updateItem=p,v.nlargest=f,v.nsmallest=h;function v(y){this.cmp=y??r,this.nodes=[]}return v.prototype.push=function(y){return s(this.nodes,y,this.cmp)},v.prototype.pop=function(){return a(this.nodes,this.cmp)},v.prototype.peek=function(){return this.nodes[0]},v.prototype.contains=function(y){return this.nodes.indexOf(y)!==-1},v.prototype.replace=function(y){return l(this.nodes,y,this.cmp)},v.prototype.pushpop=function(y){return u(this.nodes,y,this.cmp)},v.prototype.heapify=function(){return o(this.nodes,this.cmp)},v.prototype.updateItem=function(y){return p(this.nodes,y,this.cmp)},v.prototype.clear=function(){return this.nodes=[]},v.prototype.empty=function(){return this.nodes.length===0},v.prototype.size=function(){return this.nodes.length},v.prototype.clone=function(){var y;return y=new v,y.nodes=this.nodes.slice(0),y},v.prototype.toArray=function(){return this.nodes.slice(0)},v.prototype.insert=v.prototype.push,v.prototype.top=v.prototype.peek,v.prototype.front=v.prototype.peek,v.prototype.has=v.prototype.contains,v.prototype.copy=v.prototype.clone,v}(),function(v,y){return t.exports=y()}(this,function(){return n})}).call(as)}),Ts=VN,$N=Pt({root:null,weight:function(e){return 1},directed:!1}),jN={dijkstra:function(e){if(!He(e)){var n=arguments;e={root:n[0],weight:n[1],directed:n[2]}}var r=$N(e),i=r.root,o=r.weight,a=r.directed,s=this,u=o,l=pe(i)?this.filter(i)[0]:i[0],c={},d={},f={},h=this.byGroup(),p=h.nodes,m=h.edges;m.unmergeBy(function(O){return O.isLoop()});for(var g=function(_){return c[_.id()]},v=function(_,k){c[_.id()]=k,y.updateItem(_)},y=new Ts(function(O,_){return g(O)-g(_)}),w=0;w<p.length;w++){var b=p[w];c[b.id()]=b.same(l)?0:1/0,y.push(b)}for(var I=function(_,k){for(var P=(a?_.edgesTo(k):_.edgesWith(k)).intersect(m),V=1/0,z,B=0;B<P.length;B++){var $=P[B],W=u($);(W<V||!z)&&(V=W,z=$)}return{edge:z,dist:V}};y.size()>0;){var E=y.pop(),D=g(E),S=E.id();if(f[S]=D,D!==1/0)for(var C=E.neighborhood().intersect(p),A=0;A<C.length;A++){var M=C[A],N=M.id(),R=I(E,M),T=D+R.dist;T<g(M)&&(v(M,T),d[N]={node:E,edge:R.edge})}}return{distanceTo:function(_){var k=pe(_)?p.filter(_)[0]:_[0];return f[k.id()]},pathTo:function(_){var k=pe(_)?p.filter(_)[0]:_[0],P=[],V=k,z=V.id();if(k.length>0)for(P.unshift(k);d[z];){var B=d[z];P.unshift(B.edge),P.unshift(B.node),V=B.node,z=V.id()}return s.spawn(P)}}}},HN={kruskal:function(e){e=e||function(w){return 1};for(var n=this.byGroup(),r=n.nodes,i=n.edges,o=r.length,a=new Array(o),s=r,u=function(b){for(var I=0;I<a.length;I++){var E=a[I];if(E.has(b))return I}},l=0;l<o;l++)a[l]=this.spawn(r[l]);for(var c=i.sort(function(w,b){return e(w)-e(b)}),d=0;d<c.length;d++){var f=c[d],h=f.source()[0],p=f.target()[0],m=u(h),g=u(p),v=a[m],y=a[g];m!==g&&(s.merge(f),v.merge(y),a.splice(g,1))}return s}},zN=Pt({root:null,goal:null,weight:function(e){return 1},heuristic:function(e){return 0},directed:!1}),UN={aStar:function(e){var n=this.cy(),r=zN(e),i=r.root,o=r.goal,a=r.heuristic,s=r.directed,u=r.weight;i=n.collection(i)[0],o=n.collection(o)[0];var l=i.id(),c=o.id(),d={},f={},h={},p=new Ts(function(z,B){return f[z.id()]-f[B.id()]}),m=new jo,g={},v={},y=function(B,$){p.push(B),m.add($)},w,b,I=function(){w=p.pop(),b=w.id(),m.delete(b)},E=function(B){return m.has(B)};y(i,l),d[l]=0,f[l]=a(i);for(var D=0;p.size()>0;){if(I(),D++,b===c){for(var S=[],C=o,A=c,M=v[A];S.unshift(C),M!=null&&S.unshift(M),C=g[A],C!=null;)A=C.id(),M=v[A];return{found:!0,distance:d[b],path:this.spawn(S),steps:D}}h[b]=!0;for(var N=w._private.edges,R=0;R<N.length;R++){var T=N[R];if(this.hasElementWithId(T.id())&&!(s&&T.data("source")!==b)){var O=T.source(),_=T.target(),k=O.id()!==b?O:_,P=k.id();if(this.hasElementWithId(P)&&!h[P]){var V=d[b]+u(T);if(!E(P)){d[P]=V,f[P]=V+a(k),y(k,P),g[P]=w,v[P]=T;continue}V<d[P]&&(d[P]=V,f[P]=V+a(k),g[P]=w,v[P]=T)}}}}return{found:!1,distance:void 0,path:void 0,steps:D}}},qN=Pt({weight:function(e){return 1},directed:!1}),GN={floydWarshall:function(e){for(var n=this.cy(),r=qN(e),i=r.weight,o=r.directed,a=i,s=this.byGroup(),u=s.nodes,l=s.edges,c=u.length,d=c*c,f=function(W){return u.indexOf(W)},h=function(W){return u[W]},p=new Array(d),m=0;m<d;m++){var g=m%c,v=(m-g)/c;v===g?p[m]=0:p[m]=1/0}for(var y=new Array(d),w=new Array(d),b=0;b<l.length;b++){var I=l[b],E=I.source()[0],D=I.target()[0];if(E!==D){var S=f(E),C=f(D),A=S*c+C,M=a(I);if(p[A]>M&&(p[A]=M,y[A]=C,w[A]=I),!o){var N=C*c+S;!o&&p[N]>M&&(p[N]=M,y[N]=S,w[N]=I)}}}for(var R=0;R<c;R++)for(var T=0;T<c;T++)for(var O=T*c+R,_=0;_<c;_++){var k=T*c+_,P=R*c+_;p[O]+p[P]<p[k]&&(p[k]=p[O]+p[P],y[k]=y[O])}var V=function(W){return(pe(W)?n.filter(W):W)[0]},z=function(W){return f(V(W))},B={distance:function(W,K){var Q=z(W),X=z(K);return p[Q*c+X]},path:function(W,K){var Q=z(W),X=z(K),J=h(Q);if(Q===X)return J.collection();if(y[Q*c+X]==null)return n.collection();var q=n.collection(),L=Q,U;for(q.merge(J);Q!==X;)L=Q,Q=y[Q*c+X],U=w[L*c+Q],q.merge(U),q.merge(h(Q));return q}};return B}},WN=Pt({weight:function(e){return 1},directed:!1,root:null}),ZN={bellmanFord:function(e){var n=this,r=WN(e),i=r.weight,o=r.directed,a=r.root,s=i,u=this,l=this.cy(),c=this.byGroup(),d=c.edges,f=c.nodes,h=f.length,p=new er,m=!1,g=[];a=l.collection(a)[0],d.unmergeBy(function(ce){return ce.isLoop()});for(var v=d.length,y=function(se){var ge=p.get(se.id());return ge||(ge={},p.set(se.id(),ge)),ge},w=function(se){return(pe(se)?l.$(se):se)[0]},b=function(se){return y(w(se)).dist},I=function(se){for(var ge=arguments.length>1&&arguments[1]!==void 0?arguments[1]:a,Ke=w(se),$e=[],Re=Ke;;){if(Re==null)return n.spawn();var Qe=y(Re),ke=Qe.edge,qe=Qe.pred;if($e.unshift(Re[0]),Re.same(ge)&&$e.length>0)break;ke!=null&&$e.unshift(ke),Re=qe}return u.spawn($e)},E=0;E<h;E++){var D=f[E],S=y(D);D.same(a)?S.dist=0:S.dist=1/0,S.pred=null,S.edge=null}for(var C=!1,A=function(se,ge,Ke,$e,Re,Qe){var ke=$e.dist+Qe;ke<Re.dist&&!Ke.same($e.edge)&&(Re.dist=ke,Re.pred=se,Re.edge=Ke,C=!0)},M=1;M<h;M++){C=!1;for(var N=0;N<v;N++){var R=d[N],T=R.source(),O=R.target(),_=s(R),k=y(T),P=y(O);A(T,O,R,k,P,_),o||A(O,T,R,P,k,_)}if(!C)break}if(C)for(var V=[],z=0;z<v;z++){var B=d[z],$=B.source(),W=B.target(),K=s(B),Q=y($).dist,X=y(W).dist;if(Q+K<X||!o&&X+K<Q)if(m||(Ye("Graph contains a negative weight cycle for Bellman-Ford"),m=!0),e.findNegativeWeightCycles!==!1){var J=[];Q+K<X&&J.push($),!o&&X+K<Q&&J.push(W);for(var q=J.length,L=0;L<q;L++){var U=J[L],Z=[U];Z.push(y(U).edge);for(var re=y(U).pred;Z.indexOf(re)===-1;)Z.push(re),Z.push(y(re).edge),re=y(re).pred;Z=Z.slice(Z.indexOf(re));for(var ve=Z[0].id(),ne=0,te=2;te<Z.length;te+=2)Z[te].id()<ve&&(ve=Z[te].id(),ne=te);Z=Z.slice(ne).concat(Z.slice(0,ne)),Z.push(Z[0]);var de=Z.map(function(ce){return ce.id()}).join(",");V.indexOf(de)===-1&&(g.push(u.spawn(Z)),V.push(de))}}else break}return{distanceTo:b,pathTo:I,hasNegativeWeightCycle:m,negativeWeightCycles:g}}},YN=Math.sqrt(2),KN=function(e,n,r){r.length===0&&dt("Karger-Stein must be run on a connected (sub)graph");for(var i=r[e],o=i[1],a=i[2],s=n[o],u=n[a],l=r,c=l.length-1;c>=0;c--){var d=l[c],f=d[1],h=d[2];(n[f]===s&&n[h]===u||n[f]===u&&n[h]===s)&&l.splice(c,1)}for(var p=0;p<l.length;p++){var m=l[p];m[1]===u?(l[p]=m.slice(),l[p][1]=s):m[2]===u&&(l[p]=m.slice(),l[p][2]=s)}for(var g=0;g<n.length;g++)n[g]===u&&(n[g]=s);return l},Vh=function(e,n,r,i){for(;r>i;){var o=Math.floor(Math.random()*n.length);n=KN(o,e,n),r--}return n},QN={kargerStein:function(){var e=this,n=this.byGroup(),r=n.nodes,i=n.edges;i.unmergeBy(function(P){return P.isLoop()});var o=r.length,a=i.length,s=Math.ceil(Math.pow(Math.log(o)/Math.LN2,2)),u=Math.floor(o/YN);if(o<2){dt("At least 2 nodes are required for Karger-Stein algorithm");return}for(var l=[],c=0;c<a;c++){var d=i[c];l.push([c,r.indexOf(d.source()),r.indexOf(d.target())])}for(var f=1/0,h=[],p=new Array(o),m=new Array(o),g=new Array(o),v=function(V,z){for(var B=0;B<o;B++)z[B]=V[B]},y=0;y<=s;y++){for(var w=0;w<o;w++)m[w]=w;var b=Vh(m,l.slice(),o,u),I=b.slice();v(m,g);var E=Vh(m,b,u,2),D=Vh(g,I,u,2);E.length<=D.length&&E.length<f?(f=E.length,h=E,v(m,p)):D.length<=E.length&&D.length<f&&(f=D.length,h=D,v(g,p))}for(var S=this.spawn(h.map(function(P){return i[P[0]]})),C=this.spawn(),A=this.spawn(),M=p[0],N=0;N<p.length;N++){var R=p[N],T=r[N];R===M?C.merge(T):A.merge(T)}var O=function(V){var z=e.spawn();return V.forEach(function(B){z.merge(B),B.connectedEdges().forEach(function($){e.contains($)&&!S.contains($)&&z.merge($)})}),z},_=[O(C),O(A)],k={cut:S,components:_,partition1:C,partition2:A};return k}},XN=function(e){return{x:e.x,y:e.y}},oc=function(e,n,r){return{x:e.x*n+r.x,y:e.y*n+r.y}},wb=function(e,n,r){return{x:(e.x-r.x)/n,y:(e.y-r.y)/n}},Ro=function(e){return{x:e[0],y:e[1]}},JN=function(e){for(var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,i=1/0,o=n;o<r;o++){var a=e[o];isFinite(a)&&(i=Math.min(a,i))}return i},eA=function(e){for(var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,i=-1/0,o=n;o<r;o++){var a=e[o];isFinite(a)&&(i=Math.max(a,i))}return i},tA=function(e){for(var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,i=0,o=0,a=n;a<r;a++){var s=e[a];isFinite(s)&&(i+=s,o++)}return i/o},nA=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0;i?e=e.slice(n,r):(r<e.length&&e.splice(r,e.length-r),n>0&&e.splice(0,n));for(var s=0,u=e.length-1;u>=0;u--){var l=e[u];a?isFinite(l)||(e[u]=-1/0,s++):e.splice(u,1)}o&&e.sort(function(f,h){return f-h});var c=e.length,d=Math.floor(c/2);return c%2!==0?e[d+1+s]:(e[d-1+s]+e[d+s])/2},rA=function(e){return Math.PI*e/180},Il=function(e,n){return Math.atan2(n,e)-Math.PI/2},wp=Math.log2||function(t){return Math.log(t)/Math.log(2)},bb=function(e){return e>0?1:e<0?-1:0},Si=function(e,n){return Math.sqrt(yi(e,n))},yi=function(e,n){var r=n.x-e.x,i=n.y-e.y;return r*r+i*i},iA=function(e){for(var n=e.length,r=0,i=0;i<n;i++)r+=e[i];for(var o=0;o<n;o++)e[o]=e[o]/r;return e},Tt=function(e,n,r,i){return(1-i)*(1-i)*e+2*(1-i)*i*n+i*i*r},ko=function(e,n,r,i){return{x:Tt(e.x,n.x,r.x,i),y:Tt(e.y,n.y,r.y,i)}},oA=function(e,n,r,i){var o={x:n.x-e.x,y:n.y-e.y},a=Si(e,n),s={x:o.x/a,y:o.y/a};return r=r??0,i=i??r*a,{x:e.x+s.x*i,y:e.y+s.y*i}},ms=function(e,n,r){return Math.max(e,Math.min(r,n))},en=function(e){if(e==null)return{x1:1/0,y1:1/0,x2:-1/0,y2:-1/0,w:0,h:0};if(e.x1!=null&&e.y1!=null){if(e.x2!=null&&e.y2!=null&&e.x2>=e.x1&&e.y2>=e.y1)return{x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,w:e.x2-e.x1,h:e.y2-e.y1};if(e.w!=null&&e.h!=null&&e.w>=0&&e.h>=0)return{x1:e.x1,y1:e.y1,x2:e.x1+e.w,y2:e.y1+e.h,w:e.w,h:e.h}}},aA=function(e){return{x1:e.x1,x2:e.x2,w:e.w,y1:e.y1,y2:e.y2,h:e.h}},sA=function(e){e.x1=1/0,e.y1=1/0,e.x2=-1/0,e.y2=-1/0,e.w=0,e.h=0},uA=function(e,n,r){return{x1:e.x1+n,x2:e.x2+n,y1:e.y1+r,y2:e.y2+r,w:e.w,h:e.h}},Db=function(e,n){e.x1=Math.min(e.x1,n.x1),e.x2=Math.max(e.x2,n.x2),e.w=e.x2-e.x1,e.y1=Math.min(e.y1,n.y1),e.y2=Math.max(e.y2,n.y2),e.h=e.y2-e.y1},lA=function(e,n,r){e.x1=Math.min(e.x1,n),e.x2=Math.max(e.x2,n),e.w=e.x2-e.x1,e.y1=Math.min(e.y1,r),e.y2=Math.max(e.y2,r),e.h=e.y2-e.y1},Pl=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return e.x1-=n,e.x2+=n,e.y1-=n,e.y2+=n,e.w=e.x2-e.x1,e.h=e.y2-e.y1,e},Ll=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0],r,i,o,a;if(n.length===1)r=i=o=a=n[0];else if(n.length===2)r=o=n[0],a=i=n[1];else if(n.length===4){var s=Bn(n,4);r=s[0],i=s[1],o=s[2],a=s[3]}return e.x1-=a,e.x2+=i,e.y1-=r,e.y2+=o,e.w=e.x2-e.x1,e.h=e.y2-e.y1,e},Z0=function(e,n){e.x1=n.x1,e.y1=n.y1,e.x2=n.x2,e.y2=n.y2,e.w=e.x2-e.x1,e.h=e.y2-e.y1},bp=function(e,n){return!(e.x1>n.x2||n.x1>e.x2||e.x2<n.x1||n.x2<e.x1||e.y2<n.y1||n.y2<e.y1||e.y1>n.y2||n.y1>e.y2)},Bo=function(e,n,r){return e.x1<=n&&n<=e.x2&&e.y1<=r&&r<=e.y2},cA=function(e,n){return Bo(e,n.x,n.y)},Eb=function(e,n){return Bo(e,n.x1,n.y1)&&Bo(e,n.x2,n.y2)},Cb=function(e,n,r,i,o,a,s){var u=arguments.length>7&&arguments[7]!==void 0?arguments[7]:"auto",l=u==="auto"?xi(o,a):u,c=o/2,d=a/2;l=Math.min(l,c,d);var f=l!==c,h=l!==d,p;if(f){var m=r-c+l-s,g=i-d-s,v=r+c-l+s,y=g;if(p=Fr(e,n,r,i,m,g,v,y,!1),p.length>0)return p}if(h){var w=r+c+s,b=i-d+l-s,I=w,E=i+d-l+s;if(p=Fr(e,n,r,i,w,b,I,E,!1),p.length>0)return p}if(f){var D=r-c+l-s,S=i+d+s,C=r+c-l+s,A=S;if(p=Fr(e,n,r,i,D,S,C,A,!1),p.length>0)return p}if(h){var M=r-c-s,N=i-d+l-s,R=M,T=i+d-l+s;if(p=Fr(e,n,r,i,M,N,R,T,!1),p.length>0)return p}var O;{var _=r-c+l,k=i-d+l;if(O=us(e,n,r,i,_,k,l+s),O.length>0&&O[0]<=_&&O[1]<=k)return[O[0],O[1]]}{var P=r+c-l,V=i-d+l;if(O=us(e,n,r,i,P,V,l+s),O.length>0&&O[0]>=P&&O[1]<=V)return[O[0],O[1]]}{var z=r+c-l,B=i+d-l;if(O=us(e,n,r,i,z,B,l+s),O.length>0&&O[0]>=z&&O[1]>=B)return[O[0],O[1]]}{var $=r-c+l,W=i+d-l;if(O=us(e,n,r,i,$,W,l+s),O.length>0&&O[0]<=$&&O[1]>=W)return[O[0],O[1]]}return[]},dA=function(e,n,r,i,o,a,s){var u=s,l=Math.min(r,o),c=Math.max(r,o),d=Math.min(i,a),f=Math.max(i,a);return l-u<=e&&e<=c+u&&d-u<=n&&n<=f+u},fA=function(e,n,r,i,o,a,s,u,l){var c={x1:Math.min(r,s,o)-l,x2:Math.max(r,s,o)+l,y1:Math.min(i,u,a)-l,y2:Math.max(i,u,a)+l};return!(e<c.x1||e>c.x2||n<c.y1||n>c.y2)},hA=function(e,n,r,i){r-=i;var o=n*n-4*e*r;if(o<0)return[];var a=Math.sqrt(o),s=2*e,u=(-n+a)/s,l=(-n-a)/s;return[u,l]},pA=function(e,n,r,i,o){var a=1e-5;e===0&&(e=a),n/=e,r/=e,i/=e;var s,u,l,c,d,f,h,p;if(u=(3*r-n*n)/9,l=-(27*i)+n*(9*r-2*(n*n)),l/=54,s=u*u*u+l*l,o[1]=0,h=n/3,s>0){d=l+Math.sqrt(s),d=d<0?-Math.pow(-d,1/3):Math.pow(d,1/3),f=l-Math.sqrt(s),f=f<0?-Math.pow(-f,1/3):Math.pow(f,1/3),o[0]=-h+d+f,h+=(d+f)/2,o[4]=o[2]=-h,h=Math.sqrt(3)*(-f+d)/2,o[3]=h,o[5]=-h;return}if(o[5]=o[3]=0,s===0){p=l<0?-Math.pow(-l,1/3):Math.pow(l,1/3),o[0]=-h+2*p,o[4]=o[2]=-(p+h);return}u=-u,c=u*u*u,c=Math.acos(l/Math.sqrt(c)),p=2*Math.sqrt(u),o[0]=-h+p*Math.cos(c/3),o[2]=-h+p*Math.cos((c+2*Math.PI)/3),o[4]=-h+p*Math.cos((c+4*Math.PI)/3)},gA=function(e,n,r,i,o,a,s,u){var l=1*r*r-4*r*o+2*r*s+4*o*o-4*o*s+s*s+i*i-4*i*a+2*i*u+4*a*a-4*a*u+u*u,c=1*9*r*o-3*r*r-3*r*s-6*o*o+3*o*s+9*i*a-3*i*i-3*i*u-6*a*a+3*a*u,d=1*3*r*r-6*r*o+r*s-r*e+2*o*o+2*o*e-s*e+3*i*i-6*i*a+i*u-i*n+2*a*a+2*a*n-u*n,f=1*r*o-r*r+r*e-o*e+i*a-i*i+i*n-a*n,h=[];pA(l,c,d,f,h);for(var p=1e-7,m=[],g=0;g<6;g+=2)Math.abs(h[g+1])<p&&h[g]>=0&&h[g]<=1&&m.push(h[g]);m.push(1),m.push(0);for(var v=-1,y,w,b,I=0;I<m.length;I++)y=Math.pow(1-m[I],2)*r+2*(1-m[I])*m[I]*o+m[I]*m[I]*s,w=Math.pow(1-m[I],2)*i+2*(1-m[I])*m[I]*a+m[I]*m[I]*u,b=Math.pow(y-e,2)+Math.pow(w-n,2),v>=0?b<v&&(v=b):v=b;return v},vA=function(e,n,r,i,o,a){var s=[e-r,n-i],u=[o-r,a-i],l=u[0]*u[0]+u[1]*u[1],c=s[0]*s[0]+s[1]*s[1],d=s[0]*u[0]+s[1]*u[1],f=d*d/l;return d<0?c:f>l?(e-o)*(e-o)+(n-a)*(n-a):c-f},Jt=function(e,n,r){for(var i,o,a,s,u,l=0,c=0;c<r.length/2;c++)if(i=r[c*2],o=r[c*2+1],c+1<r.length/2?(a=r[(c+1)*2],s=r[(c+1)*2+1]):(a=r[(c+1-r.length/2)*2],s=r[(c+1-r.length/2)*2+1]),!(i==e&&a==e))if(i>=e&&e>=a||i<=e&&e<=a)u=(e-i)/(a-i)*(s-o)+o,u>n&&l++;else continue;return l%2!==0},mr=function(e,n,r,i,o,a,s,u,l){var c=new Array(r.length),d;u[0]!=null?(d=Math.atan(u[1]/u[0]),u[0]<0?d=d+Math.PI/2:d=-d-Math.PI/2):d=u;for(var f=Math.cos(-d),h=Math.sin(-d),p=0;p<c.length/2;p++)c[p*2]=a/2*(r[p*2]*f-r[p*2+1]*h),c[p*2+1]=s/2*(r[p*2+1]*f+r[p*2]*h),c[p*2]+=i,c[p*2+1]+=o;var m;if(l>0){var g=Zl(c,-l);m=Wl(g)}else m=c;return Jt(e,n,m)},mA=function(e,n,r,i,o,a,s,u){for(var l=new Array(r.length*2),c=0;c<u.length;c++){var d=u[c];l[c*4+0]=d.startX,l[c*4+1]=d.startY,l[c*4+2]=d.stopX,l[c*4+3]=d.stopY;var f=Math.pow(d.cx-e,2)+Math.pow(d.cy-n,2);if(f<=Math.pow(d.radius,2))return!0}return Jt(e,n,l)},Wl=function(e){for(var n=new Array(e.length/2),r,i,o,a,s,u,l,c,d=0;d<e.length/4;d++){r=e[d*4],i=e[d*4+1],o=e[d*4+2],a=e[d*4+3],d<e.length/4-1?(s=e[(d+1)*4],u=e[(d+1)*4+1],l=e[(d+1)*4+2],c=e[(d+1)*4+3]):(s=e[0],u=e[1],l=e[2],c=e[3]);var f=Fr(r,i,o,a,s,u,l,c,!0);n[d*2]=f[0],n[d*2+1]=f[1]}return n},Zl=function(e,n){for(var r=new Array(e.length*2),i,o,a,s,u=0;u<e.length/2;u++){i=e[u*2],o=e[u*2+1],u<e.length/2-1?(a=e[(u+1)*2],s=e[(u+1)*2+1]):(a=e[0],s=e[1]);var l=s-o,c=-(a-i),d=Math.sqrt(l*l+c*c),f=l/d,h=c/d;r[u*4]=i+f*n,r[u*4+1]=o+h*n,r[u*4+2]=a+f*n,r[u*4+3]=s+h*n}return r},yA=function(e,n,r,i,o,a){var s=r-e,u=i-n;s/=o,u/=a;var l=Math.sqrt(s*s+u*u),c=l-1;if(c<0)return[];var d=c/l;return[(r-e)*d+e,(i-n)*d+n]},Ei=function(e,n,r,i,o,a,s){return e-=o,n-=a,e/=r/2+s,n/=i/2+s,e*e+n*n<=1},us=function(e,n,r,i,o,a,s){var u=[r-e,i-n],l=[e-o,n-a],c=u[0]*u[0]+u[1]*u[1],d=2*(l[0]*u[0]+l[1]*u[1]),f=l[0]*l[0]+l[1]*l[1]-s*s,h=d*d-4*c*f;if(h<0)return[];var p=(-d+Math.sqrt(h))/(2*c),m=(-d-Math.sqrt(h))/(2*c),g=Math.min(p,m),v=Math.max(p,m),y=[];if(g>=0&&g<=1&&y.push(g),v>=0&&v<=1&&y.push(v),y.length===0)return[];var w=y[0]*u[0]+e,b=y[0]*u[1]+n;if(y.length>1){if(y[0]==y[1])return[w,b];var I=y[1]*u[0]+e,E=y[1]*u[1]+n;return[w,b,I,E]}else return[w,b]},$h=function(e,n,r){return n<=e&&e<=r||r<=e&&e<=n?e:e<=n&&n<=r||r<=n&&n<=e?n:r},Fr=function(e,n,r,i,o,a,s,u,l){var c=e-o,d=r-e,f=s-o,h=n-a,p=i-n,m=u-a,g=f*h-m*c,v=d*h-p*c,y=m*d-f*p;if(y!==0){var w=g/y,b=v/y,I=.001,E=0-I,D=1+I;return E<=w&&w<=D&&E<=b&&b<=D?[e+w*d,n+w*p]:l?[e+w*d,n+w*p]:[]}else return g===0||v===0?$h(e,r,s)===s?[s,u]:$h(e,r,o)===o?[o,a]:$h(o,s,r)===r?[r,i]:[]:[]},ys=function(e,n,r,i,o,a,s,u){var l=[],c,d=new Array(r.length),f=!0;a==null&&(f=!1);var h;if(f){for(var p=0;p<d.length/2;p++)d[p*2]=r[p*2]*a+i,d[p*2+1]=r[p*2+1]*s+o;if(u>0){var m=Zl(d,-u);h=Wl(m)}else h=d}else h=r;for(var g,v,y,w,b=0;b<h.length/2;b++)g=h[b*2],v=h[b*2+1],b<h.length/2-1?(y=h[(b+1)*2],w=h[(b+1)*2+1]):(y=h[0],w=h[1]),c=Fr(e,n,i,o,g,v,y,w),c.length!==0&&l.push(c[0],c[1]);return l},wA=function(e,n,r,i,o,a,s,u,l){var c=[],d,f=new Array(r.length*2);l.forEach(function(y,w){w===0?(f[f.length-2]=y.startX,f[f.length-1]=y.startY):(f[w*4-2]=y.startX,f[w*4-1]=y.startY),f[w*4]=y.stopX,f[w*4+1]=y.stopY,d=us(e,n,i,o,y.cx,y.cy,y.radius),d.length!==0&&c.push(d[0],d[1])});for(var h=0;h<f.length/4;h++)d=Fr(e,n,i,o,f[h*4],f[h*4+1],f[h*4+2],f[h*4+3],!1),d.length!==0&&c.push(d[0],d[1]);if(c.length>2){for(var p=[c[0],c[1]],m=Math.pow(p[0]-e,2)+Math.pow(p[1]-n,2),g=1;g<c.length/2;g++){var v=Math.pow(c[g*2]-e,2)+Math.pow(c[g*2+1]-n,2);v<=m&&(p[0]=c[g*2],p[1]=c[g*2+1],m=v)}return p}return c},Sl=function(e,n,r){var i=[e[0]-n[0],e[1]-n[1]],o=Math.sqrt(i[0]*i[0]+i[1]*i[1]),a=(o-r)/o;return a<0&&(a=1e-5),[n[0]+a*i[0],n[1]+a*i[1]]},Kt=function(e,n){var r=Kh(e,n);return r=Ib(r),r},Ib=function(e){for(var n,r,i=e.length/2,o=1/0,a=1/0,s=-1/0,u=-1/0,l=0;l<i;l++)n=e[2*l],r=e[2*l+1],o=Math.min(o,n),s=Math.max(s,n),a=Math.min(a,r),u=Math.max(u,r);for(var c=2/(s-o),d=2/(u-a),f=0;f<i;f++)n=e[2*f]=e[2*f]*c,r=e[2*f+1]=e[2*f+1]*d,o=Math.min(o,n),s=Math.max(s,n),a=Math.min(a,r),u=Math.max(u,r);if(a<-1)for(var h=0;h<i;h++)r=e[2*h+1]=e[2*h+1]+(-1-a);return e},Kh=function(e,n){var r=1/e*2*Math.PI,i=e%2===0?Math.PI/2+r/2:Math.PI/2;i+=n;for(var o=new Array(e*2),a,s=0;s<e;s++)a=s*r+i,o[2*s]=Math.cos(a),o[2*s+1]=Math.sin(-a);return o},xi=function(e,n){return Math.min(e/4,n/4,8)},Sb=function(e,n){return Math.min(e/10,n/10,8)},Dp=function(){return 8},bA=function(e,n,r){return[e-2*n+r,2*(n-e),e]},Qh=function(e,n){return{heightOffset:Math.min(15,.05*n),widthOffset:Math.min(100,.25*e),ctrlPtOffsetPct:.05}},DA=Pt({dampingFactor:.8,precision:1e-6,iterations:200,weight:function(e){return 1}}),EA={pageRank:function(e){for(var n=DA(e),r=n.dampingFactor,i=n.precision,o=n.iterations,a=n.weight,s=this._private.cy,u=this.byGroup(),l=u.nodes,c=u.edges,d=l.length,f=d*d,h=c.length,p=new Array(f),m=new Array(d),g=(1-r)/d,v=0;v<d;v++){for(var y=0;y<d;y++){var w=v*d+y;p[w]=0}m[v]=0}for(var b=0;b<h;b++){var I=c[b],E=I.data("source"),D=I.data("target");if(E!==D){var S=l.indexOfId(E),C=l.indexOfId(D),A=a(I),M=C*d+S;p[M]+=A,m[S]+=A}}for(var N=1/d+g,R=0;R<d;R++)if(m[R]===0)for(var T=0;T<d;T++){var O=T*d+R;p[O]=N}else for(var _=0;_<d;_++){var k=_*d+R;p[k]=p[k]/m[R]+g}for(var P=new Array(d),V=new Array(d),z,B=0;B<d;B++)P[B]=1;for(var $=0;$<o;$++){for(var W=0;W<d;W++)V[W]=0;for(var K=0;K<d;K++)for(var Q=0;Q<d;Q++){var X=K*d+Q;V[K]+=p[X]*P[Q]}iA(V),z=P,P=V,V=z;for(var J=0,q=0;q<d;q++){var L=z[q]-P[q];J+=L*L}if(J<i)break}var U={rank:function(re){return re=s.collection(re)[0],P[l.indexOf(re)]}};return U}},Y0=Pt({root:null,weight:function(e){return 1},directed:!1,alpha:0}),Oo={degreeCentralityNormalized:function(e){e=Y0(e);var n=this.cy(),r=this.nodes(),i=r.length;if(e.directed){for(var c={},d={},f=0,h=0,p=0;p<i;p++){var m=r[p],g=m.id();e.root=m;var v=this.degreeCentrality(e);f<v.indegree&&(f=v.indegree),h<v.outdegree&&(h=v.outdegree),c[g]=v.indegree,d[g]=v.outdegree}return{indegree:function(w){return f==0?0:(pe(w)&&(w=n.filter(w)),c[w.id()]/f)},outdegree:function(w){return h===0?0:(pe(w)&&(w=n.filter(w)),d[w.id()]/h)}}}else{for(var o={},a=0,s=0;s<i;s++){var u=r[s];e.root=u;var l=this.degreeCentrality(e);a<l.degree&&(a=l.degree),o[u.id()]=l.degree}return{degree:function(w){return a===0?0:(pe(w)&&(w=n.filter(w)),o[w.id()]/a)}}}},degreeCentrality:function(e){e=Y0(e);var n=this.cy(),r=this,i=e,o=i.root,a=i.weight,s=i.directed,u=i.alpha;if(o=n.collection(o)[0],s){for(var h=o.connectedEdges(),p=h.filter(function(E){return E.target().same(o)&&r.has(E)}),m=h.filter(function(E){return E.source().same(o)&&r.has(E)}),g=p.length,v=m.length,y=0,w=0,b=0;b<p.length;b++)y+=a(p[b]);for(var I=0;I<m.length;I++)w+=a(m[I]);return{indegree:Math.pow(g,1-u)*Math.pow(y,u),outdegree:Math.pow(v,1-u)*Math.pow(w,u)}}else{for(var l=o.connectedEdges().intersection(r),c=l.length,d=0,f=0;f<l.length;f++)d+=a(l[f]);return{degree:Math.pow(c,1-u)*Math.pow(d,u)}}}};Oo.dc=Oo.degreeCentrality;Oo.dcn=Oo.degreeCentralityNormalised=Oo.degreeCentralityNormalized;var K0=Pt({harmonic:!0,weight:function(){return 1},directed:!1,root:null}),Po={closenessCentralityNormalized:function(e){for(var n=K0(e),r=n.harmonic,i=n.weight,o=n.directed,a=this.cy(),s={},u=0,l=this.nodes(),c=this.floydWarshall({weight:i,directed:o}),d=0;d<l.length;d++){for(var f=0,h=l[d],p=0;p<l.length;p++)if(d!==p){var m=c.distance(h,l[p]);r?f+=1/m:f+=m}r||(f=1/f),u<f&&(u=f),s[h.id()]=f}return{closeness:function(v){return u==0?0:(pe(v)?v=a.filter(v)[0].id():v=v.id(),s[v]/u)}}},closenessCentrality:function(e){var n=K0(e),r=n.root,i=n.weight,o=n.directed,a=n.harmonic;r=this.filter(r)[0];for(var s=this.dijkstra({root:r,weight:i,directed:o}),u=0,l=this.nodes(),c=0;c<l.length;c++){var d=l[c];if(!d.same(r)){var f=s.distanceTo(d);a?u+=1/f:u+=f}}return a?u:1/u}};Po.cc=Po.closenessCentrality;Po.ccn=Po.closenessCentralityNormalised=Po.closenessCentralityNormalized;var CA=Pt({weight:null,directed:!1}),Xh={betweennessCentrality:function(e){for(var n=CA(e),r=n.directed,i=n.weight,o=i!=null,a=this.cy(),s=this.nodes(),u={},l={},c=0,d={set:function(w,b){l[w]=b,b>c&&(c=b)},get:function(w){return l[w]}},f=0;f<s.length;f++){var h=s[f],p=h.id();r?u[p]=h.outgoers().nodes():u[p]=h.openNeighborhood().nodes(),d.set(p,0)}for(var m=function(w){for(var b=s[w].id(),I=[],E={},D={},S={},C=new Ts(function(Q,X){return S[Q]-S[X]}),A=0;A<s.length;A++){var M=s[A].id();E[M]=[],D[M]=0,S[M]=1/0}for(D[b]=1,S[b]=0,C.push(b);!C.empty();){var N=C.pop();if(I.push(N),o)for(var R=0;R<u[N].length;R++){var T=u[N][R],O=a.getElementById(N),_=void 0;O.edgesTo(T).length>0?_=O.edgesTo(T)[0]:_=T.edgesTo(O)[0];var k=i(_);T=T.id(),S[T]>S[N]+k&&(S[T]=S[N]+k,C.nodes.indexOf(T)<0?C.push(T):C.updateItem(T),D[T]=0,E[T]=[]),S[T]==S[N]+k&&(D[T]=D[T]+D[N],E[T].push(N))}else for(var P=0;P<u[N].length;P++){var V=u[N][P].id();S[V]==1/0&&(C.push(V),S[V]=S[N]+1),S[V]==S[N]+1&&(D[V]=D[V]+D[N],E[V].push(N))}}for(var z={},B=0;B<s.length;B++)z[s[B].id()]=0;for(;I.length>0;){for(var $=I.pop(),W=0;W<E[$].length;W++){var K=E[$][W];z[K]=z[K]+D[K]/D[$]*(1+z[$])}$!=s[w].id()&&d.set($,d.get($)+z[$])}},g=0;g<s.length;g++)m(g);var v={betweenness:function(w){var b=a.collection(w).id();return d.get(b)},betweennessNormalized:function(w){if(c==0)return 0;var b=a.collection(w).id();return d.get(b)/c}};return v.betweennessNormalised=v.betweennessNormalized,v}};Xh.bc=Xh.betweennessCentrality;var IA=Pt({expandFactor:2,inflateFactor:2,multFactor:1,maxIterations:20,attributes:[function(t){return 1}]}),SA=function(e){return IA(e)},xA=function(e,n){for(var r=0,i=0;i<n.length;i++)r+=n[i](e);return r},TA=function(e,n,r){for(var i=0;i<n;i++)e[i*n+i]=r},xb=function(e,n){for(var r,i=0;i<n;i++){r=0;for(var o=0;o<n;o++)r+=e[o*n+i];for(var a=0;a<n;a++)e[a*n+i]=e[a*n+i]/r}},MA=function(e,n,r){for(var i=new Array(r*r),o=0;o<r;o++){for(var a=0;a<r;a++)i[o*r+a]=0;for(var s=0;s<r;s++)for(var u=0;u<r;u++)i[o*r+u]+=e[o*r+s]*n[s*r+u]}return i},NA=function(e,n,r){for(var i=e.slice(0),o=1;o<r;o++)e=MA(e,i,n);return e},AA=function(e,n,r){for(var i=new Array(n*n),o=0;o<n*n;o++)i[o]=Math.pow(e[o],r);return xb(i,n),i},RA=function(e,n,r,i){for(var o=0;o<r;o++){var a=Math.round(e[o]*Math.pow(10,i))/Math.pow(10,i),s=Math.round(n[o]*Math.pow(10,i))/Math.pow(10,i);if(a!==s)return!1}return!0},_A=function(e,n,r,i){for(var o=[],a=0;a<n;a++){for(var s=[],u=0;u<n;u++)Math.round(e[a*n+u]*1e3)/1e3>0&&s.push(r[u]);s.length!==0&&o.push(i.collection(s))}return o},kA=function(e,n){for(var r=0;r<e.length;r++)if(!n[r]||e[r].id()!==n[r].id())return!1;return!0},OA=function(e){for(var n=0;n<e.length;n++)for(var r=0;r<e.length;r++)n!=r&&kA(e[n],e[r])&&e.splice(r,1);return e},Q0=function(e){for(var n=this.nodes(),r=this.edges(),i=this.cy(),o=SA(e),a={},s=0;s<n.length;s++)a[n[s].id()]=s;for(var u=n.length,l=u*u,c=new Array(l),d,f=0;f<l;f++)c[f]=0;for(var h=0;h<r.length;h++){var p=r[h],m=a[p.source().id()],g=a[p.target().id()],v=xA(p,o.attributes);c[m*u+g]+=v,c[g*u+m]+=v}TA(c,u,o.multFactor),xb(c,u);for(var y=!0,w=0;y&&w<o.maxIterations;)y=!1,d=NA(c,u,o.expandFactor),c=AA(d,u,o.inflateFactor),RA(c,d,l,4)||(y=!0),w++;var b=_A(c,u,n,i);return b=OA(b),b},PA={markovClustering:Q0,mcl:Q0},LA=function(e){return e},Tb=function(e,n){return Math.abs(n-e)},X0=function(e,n,r){return e+Tb(n,r)},J0=function(e,n,r){return e+Math.pow(r-n,2)},FA=function(e){return Math.sqrt(e)},BA=function(e,n,r){return Math.max(e,Tb(n,r))},ns=function(e,n,r,i,o){for(var a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:LA,s=i,u,l,c=0;c<e;c++)u=n(c),l=r(c),s=o(s,u,l);return a(s)},Vo={euclidean:function(e,n,r){return e>=2?ns(e,n,r,0,J0,FA):ns(e,n,r,0,X0)},squaredEuclidean:function(e,n,r){return ns(e,n,r,0,J0)},manhattan:function(e,n,r){return ns(e,n,r,0,X0)},max:function(e,n,r){return ns(e,n,r,-1/0,BA)}};Vo["squared-euclidean"]=Vo.squaredEuclidean;Vo.squaredeuclidean=Vo.squaredEuclidean;function ac(t,e,n,r,i,o){var a;return lt(t)?a=t:a=Vo[t]||Vo.euclidean,e===0&&lt(t)?a(i,o):a(e,n,r,i,o)}var VA=Pt({k:2,m:2,sensitivityThreshold:1e-4,distance:"euclidean",maxIterations:10,attributes:[],testMode:!1,testCentroids:null}),Ep=function(e){return VA(e)},Yl=function(e,n,r,i,o){var a=o!=="kMedoids",s=a?function(d){return r[d]}:function(d){return i[d](r)},u=function(f){return i[f](n)},l=r,c=n;return ac(e,i.length,s,u,l,c)},jh=function(e,n,r){for(var i=r.length,o=new Array(i),a=new Array(i),s=new Array(n),u=null,l=0;l<i;l++)o[l]=e.min(r[l]).value,a[l]=e.max(r[l]).value;for(var c=0;c<n;c++){u=[];for(var d=0;d<i;d++)u[d]=Math.random()*(a[d]-o[d])+o[d];s[c]=u}return s},Mb=function(e,n,r,i,o){for(var a=1/0,s=0,u=0;u<n.length;u++){var l=Yl(r,e,n[u],i,o);l<a&&(a=l,s=u)}return s},Nb=function(e,n,r){for(var i=[],o=null,a=0;a<n.length;a++)o=n[a],r[o.id()]===e&&i.push(o);return i},$A=function(e,n,r){return Math.abs(n-e)<=r},jA=function(e,n,r){for(var i=0;i<e.length;i++)for(var o=0;o<e[i].length;o++){var a=Math.abs(e[i][o]-n[i][o]);if(a>r)return!1}return!0},HA=function(e,n,r){for(var i=0;i<r;i++)if(e===n[i])return!0;return!1},ew=function(e,n){var r=new Array(n);if(e.length<50)for(var i=0;i<n;i++){for(var o=e[Math.floor(Math.random()*e.length)];HA(o,r,i);)o=e[Math.floor(Math.random()*e.length)];r[i]=o}else for(var a=0;a<n;a++)r[a]=e[Math.floor(Math.random()*e.length)];return r},tw=function(e,n,r){for(var i=0,o=0;o<n.length;o++)i+=Yl("manhattan",n[o],e,r,"kMedoids");return i},zA=function(e){var n=this.cy(),r=this.nodes(),i=null,o=Ep(e),a=new Array(o.k),s={},u;o.testMode?typeof o.testCentroids=="number"?(o.testCentroids,u=jh(r,o.k,o.attributes)):Dt(o.testCentroids)==="object"?u=o.testCentroids:u=jh(r,o.k,o.attributes):u=jh(r,o.k,o.attributes);for(var l=!0,c=0;l&&c<o.maxIterations;){for(var d=0;d<r.length;d++)i=r[d],s[i.id()]=Mb(i,u,o.distance,o.attributes,"kMeans");l=!1;for(var f=0;f<o.k;f++){var h=Nb(f,r,s);if(h.length!==0){for(var p=o.attributes.length,m=u[f],g=new Array(p),v=new Array(p),y=0;y<p;y++){v[y]=0;for(var w=0;w<h.length;w++)i=h[w],v[y]+=o.attributes[y](i);g[y]=v[y]/h.length,$A(g[y],m[y],o.sensitivityThreshold)||(l=!0)}u[f]=g,a[f]=n.collection(h)}}c++}return a},UA=function(e){var n=this.cy(),r=this.nodes(),i=null,o=Ep(e),a=new Array(o.k),s,u={},l,c=new Array(o.k);o.testMode?typeof o.testCentroids=="number"||(Dt(o.testCentroids)==="object"?s=o.testCentroids:s=ew(r,o.k)):s=ew(r,o.k);for(var d=!0,f=0;d&&f<o.maxIterations;){for(var h=0;h<r.length;h++)i=r[h],u[i.id()]=Mb(i,s,o.distance,o.attributes,"kMedoids");d=!1;for(var p=0;p<s.length;p++){var m=Nb(p,r,u);if(m.length!==0){c[p]=tw(s[p],m,o.attributes);for(var g=0;g<m.length;g++)l=tw(m[g],m,o.attributes),l<c[p]&&(c[p]=l,s[p]=m[g],d=!0);a[p]=n.collection(m)}}f++}return a},qA=function(e,n,r,i,o){for(var a,s,u=0;u<n.length;u++)for(var l=0;l<e.length;l++)i[u][l]=Math.pow(r[u][l],o.m);for(var c=0;c<e.length;c++)for(var d=0;d<o.attributes.length;d++){a=0,s=0;for(var f=0;f<n.length;f++)a+=i[f][c]*o.attributes[d](n[f]),s+=i[f][c];e[c][d]=a/s}},GA=function(e,n,r,i,o){for(var a=0;a<e.length;a++)n[a]=e[a].slice();for(var s,u,l,c=2/(o.m-1),d=0;d<r.length;d++)for(var f=0;f<i.length;f++){s=0;for(var h=0;h<r.length;h++)u=Yl(o.distance,i[f],r[d],o.attributes,"cmeans"),l=Yl(o.distance,i[f],r[h],o.attributes,"cmeans"),s+=Math.pow(u/l,c);e[f][d]=1/s}},WA=function(e,n,r,i){for(var o=new Array(r.k),a=0;a<o.length;a++)o[a]=[];for(var s,u,l=0;l<n.length;l++){s=-1/0,u=-1;for(var c=0;c<n[0].length;c++)n[l][c]>s&&(s=n[l][c],u=c);o[u].push(e[l])}for(var d=0;d<o.length;d++)o[d]=i.collection(o[d]);return o},nw=function(e){var n=this.cy(),r=this.nodes(),i=Ep(e),o,a,s,u,l;u=new Array(r.length);for(var c=0;c<r.length;c++)u[c]=new Array(i.k);s=new Array(r.length);for(var d=0;d<r.length;d++)s[d]=new Array(i.k);for(var f=0;f<r.length;f++){for(var h=0,p=0;p<i.k;p++)s[f][p]=Math.random(),h+=s[f][p];for(var m=0;m<i.k;m++)s[f][m]=s[f][m]/h}a=new Array(i.k);for(var g=0;g<i.k;g++)a[g]=new Array(i.attributes.length);l=new Array(r.length);for(var v=0;v<r.length;v++)l[v]=new Array(i.k);for(var y=!0,w=0;y&&w<i.maxIterations;)y=!1,qA(a,r,s,l,i),GA(s,u,a,r,i),jA(s,u,i.sensitivityThreshold)||(y=!0),w++;return o=WA(r,s,i,n),{clusters:o,degreeOfMembership:s}},ZA={kMeans:zA,kMedoids:UA,fuzzyCMeans:nw,fcm:nw},YA=Pt({distance:"euclidean",linkage:"min",mode:"threshold",threshold:1/0,addDendrogram:!1,dendrogramDepth:0,attributes:[]}),KA={single:"min",complete:"max"},QA=function(e){var n=YA(e),r=KA[n.linkage];return r!=null&&(n.linkage=r),n},rw=function(e,n,r,i,o){for(var a=0,s=1/0,u,l=o.attributes,c=function(C,A){return ac(o.distance,l.length,function(M){return l[M](C)},function(M){return l[M](A)},C,A)},d=0;d<e.length;d++){var f=e[d].key,h=r[f][i[f]];h<s&&(a=f,s=h)}if(o.mode==="threshold"&&s>=o.threshold||o.mode==="dendrogram"&&e.length===1)return!1;var p=n[a],m=n[i[a]],g;o.mode==="dendrogram"?g={left:p,right:m,key:p.key}:g={value:p.value.concat(m.value),key:p.key},e[p.index]=g,e.splice(m.index,1),n[p.key]=g;for(var v=0;v<e.length;v++){var y=e[v];p.key===y.key?u=1/0:o.linkage==="min"?(u=r[p.key][y.key],r[p.key][y.key]>r[m.key][y.key]&&(u=r[m.key][y.key])):o.linkage==="max"?(u=r[p.key][y.key],r[p.key][y.key]<r[m.key][y.key]&&(u=r[m.key][y.key])):o.linkage==="mean"?u=(r[p.key][y.key]*p.size+r[m.key][y.key]*m.size)/(p.size+m.size):o.mode==="dendrogram"?u=c(y.value,p.value):u=c(y.value[0],p.value[0]),r[p.key][y.key]=r[y.key][p.key]=u}for(var w=0;w<e.length;w++){var b=e[w].key;if(i[b]===p.key||i[b]===m.key){for(var I=b,E=0;E<e.length;E++){var D=e[E].key;r[b][D]<r[b][I]&&(I=D)}i[b]=I}e[w].index=w}return p.key=m.key=p.index=m.index=null,!0},xl=function t(e,n,r){e&&(e.value?n.push(e.value):(e.left&&t(e.left,n),e.right&&t(e.right,n)))},XA=function t(e,n){if(!e)return"";if(e.left&&e.right){var r=t(e.left,n),i=t(e.right,n),o=n.add({group:"nodes",data:{id:r+","+i}});return n.add({group:"edges",data:{source:r,target:o.id()}}),n.add({group:"edges",data:{source:i,target:o.id()}}),o.id()}else if(e.value)return e.value.id()},JA=function t(e,n,r){if(!e)return[];var i=[],o=[],a=[];return n===0?(e.left&&xl(e.left,i),e.right&&xl(e.right,o),a=i.concat(o),[r.collection(a)]):n===1?e.value?[r.collection(e.value)]:(e.left&&xl(e.left,i),e.right&&xl(e.right,o),[r.collection(i),r.collection(o)]):e.value?[r.collection(e.value)]:(e.left&&(i=t(e.left,n-1,r)),e.right&&(o=t(e.right,n-1,r)),i.concat(o))},iw=function(e){for(var n=this.cy(),r=this.nodes(),i=QA(e),o=i.attributes,a=function(w,b){return ac(i.distance,o.length,function(I){return o[I](w)},function(I){return o[I](b)},w,b)},s=[],u=[],l=[],c=[],d=0;d<r.length;d++){var f={value:i.mode==="dendrogram"?r[d]:[r[d]],key:d,index:d};s[d]=f,c[d]=f,u[d]=[],l[d]=0}for(var h=0;h<s.length;h++)for(var p=0;p<=h;p++){var m=void 0;i.mode==="dendrogram"?m=h===p?1/0:a(s[h].value,s[p].value):m=h===p?1/0:a(s[h].value[0],s[p].value[0]),u[h][p]=m,u[p][h]=m,m<u[h][l[h]]&&(l[h]=p)}for(var g=rw(s,c,u,l,i);g;)g=rw(s,c,u,l,i);var v;return i.mode==="dendrogram"?(v=JA(s[0],i.dendrogramDepth,n),i.addDendrogram&&XA(s[0],n)):(v=new Array(s.length),s.forEach(function(y,w){y.key=y.index=null,v[w]=n.collection(y.value)})),v},eR={hierarchicalClustering:iw,hca:iw},tR=Pt({distance:"euclidean",preference:"median",damping:.8,maxIterations:1e3,minIterations:100,attributes:[]}),nR=function(e){var n=e.damping,r=e.preference;.5<=n&&n<1||dt("Damping must range on [0.5, 1).  Got: ".concat(n));var i=["median","mean","min","max"];return i.some(function(o){return o===r})||ie(r)||dt("Preference must be one of [".concat(i.map(function(o){return"'".concat(o,"'")}).join(", "),"] or a number.  Got: ").concat(r)),tR(e)},rR=function(e,n,r,i){var o=function(s,u){return i[u](s)};return-ac(e,i.length,function(a){return o(n,a)},function(a){return o(r,a)},n,r)},iR=function(e,n){var r=null;return n==="median"?r=nA(e):n==="mean"?r=tA(e):n==="min"?r=JN(e):n==="max"?r=eA(e):r=n,r},oR=function(e,n,r){for(var i=[],o=0;o<e;o++)n[o*e+o]+r[o*e+o]>0&&i.push(o);return i},ow=function(e,n,r){for(var i=[],o=0;o<e;o++){for(var a=-1,s=-1/0,u=0;u<r.length;u++){var l=r[u];n[o*e+l]>s&&(a=l,s=n[o*e+l])}a>0&&i.push(a)}for(var c=0;c<r.length;c++)i[r[c]]=r[c];return i},aR=function(e,n,r){for(var i=ow(e,n,r),o=0;o<r.length;o++){for(var a=[],s=0;s<i.length;s++)i[s]===r[o]&&a.push(s);for(var u=-1,l=-1/0,c=0;c<a.length;c++){for(var d=0,f=0;f<a.length;f++)d+=n[a[f]*e+a[c]];d>l&&(u=c,l=d)}r[o]=a[u]}return i=ow(e,n,r),i},aw=function(e){for(var n=this.cy(),r=this.nodes(),i=nR(e),o={},a=0;a<r.length;a++)o[r[a].id()]=a;var s,u,l,c,d,f;s=r.length,u=s*s,l=new Array(u);for(var h=0;h<u;h++)l[h]=-1/0;for(var p=0;p<s;p++)for(var m=0;m<s;m++)p!==m&&(l[p*s+m]=rR(i.distance,r[p],r[m],i.attributes));c=iR(l,i.preference);for(var g=0;g<s;g++)l[g*s+g]=c;d=new Array(u);for(var v=0;v<u;v++)d[v]=0;f=new Array(u);for(var y=0;y<u;y++)f[y]=0;for(var w=new Array(s),b=new Array(s),I=new Array(s),E=0;E<s;E++)w[E]=0,b[E]=0,I[E]=0;for(var D=new Array(s*i.minIterations),S=0;S<D.length;S++)D[S]=0;var C;for(C=0;C<i.maxIterations;C++){for(var A=0;A<s;A++){for(var M=-1/0,N=-1/0,R=-1,T=0,O=0;O<s;O++)w[O]=d[A*s+O],T=f[A*s+O]+l[A*s+O],T>=M?(N=M,M=T,R=O):T>N&&(N=T);for(var _=0;_<s;_++)d[A*s+_]=(1-i.damping)*(l[A*s+_]-M)+i.damping*w[_];d[A*s+R]=(1-i.damping)*(l[A*s+R]-N)+i.damping*w[R]}for(var k=0;k<s;k++){for(var P=0,V=0;V<s;V++)w[V]=f[V*s+k],b[V]=Math.max(0,d[V*s+k]),P+=b[V];P-=b[k],b[k]=d[k*s+k],P+=b[k];for(var z=0;z<s;z++)f[z*s+k]=(1-i.damping)*Math.min(0,P-b[z])+i.damping*w[z];f[k*s+k]=(1-i.damping)*(P-b[k])+i.damping*w[k]}for(var B=0,$=0;$<s;$++){var W=f[$*s+$]+d[$*s+$]>0?1:0;D[C%i.minIterations*s+$]=W,B+=W}if(B>0&&(C>=i.minIterations-1||C==i.maxIterations-1)){for(var K=0,Q=0;Q<s;Q++){I[Q]=0;for(var X=0;X<i.minIterations;X++)I[Q]+=D[X*s+Q];(I[Q]===0||I[Q]===i.minIterations)&&K++}if(K===s)break}}for(var J=oR(s,d,f),q=aR(s,l,J),L={},U=0;U<J.length;U++)L[J[U]]=[];for(var Z=0;Z<r.length;Z++){var re=o[r[Z].id()],ve=q[re];ve!=null&&L[ve].push(r[Z])}for(var ne=new Array(J.length),te=0;te<J.length;te++)ne[te]=n.collection(L[J[te]]);return ne},sR={affinityPropagation:aw,ap:aw},uR=Pt({root:void 0,directed:!1}),lR={hierholzer:function(e){if(!He(e)){var n=arguments;e={root:n[0],directed:n[1]}}var r=uR(e),i=r.root,o=r.directed,a=this,s=!1,u,l,c;i&&(c=pe(i)?this.filter(i)[0].id():i[0].id());var d={},f={};o?a.forEach(function(y){var w=y.id();if(y.isNode()){var b=y.indegree(!0),I=y.outdegree(!0),E=b-I,D=I-b;E==1?u?s=!0:u=w:D==1?l?s=!0:l=w:(D>1||E>1)&&(s=!0),d[w]=[],y.outgoers().forEach(function(S){S.isEdge()&&d[w].push(S.id())})}else f[w]=[void 0,y.target().id()]}):a.forEach(function(y){var w=y.id();if(y.isNode()){var b=y.degree(!0);b%2&&(u?l?s=!0:l=w:u=w),d[w]=[],y.connectedEdges().forEach(function(I){return d[w].push(I.id())})}else f[w]=[y.source().id(),y.target().id()]});var h={found:!1,trail:void 0};if(s)return h;if(l&&u)if(o){if(c&&l!=c)return h;c=l}else{if(c&&l!=c&&u!=c)return h;c||(c=l)}else c||(c=a[0].id());var p=function(w){for(var b=w,I=[w],E,D,S;d[b].length;)E=d[b].shift(),D=f[E][0],S=f[E][1],b!=S?(d[S]=d[S].filter(function(C){return C!=E}),b=S):!o&&b!=D&&(d[D]=d[D].filter(function(C){return C!=E}),b=D),I.unshift(E),I.unshift(b);return I},m=[],g=[];for(g=p(c);g.length!=1;)d[g[0]].length==0?(m.unshift(a.getElementById(g.shift())),m.unshift(a.getElementById(g.shift()))):g=p(g.shift()).concat(g);m.unshift(a.getElementById(g.shift()));for(var v in d)if(d[v].length)return h;return h.found=!0,h.trail=this.spawn(m,!0),h}},Tl=function(){var e=this,n={},r=0,i=0,o=[],a=[],s={},u=function(f,h){for(var p=a.length-1,m=[],g=e.spawn();a[p].x!=f||a[p].y!=h;)m.push(a.pop().edge),p--;m.push(a.pop().edge),m.forEach(function(v){var y=v.connectedNodes().intersection(e);g.merge(v),y.forEach(function(w){var b=w.id(),I=w.connectedEdges().intersection(e);g.merge(w),n[b].cutVertex?g.merge(I.filter(function(E){return E.isLoop()})):g.merge(I)})}),o.push(g)},l=function d(f,h,p){f===p&&(i+=1),n[h]={id:r,low:r++,cutVertex:!1};var m=e.getElementById(h).connectedEdges().intersection(e);if(m.size()===0)o.push(e.spawn(e.getElementById(h)));else{var g,v,y,w;m.forEach(function(b){g=b.source().id(),v=b.target().id(),y=g===h?v:g,y!==p&&(w=b.id(),s[w]||(s[w]=!0,a.push({x:h,y,edge:b})),y in n?n[h].low=Math.min(n[h].low,n[y].id):(d(f,y,h),n[h].low=Math.min(n[h].low,n[y].low),n[h].id<=n[y].low&&(n[h].cutVertex=!0,u(h,y))))})}};e.forEach(function(d){if(d.isNode()){var f=d.id();f in n||(i=0,l(f,f),n[f].cutVertex=i>1)}});var c=Object.keys(n).filter(function(d){return n[d].cutVertex}).map(function(d){return e.getElementById(d)});return{cut:e.spawn(c),components:o}},cR={hopcroftTarjanBiconnected:Tl,htbc:Tl,htb:Tl,hopcroftTarjanBiconnectedComponents:Tl},Ml=function(){var e=this,n={},r=0,i=[],o=[],a=e.spawn(e),s=function u(l){o.push(l),n[l]={index:r,low:r++,explored:!1};var c=e.getElementById(l).connectedEdges().intersection(e);if(c.forEach(function(m){var g=m.target().id();g!==l&&(g in n||u(g),n[g].explored||(n[l].low=Math.min(n[l].low,n[g].low)))}),n[l].index===n[l].low){for(var d=e.spawn();;){var f=o.pop();if(d.merge(e.getElementById(f)),n[f].low=n[l].index,n[f].explored=!0,f===l)break}var h=d.edgesWith(d),p=d.merge(h);i.push(p),a=a.difference(p)}};return e.forEach(function(u){if(u.isNode()){var l=u.id();l in n||s(l)}}),{cut:a,components:i}},dR={tarjanStronglyConnected:Ml,tsc:Ml,tscc:Ml,tarjanStronglyConnectedComponents:Ml},Ab={};[vs,jN,HN,UN,GN,ZN,QN,EA,Oo,Po,Xh,PA,ZA,eR,sR,lR,cR,dR].forEach(function(t){ye(Ab,t)});var Rb=0,_b=1,kb=2,yr=function t(e){if(!(this instanceof t))return new t(e);this.id="Thenable/1.0.7",this.state=Rb,this.fulfillValue=void 0,this.rejectReason=void 0,this.onFulfilled=[],this.onRejected=[],this.proxy={then:this.then.bind(this)},typeof e=="function"&&e.call(this,this.fulfill.bind(this),this.reject.bind(this))};yr.prototype={fulfill:function(e){return sw(this,_b,"fulfillValue",e)},reject:function(e){return sw(this,kb,"rejectReason",e)},then:function(e,n){var r=this,i=new yr;return r.onFulfilled.push(lw(e,i,"fulfill")),r.onRejected.push(lw(n,i,"reject")),Ob(r),i.proxy}};var sw=function(e,n,r,i){return e.state===Rb&&(e.state=n,e[r]=i,Ob(e)),e},Ob=function(e){e.state===_b?uw(e,"onFulfilled",e.fulfillValue):e.state===kb&&uw(e,"onRejected",e.rejectReason)},uw=function(e,n,r){if(e[n].length!==0){var i=e[n];e[n]=[];var o=function(){for(var s=0;s<i.length;s++)i[s](r)};typeof setImmediate=="function"?setImmediate(o):setTimeout(o,0)}},lw=function(e,n,r){return function(i){if(typeof e!="function")n[r].call(n,i);else{var o;try{o=e(i)}catch(a){n.reject(a);return}fR(n,o)}}},fR=function t(e,n){if(e===n||e.proxy===n){e.reject(new TypeError("cannot resolve promise with itself"));return}var r;if(Dt(n)==="object"&&n!==null||typeof n=="function")try{r=n.then}catch(o){e.reject(o);return}if(typeof r=="function"){var i=!1;try{r.call(n,function(o){i||(i=!0,o===n?e.reject(new TypeError("circular thenable chain")):t(e,o))},function(o){i||(i=!0,e.reject(o))})}catch(o){i||e.reject(o)}return}e.fulfill(n)};yr.all=function(t){return new yr(function(e,n){for(var r=new Array(t.length),i=0,o=function(u,l){r[u]=l,i++,i===t.length&&e(r)},a=0;a<t.length;a++)(function(s){var u=t[s],l=u!=null&&u.then!=null;if(l)u.then(function(d){o(s,d)},function(d){n(d)});else{var c=u;o(s,c)}})(a)})};yr.resolve=function(t){return new yr(function(e,n){e(t)})};yr.reject=function(t){return new yr(function(e,n){n(t)})};var Ho=typeof Promise<"u"?Promise:yr,Jh=function(e,n,r){var i=pp(e),o=!i,a=this._private=ye({duration:1e3},n,r);if(a.target=e,a.style=a.style||a.css,a.started=!1,a.playing=!1,a.hooked=!1,a.applying=!1,a.progress=0,a.completes=[],a.frames=[],a.complete&&lt(a.complete)&&a.completes.push(a.complete),o){var s=e.position();a.startPosition=a.startPosition||{x:s.x,y:s.y},a.startStyle=a.startStyle||e.cy().style().getAnimationStartStyle(e,a.style)}if(i){var u=e.pan();a.startPan={x:u.x,y:u.y},a.startZoom=e.zoom()}this.length=1,this[0]=this},Ti=Jh.prototype;ye(Ti,{instanceString:function(){return"animation"},hook:function(){var e=this._private;if(!e.hooked){var n,r=e.target._private.animation;e.queue?n=r.queue:n=r.current,n.push(this),pn(e.target)&&e.target.cy().addToAnimationPool(e.target),e.hooked=!0}return this},play:function(){var e=this._private;return e.progress===1&&(e.progress=0),e.playing=!0,e.started=!1,e.stopped=!1,this.hook(),this},playing:function(){return this._private.playing},apply:function(){var e=this._private;return e.applying=!0,e.started=!1,e.stopped=!1,this.hook(),this},applying:function(){return this._private.applying},pause:function(){var e=this._private;return e.playing=!1,e.started=!1,this},stop:function(){var e=this._private;return e.playing=!1,e.started=!1,e.stopped=!0,this},rewind:function(){return this.progress(0)},fastforward:function(){return this.progress(1)},time:function(e){var n=this._private;return e===void 0?n.progress*n.duration:this.progress(e/n.duration)},progress:function(e){var n=this._private,r=n.playing;return e===void 0?n.progress:(r&&this.pause(),n.progress=e,n.started=!1,r&&this.play(),this)},completed:function(){return this._private.progress===1},reverse:function(){var e=this._private,n=e.playing;n&&this.pause(),e.progress=1-e.progress,e.started=!1;var r=function(l,c){var d=e[l];d!=null&&(e[l]=e[c],e[c]=d)};if(r("zoom","startZoom"),r("pan","startPan"),r("position","startPosition"),e.style)for(var i=0;i<e.style.length;i++){var o=e.style[i],a=o.name,s=e.startStyle[a];e.startStyle[a]=o,e.style[i]=s}return n&&this.play(),this},promise:function(e){var n=this._private,r;switch(e){case"frame":r=n.frames;break;default:case"complete":case"completed":r=n.completes}return new Ho(function(i,o){r.push(function(){i()})})}});Ti.complete=Ti.completed;Ti.run=Ti.play;Ti.running=Ti.playing;var hR={animated:function(){return function(){var n=this,r=n.length!==void 0,i=r?n:[n],o=this._private.cy||this;if(!o.styleEnabled())return!1;var a=i[0];if(a)return a._private.animation.current.length>0}},clearQueue:function(){return function(){var n=this,r=n.length!==void 0,i=r?n:[n],o=this._private.cy||this;if(!o.styleEnabled())return this;for(var a=0;a<i.length;a++){var s=i[a];s._private.animation.queue=[]}return this}},delay:function(){return function(n,r){var i=this._private.cy||this;return i.styleEnabled()?this.animate({delay:n,duration:n,complete:r}):this}},delayAnimation:function(){return function(n,r){var i=this._private.cy||this;return i.styleEnabled()?this.animation({delay:n,duration:n,complete:r}):this}},animation:function(){return function(n,r){var i=this,o=i.length!==void 0,a=o?i:[i],s=this._private.cy||this,u=!o,l=!u;if(!s.styleEnabled())return this;var c=s.style();n=ye({},n,r);var d=Object.keys(n).length===0;if(d)return new Jh(a[0],n);switch(n.duration===void 0&&(n.duration=400),n.duration){case"slow":n.duration=600;break;case"fast":n.duration=200;break}if(l&&(n.style=c.getPropsList(n.style||n.css),n.css=void 0),l&&n.renderedPosition!=null){var f=n.renderedPosition,h=s.pan(),p=s.zoom();n.position=wb(f,p,h)}if(u&&n.panBy!=null){var m=n.panBy,g=s.pan();n.pan={x:g.x+m.x,y:g.y+m.y}}var v=n.center||n.centre;if(u&&v!=null){var y=s.getCenterPan(v.eles,n.zoom);y!=null&&(n.pan=y)}if(u&&n.fit!=null){var w=n.fit,b=s.getFitViewport(w.eles||w.boundingBox,w.padding);b!=null&&(n.pan=b.pan,n.zoom=b.zoom)}if(u&&He(n.zoom)){var I=s.getZoomedViewport(n.zoom);I!=null?(I.zoomed&&(n.zoom=I.zoom),I.panned&&(n.pan=I.pan)):n.zoom=null}return new Jh(a[0],n)}},animate:function(){return function(n,r){var i=this,o=i.length!==void 0,a=o?i:[i],s=this._private.cy||this;if(!s.styleEnabled())return this;r&&(n=ye({},n,r));for(var u=0;u<a.length;u++){var l=a[u],c=l.animated()&&(n.queue===void 0||n.queue),d=l.animation(n,c?{queue:!0}:void 0);d.play()}return this}},stop:function(){return function(n,r){var i=this,o=i.length!==void 0,a=o?i:[i],s=this._private.cy||this;if(!s.styleEnabled())return this;for(var u=0;u<a.length;u++){for(var l=a[u],c=l._private,d=c.animation.current,f=0;f<d.length;f++){var h=d[f],p=h._private;r&&(p.duration=0)}n&&(c.animation.queue=[]),r||(c.animation.current=[])}return s.notify("draw"),this}}},pR=Array.isArray,sc=pR,gR=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,vR=/^\w*$/;function mR(t,e){if(sc(t))return!1;var n=typeof t;return n=="number"||n=="symbol"||n=="boolean"||t==null||xs(t)?!0:vR.test(t)||!gR.test(t)||e!=null&&t in Object(e)}var yR=mR,wR="[object AsyncFunction]",bR="[object Function]",DR="[object GeneratorFunction]",ER="[object Proxy]";function CR(t){if(!Ci(t))return!1;var e=cb(t);return e==bR||e==DR||e==wR||e==ER}var IR=CR,SR=nc["__core-js_shared__"],Hh=SR,cw=function(){var t=/[^.]+$/.exec(Hh&&Hh.keys&&Hh.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function xR(t){return!!cw&&cw in t}var TR=xR,MR=Function.prototype,NR=MR.toString;function AR(t){if(t!=null){try{return NR.call(t)}catch{}try{return t+""}catch{}}return""}var RR=AR,_R=/[\\^$.*+?()[\]{}|]/g,kR=/^\[object .+?Constructor\]$/,OR=Function.prototype,PR=Object.prototype,LR=OR.toString,FR=PR.hasOwnProperty,BR=RegExp("^"+LR.call(FR).replace(_R,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function VR(t){if(!Ci(t)||TR(t))return!1;var e=IR(t)?BR:kR;return e.test(RR(t))}var $R=VR;function jR(t,e){return t?.[e]}var HR=jR;function zR(t,e){var n=HR(t,e);return $R(n)?n:void 0}var Cp=zR,UR=Cp(Object,"create"),ws=UR;function qR(){this.__data__=ws?ws(null):{},this.size=0}var GR=qR;function WR(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var ZR=WR,YR="__lodash_hash_undefined__",KR=Object.prototype,QR=KR.hasOwnProperty;function XR(t){var e=this.__data__;if(ws){var n=e[t];return n===YR?void 0:n}return QR.call(e,t)?e[t]:void 0}var JR=XR,e_=Object.prototype,t_=e_.hasOwnProperty;function n_(t){var e=this.__data__;return ws?e[t]!==void 0:t_.call(e,t)}var r_=n_,i_="__lodash_hash_undefined__";function o_(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=ws&&e===void 0?i_:e,this}var a_=o_;function zo(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}zo.prototype.clear=GR;zo.prototype.delete=ZR;zo.prototype.get=JR;zo.prototype.has=r_;zo.prototype.set=a_;var dw=zo;function s_(){this.__data__=[],this.size=0}var u_=s_;function l_(t,e){return t===e||t!==t&&e!==e}var Pb=l_;function c_(t,e){for(var n=t.length;n--;)if(Pb(t[n][0],e))return n;return-1}var uc=c_,d_=Array.prototype,f_=d_.splice;function h_(t){var e=this.__data__,n=uc(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():f_.call(e,n,1),--this.size,!0}var p_=h_;function g_(t){var e=this.__data__,n=uc(e,t);return n<0?void 0:e[n][1]}var v_=g_;function m_(t){return uc(this.__data__,t)>-1}var y_=m_;function w_(t,e){var n=this.__data__,r=uc(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}var b_=w_;function Uo(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Uo.prototype.clear=u_;Uo.prototype.delete=p_;Uo.prototype.get=v_;Uo.prototype.has=y_;Uo.prototype.set=b_;var D_=Uo,E_=Cp(nc,"Map"),C_=E_;function I_(){this.size=0,this.__data__={hash:new dw,map:new(C_||D_),string:new dw}}var S_=I_;function x_(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var T_=x_;function M_(t,e){var n=t.__data__;return T_(e)?n[typeof e=="string"?"string":"hash"]:n.map}var lc=M_;function N_(t){var e=lc(this,t).delete(t);return this.size-=e?1:0,e}var A_=N_;function R_(t){return lc(this,t).get(t)}var __=R_;function k_(t){return lc(this,t).has(t)}var O_=k_;function P_(t,e){var n=lc(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}var L_=P_;function qo(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}qo.prototype.clear=S_;qo.prototype.delete=A_;qo.prototype.get=__;qo.prototype.has=O_;qo.prototype.set=L_;var Lb=qo,F_="Expected a function";function Ip(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(F_);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=t.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(Ip.Cache||Lb),n}Ip.Cache=Lb;var B_=Ip,V_=500;function $_(t){var e=B_(t,function(r){return n.size===V_&&n.clear(),r}),n=e.cache;return e}var j_=$_,H_=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,z_=/\\(\\)?/g,U_=j_(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(H_,function(n,r,i,o){e.push(i?o.replace(z_,"$1"):r||n)}),e}),Fb=U_;function q_(t,e){for(var n=-1,r=t==null?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}var Bb=q_,G_=1/0,fw=Fo?Fo.prototype:void 0,hw=fw?fw.toString:void 0;function Vb(t){if(typeof t=="string")return t;if(sc(t))return Bb(t,Vb)+"";if(xs(t))return hw?hw.call(t):"";var e=t+"";return e=="0"&&1/t==-G_?"-0":e}var W_=Vb;function Z_(t){return t==null?"":W_(t)}var $b=Z_;function Y_(t,e){return sc(t)?t:yR(t,e)?[t]:Fb($b(t))}var jb=Y_,K_=1/0;function Q_(t){if(typeof t=="string"||xs(t))return t;var e=t+"";return e=="0"&&1/t==-K_?"-0":e}var Sp=Q_;function X_(t,e){e=jb(e,t);for(var n=0,r=e.length;t!=null&&n<r;)t=t[Sp(e[n++])];return n&&n==r?t:void 0}var J_=X_;function ek(t,e,n){var r=t==null?void 0:J_(t,e);return r===void 0?n:r}var tk=ek,nk=function(){try{var t=Cp(Object,"defineProperty");return t({},"",{}),t}catch{}}(),pw=nk;function rk(t,e,n){e=="__proto__"&&pw?pw(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}var ik=rk,ok=Object.prototype,ak=ok.hasOwnProperty;function sk(t,e,n){var r=t[e];(!(ak.call(t,e)&&Pb(r,n))||n===void 0&&!(e in t))&&ik(t,e,n)}var uk=sk,lk=9007199254740991,ck=/^(?:0|[1-9]\d*)$/;function dk(t,e){var n=typeof t;return e=e??lk,!!e&&(n=="number"||n!="symbol"&&ck.test(t))&&t>-1&&t%1==0&&t<e}var fk=dk;function hk(t,e,n,r){if(!Ci(t))return t;e=jb(e,t);for(var i=-1,o=e.length,a=o-1,s=t;s!=null&&++i<o;){var u=Sp(e[i]),l=n;if(u==="__proto__"||u==="constructor"||u==="prototype")return t;if(i!=a){var c=s[u];l=r?r(c,u,s):void 0,l===void 0&&(l=Ci(c)?c:fk(e[i+1])?[]:{})}uk(s,u,l),s=s[u]}return t}var pk=hk;function gk(t,e,n){return t==null?t:pk(t,e,n)}var vk=gk;function mk(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}var yk=mk;function wk(t){return sc(t)?Bb(t,Sp):xs(t)?[t]:yk(Fb($b(t)))}var bk=wk,Dk={data:function(e){var n={field:"data",bindingEvent:"data",allowBinding:!1,allowSetting:!1,allowGetting:!1,settingEvent:"data",settingTriggersEvent:!1,triggerFnName:"trigger",immutableKeys:{},updateStyle:!1,beforeGet:function(i){},beforeSet:function(i,o){},onSet:function(i){},canSet:function(i){return!0}};return e=ye({},n,e),function(i,o){var a=e,s=this,u=s.length!==void 0,l=u?s:[s],c=u?s[0]:s;if(pe(i)){var d=i.indexOf(".")!==-1,f=d&&bk(i);if(a.allowGetting&&o===void 0){var h;return c&&(a.beforeGet(c),f&&c._private[a.field][i]===void 0?h=tk(c._private[a.field],f):h=c._private[a.field][i]),h}else if(a.allowSetting&&o!==void 0){var p=!a.immutableKeys[i];if(p){var m=Jw({},i,o);a.beforeSet(s,m);for(var g=0,v=l.length;g<v;g++){var y=l[g];a.canSet(y)&&(f&&c._private[a.field][i]===void 0?vk(y._private[a.field],f,o):y._private[a.field][i]=o)}a.updateStyle&&s.updateStyle(),a.onSet(s),a.settingTriggersEvent&&s[a.triggerFnName](a.settingEvent)}}}else if(a.allowSetting&&He(i)){var w=i,b,I,E=Object.keys(w);a.beforeSet(s,w);for(var D=0;D<E.length;D++){b=E[D],I=w[b];var S=!a.immutableKeys[b];if(S)for(var C=0;C<l.length;C++){var A=l[C];a.canSet(A)&&(A._private[a.field][b]=I)}}a.updateStyle&&s.updateStyle(),a.onSet(s),a.settingTriggersEvent&&s[a.triggerFnName](a.settingEvent)}else if(a.allowBinding&&lt(i)){var M=i;s.on(a.bindingEvent,M)}else if(a.allowGetting&&i===void 0){var N;return c&&(a.beforeGet(c),N=c._private[a.field]),N}return s}},removeData:function(e){var n={field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!1,immutableKeys:{}};return e=ye({},n,e),function(i){var o=e,a=this,s=a.length!==void 0,u=s?a:[a];if(pe(i)){for(var l=i.split(/\s+/),c=l.length,d=0;d<c;d++){var f=l[d];if(!$r(f)){var h=!o.immutableKeys[f];if(h)for(var p=0,m=u.length;p<m;p++)u[p]._private[o.field][f]=void 0}}o.triggerEvent&&a[o.triggerFnName](o.event)}else if(i===void 0){for(var g=0,v=u.length;g<v;g++)for(var y=u[g]._private[o.field],w=Object.keys(y),b=0;b<w.length;b++){var I=w[b],E=!o.immutableKeys[I];E&&(y[I]=void 0)}o.triggerEvent&&a[o.triggerFnName](o.event)}return a}}},Ek={eventAliasesOn:function(e){var n=e;n.addListener=n.listen=n.bind=n.on,n.unlisten=n.unbind=n.off=n.removeListener,n.trigger=n.emit,n.pon=n.promiseOn=function(r,i){var o=this,a=Array.prototype.slice.call(arguments,0);return new Ho(function(s,u){var l=function(h){o.off.apply(o,d),s(h)},c=a.concat([l]),d=c.concat([]);o.on.apply(o,c)})}}},Ze={};[hR,Dk,Ek].forEach(function(t){ye(Ze,t)});var Ck={animate:Ze.animate(),animation:Ze.animation(),animated:Ze.animated(),clearQueue:Ze.clearQueue(),delay:Ze.delay(),delayAnimation:Ze.delayAnimation(),stop:Ze.stop()},Fl={classes:function(e){var n=this;if(e===void 0){var r=[];return n[0]._private.classes.forEach(function(p){return r.push(p)}),r}else tt(e)||(e=(e||"").match(/\S+/g)||[]);for(var i=[],o=new jo(e),a=0;a<n.length;a++){for(var s=n[a],u=s._private,l=u.classes,c=!1,d=0;d<e.length;d++){var f=e[d],h=l.has(f);if(!h){c=!0;break}}c||(c=l.size!==e.length),c&&(u.classes=o,i.push(s))}return i.length>0&&this.spawn(i).updateStyle().emit("class"),n},addClass:function(e){return this.toggleClass(e,!0)},hasClass:function(e){var n=this[0];return n!=null&&n._private.classes.has(e)},toggleClass:function(e,n){tt(e)||(e=e.match(/\S+/g)||[]);for(var r=this,i=n===void 0,o=[],a=0,s=r.length;a<s;a++)for(var u=r[a],l=u._private.classes,c=!1,d=0;d<e.length;d++){var f=e[d],h=l.has(f),p=!1;n||i&&!h?(l.add(f),p=!0):(!n||i&&h)&&(l.delete(f),p=!0),!c&&p&&(o.push(u),c=!0)}return o.length>0&&this.spawn(o).updateStyle().emit("class"),r},removeClass:function(e){return this.toggleClass(e,!1)},flashClass:function(e,n){var r=this;if(n==null)n=250;else if(n===0)return r;return r.addClass(e),setTimeout(function(){r.removeClass(e)},n),r}};Fl.className=Fl.classNames=Fl.classes;var je={metaChar:"[\\!\\\"\\#\\$\\%\\&\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\<\\=\\>\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~]",comparatorOp:"=|\\!=|>|>=|<|<=|\\$=|\\^=|\\*=",boolOp:"\\?|\\!|\\^",string:`"(?:\\\\"|[^"])*"|'(?:\\\\'|[^'])*'`,number:bt,meta:"degree|indegree|outdegree",separator:"\\s*,\\s*",descendant:"\\s+",child:"\\s+>\\s+",subject:"\\$",group:"node|edge|\\*",directedEdge:"\\s+->\\s+",undirectedEdge:"\\s+<->\\s+"};je.variable="(?:[\\w-.]|(?:\\\\"+je.metaChar+"))+";je.className="(?:[\\w-]|(?:\\\\"+je.metaChar+"))+";je.value=je.string+"|"+je.number;je.id=je.variable;(function(){var t,e,n;for(t=je.comparatorOp.split("|"),n=0;n<t.length;n++)e=t[n],je.comparatorOp+="|@"+e;for(t=je.comparatorOp.split("|"),n=0;n<t.length;n++)e=t[n],!(e.indexOf("!")>=0)&&e!=="="&&(je.comparatorOp+="|\\!"+e)})();var Je=function(){return{checks:[]}},le={GROUP:0,COLLECTION:1,FILTER:2,DATA_COMPARE:3,DATA_EXIST:4,DATA_BOOL:5,META_COMPARE:6,STATE:7,ID:8,CLASS:9,UNDIRECTED_EDGE:10,DIRECTED_EDGE:11,NODE_SOURCE:12,NODE_TARGET:13,NODE_NEIGHBOR:14,CHILD:15,DESCENDANT:16,PARENT:17,ANCESTOR:18,COMPOUND_SPLIT:19,TRUE:20},ep=[{selector:":selected",matches:function(e){return e.selected()}},{selector:":unselected",matches:function(e){return!e.selected()}},{selector:":selectable",matches:function(e){return e.selectable()}},{selector:":unselectable",matches:function(e){return!e.selectable()}},{selector:":locked",matches:function(e){return e.locked()}},{selector:":unlocked",matches:function(e){return!e.locked()}},{selector:":visible",matches:function(e){return e.visible()}},{selector:":hidden",matches:function(e){return!e.visible()}},{selector:":transparent",matches:function(e){return e.transparent()}},{selector:":grabbed",matches:function(e){return e.grabbed()}},{selector:":free",matches:function(e){return!e.grabbed()}},{selector:":removed",matches:function(e){return e.removed()}},{selector:":inside",matches:function(e){return!e.removed()}},{selector:":grabbable",matches:function(e){return e.grabbable()}},{selector:":ungrabbable",matches:function(e){return!e.grabbable()}},{selector:":animated",matches:function(e){return e.animated()}},{selector:":unanimated",matches:function(e){return!e.animated()}},{selector:":parent",matches:function(e){return e.isParent()}},{selector:":childless",matches:function(e){return e.isChildless()}},{selector:":child",matches:function(e){return e.isChild()}},{selector:":orphan",matches:function(e){return e.isOrphan()}},{selector:":nonorphan",matches:function(e){return e.isChild()}},{selector:":compound",matches:function(e){return e.isNode()?e.isParent():e.source().isParent()||e.target().isParent()}},{selector:":loop",matches:function(e){return e.isLoop()}},{selector:":simple",matches:function(e){return e.isSimple()}},{selector:":active",matches:function(e){return e.active()}},{selector:":inactive",matches:function(e){return!e.active()}},{selector:":backgrounding",matches:function(e){return e.backgrounding()}},{selector:":nonbackgrounding",matches:function(e){return!e.backgrounding()}}].sort(function(t,e){return P1(t.selector,e.selector)}),Ik=function(){for(var t={},e,n=0;n<ep.length;n++)e=ep[n],t[e.selector]=e.matches;return t}(),Sk=function(e,n){return Ik[e](n)},xk="("+ep.map(function(t){return t.selector}).join("|")+")",So=function(e){return e.replace(new RegExp("\\\\("+je.metaChar+")","g"),function(n,r){return r})},Pr=function(e,n,r){e[e.length-1]=r},tp=[{name:"group",query:!0,regex:"("+je.group+")",populate:function(e,n,r){var i=Bn(r,1),o=i[0];n.checks.push({type:le.GROUP,value:o==="*"?o:o+"s"})}},{name:"state",query:!0,regex:xk,populate:function(e,n,r){var i=Bn(r,1),o=i[0];n.checks.push({type:le.STATE,value:o})}},{name:"id",query:!0,regex:"\\#("+je.id+")",populate:function(e,n,r){var i=Bn(r,1),o=i[0];n.checks.push({type:le.ID,value:So(o)})}},{name:"className",query:!0,regex:"\\.("+je.className+")",populate:function(e,n,r){var i=Bn(r,1),o=i[0];n.checks.push({type:le.CLASS,value:So(o)})}},{name:"dataExists",query:!0,regex:"\\[\\s*("+je.variable+")\\s*\\]",populate:function(e,n,r){var i=Bn(r,1),o=i[0];n.checks.push({type:le.DATA_EXIST,field:So(o)})}},{name:"dataCompare",query:!0,regex:"\\[\\s*("+je.variable+")\\s*("+je.comparatorOp+")\\s*("+je.value+")\\s*\\]",populate:function(e,n,r){var i=Bn(r,3),o=i[0],a=i[1],s=i[2],u=new RegExp("^"+je.string+"$").exec(s)!=null;u?s=s.substring(1,s.length-1):s=parseFloat(s),n.checks.push({type:le.DATA_COMPARE,field:So(o),operator:a,value:s})}},{name:"dataBool",query:!0,regex:"\\[\\s*("+je.boolOp+")\\s*("+je.variable+")\\s*\\]",populate:function(e,n,r){var i=Bn(r,2),o=i[0],a=i[1];n.checks.push({type:le.DATA_BOOL,field:So(a),operator:o})}},{name:"metaCompare",query:!0,regex:"\\[\\[\\s*("+je.meta+")\\s*("+je.comparatorOp+")\\s*("+je.number+")\\s*\\]\\]",populate:function(e,n,r){var i=Bn(r,3),o=i[0],a=i[1],s=i[2];n.checks.push({type:le.META_COMPARE,field:So(o),operator:a,value:parseFloat(s)})}},{name:"nextQuery",separator:!0,regex:je.separator,populate:function(e,n){var r=e.currentSubject,i=e.edgeCount,o=e.compoundCount,a=e[e.length-1];r!=null&&(a.subject=r,e.currentSubject=null),a.edgeCount=i,a.compoundCount=o,e.edgeCount=0,e.compoundCount=0;var s=e[e.length++]=Je();return s}},{name:"directedEdge",separator:!0,regex:je.directedEdge,populate:function(e,n){if(e.currentSubject==null){var r=Je(),i=n,o=Je();return r.checks.push({type:le.DIRECTED_EDGE,source:i,target:o}),Pr(e,n,r),e.edgeCount++,o}else{var a=Je(),s=n,u=Je();return a.checks.push({type:le.NODE_SOURCE,source:s,target:u}),Pr(e,n,a),e.edgeCount++,u}}},{name:"undirectedEdge",separator:!0,regex:je.undirectedEdge,populate:function(e,n){if(e.currentSubject==null){var r=Je(),i=n,o=Je();return r.checks.push({type:le.UNDIRECTED_EDGE,nodes:[i,o]}),Pr(e,n,r),e.edgeCount++,o}else{var a=Je(),s=n,u=Je();return a.checks.push({type:le.NODE_NEIGHBOR,node:s,neighbor:u}),Pr(e,n,a),u}}},{name:"child",separator:!0,regex:je.child,populate:function(e,n){if(e.currentSubject==null){var r=Je(),i=Je(),o=e[e.length-1];return r.checks.push({type:le.CHILD,parent:o,child:i}),Pr(e,n,r),e.compoundCount++,i}else if(e.currentSubject===n){var a=Je(),s=e[e.length-1],u=Je(),l=Je(),c=Je(),d=Je();return a.checks.push({type:le.COMPOUND_SPLIT,left:s,right:u,subject:l}),l.checks=n.checks,n.checks=[{type:le.TRUE}],d.checks.push({type:le.TRUE}),u.checks.push({type:le.PARENT,parent:d,child:c}),Pr(e,s,a),e.currentSubject=l,e.compoundCount++,c}else{var f=Je(),h=Je(),p=[{type:le.PARENT,parent:f,child:h}];return f.checks=n.checks,n.checks=p,e.compoundCount++,h}}},{name:"descendant",separator:!0,regex:je.descendant,populate:function(e,n){if(e.currentSubject==null){var r=Je(),i=Je(),o=e[e.length-1];return r.checks.push({type:le.DESCENDANT,ancestor:o,descendant:i}),Pr(e,n,r),e.compoundCount++,i}else if(e.currentSubject===n){var a=Je(),s=e[e.length-1],u=Je(),l=Je(),c=Je(),d=Je();return a.checks.push({type:le.COMPOUND_SPLIT,left:s,right:u,subject:l}),l.checks=n.checks,n.checks=[{type:le.TRUE}],d.checks.push({type:le.TRUE}),u.checks.push({type:le.ANCESTOR,ancestor:d,descendant:c}),Pr(e,s,a),e.currentSubject=l,e.compoundCount++,c}else{var f=Je(),h=Je(),p=[{type:le.ANCESTOR,ancestor:f,descendant:h}];return f.checks=n.checks,n.checks=p,e.compoundCount++,h}}},{name:"subject",modifier:!0,regex:je.subject,populate:function(e,n){if(e.currentSubject!=null&&e.currentSubject!==n)return Ye("Redefinition of subject in selector `"+e.toString()+"`"),!1;e.currentSubject=n;var r=e[e.length-1],i=r.checks[0],o=i==null?null:i.type;o===le.DIRECTED_EDGE?i.type=le.NODE_TARGET:o===le.UNDIRECTED_EDGE&&(i.type=le.NODE_NEIGHBOR,i.node=i.nodes[1],i.neighbor=i.nodes[0],i.nodes=null)}}];tp.forEach(function(t){return t.regexObj=new RegExp("^"+t.regex)});var Tk=function(e){for(var n,r,i,o=0;o<tp.length;o++){var a=tp[o],s=a.name,u=e.match(a.regexObj);if(u!=null){r=u,n=a,i=s;var l=u[0];e=e.substring(l.length);break}}return{expr:n,match:r,name:i,remaining:e}},Mk=function(e){var n=e.match(/^\s+/);if(n){var r=n[0];e=e.substring(r.length)}return e},Nk=function(e){var n=this,r=n.inputText=e,i=n[0]=Je();for(n.length=1,r=Mk(r);;){var o=Tk(r);if(o.expr==null)return Ye("The selector `"+e+"`is invalid"),!1;var a=o.match.slice(1),s=o.expr.populate(n,i,a);if(s===!1)return!1;if(s!=null&&(i=s),r=o.remaining,r.match(/^\s*$/))break}var u=n[n.length-1];n.currentSubject!=null&&(u.subject=n.currentSubject),u.edgeCount=n.edgeCount,u.compoundCount=n.compoundCount;for(var l=0;l<n.length;l++){var c=n[l];if(c.compoundCount>0&&c.edgeCount>0)return Ye("The selector `"+e+"` is invalid because it uses both a compound selector and an edge selector"),!1;if(c.edgeCount>1)return Ye("The selector `"+e+"` is invalid because it uses multiple edge selectors"),!1;c.edgeCount===1&&Ye("The selector `"+e+"` is deprecated.  Edge selectors do not take effect on changes to source and target nodes after an edge is added, for performance reasons.  Use a class or data selector on edges instead, updating the class or data of an edge when your app detects a change in source or target nodes.")}return!0},Ak=function(){if(this.toStringCache!=null)return this.toStringCache;for(var e=function(c){return c??""},n=function(c){return pe(c)?'"'+c+'"':e(c)},r=function(c){return" "+c+" "},i=function(c,d){var f=c.type,h=c.value;switch(f){case le.GROUP:{var p=e(h);return p.substring(0,p.length-1)}case le.DATA_COMPARE:{var m=c.field,g=c.operator;return"["+m+r(e(g))+n(h)+"]"}case le.DATA_BOOL:{var v=c.operator,y=c.field;return"["+e(v)+y+"]"}case le.DATA_EXIST:{var w=c.field;return"["+w+"]"}case le.META_COMPARE:{var b=c.operator,I=c.field;return"[["+I+r(e(b))+n(h)+"]]"}case le.STATE:return h;case le.ID:return"#"+h;case le.CLASS:return"."+h;case le.PARENT:case le.CHILD:return o(c.parent,d)+r(">")+o(c.child,d);case le.ANCESTOR:case le.DESCENDANT:return o(c.ancestor,d)+" "+o(c.descendant,d);case le.COMPOUND_SPLIT:{var E=o(c.left,d),D=o(c.subject,d),S=o(c.right,d);return E+(E.length>0?" ":"")+D+S}case le.TRUE:return""}},o=function(c,d){return c.checks.reduce(function(f,h,p){return f+(d===c&&p===0?"$":"")+i(h,d)},"")},a="",s=0;s<this.length;s++){var u=this[s];a+=o(u,u.subject),this.length>1&&s<this.length-1&&(a+=", ")}return this.toStringCache=a,a},Rk={parse:Nk,toString:Ak},Hb=function(e,n,r){var i,o=pe(e),a=ie(e),s=pe(r),u,l,c=!1,d=!1,f=!1;switch(n.indexOf("!")>=0&&(n=n.replace("!",""),d=!0),n.indexOf("@")>=0&&(n=n.replace("@",""),c=!0),(o||s||c)&&(u=!o&&!a?"":""+e,l=""+r),c&&(e=u=u.toLowerCase(),r=l=l.toLowerCase()),n){case"*=":i=u.indexOf(l)>=0;break;case"$=":i=u.indexOf(l,u.length-l.length)>=0;break;case"^=":i=u.indexOf(l)===0;break;case"=":i=e===r;break;case">":f=!0,i=e>r;break;case">=":f=!0,i=e>=r;break;case"<":f=!0,i=e<r;break;case"<=":f=!0,i=e<=r;break;default:i=!1;break}return d&&(e!=null||!f)&&(i=!i),i},_k=function(e,n){switch(n){case"?":return!!e;case"!":return!e;case"^":return e===void 0}},kk=function(e){return e!==void 0},xp=function(e,n){return e.data(n)},Ok=function(e,n){return e[n]()},ft=[],ot=function(e,n){return e.checks.every(function(r){return ft[r.type](r,n)})};ft[le.GROUP]=function(t,e){var n=t.value;return n==="*"||n===e.group()};ft[le.STATE]=function(t,e){var n=t.value;return Sk(n,e)};ft[le.ID]=function(t,e){var n=t.value;return e.id()===n};ft[le.CLASS]=function(t,e){var n=t.value;return e.hasClass(n)};ft[le.META_COMPARE]=function(t,e){var n=t.field,r=t.operator,i=t.value;return Hb(Ok(e,n),r,i)};ft[le.DATA_COMPARE]=function(t,e){var n=t.field,r=t.operator,i=t.value;return Hb(xp(e,n),r,i)};ft[le.DATA_BOOL]=function(t,e){var n=t.field,r=t.operator;return _k(xp(e,n),r)};ft[le.DATA_EXIST]=function(t,e){var n=t.field;return t.operator,kk(xp(e,n))};ft[le.UNDIRECTED_EDGE]=function(t,e){var n=t.nodes[0],r=t.nodes[1],i=e.source(),o=e.target();return ot(n,i)&&ot(r,o)||ot(r,i)&&ot(n,o)};ft[le.NODE_NEIGHBOR]=function(t,e){return ot(t.node,e)&&e.neighborhood().some(function(n){return n.isNode()&&ot(t.neighbor,n)})};ft[le.DIRECTED_EDGE]=function(t,e){return ot(t.source,e.source())&&ot(t.target,e.target())};ft[le.NODE_SOURCE]=function(t,e){return ot(t.source,e)&&e.outgoers().some(function(n){return n.isNode()&&ot(t.target,n)})};ft[le.NODE_TARGET]=function(t,e){return ot(t.target,e)&&e.incomers().some(function(n){return n.isNode()&&ot(t.source,n)})};ft[le.CHILD]=function(t,e){return ot(t.child,e)&&ot(t.parent,e.parent())};ft[le.PARENT]=function(t,e){return ot(t.parent,e)&&e.children().some(function(n){return ot(t.child,n)})};ft[le.DESCENDANT]=function(t,e){return ot(t.descendant,e)&&e.ancestors().some(function(n){return ot(t.ancestor,n)})};ft[le.ANCESTOR]=function(t,e){return ot(t.ancestor,e)&&e.descendants().some(function(n){return ot(t.descendant,n)})};ft[le.COMPOUND_SPLIT]=function(t,e){return ot(t.subject,e)&&ot(t.left,e)&&ot(t.right,e)};ft[le.TRUE]=function(){return!0};ft[le.COLLECTION]=function(t,e){var n=t.value;return n.has(e)};ft[le.FILTER]=function(t,e){var n=t.value;return n(e)};var Pk=function(e){var n=this;if(n.length===1&&n[0].checks.length===1&&n[0].checks[0].type===le.ID)return e.getElementById(n[0].checks[0].value).collection();var r=function(o){for(var a=0;a<n.length;a++){var s=n[a];if(ot(s,o))return!0}return!1};return n.text()==null&&(r=function(){return!0}),e.filter(r)},Lk=function(e){for(var n=this,r=0;r<n.length;r++){var i=n[r];if(ot(i,e))return!0}return!1},Fk={matches:Lk,filter:Pk},Hr=function(e){this.inputText=e,this.currentSubject=null,this.compoundCount=0,this.edgeCount=0,this.length=0,e==null||pe(e)&&e.match(/^\s*$/)||(pn(e)?this.addQuery({checks:[{type:le.COLLECTION,value:e.collection()}]}):lt(e)?this.addQuery({checks:[{type:le.FILTER,value:e}]}):pe(e)?this.parse(e)||(this.invalid=!0):dt("A selector must be created from a string; found "))},zr=Hr.prototype;[Rk,Fk].forEach(function(t){return ye(zr,t)});zr.text=function(){return this.inputText};zr.size=function(){return this.length};zr.eq=function(t){return this[t]};zr.sameText=function(t){return!this.invalid&&!t.invalid&&this.text()===t.text()};zr.addQuery=function(t){this[this.length++]=t};zr.selector=zr.toString;var Br={allAre:function(e){var n=new Hr(e);return this.every(function(r){return n.matches(r)})},is:function(e){var n=new Hr(e);return this.some(function(r){return n.matches(r)})},some:function(e,n){for(var r=0;r<this.length;r++){var i=n?e.apply(n,[this[r],r,this]):e(this[r],r,this);if(i)return!0}return!1},every:function(e,n){for(var r=0;r<this.length;r++){var i=n?e.apply(n,[this[r],r,this]):e(this[r],r,this);if(!i)return!1}return!0},same:function(e){if(this===e)return!0;e=this.cy().collection(e);var n=this.length,r=e.length;return n!==r?!1:n===1?this[0]===e[0]:this.every(function(i){return e.hasElementWithId(i.id())})},anySame:function(e){return e=this.cy().collection(e),this.some(function(n){return e.hasElementWithId(n.id())})},allAreNeighbors:function(e){e=this.cy().collection(e);var n=this.neighborhood();return e.every(function(r){return n.hasElementWithId(r.id())})},contains:function(e){e=this.cy().collection(e);var n=this;return e.every(function(r){return n.hasElementWithId(r.id())})}};Br.allAreNeighbours=Br.allAreNeighbors;Br.has=Br.contains;Br.equal=Br.equals=Br.same;var In=function(e,n){return function(i,o,a,s){var u=i,l=this,c;if(u==null?c="":pn(u)&&u.length===1&&(c=u.id()),l.length===1&&c){var d=l[0]._private,f=d.traversalCache=d.traversalCache||{},h=f[n]=f[n]||[],p=Ii(c),m=h[p];return m||(h[p]=e.call(l,i,o,a,s))}else return e.call(l,i,o,a,s)}},$o={parent:function(e){var n=[];if(this.length===1){var r=this[0]._private.parent;if(r)return r}for(var i=0;i<this.length;i++){var o=this[i],a=o._private.parent;a&&n.push(a)}return this.spawn(n,!0).filter(e)},parents:function(e){for(var n=[],r=this.parent();r.nonempty();){for(var i=0;i<r.length;i++){var o=r[i];n.push(o)}r=r.parent()}return this.spawn(n,!0).filter(e)},commonAncestors:function(e){for(var n,r=0;r<this.length;r++){var i=this[r],o=i.parents();n=n||o,n=n.intersect(o)}return n.filter(e)},orphans:function(e){return this.stdFilter(function(n){return n.isOrphan()}).filter(e)},nonorphans:function(e){return this.stdFilter(function(n){return n.isChild()}).filter(e)},children:In(function(t){for(var e=[],n=0;n<this.length;n++)for(var r=this[n],i=r._private.children,o=0;o<i.length;o++)e.push(i[o]);return this.spawn(e,!0).filter(t)},"children"),siblings:function(e){return this.parent().children().not(this).filter(e)},isParent:function(){var e=this[0];if(e)return e.isNode()&&e._private.children.length!==0},isChildless:function(){var e=this[0];if(e)return e.isNode()&&e._private.children.length===0},isChild:function(){var e=this[0];if(e)return e.isNode()&&e._private.parent!=null},isOrphan:function(){var e=this[0];if(e)return e.isNode()&&e._private.parent==null},descendants:function(e){var n=[];function r(i){for(var o=0;o<i.length;o++){var a=i[o];n.push(a),a.children().nonempty()&&r(a.children())}}return r(this.children()),this.spawn(n,!0).filter(e)}};function Tp(t,e,n,r){for(var i=[],o=new jo,a=t.cy(),s=a.hasCompoundNodes(),u=0;u<t.length;u++){var l=t[u];n?i.push(l):s&&r(i,o,l)}for(;i.length>0;){var c=i.shift();e(c),o.add(c.id()),s&&r(i,o,c)}return t}function zb(t,e,n){if(n.isParent())for(var r=n._private.children,i=0;i<r.length;i++){var o=r[i];e.has(o.id())||t.push(o)}}$o.forEachDown=function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return Tp(this,t,e,zb)};function Ub(t,e,n){if(n.isChild()){var r=n._private.parent;e.has(r.id())||t.push(r)}}$o.forEachUp=function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return Tp(this,t,e,Ub)};function Bk(t,e,n){Ub(t,e,n),zb(t,e,n)}$o.forEachUpAndDown=function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return Tp(this,t,e,Bk)};$o.ancestors=$o.parents;var bs,qb;bs=qb={data:Ze.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),removeData:Ze.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),scratch:Ze.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:Ze.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),rscratch:Ze.data({field:"rscratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeRscratch:Ze.removeData({field:"rscratch",triggerEvent:!1}),id:function(){var e=this[0];if(e)return e._private.data.id}};bs.attr=bs.data;bs.removeAttr=bs.removeData;var Vk=qb,cc={};function zh(t){return function(e){var n=this;if(e===void 0&&(e=!0),n.length!==0)if(n.isNode()&&!n.removed()){for(var r=0,i=n[0],o=i._private.edges,a=0;a<o.length;a++){var s=o[a];!e&&s.isLoop()||(r+=t(i,s))}return r}else return}}ye(cc,{degree:zh(function(t,e){return e.source().same(e.target())?2:1}),indegree:zh(function(t,e){return e.target().same(t)?1:0}),outdegree:zh(function(t,e){return e.source().same(t)?1:0})});function xo(t,e){return function(n){for(var r,i=this.nodes(),o=0;o<i.length;o++){var a=i[o],s=a[t](n);s!==void 0&&(r===void 0||e(s,r))&&(r=s)}return r}}ye(cc,{minDegree:xo("degree",function(t,e){return t<e}),maxDegree:xo("degree",function(t,e){return t>e}),minIndegree:xo("indegree",function(t,e){return t<e}),maxIndegree:xo("indegree",function(t,e){return t>e}),minOutdegree:xo("outdegree",function(t,e){return t<e}),maxOutdegree:xo("outdegree",function(t,e){return t>e})});ye(cc,{totalDegree:function(e){for(var n=0,r=this.nodes(),i=0;i<r.length;i++)n+=r[i].degree(e);return n}});var jn,Gb,Wb=function(e,n,r){for(var i=0;i<e.length;i++){var o=e[i];if(!o.locked()){var a=o._private.position,s={x:n.x!=null?n.x-a.x:0,y:n.y!=null?n.y-a.y:0};o.isParent()&&!(s.x===0&&s.y===0)&&o.children().shift(s,r),o.dirtyBoundingBoxCache()}}},gw={field:"position",bindingEvent:"position",allowBinding:!0,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!0,triggerFnName:"emitAndNotify",allowGetting:!0,validKeys:["x","y"],beforeGet:function(e){e.updateCompoundBounds()},beforeSet:function(e,n){Wb(e,n,!1)},onSet:function(e){e.dirtyCompoundBoundsCache()},canSet:function(e){return!e.locked()}};jn=Gb={position:Ze.data(gw),silentPosition:Ze.data(ye({},gw,{allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!1,beforeSet:function(e,n){Wb(e,n,!0)},onSet:function(e){e.dirtyCompoundBoundsCache()}})),positions:function(e,n){if(He(e))n?this.silentPosition(e):this.position(e);else if(lt(e)){var r=e,i=this.cy();i.startBatch();for(var o=0;o<this.length;o++){var a=this[o],s=void 0;(s=r(a,o))&&(n?a.silentPosition(s):a.position(s))}i.endBatch()}return this},silentPositions:function(e){return this.positions(e,!0)},shift:function(e,n,r){var i;if(He(e)?(i={x:ie(e.x)?e.x:0,y:ie(e.y)?e.y:0},r=n):pe(e)&&ie(n)&&(i={x:0,y:0},i[e]=n),i!=null){var o=this.cy();o.startBatch();for(var a=0;a<this.length;a++){var s=this[a];if(!(o.hasCompoundNodes()&&s.isChild()&&s.ancestors().anySame(this))){var u=s.position(),l={x:u.x+i.x,y:u.y+i.y};r?s.silentPosition(l):s.position(l)}}o.endBatch()}return this},silentShift:function(e,n){return He(e)?this.shift(e,!0):pe(e)&&ie(n)&&this.shift(e,n,!0),this},renderedPosition:function(e,n){var r=this[0],i=this.cy(),o=i.zoom(),a=i.pan(),s=He(e)?e:void 0,u=s!==void 0||n!==void 0&&pe(e);if(r&&r.isNode())if(u)for(var l=0;l<this.length;l++){var c=this[l];n!==void 0?c.position(e,(n-a[e])/o):s!==void 0&&c.position(wb(s,o,a))}else{var d=r.position();return s=oc(d,o,a),e===void 0?s:s[e]}else if(!u)return;return this},relativePosition:function(e,n){var r=this[0],i=this.cy(),o=He(e)?e:void 0,a=o!==void 0||n!==void 0&&pe(e),s=i.hasCompoundNodes();if(r&&r.isNode())if(a)for(var u=0;u<this.length;u++){var l=this[u],c=s?l.parent():null,d=c&&c.length>0,f=d;d&&(c=c[0]);var h=f?c.position():{x:0,y:0};n!==void 0?l.position(e,n+h[e]):o!==void 0&&l.position({x:o.x+h.x,y:o.y+h.y})}else{var p=r.position(),m=s?r.parent():null,g=m&&m.length>0,v=g;g&&(m=m[0]);var y=v?m.position():{x:0,y:0};return o={x:p.x-y.x,y:p.y-y.y},e===void 0?o:o[e]}else if(!a)return;return this}};jn.modelPosition=jn.point=jn.position;jn.modelPositions=jn.points=jn.positions;jn.renderedPoint=jn.renderedPosition;jn.relativePoint=jn.relativePosition;var $k=Gb,Lo,Gr;Lo=Gr={};Gr.renderedBoundingBox=function(t){var e=this.boundingBox(t),n=this.cy(),r=n.zoom(),i=n.pan(),o=e.x1*r+i.x,a=e.x2*r+i.x,s=e.y1*r+i.y,u=e.y2*r+i.y;return{x1:o,x2:a,y1:s,y2:u,w:a-o,h:u-s}};Gr.dirtyCompoundBoundsCache=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,e=this.cy();return!e.styleEnabled()||!e.hasCompoundNodes()?this:(this.forEachUp(function(n){if(n.isParent()){var r=n._private;r.compoundBoundsClean=!1,r.bbCache=null,t||n.emitAndNotify("bounds")}}),this)};Gr.updateCompoundBounds=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,e=this.cy();if(!e.styleEnabled()||!e.hasCompoundNodes())return this;if(!t&&e.batching())return this;function n(a){if(!a.isParent())return;var s=a._private,u=a.children(),l=a.pstyle("compound-sizing-wrt-labels").value==="include",c={width:{val:a.pstyle("min-width").pfValue,left:a.pstyle("min-width-bias-left"),right:a.pstyle("min-width-bias-right")},height:{val:a.pstyle("min-height").pfValue,top:a.pstyle("min-height-bias-top"),bottom:a.pstyle("min-height-bias-bottom")}},d=u.boundingBox({includeLabels:l,includeOverlays:!1,useCache:!1}),f=s.position;(d.w===0||d.h===0)&&(d={w:a.pstyle("width").pfValue,h:a.pstyle("height").pfValue},d.x1=f.x-d.w/2,d.x2=f.x+d.w/2,d.y1=f.y-d.h/2,d.y2=f.y+d.h/2);function h(C,A,M){var N=0,R=0,T=A+M;return C>0&&T>0&&(N=A/T*C,R=M/T*C),{biasDiff:N,biasComplementDiff:R}}function p(C,A,M,N){if(M.units==="%")switch(N){case"width":return C>0?M.pfValue*C:0;case"height":return A>0?M.pfValue*A:0;case"average":return C>0&&A>0?M.pfValue*(C+A)/2:0;case"min":return C>0&&A>0?C>A?M.pfValue*A:M.pfValue*C:0;case"max":return C>0&&A>0?C>A?M.pfValue*C:M.pfValue*A:0;default:return 0}else return M.units==="px"?M.pfValue:0}var m=c.width.left.value;c.width.left.units==="px"&&c.width.val>0&&(m=m*100/c.width.val);var g=c.width.right.value;c.width.right.units==="px"&&c.width.val>0&&(g=g*100/c.width.val);var v=c.height.top.value;c.height.top.units==="px"&&c.height.val>0&&(v=v*100/c.height.val);var y=c.height.bottom.value;c.height.bottom.units==="px"&&c.height.val>0&&(y=y*100/c.height.val);var w=h(c.width.val-d.w,m,g),b=w.biasDiff,I=w.biasComplementDiff,E=h(c.height.val-d.h,v,y),D=E.biasDiff,S=E.biasComplementDiff;s.autoPadding=p(d.w,d.h,a.pstyle("padding"),a.pstyle("padding-relative-to").value),s.autoWidth=Math.max(d.w,c.width.val),f.x=(-b+d.x1+d.x2+I)/2,s.autoHeight=Math.max(d.h,c.height.val),f.y=(-D+d.y1+d.y2+S)/2}for(var r=0;r<this.length;r++){var i=this[r],o=i._private;(!o.compoundBoundsClean||t)&&(n(i),e.batching()||(o.compoundBoundsClean=!0))}return this};var Cn=function(e){return e===1/0||e===-1/0?0:e},Vn=function(e,n,r,i,o){i-n===0||o-r===0||n==null||r==null||i==null||o==null||(e.x1=n<e.x1?n:e.x1,e.x2=i>e.x2?i:e.x2,e.y1=r<e.y1?r:e.y1,e.y2=o>e.y2?o:e.y2,e.w=e.x2-e.x1,e.h=e.y2-e.y1)},wi=function(e,n){return n==null?e:Vn(e,n.x1,n.y1,n.x2,n.y2)},rs=function(e,n,r){return $n(e,n,r)},Nl=function(e,n,r){if(!n.cy().headless()){var i=n._private,o=i.rstyle,a=o.arrowWidth/2,s=n.pstyle(r+"-arrow-shape").value,u,l;if(s!=="none"){r==="source"?(u=o.srcX,l=o.srcY):r==="target"?(u=o.tgtX,l=o.tgtY):(u=o.midX,l=o.midY);var c=i.arrowBounds=i.arrowBounds||{},d=c[r]=c[r]||{};d.x1=u-a,d.y1=l-a,d.x2=u+a,d.y2=l+a,d.w=d.x2-d.x1,d.h=d.y2-d.y1,Pl(d,1),Vn(e,d.x1,d.y1,d.x2,d.y2)}}},Uh=function(e,n,r){if(!n.cy().headless()){var i;r?i=r+"-":i="";var o=n._private,a=o.rstyle,s=n.pstyle(i+"label").strValue;if(s){var u=n.pstyle("text-halign"),l=n.pstyle("text-valign"),c=rs(a,"labelWidth",r),d=rs(a,"labelHeight",r),f=rs(a,"labelX",r),h=rs(a,"labelY",r),p=n.pstyle(i+"text-margin-x").pfValue,m=n.pstyle(i+"text-margin-y").pfValue,g=n.isEdge(),v=n.pstyle(i+"text-rotation"),y=n.pstyle("text-outline-width").pfValue,w=n.pstyle("text-border-width").pfValue,b=w/2,I=n.pstyle("text-background-padding").pfValue,E=2,D=d,S=c,C=S/2,A=D/2,M,N,R,T;if(g)M=f-C,N=f+C,R=h-A,T=h+A;else{switch(u.value){case"left":M=f-S,N=f;break;case"center":M=f-C,N=f+C;break;case"right":M=f,N=f+S;break}switch(l.value){case"top":R=h-D,T=h;break;case"center":R=h-A,T=h+A;break;case"bottom":R=h,T=h+D;break}}var O=p-Math.max(y,b)-I-E,_=p+Math.max(y,b)+I+E,k=m-Math.max(y,b)-I-E,P=m+Math.max(y,b)+I+E;M+=O,N+=_,R+=k,T+=P;var V=r||"main",z=o.labelBounds,B=z[V]=z[V]||{};B.x1=M,B.y1=R,B.x2=N,B.y2=T,B.w=N-M,B.h=T-R,B.leftPad=O,B.rightPad=_,B.topPad=k,B.botPad=P;var $=g&&v.strValue==="autorotate",W=v.pfValue!=null&&v.pfValue!==0;if($||W){var K=$?rs(o.rstyle,"labelAngle",r):v.pfValue,Q=Math.cos(K),X=Math.sin(K),J=(M+N)/2,q=(R+T)/2;if(!g){switch(u.value){case"left":J=N;break;case"right":J=M;break}switch(l.value){case"top":q=T;break;case"bottom":q=R;break}}var L=function(ce,se){return ce=ce-J,se=se-q,{x:ce*Q-se*X+J,y:ce*X+se*Q+q}},U=L(M,R),Z=L(M,T),re=L(N,R),ve=L(N,T);M=Math.min(U.x,Z.x,re.x,ve.x),N=Math.max(U.x,Z.x,re.x,ve.x),R=Math.min(U.y,Z.y,re.y,ve.y),T=Math.max(U.y,Z.y,re.y,ve.y)}var ne=V+"Rot",te=z[ne]=z[ne]||{};te.x1=M,te.y1=R,te.x2=N,te.y2=T,te.w=N-M,te.h=T-R,Vn(e,M,R,N,T),Vn(o.labelBounds.all,M,R,N,T)}return e}},jk=function(e,n){if(!n.cy().headless()){var r=n.pstyle("outline-opacity").value,i=n.pstyle("outline-width").value;if(r>0&&i>0){var o=n.pstyle("outline-offset").value,a=n.pstyle("shape").value,s=i+o,u=(e.w+s*2)/e.w,l=(e.h+s*2)/e.h,c=0,d=0;["diamond","pentagon","round-triangle"].includes(a)?(u=(e.w+s*2.4)/e.w,d=-s/3.6):["concave-hexagon","rhomboid","right-rhomboid"].includes(a)?u=(e.w+s*2.4)/e.w:a==="star"?(u=(e.w+s*2.8)/e.w,l=(e.h+s*2.6)/e.h,d=-s/3.8):a==="triangle"?(u=(e.w+s*2.8)/e.w,l=(e.h+s*2.4)/e.h,d=-s/1.4):a==="vee"&&(u=(e.w+s*4.4)/e.w,l=(e.h+s*3.8)/e.h,d=-s*.5);var f=e.h*l-e.h,h=e.w*u-e.w;if(Ll(e,[Math.ceil(f/2),Math.ceil(h/2)]),c!=0||d!==0){var p=uA(e,c,d);Db(e,p)}}}},Hk=function(e,n){var r=e._private.cy,i=r.styleEnabled(),o=r.headless(),a=en(),s=e._private,u=e.isNode(),l=e.isEdge(),c,d,f,h,p,m,g=s.rstyle,v=u&&i?e.pstyle("bounds-expansion").pfValue:[0],y=function(de){return de.pstyle("display").value!=="none"},w=!i||y(e)&&(!l||y(e.source())&&y(e.target()));if(w){var b=0,I=0;i&&n.includeOverlays&&(b=e.pstyle("overlay-opacity").value,b!==0&&(I=e.pstyle("overlay-padding").value));var E=0,D=0;i&&n.includeUnderlays&&(E=e.pstyle("underlay-opacity").value,E!==0&&(D=e.pstyle("underlay-padding").value));var S=Math.max(I,D),C=0,A=0;if(i&&(C=e.pstyle("width").pfValue,A=C/2),u&&n.includeNodes){var M=e.position();p=M.x,m=M.y;var N=e.outerWidth(),R=N/2,T=e.outerHeight(),O=T/2;c=p-R,d=p+R,f=m-O,h=m+O,Vn(a,c,f,d,h),i&&n.includeOutlines&&jk(a,e)}else if(l&&n.includeEdges)if(i&&!o){var _=e.pstyle("curve-style").strValue;if(c=Math.min(g.srcX,g.midX,g.tgtX),d=Math.max(g.srcX,g.midX,g.tgtX),f=Math.min(g.srcY,g.midY,g.tgtY),h=Math.max(g.srcY,g.midY,g.tgtY),c-=A,d+=A,f-=A,h+=A,Vn(a,c,f,d,h),_==="haystack"){var k=g.haystackPts;if(k&&k.length===2){if(c=k[0].x,f=k[0].y,d=k[1].x,h=k[1].y,c>d){var P=c;c=d,d=P}if(f>h){var V=f;f=h,h=V}Vn(a,c-A,f-A,d+A,h+A)}}else if(_==="bezier"||_==="unbundled-bezier"||_.endsWith("segments")||_.endsWith("taxi")){var z;switch(_){case"bezier":case"unbundled-bezier":z=g.bezierPts;break;case"segments":case"taxi":case"round-segments":case"round-taxi":z=g.linePts;break}if(z!=null)for(var B=0;B<z.length;B++){var $=z[B];c=$.x-A,d=$.x+A,f=$.y-A,h=$.y+A,Vn(a,c,f,d,h)}}}else{var W=e.source(),K=W.position(),Q=e.target(),X=Q.position();if(c=K.x,d=X.x,f=K.y,h=X.y,c>d){var J=c;c=d,d=J}if(f>h){var q=f;f=h,h=q}c-=A,d+=A,f-=A,h+=A,Vn(a,c,f,d,h)}if(i&&n.includeEdges&&l&&(Nl(a,e,"mid-source"),Nl(a,e,"mid-target"),Nl(a,e,"source"),Nl(a,e,"target")),i){var L=e.pstyle("ghost").value==="yes";if(L){var U=e.pstyle("ghost-offset-x").pfValue,Z=e.pstyle("ghost-offset-y").pfValue;Vn(a,a.x1+U,a.y1+Z,a.x2+U,a.y2+Z)}}var re=s.bodyBounds=s.bodyBounds||{};Z0(re,a),Ll(re,v),Pl(re,1),i&&(c=a.x1,d=a.x2,f=a.y1,h=a.y2,Vn(a,c-S,f-S,d+S,h+S));var ve=s.overlayBounds=s.overlayBounds||{};Z0(ve,a),Ll(ve,v),Pl(ve,1);var ne=s.labelBounds=s.labelBounds||{};ne.all!=null?sA(ne.all):ne.all=en(),i&&n.includeLabels&&(n.includeMainLabels&&Uh(a,e,null),l&&(n.includeSourceLabels&&Uh(a,e,"source"),n.includeTargetLabels&&Uh(a,e,"target")))}return a.x1=Cn(a.x1),a.y1=Cn(a.y1),a.x2=Cn(a.x2),a.y2=Cn(a.y2),a.w=Cn(a.x2-a.x1),a.h=Cn(a.y2-a.y1),a.w>0&&a.h>0&&w&&(Ll(a,v),Pl(a,1)),a},Zb=function(e){var n=0,r=function(a){return(a?1:0)<<n++},i=0;return i+=r(e.incudeNodes),i+=r(e.includeEdges),i+=r(e.includeLabels),i+=r(e.includeMainLabels),i+=r(e.includeSourceLabels),i+=r(e.includeTargetLabels),i+=r(e.includeOverlays),i+=r(e.includeOutlines),i},Yb=function(e){if(e.isEdge()){var n=e.source().position(),r=e.target().position(),i=function(a){return Math.round(a)};return MN([i(n.x),i(n.y),i(r.x),i(r.y)])}else return 0},vw=function(e,n){var r=e._private,i,o=e.isEdge(),a=n==null?mw:Zb(n),s=a===mw,u=Yb(e),l=r.bbCachePosKey===u,c=n.useCache&&l,d=function(m){return m._private.bbCache==null||m._private.styleDirty},f=!c||d(e)||o&&(d(e.source())||d(e.target()));if(f?(l||e.recalculateRenderedStyle(c),i=Hk(e,Ds),r.bbCache=i,r.bbCachePosKey=u):i=r.bbCache,!s){var h=e.isNode();i=en(),(n.includeNodes&&h||n.includeEdges&&!h)&&(n.includeOverlays?wi(i,r.overlayBounds):wi(i,r.bodyBounds)),n.includeLabels&&(n.includeMainLabels&&(!o||n.includeSourceLabels&&n.includeTargetLabels)?wi(i,r.labelBounds.all):(n.includeMainLabels&&wi(i,r.labelBounds.mainRot),n.includeSourceLabels&&wi(i,r.labelBounds.sourceRot),n.includeTargetLabels&&wi(i,r.labelBounds.targetRot))),i.w=i.x2-i.x1,i.h=i.y2-i.y1}return i},Ds={includeNodes:!0,includeEdges:!0,includeLabels:!0,includeMainLabels:!0,includeSourceLabels:!0,includeTargetLabels:!0,includeOverlays:!0,includeUnderlays:!0,includeOutlines:!0,useCache:!0},mw=Zb(Ds),yw=Pt(Ds);Gr.boundingBox=function(t){var e;if(this.length===1&&this[0]._private.bbCache!=null&&!this[0]._private.styleDirty&&(t===void 0||t.useCache===void 0||t.useCache===!0))t===void 0?t=Ds:t=yw(t),e=vw(this[0],t);else{e=en(),t=t||Ds;var n=yw(t),r=this,i=r.cy(),o=i.styleEnabled();if(o)for(var a=0;a<r.length;a++){var s=r[a],u=s._private,l=Yb(s),c=u.bbCachePosKey===l,d=n.useCache&&c&&!u.styleDirty;s.recalculateRenderedStyle(d)}this.updateCompoundBounds(!t.useCache);for(var f=0;f<r.length;f++){var h=r[f];wi(e,vw(h,n))}}return e.x1=Cn(e.x1),e.y1=Cn(e.y1),e.x2=Cn(e.x2),e.y2=Cn(e.y2),e.w=Cn(e.x2-e.x1),e.h=Cn(e.y2-e.y1),e};Gr.dirtyBoundingBoxCache=function(){for(var t=0;t<this.length;t++){var e=this[t]._private;e.bbCache=null,e.bbCachePosKey=null,e.bodyBounds=null,e.overlayBounds=null,e.labelBounds.all=null,e.labelBounds.source=null,e.labelBounds.target=null,e.labelBounds.main=null,e.labelBounds.sourceRot=null,e.labelBounds.targetRot=null,e.labelBounds.mainRot=null,e.arrowBounds.source=null,e.arrowBounds.target=null,e.arrowBounds["mid-source"]=null,e.arrowBounds["mid-target"]=null}return this.emitAndNotify("bounds"),this};Gr.boundingBoxAt=function(t){var e=this.nodes(),n=this.cy(),r=n.hasCompoundNodes(),i=n.collection();if(r&&(i=e.filter(function(l){return l.isParent()}),e=e.not(i)),He(t)){var o=t;t=function(){return o}}var a=function(c,d){return c._private.bbAtOldPos=t(c,d)},s=function(c){return c._private.bbAtOldPos};n.startBatch(),e.forEach(a).silentPositions(t),r&&(i.dirtyCompoundBoundsCache(),i.dirtyBoundingBoxCache(),i.updateCompoundBounds(!0));var u=aA(this.boundingBox({useCache:!1}));return e.silentPositions(s),r&&(i.dirtyCompoundBoundsCache(),i.dirtyBoundingBoxCache(),i.updateCompoundBounds(!0)),n.endBatch(),u};Lo.boundingbox=Lo.bb=Lo.boundingBox;Lo.renderedBoundingbox=Lo.renderedBoundingBox;var zk=Gr,ls,Ms;ls=Ms={};var Kb=function(e){e.uppercaseName=j0(e.name),e.autoName="auto"+e.uppercaseName,e.labelName="label"+e.uppercaseName,e.outerName="outer"+e.uppercaseName,e.uppercaseOuterName=j0(e.outerName),ls[e.name]=function(){var r=this[0],i=r._private,o=i.cy,a=o._private.styleEnabled;if(r)if(a){if(r.isParent())return r.updateCompoundBounds(),i[e.autoName]||0;var s=r.pstyle(e.name);switch(s.strValue){case"label":return r.recalculateRenderedStyle(),i.rstyle[e.labelName]||0;default:return s.pfValue}}else return 1},ls["outer"+e.uppercaseName]=function(){var r=this[0],i=r._private,o=i.cy,a=o._private.styleEnabled;if(r)if(a){var s=r[e.name](),u=r.pstyle("border-width").pfValue,l=2*r.padding();return s+u+l}else return 1},ls["rendered"+e.uppercaseName]=function(){var r=this[0];if(r){var i=r[e.name]();return i*this.cy().zoom()}},ls["rendered"+e.uppercaseOuterName]=function(){var r=this[0];if(r){var i=r[e.outerName]();return i*this.cy().zoom()}}};Kb({name:"width"});Kb({name:"height"});Ms.padding=function(){var t=this[0],e=t._private;return t.isParent()?(t.updateCompoundBounds(),e.autoPadding!==void 0?e.autoPadding:t.pstyle("padding").pfValue):t.pstyle("padding").pfValue};Ms.paddedHeight=function(){var t=this[0];return t.height()+2*t.padding()};Ms.paddedWidth=function(){var t=this[0];return t.width()+2*t.padding()};var Uk=Ms,qk=function(e,n){if(e.isEdge())return n(e)},Gk=function(e,n){if(e.isEdge()){var r=e.cy();return oc(n(e),r.zoom(),r.pan())}},Wk=function(e,n){if(e.isEdge()){var r=e.cy(),i=r.pan(),o=r.zoom();return n(e).map(function(a){return oc(a,o,i)})}},Zk=function(e){return e.renderer().getControlPoints(e)},Yk=function(e){return e.renderer().getSegmentPoints(e)},Kk=function(e){return e.renderer().getSourceEndpoint(e)},Qk=function(e){return e.renderer().getTargetEndpoint(e)},Xk=function(e){return e.renderer().getEdgeMidpoint(e)},ww={controlPoints:{get:Zk,mult:!0},segmentPoints:{get:Yk,mult:!0},sourceEndpoint:{get:Kk},targetEndpoint:{get:Qk},midpoint:{get:Xk}},Jk=function(e){return"rendered"+e[0].toUpperCase()+e.substr(1)},eO=Object.keys(ww).reduce(function(t,e){var n=ww[e],r=Jk(e);return t[e]=function(){return qk(this,n.get)},n.mult?t[r]=function(){return Wk(this,n.get)}:t[r]=function(){return Gk(this,n.get)},t},{}),tO=ye({},$k,zk,Uk,eO);var Qb=function(e,n){this.recycle(e,n)};function is(){return!1}function Al(){return!0}Qb.prototype={instanceString:function(){return"event"},recycle:function(e,n){if(this.isImmediatePropagationStopped=this.isPropagationStopped=this.isDefaultPrevented=is,e!=null&&e.preventDefault?(this.type=e.type,this.isDefaultPrevented=e.defaultPrevented?Al:is):e!=null&&e.type?n=e:this.type=e,n!=null&&(this.originalEvent=n.originalEvent,this.type=n.type!=null?n.type:this.type,this.cy=n.cy,this.target=n.target,this.position=n.position,this.renderedPosition=n.renderedPosition,this.namespace=n.namespace,this.layout=n.layout),this.cy!=null&&this.position!=null&&this.renderedPosition==null){var r=this.position,i=this.cy.zoom(),o=this.cy.pan();this.renderedPosition={x:r.x*i+o.x,y:r.y*i+o.y}}this.timeStamp=e&&e.timeStamp||Date.now()},preventDefault:function(){this.isDefaultPrevented=Al;var e=this.originalEvent;e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){this.isPropagationStopped=Al;var e=this.originalEvent;e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=Al,this.stopPropagation()},isDefaultPrevented:is,isPropagationStopped:is,isImmediatePropagationStopped:is};var Xb=/^([^.]+)(\.(?:[^.]+))?$/,nO=".*",Jb={qualifierCompare:function(e,n){return e===n},eventMatches:function(){return!0},addEventFields:function(){},callbackContext:function(e){return e},beforeEmit:function(){},afterEmit:function(){},bubble:function(){return!1},parent:function(){return null},context:null},bw=Object.keys(Jb),rO={};function dc(){for(var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:rO,e=arguments.length>1?arguments[1]:void 0,n=0;n<bw.length;n++){var r=bw[n];this[r]=t[r]||Jb[r]}this.context=e||this.context,this.listeners=[],this.emitting=0}var Ur=dc.prototype,eD=function(e,n,r,i,o,a,s){lt(i)&&(o=i,i=null),s&&(a==null?a=s:a=ye({},a,s));for(var u=tt(r)?r:r.split(/\s+/),l=0;l<u.length;l++){var c=u[l];if(!$r(c)){var d=c.match(Xb);if(d){var f=d[1],h=d[2]?d[2]:null,p=n(e,c,f,h,i,o,a);if(p===!1)break}}}},Dw=function(e,n){return e.addEventFields(e.context,n),new Qb(n.type,n)},iO=function(e,n,r){if(I1(r)){n(e,r);return}else if(He(r)){n(e,Dw(e,r));return}for(var i=tt(r)?r:r.split(/\s+/),o=0;o<i.length;o++){var a=i[o];if(!$r(a)){var s=a.match(Xb);if(s){var u=s[1],l=s[2]?s[2]:null,c=Dw(e,{type:u,namespace:l,target:e.context});n(e,c)}}}};Ur.on=Ur.addListener=function(t,e,n,r,i){return eD(this,function(o,a,s,u,l,c,d){lt(c)&&o.listeners.push({event:a,callback:c,type:s,namespace:u,qualifier:l,conf:d})},t,e,n,r,i),this};Ur.one=function(t,e,n,r){return this.on(t,e,n,r,{one:!0})};Ur.removeListener=Ur.off=function(t,e,n,r){var i=this;this.emitting!==0&&(this.listeners=kN(this.listeners));for(var o=this.listeners,a=function(l){var c=o[l];eD(i,function(d,f,h,p,m,g){if((c.type===h||t==="*")&&(!p&&c.namespace!==".*"||c.namespace===p)&&(!m||d.qualifierCompare(c.qualifier,m))&&(!g||c.callback===g))return o.splice(l,1),!1},t,e,n,r)},s=o.length-1;s>=0;s--)a(s);return this};Ur.removeAllListeners=function(){return this.removeListener("*")};Ur.emit=Ur.trigger=function(t,e,n){var r=this.listeners,i=r.length;return this.emitting++,tt(e)||(e=[e]),iO(this,function(o,a){n!=null&&(r=[{event:a.event,type:a.type,namespace:a.namespace,callback:n}],i=r.length);for(var s=function(c){var d=r[c];if(d.type===a.type&&(!d.namespace||d.namespace===a.namespace||d.namespace===nO)&&o.eventMatches(o.context,d,a)){var f=[a];e!=null&&PN(f,e),o.beforeEmit(o.context,d,a),d.conf&&d.conf.one&&(o.listeners=o.listeners.filter(function(m){return m!==d}));var h=o.callbackContext(o.context,d,a),p=d.callback.apply(h,f);o.afterEmit(o.context,d,a),p===!1&&(a.stopPropagation(),a.preventDefault())}},u=0;u<i;u++)s(u);o.bubble(o.context)&&!a.isPropagationStopped()&&o.parent(o.context).emit(a,e)},t),this.emitting--,this};var oO={qualifierCompare:function(e,n){return e==null||n==null?e==null&&n==null:e.sameText(n)},eventMatches:function(e,n,r){var i=n.qualifier;return i!=null?e!==r.target&&Ss(r.target)&&i.matches(r.target):!0},addEventFields:function(e,n){n.cy=e.cy(),n.target=e},callbackContext:function(e,n,r){return n.qualifier!=null?r.target:e},beforeEmit:function(e,n){n.conf&&n.conf.once&&n.conf.onceCollection.removeListener(n.event,n.qualifier,n.callback)},bubble:function(){return!0},parent:function(e){return e.isChild()?e.parent():e.cy()}},Rl=function(e){return pe(e)?new Hr(e):e},tD={createEmitter:function(){for(var e=0;e<this.length;e++){var n=this[e],r=n._private;r.emitter||(r.emitter=new dc(oO,n))}return this},emitter:function(){return this._private.emitter},on:function(e,n,r){for(var i=Rl(n),o=0;o<this.length;o++){var a=this[o];a.emitter().on(e,i,r)}return this},removeListener:function(e,n,r){for(var i=Rl(n),o=0;o<this.length;o++){var a=this[o];a.emitter().removeListener(e,i,r)}return this},removeAllListeners:function(){for(var e=0;e<this.length;e++){var n=this[e];n.emitter().removeAllListeners()}return this},one:function(e,n,r){for(var i=Rl(n),o=0;o<this.length;o++){var a=this[o];a.emitter().one(e,i,r)}return this},once:function(e,n,r){for(var i=Rl(n),o=0;o<this.length;o++){var a=this[o];a.emitter().on(e,i,r,{once:!0,onceCollection:this})}},emit:function(e,n){for(var r=0;r<this.length;r++){var i=this[r];i.emitter().emit(e,n)}return this},emitAndNotify:function(e,n){if(this.length!==0)return this.cy().notify(e,this),this.emit(e,n),this}};Ze.eventAliasesOn(tD);var nD={nodes:function(e){return this.filter(function(n){return n.isNode()}).filter(e)},edges:function(e){return this.filter(function(n){return n.isEdge()}).filter(e)},byGroup:function(){for(var e=this.spawn(),n=this.spawn(),r=0;r<this.length;r++){var i=this[r];i.isNode()?e.push(i):n.push(i)}return{nodes:e,edges:n}},filter:function(e,n){if(e===void 0)return this;if(pe(e)||pn(e))return new Hr(e).filter(this);if(lt(e)){for(var r=this.spawn(),i=this,o=0;o<i.length;o++){var a=i[o],s=n?e.apply(n,[a,o,i]):e(a,o,i);s&&r.push(a)}return r}return this.spawn()},not:function(e){if(e){pe(e)&&(e=this.filter(e));for(var n=this.spawn(),r=0;r<this.length;r++){var i=this[r],o=e.has(i);o||n.push(i)}return n}else return this},absoluteComplement:function(){var e=this.cy();return e.mutableElements().not(this)},intersect:function(e){if(pe(e)){var n=e;return this.filter(n)}for(var r=this.spawn(),i=this,o=e,a=this.length<e.length,s=a?i:o,u=a?o:i,l=0;l<s.length;l++){var c=s[l];u.has(c)&&r.push(c)}return r},xor:function(e){var n=this._private.cy;pe(e)&&(e=n.$(e));var r=this.spawn(),i=this,o=e,a=function(u,l){for(var c=0;c<u.length;c++){var d=u[c],f=d._private.data.id,h=l.hasElementWithId(f);h||r.push(d)}};return a(i,o),a(o,i),r},diff:function(e){var n=this._private.cy;pe(e)&&(e=n.$(e));var r=this.spawn(),i=this.spawn(),o=this.spawn(),a=this,s=e,u=function(c,d,f){for(var h=0;h<c.length;h++){var p=c[h],m=p._private.data.id,g=d.hasElementWithId(m);g?o.merge(p):f.push(p)}};return u(a,s,r),u(s,a,i),{left:r,right:i,both:o}},add:function(e){var n=this._private.cy;if(!e)return this;if(pe(e)){var r=e;e=n.mutableElements().filter(r)}for(var i=this.spawnSelf(),o=0;o<e.length;o++){var a=e[o],s=!this.has(a);s&&i.push(a)}return i},merge:function(e){var n=this._private,r=n.cy;if(!e)return this;if(e&&pe(e)){var i=e;e=r.mutableElements().filter(i)}for(var o=n.map,a=0;a<e.length;a++){var s=e[a],u=s._private.data.id,l=!o.has(u);if(l){var c=this.length++;this[c]=s,o.set(u,{ele:s,index:c})}}return this},unmergeAt:function(e){var n=this[e],r=n.id(),i=this._private,o=i.map;this[e]=void 0,o.delete(r);var a=e===this.length-1;if(this.length>1&&!a){var s=this.length-1,u=this[s],l=u._private.data.id;this[s]=void 0,this[e]=u,o.set(l,{ele:u,index:e})}return this.length--,this},unmergeOne:function(e){e=e[0];var n=this._private,r=e._private.data.id,i=n.map,o=i.get(r);if(!o)return this;var a=o.index;return this.unmergeAt(a),this},unmerge:function(e){var n=this._private.cy;if(!e)return this;if(e&&pe(e)){var r=e;e=n.mutableElements().filter(r)}for(var i=0;i<e.length;i++)this.unmergeOne(e[i]);return this},unmergeBy:function(e){for(var n=this.length-1;n>=0;n--){var r=this[n];e(r)&&this.unmergeAt(n)}return this},map:function(e,n){for(var r=[],i=this,o=0;o<i.length;o++){var a=i[o],s=n?e.apply(n,[a,o,i]):e(a,o,i);r.push(s)}return r},reduce:function(e,n){for(var r=n,i=this,o=0;o<i.length;o++)r=e(r,i[o],o,i);return r},max:function(e,n){for(var r=-1/0,i,o=this,a=0;a<o.length;a++){var s=o[a],u=n?e.apply(n,[s,a,o]):e(s,a,o);u>r&&(r=u,i=s)}return{value:r,ele:i}},min:function(e,n){for(var r=1/0,i,o=this,a=0;a<o.length;a++){var s=o[a],u=n?e.apply(n,[s,a,o]):e(s,a,o);u<r&&(r=u,i=s)}return{value:r,ele:i}}},Ue=nD;Ue.u=Ue["|"]=Ue["+"]=Ue.union=Ue.or=Ue.add;Ue["\\"]=Ue["!"]=Ue["-"]=Ue.difference=Ue.relativeComplement=Ue.subtract=Ue.not;Ue.n=Ue["&"]=Ue["."]=Ue.and=Ue.intersection=Ue.intersect;Ue["^"]=Ue["(+)"]=Ue["(-)"]=Ue.symmetricDifference=Ue.symdiff=Ue.xor;Ue.fnFilter=Ue.filterFn=Ue.stdFilter=Ue.filter;Ue.complement=Ue.abscomp=Ue.absoluteComplement;var aO={isNode:function(){return this.group()==="nodes"},isEdge:function(){return this.group()==="edges"},isLoop:function(){return this.isEdge()&&this.source()[0]===this.target()[0]},isSimple:function(){return this.isEdge()&&this.source()[0]!==this.target()[0]},group:function(){var e=this[0];if(e)return e._private.group}},rD=function(e,n){var r=e.cy(),i=r.hasCompoundNodes();function o(c){var d=c.pstyle("z-compound-depth");return d.value==="auto"?i?c.zDepth():0:d.value==="bottom"?-1:d.value==="top"?vp:0}var a=o(e)-o(n);if(a!==0)return a;function s(c){var d=c.pstyle("z-index-compare");return d.value==="auto"&&c.isNode()?1:0}var u=s(e)-s(n);if(u!==0)return u;var l=e.pstyle("z-index").value-n.pstyle("z-index").value;return l!==0?l:e.poolIndex()-n.poolIndex()},Kl={forEach:function(e,n){if(lt(e))for(var r=this.length,i=0;i<r;i++){var o=this[i],a=n?e.apply(n,[o,i,this]):e(o,i,this);if(a===!1)break}return this},toArray:function(){for(var e=[],n=0;n<this.length;n++)e.push(this[n]);return e},slice:function(e,n){var r=[],i=this.length;n==null&&(n=i),e==null&&(e=0),e<0&&(e=i+e),n<0&&(n=i+n);for(var o=e;o>=0&&o<n&&o<i;o++)r.push(this[o]);return this.spawn(r)},size:function(){return this.length},eq:function(e){return this[e]||this.spawn()},first:function(){return this[0]||this.spawn()},last:function(){return this[this.length-1]||this.spawn()},empty:function(){return this.length===0},nonempty:function(){return!this.empty()},sort:function(e){if(!lt(e))return this;var n=this.toArray().sort(e);return this.spawn(n)},sortByZIndex:function(){return this.sort(rD)},zDepth:function(){var e=this[0];if(e){var n=e._private,r=n.group;if(r==="nodes"){var i=n.data.parent?e.parents().size():0;return e.isParent()?i:vp-1}else{var o=n.source,a=n.target,s=o.zDepth(),u=a.zDepth();return Math.max(s,u,0)}}}};Kl.each=Kl.forEach;var sO=function(){var e="undefined",n=(typeof Symbol>"u"?"undefined":Dt(Symbol))!=e&&Dt(Symbol.iterator)!=e;n&&(Kl[Symbol.iterator]=function(){var r=this,i={value:void 0,done:!1},o=0,a=this.length;return Jw({next:function(){return o<a?i.value=r[o++]:(i.value=void 0,i.done=!0),i}},Symbol.iterator,function(){return this})})};sO();var uO=Pt({nodeDimensionsIncludeLabels:!1}),Bl={layoutDimensions:function(e){e=uO(e);var n;if(!this.takesUpSpace())n={w:0,h:0};else if(e.nodeDimensionsIncludeLabels){var r=this.boundingBox();n={w:r.w,h:r.h}}else n={w:this.outerWidth(),h:this.outerHeight()};return(n.w===0||n.h===0)&&(n.w=n.h=1),n},layoutPositions:function(e,n,r){var i=this.nodes().filter(function(I){return!I.isParent()}),o=this.cy(),a=n.eles,s=function(E){return E.id()},u=hs(r,s);e.emit({type:"layoutstart",layout:e}),e.animations=[];var l=function(E,D,S){var C={x:D.x1+D.w/2,y:D.y1+D.h/2},A={x:(S.x-C.x)*E,y:(S.y-C.y)*E};return{x:C.x+A.x,y:C.y+A.y}},c=n.spacingFactor&&n.spacingFactor!==1,d=function(){if(!c)return null;for(var E=en(),D=0;D<i.length;D++){var S=i[D],C=u(S,D);lA(E,C.x,C.y)}return E},f=d(),h=hs(function(I,E){var D=u(I,E);if(c){var S=Math.abs(n.spacingFactor);D=l(S,f,D)}return n.transform!=null&&(D=n.transform(I,D)),D},s);if(n.animate){for(var p=0;p<i.length;p++){var m=i[p],g=h(m,p),v=n.animateFilter==null||n.animateFilter(m,p);if(v){var y=m.animation({position:g,duration:n.animationDuration,easing:n.animationEasing});e.animations.push(y)}else m.position(g)}if(n.fit){var w=o.animation({fit:{boundingBox:a.boundingBoxAt(h),padding:n.padding},duration:n.animationDuration,easing:n.animationEasing});e.animations.push(w)}else if(n.zoom!==void 0&&n.pan!==void 0){var b=o.animation({zoom:n.zoom,pan:n.pan,duration:n.animationDuration,easing:n.animationEasing});e.animations.push(b)}e.animations.forEach(function(I){return I.play()}),e.one("layoutready",n.ready),e.emit({type:"layoutready",layout:e}),Ho.all(e.animations.map(function(I){return I.promise()})).then(function(){e.one("layoutstop",n.stop),e.emit({type:"layoutstop",layout:e})})}else i.positions(h),n.fit&&o.fit(n.eles,n.padding),n.zoom!=null&&o.zoom(n.zoom),n.pan&&o.pan(n.pan),e.one("layoutready",n.ready),e.emit({type:"layoutready",layout:e}),e.one("layoutstop",n.stop),e.emit({type:"layoutstop",layout:e});return this},layout:function(e){var n=this.cy();return n.makeLayout(ye({},e,{eles:this}))}};Bl.createLayout=Bl.makeLayout=Bl.layout;function iD(t,e,n){var r=n._private,i=r.styleCache=r.styleCache||[],o;return(o=i[t])!=null||(o=i[t]=e(n)),o}function fc(t,e){return t=Ii(t),function(r){return iD(t,e,r)}}function hc(t,e){t=Ii(t);var n=function(i){return e.call(i)};return function(){var i=this[0];if(i)return iD(t,n,i)}}var kt={recalculateRenderedStyle:function(e){var n=this.cy(),r=n.renderer(),i=n.styleEnabled();return r&&i&&r.recalculateRenderedStyle(this,e),this},dirtyStyleCache:function(){var e=this.cy(),n=function(o){return o._private.styleCache=null};if(e.hasCompoundNodes()){var r;r=this.spawnSelf().merge(this.descendants()).merge(this.parents()),r.merge(r.connectedEdges()),r.forEach(n)}else this.forEach(function(i){n(i),i.connectedEdges().forEach(n)});return this},updateStyle:function(e){var n=this._private.cy;if(!n.styleEnabled())return this;if(n.batching()){var r=n._private.batchStyleEles;return r.merge(this),this}var i=n.hasCompoundNodes(),o=this;e=!!(e||e===void 0),i&&(o=this.spawnSelf().merge(this.descendants()).merge(this.parents()));var a=o;return e?a.emitAndNotify("style"):a.emit("style"),o.forEach(function(s){return s._private.styleDirty=!0}),this},cleanStyle:function(){var e=this.cy();if(e.styleEnabled())for(var n=0;n<this.length;n++){var r=this[n];r._private.styleDirty&&(r._private.styleDirty=!1,e.style().apply(r))}},parsedStyle:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,r=this[0],i=r.cy();if(i.styleEnabled()&&r){this.cleanStyle();var o=r._private.style[e];return o??(n?i.style().getDefaultProperty(e):null)}},numericStyle:function(e){var n=this[0];if(n.cy().styleEnabled()&&n){var r=n.pstyle(e);return r.pfValue!==void 0?r.pfValue:r.value}},numericStyleUnits:function(e){var n=this[0];if(n.cy().styleEnabled()&&n)return n.pstyle(e).units},renderedStyle:function(e){var n=this.cy();if(!n.styleEnabled())return this;var r=this[0];if(r)return n.style().getRenderedStyle(r,e)},style:function(e,n){var r=this.cy();if(!r.styleEnabled())return this;var i=!1,o=r.style();if(He(e)){var a=e;o.applyBypass(this,a,i),this.emitAndNotify("style")}else if(pe(e))if(n===void 0){var s=this[0];return s?o.getStylePropertyValue(s,e):void 0}else o.applyBypass(this,e,n,i),this.emitAndNotify("style");else if(e===void 0){var u=this[0];return u?o.getRawStyle(u):void 0}return this},removeStyle:function(e){var n=this.cy();if(!n.styleEnabled())return this;var r=!1,i=n.style(),o=this;if(e===void 0)for(var a=0;a<o.length;a++){var s=o[a];i.removeAllBypasses(s,r)}else{e=e.split(/\s+/);for(var u=0;u<o.length;u++){var l=o[u];i.removeBypasses(l,e,r)}}return this.emitAndNotify("style"),this},show:function(){return this.css("display","element"),this},hide:function(){return this.css("display","none"),this},effectiveOpacity:function(){var e=this.cy();if(!e.styleEnabled())return 1;var n=e.hasCompoundNodes(),r=this[0];if(r){var i=r._private,o=r.pstyle("opacity").value;if(!n)return o;var a=i.data.parent?r.parents():null;if(a)for(var s=0;s<a.length;s++){var u=a[s],l=u.pstyle("opacity").value;o=l*o}return o}},transparent:function(){var e=this.cy();if(!e.styleEnabled())return!1;var n=this[0],r=n.cy().hasCompoundNodes();if(n)return r?n.effectiveOpacity()===0:n.pstyle("opacity").value===0},backgrounding:function(){var e=this.cy();if(!e.styleEnabled())return!1;var n=this[0];return!!n._private.backgrounding}};function qh(t,e){var n=t._private,r=n.data.parent?t.parents():null;if(r)for(var i=0;i<r.length;i++){var o=r[i];if(!e(o))return!1}return!0}function Mp(t){var e=t.ok,n=t.edgeOkViaNode||t.ok,r=t.parentOk||t.ok;return function(){var i=this.cy();if(!i.styleEnabled())return!0;var o=this[0],a=i.hasCompoundNodes();if(o){var s=o._private;if(!e(o))return!1;if(o.isNode())return!a||qh(o,r);var u=s.source,l=s.target;return n(u)&&(!a||qh(u,n))&&(u===l||n(l)&&(!a||qh(l,n)))}}}var Go=fc("eleTakesUpSpace",function(t){return t.pstyle("display").value==="element"&&t.width()!==0&&(t.isNode()?t.height()!==0:!0)});kt.takesUpSpace=hc("takesUpSpace",Mp({ok:Go}));var lO=fc("eleInteractive",function(t){return t.pstyle("events").value==="yes"&&t.pstyle("visibility").value==="visible"&&Go(t)}),cO=fc("parentInteractive",function(t){return t.pstyle("visibility").value==="visible"&&Go(t)});kt.interactive=hc("interactive",Mp({ok:lO,parentOk:cO,edgeOkViaNode:Go}));kt.noninteractive=function(){var t=this[0];if(t)return!t.interactive()};var dO=fc("eleVisible",function(t){return t.pstyle("visibility").value==="visible"&&t.pstyle("opacity").pfValue!==0&&Go(t)}),fO=Go;kt.visible=hc("visible",Mp({ok:dO,edgeOkViaNode:fO}));kt.hidden=function(){var t=this[0];if(t)return!t.visible()};kt.isBundledBezier=hc("isBundledBezier",function(){return this.cy().styleEnabled()?!this.removed()&&this.pstyle("curve-style").value==="bezier"&&this.takesUpSpace():!1});kt.bypass=kt.css=kt.style;kt.renderedCss=kt.renderedStyle;kt.removeBypass=kt.removeCss=kt.removeStyle;kt.pstyle=kt.parsedStyle;var Vr={};function Ew(t){return function(){var e=arguments,n=[];if(e.length===2){var r=e[0],i=e[1];this.on(t.event,r,i)}else if(e.length===1&&lt(e[0])){var o=e[0];this.on(t.event,o)}else if(e.length===0||e.length===1&&tt(e[0])){for(var a=e.length===1?e[0]:null,s=0;s<this.length;s++){var u=this[s],l=!t.ableField||u._private[t.ableField],c=u._private[t.field]!=t.value;if(t.overrideAble){var d=t.overrideAble(u);if(d!==void 0&&(l=d,!d))return this}l&&(u._private[t.field]=t.value,c&&n.push(u))}var f=this.spawn(n);f.updateStyle(),f.emit(t.event),a&&f.emit(a)}return this}}function Wo(t){Vr[t.field]=function(){var e=this[0];if(e){if(t.overrideField){var n=t.overrideField(e);if(n!==void 0)return n}return e._private[t.field]}},Vr[t.on]=Ew({event:t.on,field:t.field,ableField:t.ableField,overrideAble:t.overrideAble,value:!0}),Vr[t.off]=Ew({event:t.off,field:t.field,ableField:t.ableField,overrideAble:t.overrideAble,value:!1})}Wo({field:"locked",overrideField:function(e){return e.cy().autolock()?!0:void 0},on:"lock",off:"unlock"});Wo({field:"grabbable",overrideField:function(e){return e.cy().autoungrabify()||e.pannable()?!1:void 0},on:"grabify",off:"ungrabify"});Wo({field:"selected",ableField:"selectable",overrideAble:function(e){return e.cy().autounselectify()?!1:void 0},on:"select",off:"unselect"});Wo({field:"selectable",overrideField:function(e){return e.cy().autounselectify()?!1:void 0},on:"selectify",off:"unselectify"});Vr.deselect=Vr.unselect;Vr.grabbed=function(){var t=this[0];if(t)return t._private.grabbed};Wo({field:"active",on:"activate",off:"unactivate"});Wo({field:"pannable",on:"panify",off:"unpanify"});Vr.inactive=function(){var t=this[0];if(t)return!t._private.active};var Ut={},Cw=function(e){return function(r){for(var i=this,o=[],a=0;a<i.length;a++){var s=i[a];if(s.isNode()){for(var u=!1,l=s.connectedEdges(),c=0;c<l.length;c++){var d=l[c],f=d.source(),h=d.target();if(e.noIncomingEdges&&h===s&&f!==s||e.noOutgoingEdges&&f===s&&h!==s){u=!0;break}}u||o.push(s)}}return this.spawn(o,!0).filter(r)}},Iw=function(e){return function(n){for(var r=this,i=[],o=0;o<r.length;o++){var a=r[o];if(a.isNode())for(var s=a.connectedEdges(),u=0;u<s.length;u++){var l=s[u],c=l.source(),d=l.target();e.outgoing&&c===a?(i.push(l),i.push(d)):e.incoming&&d===a&&(i.push(l),i.push(c))}}return this.spawn(i,!0).filter(n)}},Sw=function(e){return function(n){for(var r=this,i=[],o={};;){var a=e.outgoing?r.outgoers():r.incomers();if(a.length===0)break;for(var s=!1,u=0;u<a.length;u++){var l=a[u],c=l.id();o[c]||(o[c]=!0,i.push(l),s=!0)}if(!s)break;r=a}return this.spawn(i,!0).filter(n)}};Ut.clearTraversalCache=function(){for(var t=0;t<this.length;t++)this[t]._private.traversalCache=null};ye(Ut,{roots:Cw({noIncomingEdges:!0}),leaves:Cw({noOutgoingEdges:!0}),outgoers:In(Iw({outgoing:!0}),"outgoers"),successors:Sw({outgoing:!0}),incomers:In(Iw({incoming:!0}),"incomers"),predecessors:Sw({incoming:!0})});ye(Ut,{neighborhood:In(function(t){for(var e=[],n=this.nodes(),r=0;r<n.length;r++)for(var i=n[r],o=i.connectedEdges(),a=0;a<o.length;a++){var s=o[a],u=s.source(),l=s.target(),c=i===u?l:u;c.length>0&&e.push(c[0]),e.push(s[0])}return this.spawn(e,!0).filter(t)},"neighborhood"),closedNeighborhood:function(e){return this.neighborhood().add(this).filter(e)},openNeighborhood:function(e){return this.neighborhood(e)}});Ut.neighbourhood=Ut.neighborhood;Ut.closedNeighbourhood=Ut.closedNeighborhood;Ut.openNeighbourhood=Ut.openNeighborhood;ye(Ut,{source:In(function(e){var n=this[0],r;return n&&(r=n._private.source||n.cy().collection()),r&&e?r.filter(e):r},"source"),target:In(function(e){var n=this[0],r;return n&&(r=n._private.target||n.cy().collection()),r&&e?r.filter(e):r},"target"),sources:xw({attr:"source"}),targets:xw({attr:"target"})});function xw(t){return function(n){for(var r=[],i=0;i<this.length;i++){var o=this[i],a=o._private[t.attr];a&&r.push(a)}return this.spawn(r,!0).filter(n)}}ye(Ut,{edgesWith:In(Tw(),"edgesWith"),edgesTo:In(Tw({thisIsSrc:!0}),"edgesTo")});function Tw(t){return function(n){var r=[],i=this._private.cy,o=t||{};pe(n)&&(n=i.$(n));for(var a=0;a<n.length;a++)for(var s=n[a]._private.edges,u=0;u<s.length;u++){var l=s[u],c=l._private.data,d=this.hasElementWithId(c.source)&&n.hasElementWithId(c.target),f=n.hasElementWithId(c.source)&&this.hasElementWithId(c.target),h=d||f;h&&((o.thisIsSrc||o.thisIsTgt)&&(o.thisIsSrc&&!d||o.thisIsTgt&&!f)||r.push(l))}return this.spawn(r,!0)}}ye(Ut,{connectedEdges:In(function(t){for(var e=[],n=this,r=0;r<n.length;r++){var i=n[r];if(i.isNode())for(var o=i._private.edges,a=0;a<o.length;a++){var s=o[a];e.push(s)}}return this.spawn(e,!0).filter(t)},"connectedEdges"),connectedNodes:In(function(t){for(var e=[],n=this,r=0;r<n.length;r++){var i=n[r];i.isEdge()&&(e.push(i.source()[0]),e.push(i.target()[0]))}return this.spawn(e,!0).filter(t)},"connectedNodes"),parallelEdges:In(Mw(),"parallelEdges"),codirectedEdges:In(Mw({codirected:!0}),"codirectedEdges")});function Mw(t){var e={codirected:!1};return t=ye({},e,t),function(r){for(var i=[],o=this.edges(),a=t,s=0;s<o.length;s++)for(var u=o[s],l=u._private,c=l.source,d=c._private.data.id,f=l.data.target,h=c._private.edges,p=0;p<h.length;p++){var m=h[p],g=m._private.data,v=g.target,y=g.source,w=v===f&&y===d,b=d===v&&f===y;(a.codirected&&w||!a.codirected&&(w||b))&&i.push(m)}return this.spawn(i,!0).filter(r)}}ye(Ut,{components:function(e){var n=this,r=n.cy(),i=r.collection(),o=e==null?n.nodes():e.nodes(),a=[];e!=null&&o.empty()&&(o=e.sources());var s=function(c,d){i.merge(c),o.unmerge(c),d.merge(c)};if(o.empty())return n.spawn();var u=function(){var c=r.collection();a.push(c);var d=o[0];s(d,c),n.bfs({directed:!1,roots:d,visit:function(h){return s(h,c)}}),c.forEach(function(f){f.connectedEdges().forEach(function(h){n.has(h)&&c.has(h.source())&&c.has(h.target())&&c.merge(h)})})};do u();while(o.length>0);return a},component:function(){var e=this[0];return e.cy().mutableElements().components(e)[0]}});Ut.componentsOf=Ut.components;var Ot=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(e===void 0){dt("A collection must have a reference to the core");return}var o=new er,a=!1;if(!n)n=[];else if(n.length>0&&He(n[0])&&!Ss(n[0])){a=!0;for(var s=[],u=new jo,l=0,c=n.length;l<c;l++){var d=n[l];d.data==null&&(d.data={});var f=d.data;if(f.id==null)f.id=mb();else if(e.hasElementWithId(f.id)||u.has(f.id))continue;var h=new ic(e,d,!1);s.push(h),u.add(f.id)}n=s}this.length=0;for(var p=0,m=n.length;p<m;p++){var g=n[p][0];if(g!=null){var v=g._private.data.id;(!r||!o.has(v))&&(r&&o.set(v,{index:this.length,ele:g}),this[this.length]=g,this.length++)}}this._private={eles:this,cy:e,get map(){return this.lazyMap==null&&this.rebuildMap(),this.lazyMap},set map(y){this.lazyMap=y},rebuildMap:function(){for(var w=this.lazyMap=new er,b=this.eles,I=0;I<b.length;I++){var E=b[I];w.set(E.id(),{index:I,ele:E})}}},r&&(this._private.map=o),a&&!i&&this.restore()},it=ic.prototype=Ot.prototype=Object.create(Array.prototype);it.instanceString=function(){return"collection"};it.spawn=function(t,e){return new Ot(this.cy(),t,e)};it.spawnSelf=function(){return this.spawn(this)};it.cy=function(){return this._private.cy};it.renderer=function(){return this._private.cy.renderer()};it.element=function(){return this[0]};it.collection=function(){return rb(this)?this:new Ot(this._private.cy,[this])};it.unique=function(){return new Ot(this._private.cy,this,!0)};it.hasElementWithId=function(t){return t=""+t,this._private.map.has(t)};it.getElementById=function(t){t=""+t;var e=this._private.cy,n=this._private.map.get(t);return n?n.ele:new Ot(e)};it.$id=it.getElementById;it.poolIndex=function(){var t=this._private.cy,e=t._private.elements,n=this[0]._private.data.id;return e._private.map.get(n).index};it.indexOf=function(t){var e=t[0]._private.data.id;return this._private.map.get(e).index};it.indexOfId=function(t){return t=""+t,this._private.map.get(t).index};it.json=function(t){var e=this.element(),n=this.cy();if(e==null&&t)return this;if(e!=null){var r=e._private;if(He(t)){if(n.startBatch(),t.data){e.data(t.data);var i=r.data;if(e.isEdge()){var o=!1,a={},s=t.data.source,u=t.data.target;s!=null&&s!=i.source&&(a.source=""+s,o=!0),u!=null&&u!=i.target&&(a.target=""+u,o=!0),o&&(e=e.move(a))}else{var l="parent"in t.data,c=t.data.parent;l&&(c!=null||i.parent!=null)&&c!=i.parent&&(c===void 0&&(c=null),c!=null&&(c=""+c),e=e.move({parent:c}))}}t.position&&e.position(t.position);var d=function(m,g,v){var y=t[m];y!=null&&y!==r[m]&&(y?e[g]():e[v]())};return d("removed","remove","restore"),d("selected","select","unselect"),d("selectable","selectify","unselectify"),d("locked","lock","unlock"),d("grabbable","grabify","ungrabify"),d("pannable","panify","unpanify"),t.classes!=null&&e.classes(t.classes),n.endBatch(),this}else if(t===void 0){var f={data:Jn(r.data),position:Jn(r.position),group:r.group,removed:r.removed,selected:r.selected,selectable:r.selectable,locked:r.locked,grabbable:r.grabbable,pannable:r.pannable,classes:null};f.classes="";var h=0;return r.classes.forEach(function(p){return f.classes+=h++===0?p:" "+p}),f}}};it.jsons=function(){for(var t=[],e=0;e<this.length;e++){var n=this[e],r=n.json();t.push(r)}return t};it.clone=function(){for(var t=this.cy(),e=[],n=0;n<this.length;n++){var r=this[n],i=r.json(),o=new ic(t,i,!1);e.push(o)}return new Ot(t,e)};it.copy=it.clone;it.restore=function(){for(var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,n=this,r=n.cy(),i=r._private,o=[],a=[],s,u=0,l=n.length;u<l;u++){var c=n[u];e&&!c.removed()||(c.isNode()?o.push(c):a.push(c))}s=o.concat(a);var d,f=function(){s.splice(d,1),d--};for(d=0;d<s.length;d++){var h=s[d],p=h._private,m=p.data;if(h.clearTraversalCache(),!(!e&&!p.removed)){if(m.id===void 0)m.id=mb();else if(ie(m.id))m.id=""+m.id;else if($r(m.id)||!pe(m.id)){dt("Can not create element with invalid string ID `"+m.id+"`"),f();continue}else if(r.hasElementWithId(m.id)){dt("Can not create second element with ID `"+m.id+"`"),f();continue}}var g=m.id;if(h.isNode()){var v=p.position;v.x==null&&(v.x=0),v.y==null&&(v.y=0)}if(h.isEdge()){for(var y=h,w=["source","target"],b=w.length,I=!1,E=0;E<b;E++){var D=w[E],S=m[D];ie(S)&&(S=m[D]=""+m[D]),S==null||S===""?(dt("Can not create edge `"+g+"` with unspecified "+D),I=!0):r.hasElementWithId(S)||(dt("Can not create edge `"+g+"` with nonexistant "+D+" `"+S+"`"),I=!0)}if(I){f();continue}var C=r.getElementById(m.source),A=r.getElementById(m.target);C.same(A)?C._private.edges.push(y):(C._private.edges.push(y),A._private.edges.push(y)),y._private.source=C,y._private.target=A}p.map=new er,p.map.set(g,{ele:h,index:0}),p.removed=!1,e&&r.addToPool(h)}for(var M=0;M<o.length;M++){var N=o[M],R=N._private.data;ie(R.parent)&&(R.parent=""+R.parent);var T=R.parent,O=T!=null;if(O||N._private.parent){var _=N._private.parent?r.collection().merge(N._private.parent):r.getElementById(T);if(_.empty())R.parent=void 0;else if(_[0].removed())Ye("Node added with missing parent, reference to parent removed"),R.parent=void 0,N._private.parent=null;else{for(var k=!1,P=_;!P.empty();){if(N.same(P)){k=!0,R.parent=void 0;break}P=P.parent()}k||(_[0]._private.children.push(N),N._private.parent=_[0],i.hasCompoundNodes=!0)}}}if(s.length>0){for(var V=s.length===n.length?n:new Ot(r,s),z=0;z<V.length;z++){var B=V[z];B.isNode()||(B.parallelEdges().clearTraversalCache(),B.source().clearTraversalCache(),B.target().clearTraversalCache())}var $;i.hasCompoundNodes?$=r.collection().merge(V).merge(V.connectedNodes()).merge(V.parent()):$=V,$.dirtyCompoundBoundsCache().dirtyBoundingBoxCache().updateStyle(t),t?V.emitAndNotify("add"):e&&V.emit("add")}return n};it.removed=function(){var t=this[0];return t&&t._private.removed};it.inside=function(){var t=this[0];return t&&!t._private.removed};it.remove=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,n=this,r=[],i={},o=n._private.cy;function a(T){for(var O=T._private.edges,_=0;_<O.length;_++)u(O[_])}function s(T){for(var O=T._private.children,_=0;_<O.length;_++)u(O[_])}function u(T){var O=i[T.id()];e&&T.removed()||O||(i[T.id()]=!0,T.isNode()?(r.push(T),a(T),s(T)):r.unshift(T))}for(var l=0,c=n.length;l<c;l++){var d=n[l];u(d)}function f(T,O){var _=T._private.edges;jr(_,O),T.clearTraversalCache()}function h(T){T.clearTraversalCache()}var p=[];p.ids={};function m(T,O){O=O[0],T=T[0];var _=T._private.children,k=T.id();jr(_,O),O._private.parent=null,p.ids[k]||(p.ids[k]=!0,p.push(T))}n.dirtyCompoundBoundsCache(),e&&o.removeFromPool(r);for(var g=0;g<r.length;g++){var v=r[g];if(v.isEdge()){var y=v.source()[0],w=v.target()[0];f(y,v),f(w,v);for(var b=v.parallelEdges(),I=0;I<b.length;I++){var E=b[I];h(E),E.isBundledBezier()&&E.dirtyBoundingBoxCache()}}else{var D=v.parent();D.length!==0&&m(D,v)}e&&(v._private.removed=!0)}var S=o._private.elements;o._private.hasCompoundNodes=!1;for(var C=0;C<S.length;C++){var A=S[C];if(A.isParent()){o._private.hasCompoundNodes=!0;break}}var M=new Ot(this.cy(),r);M.size()>0&&(t?M.emitAndNotify("remove"):e&&M.emit("remove"));for(var N=0;N<p.length;N++){var R=p[N];(!e||!R.removed())&&R.updateStyle()}return M};it.move=function(t){var e=this._private.cy,n=this,r=!1,i=!1,o=function(p){return p==null?p:""+p};if(t.source!==void 0||t.target!==void 0){var a=o(t.source),s=o(t.target),u=a!=null&&e.hasElementWithId(a),l=s!=null&&e.hasElementWithId(s);(u||l)&&(e.batch(function(){n.remove(r,i),n.emitAndNotify("moveout");for(var h=0;h<n.length;h++){var p=n[h],m=p._private.data;p.isEdge()&&(u&&(m.source=a),l&&(m.target=s))}n.restore(r,i)}),n.emitAndNotify("move"))}else if(t.parent!==void 0){var c=o(t.parent),d=c===null||e.hasElementWithId(c);if(d){var f=c===null?void 0:c;e.batch(function(){var h=n.remove(r,i);h.emitAndNotify("moveout");for(var p=0;p<n.length;p++){var m=n[p],g=m._private.data;m.isNode()&&(g.parent=f)}h.restore(r,i)}),n.emitAndNotify("move")}}return this};[Ab,Ck,Fl,Br,$o,Vk,cc,tO,tD,nD,aO,Kl,Bl,kt,Vr,Ut].forEach(function(t){ye(it,t)});var hO={add:function(e){var n,r=this;if(pn(e)){var i=e;if(i._private.cy===r)n=i.restore();else{for(var o=[],a=0;a<i.length;a++){var s=i[a];o.push(s.json())}n=new Ot(r,o)}}else if(tt(e)){var u=e;n=new Ot(r,u)}else if(He(e)&&(tt(e.nodes)||tt(e.edges))){for(var l=e,c=[],d=["nodes","edges"],f=0,h=d.length;f<h;f++){var p=d[f],m=l[p];if(tt(m))for(var g=0,v=m.length;g<v;g++){var y=ye({group:p},m[g]);c.push(y)}}n=new Ot(r,c)}else{var w=e;n=new ic(r,w).collection()}return n},remove:function(e){if(!pn(e)){if(pe(e)){var n=e;e=this.$(n)}}return e.remove()}};function pO(t,e,n,r){var i=4,o=.001,a=1e-7,s=10,u=11,l=1/(u-1),c=typeof Float32Array<"u";if(arguments.length!==4)return!1;for(var d=0;d<4;++d)if(typeof arguments[d]!="number"||isNaN(arguments[d])||!isFinite(arguments[d]))return!1;t=Math.min(t,1),n=Math.min(n,1),t=Math.max(t,0),n=Math.max(n,0);var f=c?new Float32Array(u):new Array(u);function h(A,M){return 1-3*M+3*A}function p(A,M){return 3*M-6*A}function m(A){return 3*A}function g(A,M,N){return((h(M,N)*A+p(M,N))*A+m(M))*A}function v(A,M,N){return 3*h(M,N)*A*A+2*p(M,N)*A+m(M)}function y(A,M){for(var N=0;N<i;++N){var R=v(M,t,n);if(R===0)return M;var T=g(M,t,n)-A;M-=T/R}return M}function w(){for(var A=0;A<u;++A)f[A]=g(A*l,t,n)}function b(A,M,N){var R,T,O=0;do T=M+(N-M)/2,R=g(T,t,n)-A,R>0?N=T:M=T;while(Math.abs(R)>a&&++O<s);return T}function I(A){for(var M=0,N=1,R=u-1;N!==R&&f[N]<=A;++N)M+=l;--N;var T=(A-f[N])/(f[N+1]-f[N]),O=M+T*l,_=v(O,t,n);return _>=o?y(A,O):_===0?O:b(A,M,M+l)}var E=!1;function D(){E=!0,(t!==e||n!==r)&&w()}var S=function(M){return E||D(),t===e&&n===r?M:M===0?0:M===1?1:g(I(M),e,r)};S.getControlPoints=function(){return[{x:t,y:e},{x:n,y:r}]};var C="generateBezier("+[t,e,n,r]+")";return S.toString=function(){return C},S}var gO=function(){function t(r){return-r.tension*r.x-r.friction*r.v}function e(r,i,o){var a={x:r.x+o.dx*i,v:r.v+o.dv*i,tension:r.tension,friction:r.friction};return{dx:a.v,dv:t(a)}}function n(r,i){var o={dx:r.v,dv:t(r)},a=e(r,i*.5,o),s=e(r,i*.5,a),u=e(r,i,s),l=1/6*(o.dx+2*(a.dx+s.dx)+u.dx),c=1/6*(o.dv+2*(a.dv+s.dv)+u.dv);return r.x=r.x+l*i,r.v=r.v+c*i,r}return function r(i,o,a){var s={x:-1,v:0,tension:null,friction:null},u=[0],l=0,c=1/1e4,d=16/1e3,f,h,p;for(i=parseFloat(i)||500,o=parseFloat(o)||20,a=a||null,s.tension=i,s.friction=o,f=a!==null,f?(l=r(i,o),h=l/a*d):h=d;p=n(p||s,h),u.push(1+p.x),l+=16,Math.abs(p.x)>c&&Math.abs(p.v)>c;);return f?function(m){return u[m*(u.length-1)|0]}:l}}(),rt=function(e,n,r,i){var o=pO(e,n,r,i);return function(a,s,u){return a+(s-a)*o(u)}},Vl={linear:function(e,n,r){return e+(n-e)*r},ease:rt(.25,.1,.25,1),"ease-in":rt(.42,0,1,1),"ease-out":rt(0,0,.58,1),"ease-in-out":rt(.42,0,.58,1),"ease-in-sine":rt(.47,0,.745,.715),"ease-out-sine":rt(.39,.575,.565,1),"ease-in-out-sine":rt(.445,.05,.55,.95),"ease-in-quad":rt(.55,.085,.68,.53),"ease-out-quad":rt(.25,.46,.45,.94),"ease-in-out-quad":rt(.455,.03,.515,.955),"ease-in-cubic":rt(.55,.055,.675,.19),"ease-out-cubic":rt(.215,.61,.355,1),"ease-in-out-cubic":rt(.645,.045,.355,1),"ease-in-quart":rt(.895,.03,.685,.22),"ease-out-quart":rt(.165,.84,.44,1),"ease-in-out-quart":rt(.77,0,.175,1),"ease-in-quint":rt(.755,.05,.855,.06),"ease-out-quint":rt(.23,1,.32,1),"ease-in-out-quint":rt(.86,0,.07,1),"ease-in-expo":rt(.95,.05,.795,.035),"ease-out-expo":rt(.19,1,.22,1),"ease-in-out-expo":rt(1,0,0,1),"ease-in-circ":rt(.6,.04,.98,.335),"ease-out-circ":rt(.075,.82,.165,1),"ease-in-out-circ":rt(.785,.135,.15,.86),spring:function(e,n,r){if(r===0)return Vl.linear;var i=gO(e,n,r);return function(o,a,s){return o+(a-o)*i(s)}},"cubic-bezier":rt};function Nw(t,e,n,r,i){if(r===1||e===n)return n;var o=i(e,n,r);return t==null||((t.roundValue||t.color)&&(o=Math.round(o)),t.min!==void 0&&(o=Math.max(o,t.min)),t.max!==void 0&&(o=Math.min(o,t.max))),o}function Aw(t,e){return t.pfValue!=null||t.value!=null?t.pfValue!=null&&(e==null||e.type.units!=="%")?t.pfValue:t.value:t}function To(t,e,n,r,i){var o=i!=null?i.type:null;n<0?n=0:n>1&&(n=1);var a=Aw(t,i),s=Aw(e,i);if(ie(a)&&ie(s))return Nw(o,a,s,n,r);if(tt(a)&&tt(s)){for(var u=[],l=0;l<s.length;l++){var c=a[l],d=s[l];if(c!=null&&d!=null){var f=Nw(o,c,d,n,r);u.push(f)}else u.push(d)}return u}}function vO(t,e,n,r){var i=!r,o=t._private,a=e._private,s=a.easing,u=a.startTime,l=r?t:t.cy(),c=l.style();if(!a.easingImpl)if(s==null)a.easingImpl=Vl.linear;else{var d;if(pe(s)){var f=c.parse("transition-timing-function",s);d=f.value}else d=s;var h,p;pe(d)?(h=d,p=[]):(h=d[1],p=d.slice(2).map(function(V){return+V})),p.length>0?(h==="spring"&&p.push(a.duration),a.easingImpl=Vl[h].apply(null,p)):a.easingImpl=Vl[h]}var m=a.easingImpl,g;if(a.duration===0?g=1:g=(n-u)/a.duration,a.applying&&(g=a.progress),g<0?g=0:g>1&&(g=1),a.delay==null){var v=a.startPosition,y=a.position;if(y&&i&&!t.locked()){var w={};os(v.x,y.x)&&(w.x=To(v.x,y.x,g,m)),os(v.y,y.y)&&(w.y=To(v.y,y.y,g,m)),t.position(w)}var b=a.startPan,I=a.pan,E=o.pan,D=I!=null&&r;D&&(os(b.x,I.x)&&(E.x=To(b.x,I.x,g,m)),os(b.y,I.y)&&(E.y=To(b.y,I.y,g,m)),t.emit("pan"));var S=a.startZoom,C=a.zoom,A=C!=null&&r;A&&(os(S,C)&&(o.zoom=ms(o.minZoom,To(S,C,g,m),o.maxZoom)),t.emit("zoom")),(D||A)&&t.emit("viewport");var M=a.style;if(M&&M.length>0&&i){for(var N=0;N<M.length;N++){var R=M[N],T=R.name,O=R,_=a.startStyle[T],k=c.properties[_.name],P=To(_,O,g,m,k);c.overrideBypass(t,T,P)}t.emit("style")}}return a.progress=g,g}function os(t,e){return t==null||e==null?!1:ie(t)&&ie(e)?!0:!!(t&&e)}function mO(t,e,n,r){var i=e._private;i.started=!0,i.startTime=n-i.progress*i.duration}function Rw(t,e){var n=e._private.aniEles,r=[];function i(c,d){var f=c._private,h=f.animation.current,p=f.animation.queue,m=!1;if(h.length===0){var g=p.shift();g&&h.push(g)}for(var v=function(E){for(var D=E.length-1;D>=0;D--){var S=E[D];S()}E.splice(0,E.length)},y=h.length-1;y>=0;y--){var w=h[y],b=w._private;if(b.stopped){h.splice(y,1),b.hooked=!1,b.playing=!1,b.started=!1,v(b.frames);continue}!b.playing&&!b.applying||(b.playing&&b.applying&&(b.applying=!1),b.started||mO(c,w,t),vO(c,w,t,d),b.applying&&(b.applying=!1),v(b.frames),b.step!=null&&b.step(t),w.completed()&&(h.splice(y,1),b.hooked=!1,b.playing=!1,b.started=!1,v(b.completes)),m=!0)}return!d&&h.length===0&&p.length===0&&r.push(c),m}for(var o=!1,a=0;a<n.length;a++){var s=n[a],u=i(s);o=o||u}var l=i(e,!0);(o||l)&&(n.length>0?e.notify("draw",n):e.notify("draw")),n.unmerge(r),e.emit("step")}var yO={animate:Ze.animate(),animation:Ze.animation(),animated:Ze.animated(),clearQueue:Ze.clearQueue(),delay:Ze.delay(),delayAnimation:Ze.delayAnimation(),stop:Ze.stop(),addToAnimationPool:function(e){var n=this;n.styleEnabled()&&n._private.aniEles.merge(e)},stopAnimationLoop:function(){this._private.animationsRunning=!1},startAnimationLoop:function(){var e=this;if(e._private.animationsRunning=!0,!e.styleEnabled())return;function n(){e._private.animationsRunning&&ql(function(o){Rw(o,e),n()})}var r=e.renderer();r&&r.beforeRender?r.beforeRender(function(o,a){Rw(a,e)},r.beforeRenderPriorities.animations):n()}},wO={qualifierCompare:function(e,n){return e==null||n==null?e==null&&n==null:e.sameText(n)},eventMatches:function(e,n,r){var i=n.qualifier;return i!=null?e!==r.target&&Ss(r.target)&&i.matches(r.target):!0},addEventFields:function(e,n){n.cy=e,n.target=e},callbackContext:function(e,n,r){return n.qualifier!=null?r.target:e}},_l=function(e){return pe(e)?new Hr(e):e},oD={createEmitter:function(){var e=this._private;return e.emitter||(e.emitter=new dc(wO,this)),this},emitter:function(){return this._private.emitter},on:function(e,n,r){return this.emitter().on(e,_l(n),r),this},removeListener:function(e,n,r){return this.emitter().removeListener(e,_l(n),r),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},one:function(e,n,r){return this.emitter().one(e,_l(n),r),this},once:function(e,n,r){return this.emitter().one(e,_l(n),r),this},emit:function(e,n){return this.emitter().emit(e,n),this},emitAndNotify:function(e,n){return this.emit(e),this.notify(e,n),this}};Ze.eventAliasesOn(oD);var np={png:function(e){var n=this._private.renderer;return e=e||{},n.png(e)},jpg:function(e){var n=this._private.renderer;return e=e||{},e.bg=e.bg||"#fff",n.jpg(e)}};np.jpeg=np.jpg;var $l={layout:function(e){var n=this;if(e==null){dt("Layout options must be specified to make a layout");return}if(e.name==null){dt("A `name` must be specified to make a layout");return}var r=e.name,i=n.extension("layout",r);if(i==null){dt("No such layout `"+r+"` found.  Did you forget to import it and `cytoscape.use()` it?");return}var o;pe(e.eles)?o=n.$(e.eles):o=e.eles!=null?e.eles:n.$();var a=new i(ye({},e,{cy:n,eles:o}));return a}};$l.createLayout=$l.makeLayout=$l.layout;var bO={notify:function(e,n){var r=this._private;if(this.batching()){r.batchNotifications=r.batchNotifications||{};var i=r.batchNotifications[e]=r.batchNotifications[e]||this.collection();n!=null&&i.merge(n);return}if(r.notificationsEnabled){var o=this.renderer();this.destroyed()||!o||o.notify(e,n)}},notifications:function(e){var n=this._private;return e===void 0?n.notificationsEnabled:(n.notificationsEnabled=!!e,this)},noNotifications:function(e){this.notifications(!1),e(),this.notifications(!0)},batching:function(){return this._private.batchCount>0},startBatch:function(){var e=this._private;return e.batchCount==null&&(e.batchCount=0),e.batchCount===0&&(e.batchStyleEles=this.collection(),e.batchNotifications={}),e.batchCount++,this},endBatch:function(){var e=this._private;if(e.batchCount===0)return this;if(e.batchCount--,e.batchCount===0){e.batchStyleEles.updateStyle();var n=this.renderer();Object.keys(e.batchNotifications).forEach(function(r){var i=e.batchNotifications[r];i.empty()?n.notify(r):n.notify(r,i)})}return this},batch:function(e){return this.startBatch(),e(),this.endBatch(),this},batchData:function(e){var n=this;return this.batch(function(){for(var r=Object.keys(e),i=0;i<r.length;i++){var o=r[i],a=e[o],s=n.getElementById(o);s.data(a)}})}},DO=Pt({hideEdgesOnViewport:!1,textureOnViewport:!1,motionBlur:!1,motionBlurOpacity:.05,pixelRatio:void 0,desktopTapThreshold:4,touchTapThreshold:8,wheelSensitivity:1,debug:!1,showFps:!1}),rp={renderTo:function(e,n,r,i){var o=this._private.renderer;return o.renderTo(e,n,r,i),this},renderer:function(){return this._private.renderer},forceRender:function(){return this.notify("draw"),this},resize:function(){return this.invalidateSize(),this.emitAndNotify("resize"),this},initRenderer:function(e){var n=this,r=n.extension("renderer",e.name);if(r==null){dt("Can not initialise: No such renderer `".concat(e.name,"` found. Did you forget to import it and `cytoscape.use()` it?"));return}e.wheelSensitivity!==void 0&&Ye("You have set a custom wheel sensitivity.  This will make your app zoom unnaturally when using mainstream mice.  You should change this value from the default only if you can guarantee that all your users will use the same hardware and OS configuration as your current machine.");var i=DO(e);i.cy=n,n._private.renderer=new r(i),this.notify("init")},destroyRenderer:function(){var e=this;e.notify("destroy");var n=e.container();if(n)for(n._cyreg=null;n.childNodes.length>0;)n.removeChild(n.childNodes[0]);e._private.renderer=null,e.mutableElements().forEach(function(r){var i=r._private;i.rscratch={},i.rstyle={},i.animation.current=[],i.animation.queue=[]})},onRender:function(e){return this.on("render",e)},offRender:function(e){return this.off("render",e)}};rp.invalidateDimensions=rp.resize;var jl={collection:function(e,n){return pe(e)?this.$(e):pn(e)?e.collection():tt(e)?(n||(n={}),new Ot(this,e,n.unique,n.removed)):new Ot(this)},nodes:function(e){var n=this.$(function(r){return r.isNode()});return e?n.filter(e):n},edges:function(e){var n=this.$(function(r){return r.isEdge()});return e?n.filter(e):n},$:function(e){var n=this._private.elements;return e?n.filter(e):n.spawnSelf()},mutableElements:function(){return this._private.elements}};jl.elements=jl.filter=jl.$;var Gt={},ds="t",EO="f";Gt.apply=function(t){for(var e=this,n=e._private,r=n.cy,i=r.collection(),o=0;o<t.length;o++){var a=t[o],s=e.getContextMeta(a);if(!s.empty){var u=e.getContextStyle(s),l=e.applyContextStyle(s,u,a);a._private.appliedInitStyle?e.updateTransitions(a,l.diffProps):a._private.appliedInitStyle=!0;var c=e.updateStyleHints(a);c&&i.push(a)}}return i};Gt.getPropertiesDiff=function(t,e){var n=this,r=n._private.propDiffs=n._private.propDiffs||{},i=t+"-"+e,o=r[i];if(o)return o;for(var a=[],s={},u=0;u<n.length;u++){var l=n[u],c=t[u]===ds,d=e[u]===ds,f=c!==d,h=l.mappedProperties.length>0;if(f||d&&h){var p=void 0;f&&h||f?p=l.properties:h&&(p=l.mappedProperties);for(var m=0;m<p.length;m++){for(var g=p[m],v=g.name,y=!1,w=u+1;w<n.length;w++){var b=n[w],I=e[w]===ds;if(I&&(y=b.properties[g.name]!=null,y))break}!s[v]&&!y&&(s[v]=!0,a.push(v))}}}return r[i]=a,a};Gt.getContextMeta=function(t){for(var e=this,n="",r,i=t._private.styleCxtKey||"",o=0;o<e.length;o++){var a=e[o],s=a.selector&&a.selector.matches(t);s?n+=ds:n+=EO}return r=e.getPropertiesDiff(i,n),t._private.styleCxtKey=n,{key:n,diffPropNames:r,empty:r.length===0}};Gt.getContextStyle=function(t){var e=t.key,n=this,r=this._private.contextStyles=this._private.contextStyles||{};if(r[e])return r[e];for(var i={_private:{key:e}},o=0;o<n.length;o++){var a=n[o],s=e[o]===ds;if(s)for(var u=0;u<a.properties.length;u++){var l=a.properties[u];i[l.name]=l}}return r[e]=i,i};Gt.applyContextStyle=function(t,e,n){for(var r=this,i=t.diffPropNames,o={},a=r.types,s=0;s<i.length;s++){var u=i[s],l=e[u],c=n.pstyle(u);if(!l)if(c)c.bypass?l={name:u,deleteBypassed:!0}:l={name:u,delete:!0};else continue;if(c!==l){if(l.mapped===a.fn&&c!=null&&c.mapping!=null&&c.mapping.value===l.value){var d=c.mapping,f=d.fnValue=l.value(n);if(f===d.prevFnValue)continue}var h=o[u]={prev:c};r.applyParsedProperty(n,l),h.next=n.pstyle(u),h.next&&h.next.bypass&&(h.next=h.next.bypassed)}}return{diffProps:o}};Gt.updateStyleHints=function(t){var e=t._private,n=this,r=n.propertyGroupNames,i=n.propertyGroupKeys,o=function(Z,re,ve){return n.getPropertiesHash(Z,re,ve)},a=e.styleKey;if(t.removed())return!1;var s=e.group==="nodes",u=t._private.style;r=Object.keys(u);for(var l=0;l<i.length;l++){var c=i[l];e.styleKeys[c]=[Ao,ss]}for(var d=function(Z,re){return e.styleKeys[re][0]=ps(Z,e.styleKeys[re][0])},f=function(Z,re){return e.styleKeys[re][1]=gs(Z,e.styleKeys[re][1])},h=function(Z,re){d(Z,re),f(Z,re)},p=function(Z,re){for(var ve=0;ve<Z.length;ve++){var ne=Z.charCodeAt(ve);d(ne,re),f(ne,re)}},m=2e9,g=function(Z){return-128<Z&&Z<128&&Math.floor(Z)!==Z?m-(Z*1024|0):Z},v=0;v<r.length;v++){var y=r[v],w=u[y];if(w!=null){var b=this.properties[y],I=b.type,E=b.groupKey,D=void 0;b.hashOverride!=null?D=b.hashOverride(t,w):w.pfValue!=null&&(D=w.pfValue);var S=b.enums==null?w.value:null,C=D!=null,A=S!=null,M=C||A,N=w.units;if(I.number&&M&&!I.multiple){var R=C?D:S;h(g(R),E),!C&&N!=null&&p(N,E)}else p(w.strValue,E)}}for(var T=[Ao,ss],O=0;O<i.length;O++){var _=i[O],k=e.styleKeys[_];T[0]=ps(k[0],T[0]),T[1]=gs(k[1],T[1])}e.styleKey=TN(T[0],T[1]);var P=e.styleKeys;e.labelDimsKey=Or(P.labelDimensions);var V=o(t,["label"],P.labelDimensions);if(e.labelKey=Or(V),e.labelStyleKey=Or(Cl(P.commonLabel,V)),!s){var z=o(t,["source-label"],P.labelDimensions);e.sourceLabelKey=Or(z),e.sourceLabelStyleKey=Or(Cl(P.commonLabel,z));var B=o(t,["target-label"],P.labelDimensions);e.targetLabelKey=Or(B),e.targetLabelStyleKey=Or(Cl(P.commonLabel,B))}if(s){var $=e.styleKeys,W=$.nodeBody,K=$.nodeBorder,Q=$.nodeOutline,X=$.backgroundImage,J=$.compound,q=$.pie,L=[W,K,Q,X,J,q].filter(function(U){return U!=null}).reduce(Cl,[Ao,ss]);e.nodeKey=Or(L),e.hasPie=q!=null&&q[0]!==Ao&&q[1]!==ss}return a!==e.styleKey};Gt.clearStyleHints=function(t){var e=t._private;e.styleCxtKey="",e.styleKeys={},e.styleKey=null,e.labelKey=null,e.labelStyleKey=null,e.sourceLabelKey=null,e.sourceLabelStyleKey=null,e.targetLabelKey=null,e.targetLabelStyleKey=null,e.nodeKey=null,e.hasPie=null};Gt.applyParsedProperty=function(t,e){var n=this,r=e,i=t._private.style,o,a=n.types,s=n.properties[r.name].type,u=r.bypass,l=i[r.name],c=l&&l.bypass,d=t._private,f="mapping",h=function(W){return W==null?null:W.pfValue!=null?W.pfValue:W.value},p=function(){var W=h(l),K=h(r);n.checkTriggers(t,r.name,W,K)};if(e.name==="curve-style"&&t.isEdge()&&(e.value!=="bezier"&&t.isLoop()||e.value==="haystack"&&(t.source().isParent()||t.target().isParent()))&&(r=e=this.parse(e.name,"bezier",u)),r.delete)return i[r.name]=void 0,p(),!0;if(r.deleteBypassed)return l?l.bypass?(l.bypassed=void 0,p(),!0):!1:(p(),!0);if(r.deleteBypass)return l?l.bypass?(i[r.name]=l.bypassed,p(),!0):!1:(p(),!0);var m=function(){Ye("Do not assign mappings to elements without corresponding data (i.e. ele `"+t.id()+"` has no mapping for property `"+r.name+"` with data field `"+r.field+"`); try a `["+r.field+"]` selector to limit scope to elements with `"+r.field+"` defined")};switch(r.mapped){case a.mapData:{for(var g=r.field.split("."),v=d.data,y=0;y<g.length&&v;y++){var w=g[y];v=v[w]}if(v==null)return m(),!1;var b;if(ie(v)){var I=r.fieldMax-r.fieldMin;I===0?b=0:b=(v-r.fieldMin)/I}else return Ye("Do not use continuous mappers without specifying numeric data (i.e. `"+r.field+": "+v+"` for `"+t.id()+"` is non-numeric)"),!1;if(b<0?b=0:b>1&&(b=1),s.color){var E=r.valueMin[0],D=r.valueMax[0],S=r.valueMin[1],C=r.valueMax[1],A=r.valueMin[2],M=r.valueMax[2],N=r.valueMin[3]==null?1:r.valueMin[3],R=r.valueMax[3]==null?1:r.valueMax[3],T=[Math.round(E+(D-E)*b),Math.round(S+(C-S)*b),Math.round(A+(M-A)*b),Math.round(N+(R-N)*b)];o={bypass:r.bypass,name:r.name,value:T,strValue:"rgb("+T[0]+", "+T[1]+", "+T[2]+")"}}else if(s.number){var O=r.valueMin+(r.valueMax-r.valueMin)*b;o=this.parse(r.name,O,r.bypass,f)}else return!1;if(!o)return m(),!1;o.mapping=r,r=o;break}case a.data:{for(var _=r.field.split("."),k=d.data,P=0;P<_.length&&k;P++){var V=_[P];k=k[V]}if(k!=null&&(o=this.parse(r.name,k,r.bypass,f)),!o)return m(),!1;o.mapping=r,r=o;break}case a.fn:{var z=r.value,B=r.fnValue!=null?r.fnValue:z(t);if(r.prevFnValue=B,B==null)return Ye("Custom function mappers may not return null (i.e. `"+r.name+"` for ele `"+t.id()+"` is null)"),!1;if(o=this.parse(r.name,B,r.bypass,f),!o)return Ye("Custom function mappers may not return invalid values for the property type (i.e. `"+r.name+"` for ele `"+t.id()+"` is invalid)"),!1;o.mapping=Jn(r),r=o;break}case void 0:break;default:return!1}return u?(c?r.bypassed=l.bypassed:r.bypassed=l,i[r.name]=r):c?l.bypassed=r:i[r.name]=r,p(),!0};Gt.cleanElements=function(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(this.clearStyleHints(r),r.dirtyCompoundBoundsCache(),r.dirtyBoundingBoxCache(),!e)r._private.style={};else for(var i=r._private.style,o=Object.keys(i),a=0;a<o.length;a++){var s=o[a],u=i[s];u!=null&&(u.bypass?u.bypassed=null:i[s]=null)}}};Gt.update=function(){var t=this._private.cy,e=t.mutableElements();e.updateStyle()};Gt.updateTransitions=function(t,e){var n=this,r=t._private,i=t.pstyle("transition-property").value,o=t.pstyle("transition-duration").pfValue,a=t.pstyle("transition-delay").pfValue;if(i.length>0&&o>0){for(var s={},u=!1,l=0;l<i.length;l++){var c=i[l],d=t.pstyle(c),f=e[c];if(f){var h=f.prev,p=h,m=f.next!=null?f.next:d,g=!1,v=void 0,y=1e-6;p&&(ie(p.pfValue)&&ie(m.pfValue)?(g=m.pfValue-p.pfValue,v=p.pfValue+y*g):ie(p.value)&&ie(m.value)?(g=m.value-p.value,v=p.value+y*g):tt(p.value)&&tt(m.value)&&(g=p.value[0]!==m.value[0]||p.value[1]!==m.value[1]||p.value[2]!==m.value[2],v=p.strValue),g&&(s[c]=m.strValue,this.applyBypass(t,c,v),u=!0))}}if(!u)return;r.transitioning=!0,new Ho(function(w){a>0?t.delayAnimation(a).play().promise().then(w):w()}).then(function(){return t.animation({style:s,duration:o,easing:t.pstyle("transition-timing-function").value,queue:!1}).play().promise()}).then(function(){n.removeBypasses(t,i),t.emitAndNotify("style"),r.transitioning=!1})}else r.transitioning&&(this.removeBypasses(t,i),t.emitAndNotify("style"),r.transitioning=!1)};Gt.checkTrigger=function(t,e,n,r,i,o){var a=this.properties[e],s=i(a);s!=null&&s(n,r)&&o(a)};Gt.checkZOrderTrigger=function(t,e,n,r){var i=this;this.checkTrigger(t,e,n,r,function(o){return o.triggersZOrder},function(){i._private.cy.notify("zorder",t)})};Gt.checkBoundsTrigger=function(t,e,n,r){this.checkTrigger(t,e,n,r,function(i){return i.triggersBounds},function(i){t.dirtyCompoundBoundsCache(),t.dirtyBoundingBoxCache(),i.triggersBoundsOfParallelBeziers&&e==="curve-style"&&(n==="bezier"||r==="bezier")&&t.parallelEdges().forEach(function(o){o.dirtyBoundingBoxCache()}),i.triggersBoundsOfConnectedEdges&&e==="display"&&(n==="none"||r==="none")&&t.connectedEdges().forEach(function(o){o.dirtyBoundingBoxCache()})})};Gt.checkTriggers=function(t,e,n,r){t.dirtyStyleCache(),this.checkZOrderTrigger(t,e,n,r),this.checkBoundsTrigger(t,e,n,r)};var Ns={};Ns.applyBypass=function(t,e,n,r){var i=this,o=[],a=!0;if(e==="*"||e==="**"){if(n!==void 0)for(var s=0;s<i.properties.length;s++){var u=i.properties[s],l=u.name,c=this.parse(l,n,!0);c&&o.push(c)}}else if(pe(e)){var d=this.parse(e,n,!0);d&&o.push(d)}else if(He(e)){var f=e;r=n;for(var h=Object.keys(f),p=0;p<h.length;p++){var m=h[p],g=f[m];if(g===void 0&&(g=f[tc(m)]),g!==void 0){var v=this.parse(m,g,!0);v&&o.push(v)}}}else return!1;if(o.length===0)return!1;for(var y=!1,w=0;w<t.length;w++){for(var b=t[w],I={},E=void 0,D=0;D<o.length;D++){var S=o[D];if(r){var C=b.pstyle(S.name);E=I[S.name]={prev:C}}y=this.applyParsedProperty(b,Jn(S))||y,r&&(E.next=b.pstyle(S.name))}y&&this.updateStyleHints(b),r&&this.updateTransitions(b,I,a)}return y};Ns.overrideBypass=function(t,e,n){e=gp(e);for(var r=0;r<t.length;r++){var i=t[r],o=i._private.style[e],a=this.properties[e].type,s=a.color,u=a.mutiple,l=o?o.pfValue!=null?o.pfValue:o.value:null;!o||!o.bypass?this.applyBypass(i,e,n):(o.value=n,o.pfValue!=null&&(o.pfValue=n),s?o.strValue="rgb("+n.join(",")+")":u?o.strValue=n.join(" "):o.strValue=""+n,this.updateStyleHints(i)),this.checkTriggers(i,e,l,n)}};Ns.removeAllBypasses=function(t,e){return this.removeBypasses(t,this.propertyNames,e)};Ns.removeBypasses=function(t,e,n){for(var r=!0,i=0;i<t.length;i++){for(var o=t[i],a={},s=0;s<e.length;s++){var u=e[s],l=this.properties[u],c=o.pstyle(l.name);if(!(!c||!c.bypass)){var d="",f=this.parse(u,d,!0),h=a[l.name]={prev:c};this.applyParsedProperty(o,f),h.next=o.pstyle(l.name)}}this.updateStyleHints(o),n&&this.updateTransitions(o,a,r)}};var Np={};Np.getEmSizeInPixels=function(){var t=this.containerCss("font-size");return t!=null?parseFloat(t):1};Np.containerCss=function(t){var e=this._private.cy,n=e.container(),r=e.window();if(r&&n&&r.getComputedStyle)return r.getComputedStyle(n).getPropertyValue(t)};var tr={};tr.getRenderedStyle=function(t,e){return e?this.getStylePropertyValue(t,e,!0):this.getRawStyle(t,!0)};tr.getRawStyle=function(t,e){var n=this;if(t=t[0],t){for(var r={},i=0;i<n.properties.length;i++){var o=n.properties[i],a=n.getStylePropertyValue(t,o.name,e);a!=null&&(r[o.name]=a,r[tc(o.name)]=a)}return r}};tr.getIndexedStyle=function(t,e,n,r){var i=t.pstyle(e)[n][r];return i??t.cy().style().getDefaultProperty(e)[n][0]};tr.getStylePropertyValue=function(t,e,n){var r=this;if(t=t[0],t){var i=r.properties[e];i.alias&&(i=i.pointsTo);var o=i.type,a=t.pstyle(i.name);if(a){var s=a.value,u=a.units,l=a.strValue;if(n&&o.number&&s!=null&&ie(s)){var c=t.cy().zoom(),d=function(g){return g*c},f=function(g,v){return d(g)+v},h=tt(s),p=h?u.every(function(m){return m!=null}):u!=null;return p?h?s.map(function(m,g){return f(m,u[g])}).join(" "):f(s,u):h?s.map(function(m){return pe(m)?m:""+d(m)}).join(" "):""+d(s)}else if(l!=null)return l}return null}};tr.getAnimationStartStyle=function(t,e){for(var n={},r=0;r<e.length;r++){var i=e[r],o=i.name,a=t.pstyle(o);a!==void 0&&(He(a)?a=this.parse(o,a.strValue):a=this.parse(o,a)),a&&(n[o]=a)}return n};tr.getPropsList=function(t){var e=this,n=[],r=t,i=e.properties;if(r)for(var o=Object.keys(r),a=0;a<o.length;a++){var s=o[a],u=r[s],l=i[s]||i[gp(s)],c=this.parse(l.name,u);c&&n.push(c)}return n};tr.getNonDefaultPropertiesHash=function(t,e,n){var r=n.slice(),i,o,a,s,u,l;for(u=0;u<e.length;u++)if(i=e[u],o=t.pstyle(i,!1),o!=null)if(o.pfValue!=null)r[0]=ps(s,r[0]),r[1]=gs(s,r[1]);else for(a=o.strValue,l=0;l<a.length;l++)s=a.charCodeAt(l),r[0]=ps(s,r[0]),r[1]=gs(s,r[1]);return r};tr.getPropertiesHash=tr.getNonDefaultPropertiesHash;var pc={};pc.appendFromJson=function(t){for(var e=this,n=0;n<t.length;n++){var r=t[n],i=r.selector,o=r.style||r.css,a=Object.keys(o);e.selector(i);for(var s=0;s<a.length;s++){var u=a[s],l=o[u];e.css(u,l)}}return e};pc.fromJson=function(t){var e=this;return e.resetToDefault(),e.appendFromJson(t),e};pc.json=function(){for(var t=[],e=this.defaultLength;e<this.length;e++){for(var n=this[e],r=n.selector,i=n.properties,o={},a=0;a<i.length;a++){var s=i[a];o[s.name]=s.strValue}t.push({selector:r?r.toString():"core",style:o})}return t};var Ap={};Ap.appendFromString=function(t){var e=this,n=this,r=""+t,i,o,a;r=r.replace(/[/][*](\s|.)+?[*][/]/g,"");function s(){r.length>i.length?r=r.substr(i.length):r=""}function u(){o.length>a.length?o=o.substr(a.length):o=""}for(;;){var l=r.match(/^\s*$/);if(l)break;var c=r.match(/^\s*((?:.|\s)+?)\s*\{((?:.|\s)+?)\}/);if(!c){Ye("Halting stylesheet parsing: String stylesheet contains more to parse but no selector and block found in: "+r);break}i=c[0];var d=c[1];if(d!=="core"){var f=new Hr(d);if(f.invalid){Ye("Skipping parsing of block: Invalid selector found in string stylesheet: "+d),s();continue}}var h=c[2],p=!1;o=h;for(var m=[];;){var g=o.match(/^\s*$/);if(g)break;var v=o.match(/^\s*(.+?)\s*:\s*(.+?)(?:\s*;|\s*$)/);if(!v){Ye("Skipping parsing of block: Invalid formatting of style property and value definitions found in:"+h),p=!0;break}a=v[0];var y=v[1],w=v[2],b=e.properties[y];if(!b){Ye("Skipping property: Invalid property name in: "+a),u();continue}var I=n.parse(y,w);if(!I){Ye("Skipping property: Invalid property definition in: "+a),u();continue}m.push({name:y,val:w}),u()}if(p){s();break}n.selector(d);for(var E=0;E<m.length;E++){var D=m[E];n.css(D.name,D.val)}s()}return n};Ap.fromString=function(t){var e=this;return e.resetToDefault(),e.appendFromString(t),e};var _t={};(function(){var t=bt,e=A1,n=_1,r=k1,i=O1,o=function(L){return"^"+L+"\\s*\\(\\s*([\\w\\.]+)\\s*\\)$"},a=function(L){var U=t+"|\\w+|"+e+"|"+n+"|"+r+"|"+i;return"^"+L+"\\s*\\(([\\w\\.]+)\\s*\\,\\s*("+t+")\\s*\\,\\s*("+t+")\\s*,\\s*("+U+")\\s*\\,\\s*("+U+")\\)$"},s=[`^url\\s*\\(\\s*['"]?(.+?)['"]?\\s*\\)$`,"^(none)$","^(.+)$"];_t.types={time:{number:!0,min:0,units:"s|ms",implicitUnits:"ms"},percent:{number:!0,min:0,max:100,units:"%",implicitUnits:"%"},percentages:{number:!0,min:0,max:100,units:"%",implicitUnits:"%",multiple:!0},zeroOneNumber:{number:!0,min:0,max:1,unitless:!0},zeroOneNumbers:{number:!0,min:0,max:1,unitless:!0,multiple:!0},nOneOneNumber:{number:!0,min:-1,max:1,unitless:!0},nonNegativeInt:{number:!0,min:0,integer:!0,unitless:!0},nonNegativeNumber:{number:!0,min:0,unitless:!0},position:{enums:["parent","origin"]},nodeSize:{number:!0,min:0,enums:["label"]},number:{number:!0,unitless:!0},numbers:{number:!0,unitless:!0,multiple:!0},positiveNumber:{number:!0,unitless:!0,min:0,strictMin:!0},size:{number:!0,min:0},bidirectionalSize:{number:!0},bidirectionalSizeMaybePercent:{number:!0,allowPercent:!0},bidirectionalSizes:{number:!0,multiple:!0},sizeMaybePercent:{number:!0,min:0,allowPercent:!0},axisDirection:{enums:["horizontal","leftward","rightward","vertical","upward","downward","auto"]},paddingRelativeTo:{enums:["width","height","average","min","max"]},bgWH:{number:!0,min:0,allowPercent:!0,enums:["auto"],multiple:!0},bgPos:{number:!0,allowPercent:!0,multiple:!0},bgRelativeTo:{enums:["inner","include-padding"],multiple:!0},bgRepeat:{enums:["repeat","repeat-x","repeat-y","no-repeat"],multiple:!0},bgFit:{enums:["none","contain","cover"],multiple:!0},bgCrossOrigin:{enums:["anonymous","use-credentials","null"],multiple:!0},bgClip:{enums:["none","node"],multiple:!0},bgContainment:{enums:["inside","over"],multiple:!0},color:{color:!0},colors:{color:!0,multiple:!0},fill:{enums:["solid","linear-gradient","radial-gradient"]},bool:{enums:["yes","no"]},bools:{enums:["yes","no"],multiple:!0},lineStyle:{enums:["solid","dotted","dashed"]},lineCap:{enums:["butt","round","square"]},linePosition:{enums:["center","inside","outside"]},lineJoin:{enums:["round","bevel","miter"]},borderStyle:{enums:["solid","dotted","dashed","double"]},curveStyle:{enums:["bezier","unbundled-bezier","haystack","segments","straight","straight-triangle","taxi","round-segments","round-taxi"]},radiusType:{enums:["arc-radius","influence-radius"],multiple:!0},fontFamily:{regex:'^([\\w- \\"]+(?:\\s*,\\s*[\\w- \\"]+)*)$'},fontStyle:{enums:["italic","normal","oblique"]},fontWeight:{enums:["normal","bold","bolder","lighter","100","200","300","400","500","600","800","900",100,200,300,400,500,600,700,800,900]},textDecoration:{enums:["none","underline","overline","line-through"]},textTransform:{enums:["none","uppercase","lowercase"]},textWrap:{enums:["none","wrap","ellipsis"]},textOverflowWrap:{enums:["whitespace","anywhere"]},textBackgroundShape:{enums:["rectangle","roundrectangle","round-rectangle"]},nodeShape:{enums:["rectangle","roundrectangle","round-rectangle","cutrectangle","cut-rectangle","bottomroundrectangle","bottom-round-rectangle","barrel","ellipse","triangle","round-triangle","square","pentagon","round-pentagon","hexagon","round-hexagon","concavehexagon","concave-hexagon","heptagon","round-heptagon","octagon","round-octagon","tag","round-tag","star","diamond","round-diamond","vee","rhomboid","right-rhomboid","polygon"]},overlayShape:{enums:["roundrectangle","round-rectangle","ellipse"]},cornerRadius:{number:!0,min:0,units:"px|em",implicitUnits:"px",enums:["auto"]},compoundIncludeLabels:{enums:["include","exclude"]},arrowShape:{enums:["tee","triangle","triangle-tee","circle-triangle","triangle-cross","triangle-backcurve","vee","square","circle","diamond","chevron","none"]},arrowFill:{enums:["filled","hollow"]},arrowWidth:{number:!0,units:"%|px|em",implicitUnits:"px",enums:["match-line"]},display:{enums:["element","none"]},visibility:{enums:["hidden","visible"]},zCompoundDepth:{enums:["bottom","orphan","auto","top"]},zIndexCompare:{enums:["auto","manual"]},valign:{enums:["top","center","bottom"]},halign:{enums:["left","center","right"]},justification:{enums:["left","center","right","auto"]},text:{string:!0},data:{mapping:!0,regex:o("data")},layoutData:{mapping:!0,regex:o("layoutData")},scratch:{mapping:!0,regex:o("scratch")},mapData:{mapping:!0,regex:a("mapData")},mapLayoutData:{mapping:!0,regex:a("mapLayoutData")},mapScratch:{mapping:!0,regex:a("mapScratch")},fn:{mapping:!0,fn:!0},url:{regexes:s,singleRegexMatchValue:!0},urls:{regexes:s,singleRegexMatchValue:!0,multiple:!0},propList:{propList:!0},angle:{number:!0,units:"deg|rad",implicitUnits:"rad"},textRotation:{number:!0,units:"deg|rad",implicitUnits:"rad",enums:["none","autorotate"]},polygonPointList:{number:!0,multiple:!0,evenMultiple:!0,min:-1,max:1,unitless:!0},edgeDistances:{enums:["intersection","node-position","endpoints"]},edgeEndpoint:{number:!0,multiple:!0,units:"%|px|em|deg|rad",implicitUnits:"px",enums:["inside-to-node","outside-to-node","outside-to-node-or-label","outside-to-line","outside-to-line-or-label"],singleEnum:!0,validate:function(L,U){switch(L.length){case 2:return U[0]!=="deg"&&U[0]!=="rad"&&U[1]!=="deg"&&U[1]!=="rad";case 1:return pe(L[0])||U[0]==="deg"||U[0]==="rad";default:return!1}}},easing:{regexes:["^(spring)\\s*\\(\\s*("+t+")\\s*,\\s*("+t+")\\s*\\)$","^(cubic-bezier)\\s*\\(\\s*("+t+")\\s*,\\s*("+t+")\\s*,\\s*("+t+")\\s*,\\s*("+t+")\\s*\\)$"],enums:["linear","ease","ease-in","ease-out","ease-in-out","ease-in-sine","ease-out-sine","ease-in-out-sine","ease-in-quad","ease-out-quad","ease-in-out-quad","ease-in-cubic","ease-out-cubic","ease-in-out-cubic","ease-in-quart","ease-out-quart","ease-in-out-quart","ease-in-quint","ease-out-quint","ease-in-out-quint","ease-in-expo","ease-out-expo","ease-in-out-expo","ease-in-circ","ease-out-circ","ease-in-out-circ"]},gradientDirection:{enums:["to-bottom","to-top","to-left","to-right","to-bottom-right","to-bottom-left","to-top-right","to-top-left","to-right-bottom","to-left-bottom","to-right-top","to-left-top"]},boundsExpansion:{number:!0,multiple:!0,min:0,validate:function(L){var U=L.length;return U===1||U===2||U===4}}};var u={zeroNonZero:function(L,U){return(L==null||U==null)&&L!==U||L==0&&U!=0?!0:L!=0&&U==0},any:function(L,U){return L!=U},emptyNonEmpty:function(L,U){var Z=$r(L),re=$r(U);return Z&&!re||!Z&&re}},l=_t.types,c=[{name:"label",type:l.text,triggersBounds:u.any,triggersZOrder:u.emptyNonEmpty},{name:"text-rotation",type:l.textRotation,triggersBounds:u.any},{name:"text-margin-x",type:l.bidirectionalSize,triggersBounds:u.any},{name:"text-margin-y",type:l.bidirectionalSize,triggersBounds:u.any}],d=[{name:"source-label",type:l.text,triggersBounds:u.any},{name:"source-text-rotation",type:l.textRotation,triggersBounds:u.any},{name:"source-text-margin-x",type:l.bidirectionalSize,triggersBounds:u.any},{name:"source-text-margin-y",type:l.bidirectionalSize,triggersBounds:u.any},{name:"source-text-offset",type:l.size,triggersBounds:u.any}],f=[{name:"target-label",type:l.text,triggersBounds:u.any},{name:"target-text-rotation",type:l.textRotation,triggersBounds:u.any},{name:"target-text-margin-x",type:l.bidirectionalSize,triggersBounds:u.any},{name:"target-text-margin-y",type:l.bidirectionalSize,triggersBounds:u.any},{name:"target-text-offset",type:l.size,triggersBounds:u.any}],h=[{name:"font-family",type:l.fontFamily,triggersBounds:u.any},{name:"font-style",type:l.fontStyle,triggersBounds:u.any},{name:"font-weight",type:l.fontWeight,triggersBounds:u.any},{name:"font-size",type:l.size,triggersBounds:u.any},{name:"text-transform",type:l.textTransform,triggersBounds:u.any},{name:"text-wrap",type:l.textWrap,triggersBounds:u.any},{name:"text-overflow-wrap",type:l.textOverflowWrap,triggersBounds:u.any},{name:"text-max-width",type:l.size,triggersBounds:u.any},{name:"text-outline-width",type:l.size,triggersBounds:u.any},{name:"line-height",type:l.positiveNumber,triggersBounds:u.any}],p=[{name:"text-valign",type:l.valign,triggersBounds:u.any},{name:"text-halign",type:l.halign,triggersBounds:u.any},{name:"color",type:l.color},{name:"text-outline-color",type:l.color},{name:"text-outline-opacity",type:l.zeroOneNumber},{name:"text-background-color",type:l.color},{name:"text-background-opacity",type:l.zeroOneNumber},{name:"text-background-padding",type:l.size,triggersBounds:u.any},{name:"text-border-opacity",type:l.zeroOneNumber},{name:"text-border-color",type:l.color},{name:"text-border-width",type:l.size,triggersBounds:u.any},{name:"text-border-style",type:l.borderStyle,triggersBounds:u.any},{name:"text-background-shape",type:l.textBackgroundShape,triggersBounds:u.any},{name:"text-justification",type:l.justification}],m=[{name:"events",type:l.bool,triggersZOrder:u.any},{name:"text-events",type:l.bool,triggersZOrder:u.any}],g=[{name:"display",type:l.display,triggersZOrder:u.any,triggersBounds:u.any,triggersBoundsOfConnectedEdges:!0},{name:"visibility",type:l.visibility,triggersZOrder:u.any},{name:"opacity",type:l.zeroOneNumber,triggersZOrder:u.zeroNonZero},{name:"text-opacity",type:l.zeroOneNumber},{name:"min-zoomed-font-size",type:l.size},{name:"z-compound-depth",type:l.zCompoundDepth,triggersZOrder:u.any},{name:"z-index-compare",type:l.zIndexCompare,triggersZOrder:u.any},{name:"z-index",type:l.number,triggersZOrder:u.any}],v=[{name:"overlay-padding",type:l.size,triggersBounds:u.any},{name:"overlay-color",type:l.color},{name:"overlay-opacity",type:l.zeroOneNumber,triggersBounds:u.zeroNonZero},{name:"overlay-shape",type:l.overlayShape,triggersBounds:u.any},{name:"overlay-corner-radius",type:l.cornerRadius}],y=[{name:"underlay-padding",type:l.size,triggersBounds:u.any},{name:"underlay-color",type:l.color},{name:"underlay-opacity",type:l.zeroOneNumber,triggersBounds:u.zeroNonZero},{name:"underlay-shape",type:l.overlayShape,triggersBounds:u.any},{name:"underlay-corner-radius",type:l.cornerRadius}],w=[{name:"transition-property",type:l.propList},{name:"transition-duration",type:l.time},{name:"transition-delay",type:l.time},{name:"transition-timing-function",type:l.easing}],b=function(L,U){return U.value==="label"?-L.poolIndex():U.pfValue},I=[{name:"height",type:l.nodeSize,triggersBounds:u.any,hashOverride:b},{name:"width",type:l.nodeSize,triggersBounds:u.any,hashOverride:b},{name:"shape",type:l.nodeShape,triggersBounds:u.any},{name:"shape-polygon-points",type:l.polygonPointList,triggersBounds:u.any},{name:"corner-radius",type:l.cornerRadius},{name:"background-color",type:l.color},{name:"background-fill",type:l.fill},{name:"background-opacity",type:l.zeroOneNumber},{name:"background-blacken",type:l.nOneOneNumber},{name:"background-gradient-stop-colors",type:l.colors},{name:"background-gradient-stop-positions",type:l.percentages},{name:"background-gradient-direction",type:l.gradientDirection},{name:"padding",type:l.sizeMaybePercent,triggersBounds:u.any},{name:"padding-relative-to",type:l.paddingRelativeTo,triggersBounds:u.any},{name:"bounds-expansion",type:l.boundsExpansion,triggersBounds:u.any}],E=[{name:"border-color",type:l.color},{name:"border-opacity",type:l.zeroOneNumber},{name:"border-width",type:l.size,triggersBounds:u.any},{name:"border-style",type:l.borderStyle},{name:"border-cap",type:l.lineCap},{name:"border-join",type:l.lineJoin},{name:"border-dash-pattern",type:l.numbers},{name:"border-dash-offset",type:l.number},{name:"border-position",type:l.linePosition}],D=[{name:"outline-color",type:l.color},{name:"outline-opacity",type:l.zeroOneNumber},{name:"outline-width",type:l.size,triggersBounds:u.any},{name:"outline-style",type:l.borderStyle},{name:"outline-offset",type:l.size,triggersBounds:u.any}],S=[{name:"background-image",type:l.urls},{name:"background-image-crossorigin",type:l.bgCrossOrigin},{name:"background-image-opacity",type:l.zeroOneNumbers},{name:"background-image-containment",type:l.bgContainment},{name:"background-image-smoothing",type:l.bools},{name:"background-position-x",type:l.bgPos},{name:"background-position-y",type:l.bgPos},{name:"background-width-relative-to",type:l.bgRelativeTo},{name:"background-height-relative-to",type:l.bgRelativeTo},{name:"background-repeat",type:l.bgRepeat},{name:"background-fit",type:l.bgFit},{name:"background-clip",type:l.bgClip},{name:"background-width",type:l.bgWH},{name:"background-height",type:l.bgWH},{name:"background-offset-x",type:l.bgPos},{name:"background-offset-y",type:l.bgPos}],C=[{name:"position",type:l.position,triggersBounds:u.any},{name:"compound-sizing-wrt-labels",type:l.compoundIncludeLabels,triggersBounds:u.any},{name:"min-width",type:l.size,triggersBounds:u.any},{name:"min-width-bias-left",type:l.sizeMaybePercent,triggersBounds:u.any},{name:"min-width-bias-right",type:l.sizeMaybePercent,triggersBounds:u.any},{name:"min-height",type:l.size,triggersBounds:u.any},{name:"min-height-bias-top",type:l.sizeMaybePercent,triggersBounds:u.any},{name:"min-height-bias-bottom",type:l.sizeMaybePercent,triggersBounds:u.any}],A=[{name:"line-style",type:l.lineStyle},{name:"line-color",type:l.color},{name:"line-fill",type:l.fill},{name:"line-cap",type:l.lineCap},{name:"line-opacity",type:l.zeroOneNumber},{name:"line-dash-pattern",type:l.numbers},{name:"line-dash-offset",type:l.number},{name:"line-outline-width",type:l.size},{name:"line-outline-color",type:l.color},{name:"line-gradient-stop-colors",type:l.colors},{name:"line-gradient-stop-positions",type:l.percentages},{name:"curve-style",type:l.curveStyle,triggersBounds:u.any,triggersBoundsOfParallelBeziers:!0},{name:"haystack-radius",type:l.zeroOneNumber,triggersBounds:u.any},{name:"source-endpoint",type:l.edgeEndpoint,triggersBounds:u.any},{name:"target-endpoint",type:l.edgeEndpoint,triggersBounds:u.any},{name:"control-point-step-size",type:l.size,triggersBounds:u.any},{name:"control-point-distances",type:l.bidirectionalSizes,triggersBounds:u.any},{name:"control-point-weights",type:l.numbers,triggersBounds:u.any},{name:"segment-distances",type:l.bidirectionalSizes,triggersBounds:u.any},{name:"segment-weights",type:l.numbers,triggersBounds:u.any},{name:"segment-radii",type:l.numbers,triggersBounds:u.any},{name:"radius-type",type:l.radiusType,triggersBounds:u.any},{name:"taxi-turn",type:l.bidirectionalSizeMaybePercent,triggersBounds:u.any},{name:"taxi-turn-min-distance",type:l.size,triggersBounds:u.any},{name:"taxi-direction",type:l.axisDirection,triggersBounds:u.any},{name:"taxi-radius",type:l.number,triggersBounds:u.any},{name:"edge-distances",type:l.edgeDistances,triggersBounds:u.any},{name:"arrow-scale",type:l.positiveNumber,triggersBounds:u.any},{name:"loop-direction",type:l.angle,triggersBounds:u.any},{name:"loop-sweep",type:l.angle,triggersBounds:u.any},{name:"source-distance-from-node",type:l.size,triggersBounds:u.any},{name:"target-distance-from-node",type:l.size,triggersBounds:u.any}],M=[{name:"ghost",type:l.bool,triggersBounds:u.any},{name:"ghost-offset-x",type:l.bidirectionalSize,triggersBounds:u.any},{name:"ghost-offset-y",type:l.bidirectionalSize,triggersBounds:u.any},{name:"ghost-opacity",type:l.zeroOneNumber}],N=[{name:"selection-box-color",type:l.color},{name:"selection-box-opacity",type:l.zeroOneNumber},{name:"selection-box-border-color",type:l.color},{name:"selection-box-border-width",type:l.size},{name:"active-bg-color",type:l.color},{name:"active-bg-opacity",type:l.zeroOneNumber},{name:"active-bg-size",type:l.size},{name:"outside-texture-bg-color",type:l.color},{name:"outside-texture-bg-opacity",type:l.zeroOneNumber}],R=[];_t.pieBackgroundN=16,R.push({name:"pie-size",type:l.sizeMaybePercent});for(var T=1;T<=_t.pieBackgroundN;T++)R.push({name:"pie-"+T+"-background-color",type:l.color}),R.push({name:"pie-"+T+"-background-size",type:l.percent}),R.push({name:"pie-"+T+"-background-opacity",type:l.zeroOneNumber});var O=[],_=_t.arrowPrefixes=["source","mid-source","target","mid-target"];[{name:"arrow-shape",type:l.arrowShape,triggersBounds:u.any},{name:"arrow-color",type:l.color},{name:"arrow-fill",type:l.arrowFill},{name:"arrow-width",type:l.arrowWidth}].forEach(function(q){_.forEach(function(L){var U=L+"-"+q.name,Z=q.type,re=q.triggersBounds;O.push({name:U,type:Z,triggersBounds:re})})},{});var k=_t.properties=[].concat(m,w,g,v,y,M,p,h,c,d,f,I,E,D,S,R,C,A,O,N),P=_t.propertyGroups={behavior:m,transition:w,visibility:g,overlay:v,underlay:y,ghost:M,commonLabel:p,labelDimensions:h,mainLabel:c,sourceLabel:d,targetLabel:f,nodeBody:I,nodeBorder:E,nodeOutline:D,backgroundImage:S,pie:R,compound:C,edgeLine:A,edgeArrow:O,core:N},V=_t.propertyGroupNames={},z=_t.propertyGroupKeys=Object.keys(P);z.forEach(function(q){V[q]=P[q].map(function(L){return L.name}),P[q].forEach(function(L){return L.groupKey=q})});var B=_t.aliases=[{name:"content",pointsTo:"label"},{name:"control-point-distance",pointsTo:"control-point-distances"},{name:"control-point-weight",pointsTo:"control-point-weights"},{name:"segment-distance",pointsTo:"segment-distances"},{name:"segment-weight",pointsTo:"segment-weights"},{name:"segment-radius",pointsTo:"segment-radii"},{name:"edge-text-rotation",pointsTo:"text-rotation"},{name:"padding-left",pointsTo:"padding"},{name:"padding-right",pointsTo:"padding"},{name:"padding-top",pointsTo:"padding"},{name:"padding-bottom",pointsTo:"padding"}];_t.propertyNames=k.map(function(q){return q.name});for(var $=0;$<k.length;$++){var W=k[$];k[W.name]=W}for(var K=0;K<B.length;K++){var Q=B[K],X=k[Q.pointsTo],J={name:Q.name,alias:!0,pointsTo:X};k.push(J),k[Q.name]=J}})();_t.getDefaultProperty=function(t){return this.getDefaultProperties()[t]};_t.getDefaultProperties=function(){var t=this._private;if(t.defaultProperties!=null)return t.defaultProperties;for(var e=ye({"selection-box-color":"#ddd","selection-box-opacity":.65,"selection-box-border-color":"#aaa","selection-box-border-width":1,"active-bg-color":"black","active-bg-opacity":.15,"active-bg-size":30,"outside-texture-bg-color":"#000","outside-texture-bg-opacity":.125,events:"yes","text-events":"no","text-valign":"top","text-halign":"center","text-justification":"auto","line-height":1,color:"#000","text-outline-color":"#000","text-outline-width":0,"text-outline-opacity":1,"text-opacity":1,"text-decoration":"none","text-transform":"none","text-wrap":"none","text-overflow-wrap":"whitespace","text-max-width":9999,"text-background-color":"#000","text-background-opacity":0,"text-background-shape":"rectangle","text-background-padding":0,"text-border-opacity":0,"text-border-width":0,"text-border-style":"solid","text-border-color":"#000","font-family":"Helvetica Neue, Helvetica, sans-serif","font-style":"normal","font-weight":"normal","font-size":16,"min-zoomed-font-size":0,"text-rotation":"none","source-text-rotation":"none","target-text-rotation":"none",visibility:"visible",display:"element",opacity:1,"z-compound-depth":"auto","z-index-compare":"auto","z-index":0,label:"","text-margin-x":0,"text-margin-y":0,"source-label":"","source-text-offset":0,"source-text-margin-x":0,"source-text-margin-y":0,"target-label":"","target-text-offset":0,"target-text-margin-x":0,"target-text-margin-y":0,"overlay-opacity":0,"overlay-color":"#000","overlay-padding":10,"overlay-shape":"round-rectangle","overlay-corner-radius":"auto","underlay-opacity":0,"underlay-color":"#000","underlay-padding":10,"underlay-shape":"round-rectangle","underlay-corner-radius":"auto","transition-property":"none","transition-duration":0,"transition-delay":0,"transition-timing-function":"linear","background-blacken":0,"background-color":"#999","background-fill":"solid","background-opacity":1,"background-image":"none","background-image-crossorigin":"anonymous","background-image-opacity":1,"background-image-containment":"inside","background-image-smoothing":"yes","background-position-x":"50%","background-position-y":"50%","background-offset-x":0,"background-offset-y":0,"background-width-relative-to":"include-padding","background-height-relative-to":"include-padding","background-repeat":"no-repeat","background-fit":"none","background-clip":"node","background-width":"auto","background-height":"auto","border-color":"#000","border-opacity":1,"border-width":0,"border-style":"solid","border-dash-pattern":[4,2],"border-dash-offset":0,"border-cap":"butt","border-join":"miter","border-position":"center","outline-color":"#999","outline-opacity":1,"outline-width":0,"outline-offset":0,"outline-style":"solid",height:30,width:30,shape:"ellipse","shape-polygon-points":"-1, -1,   1, -1,   1, 1,   -1, 1","corner-radius":"auto","bounds-expansion":0,"background-gradient-direction":"to-bottom","background-gradient-stop-colors":"#999","background-gradient-stop-positions":"0%",ghost:"no","ghost-offset-y":0,"ghost-offset-x":0,"ghost-opacity":0,padding:0,"padding-relative-to":"width",position:"origin","compound-sizing-wrt-labels":"include","min-width":0,"min-width-bias-left":0,"min-width-bias-right":0,"min-height":0,"min-height-bias-top":0,"min-height-bias-bottom":0},{"pie-size":"100%"},[{name:"pie-{{i}}-background-color",value:"black"},{name:"pie-{{i}}-background-size",value:"0%"},{name:"pie-{{i}}-background-opacity",value:1}].reduce(function(u,l){for(var c=1;c<=_t.pieBackgroundN;c++){var d=l.name.replace("{{i}}",c),f=l.value;u[d]=f}return u},{}),{"line-style":"solid","line-color":"#999","line-fill":"solid","line-cap":"butt","line-opacity":1,"line-outline-width":0,"line-outline-color":"#000","line-gradient-stop-colors":"#999","line-gradient-stop-positions":"0%","control-point-step-size":40,"control-point-weights":.5,"segment-weights":.5,"segment-distances":20,"segment-radii":15,"radius-type":"arc-radius","taxi-turn":"50%","taxi-radius":15,"taxi-turn-min-distance":10,"taxi-direction":"auto","edge-distances":"intersection","curve-style":"haystack","haystack-radius":0,"arrow-scale":1,"loop-direction":"-45deg","loop-sweep":"-90deg","source-distance-from-node":0,"target-distance-from-node":0,"source-endpoint":"outside-to-node","target-endpoint":"outside-to-node","line-dash-pattern":[6,3],"line-dash-offset":0},[{name:"arrow-shape",value:"none"},{name:"arrow-color",value:"#999"},{name:"arrow-fill",value:"filled"},{name:"arrow-width",value:1}].reduce(function(u,l){return _t.arrowPrefixes.forEach(function(c){var d=c+"-"+l.name,f=l.value;u[d]=f}),u},{})),n={},r=0;r<this.properties.length;r++){var i=this.properties[r];if(!i.pointsTo){var o=i.name,a=e[o],s=this.parse(o,a);n[o]=s}}return t.defaultProperties=n,t.defaultProperties};_t.addDefaultStylesheet=function(){this.selector(":parent").css({shape:"rectangle",padding:10,"background-color":"#eee","border-color":"#ccc","border-width":1}).selector("edge").css({width:3}).selector(":loop").css({"curve-style":"bezier"}).selector("edge:compound").css({"curve-style":"bezier","source-endpoint":"outside-to-line","target-endpoint":"outside-to-line"}).selector(":selected").css({"background-color":"#0169D9","line-color":"#0169D9","source-arrow-color":"#0169D9","target-arrow-color":"#0169D9","mid-source-arrow-color":"#0169D9","mid-target-arrow-color":"#0169D9"}).selector(":parent:selected").css({"background-color":"#CCE1F9","border-color":"#aec8e5"}).selector(":active").css({"overlay-color":"black","overlay-padding":10,"overlay-opacity":.25}),this.defaultLength=this.length};var gc={};gc.parse=function(t,e,n,r){var i=this;if(lt(e))return i.parseImplWarn(t,e,n,r);var o=r==="mapping"||r===!0||r===!1||r==null?"dontcare":r,a=n?"t":"f",s=""+e,u=pb(t,s,a,o),l=i.propCache=i.propCache||[],c;return(c=l[u])||(c=l[u]=i.parseImplWarn(t,e,n,r)),(n||r==="mapping")&&(c=Jn(c),c&&(c.value=Jn(c.value))),c};gc.parseImplWarn=function(t,e,n,r){var i=this.parseImpl(t,e,n,r);return!i&&e!=null&&Ye("The style property `".concat(t,": ").concat(e,"` is invalid")),i&&(i.name==="width"||i.name==="height")&&e==="label"&&Ye("The style value of `label` is deprecated for `"+i.name+"`"),i};gc.parseImpl=function(t,e,n,r){var i=this;t=gp(t);var o=i.properties[t],a=e,s=i.types;if(!o||e===void 0)return null;o.alias&&(o=o.pointsTo,t=o.name);var u=pe(e);u&&(e=e.trim());var l=o.type;if(!l)return null;if(n&&(e===""||e===null))return{name:t,value:e,bypass:!0,deleteBypass:!0};if(lt(e))return{name:t,value:e,strValue:"fn",mapped:s.fn,bypass:n};var c,d;if(!(!u||r||e.length<7||e[1]!=="a")){if(e.length>=7&&e[0]==="d"&&(c=new RegExp(s.data.regex).exec(e))){if(n)return!1;var f=s.data;return{name:t,value:c,strValue:""+e,mapped:f,field:c[1],bypass:n}}else if(e.length>=10&&e[0]==="m"&&(d=new RegExp(s.mapData.regex).exec(e))){if(n||l.multiple)return!1;var h=s.mapData;if(!(l.color||l.number))return!1;var p=this.parse(t,d[4]);if(!p||p.mapped)return!1;var m=this.parse(t,d[5]);if(!m||m.mapped)return!1;if(p.pfValue===m.pfValue||p.strValue===m.strValue)return Ye("`"+t+": "+e+"` is not a valid mapper because the output range is zero; converting to `"+t+": "+p.strValue+"`"),this.parse(t,p.strValue);if(l.color){var g=p.value,v=m.value,y=g[0]===v[0]&&g[1]===v[1]&&g[2]===v[2]&&(g[3]===v[3]||(g[3]==null||g[3]===1)&&(v[3]==null||v[3]===1));if(y)return!1}return{name:t,value:d,strValue:""+e,mapped:h,field:d[1],fieldMin:parseFloat(d[2]),fieldMax:parseFloat(d[3]),valueMin:p.value,valueMax:m.value,bypass:n}}}if(l.multiple&&r!=="multiple"){var w;if(u?w=e.split(/\s+/):tt(e)?w=e:w=[e],l.evenMultiple&&w.length%2!==0)return null;for(var b=[],I=[],E=[],D="",S=!1,C=0;C<w.length;C++){var A=i.parse(t,w[C],n,"multiple");S=S||pe(A.value),b.push(A.value),E.push(A.pfValue!=null?A.pfValue:A.value),I.push(A.units),D+=(C>0?" ":"")+A.strValue}return l.validate&&!l.validate(b,I)?null:l.singleEnum&&S?b.length===1&&pe(b[0])?{name:t,value:b[0],strValue:b[0],bypass:n}:null:{name:t,value:b,pfValue:E,strValue:D,bypass:n,units:I}}var M=function(){for(var L=0;L<l.enums.length;L++){var U=l.enums[L];if(U===e)return{name:t,value:e,strValue:""+e,bypass:n}}return null};if(l.number){var N,R="px";if(l.units&&(N=l.units),l.implicitUnits&&(R=l.implicitUnits),!l.unitless)if(u){var T="px|em"+(l.allowPercent?"|\\%":"");N&&(T=N);var O=e.match("^("+bt+")("+T+")?$");O&&(e=O[1],N=O[2]||R)}else(!N||l.implicitUnits)&&(N=R);if(e=parseFloat(e),isNaN(e)&&l.enums===void 0)return null;if(isNaN(e)&&l.enums!==void 0)return e=a,M();if(l.integer&&!C1(e)||l.min!==void 0&&(e<l.min||l.strictMin&&e===l.min)||l.max!==void 0&&(e>l.max||l.strictMax&&e===l.max))return null;var _={name:t,value:e,strValue:""+e+(N||""),units:N,bypass:n};return l.unitless||N!=="px"&&N!=="em"?_.pfValue=e:_.pfValue=N==="px"||!N?e:this.getEmSizeInPixels()*e,(N==="ms"||N==="s")&&(_.pfValue=N==="ms"?e:1e3*e),(N==="deg"||N==="rad")&&(_.pfValue=N==="rad"?e:rA(e)),N==="%"&&(_.pfValue=e/100),_}else if(l.propList){var k=[],P=""+e;if(P!=="none"){for(var V=P.split(/\s*,\s*|\s+/),z=0;z<V.length;z++){var B=V[z].trim();i.properties[B]?k.push(B):Ye("`"+B+"` is not a valid property name")}if(k.length===0)return null}return{name:t,value:k,strValue:k.length===0?"none":k.join(" "),bypass:n}}else if(l.color){var $=$1(e);return $?{name:t,value:$,pfValue:$,strValue:"rgb("+$[0]+","+$[1]+","+$[2]+")",bypass:n}:null}else if(l.regex||l.regexes){if(l.enums){var W=M();if(W)return W}for(var K=l.regexes?l.regexes:[l.regex],Q=0;Q<K.length;Q++){var X=new RegExp(K[Q]),J=X.exec(e);if(J)return{name:t,value:l.singleRegexMatchValue?J[1]:J,strValue:""+e,bypass:n}}return null}else return l.string?{name:t,value:""+e,strValue:""+e,bypass:n}:l.enums?M():null};var zt=function t(e){if(!(this instanceof t))return new t(e);if(!pp(e)){dt("A style must have a core reference");return}this._private={cy:e,coreStyle:{}},this.length=0,this.resetToDefault()},qt=zt.prototype;qt.instanceString=function(){return"style"};qt.clear=function(){for(var t=this._private,e=t.cy,n=e.elements(),r=0;r<this.length;r++)this[r]=void 0;return this.length=0,t.contextStyles={},t.propDiffs={},this.cleanElements(n,!0),n.forEach(function(i){var o=i[0]._private;o.styleDirty=!0,o.appliedInitStyle=!1}),this};qt.resetToDefault=function(){return this.clear(),this.addDefaultStylesheet(),this};qt.core=function(t){return this._private.coreStyle[t]||this.getDefaultProperty(t)};qt.selector=function(t){var e=t==="core"?null:new Hr(t),n=this.length++;return this[n]={selector:e,properties:[],mappedProperties:[],index:n},this};qt.css=function(){var t=this,e=arguments;if(e.length===1)for(var n=e[0],r=0;r<t.properties.length;r++){var i=t.properties[r],o=n[i.name];o===void 0&&(o=n[tc(i.name)]),o!==void 0&&this.cssRule(i.name,o)}else e.length===2&&this.cssRule(e[0],e[1]);return this};qt.style=qt.css;qt.cssRule=function(t,e){var n=this.parse(t,e);if(n){var r=this.length-1;this[r].properties.push(n),this[r].properties[n.name]=n,n.name.match(/pie-(\d+)-background-size/)&&n.value&&(this._private.hasPie=!0),n.mapped&&this[r].mappedProperties.push(n);var i=!this[r].selector;i&&(this._private.coreStyle[n.name]=n)}return this};qt.append=function(t){return ib(t)?t.appendToStyle(this):tt(t)?this.appendFromJson(t):pe(t)&&this.appendFromString(t),this};zt.fromJson=function(t,e){var n=new zt(t);return n.fromJson(e),n};zt.fromString=function(t,e){return new zt(t).fromString(e)};[Gt,Ns,Np,tr,pc,Ap,_t,gc].forEach(function(t){ye(qt,t)});zt.types=qt.types;zt.properties=qt.properties;zt.propertyGroups=qt.propertyGroups;zt.propertyGroupNames=qt.propertyGroupNames;zt.propertyGroupKeys=qt.propertyGroupKeys;var CO={style:function(e){if(e){var n=this.setStyle(e);n.update()}return this._private.style},setStyle:function(e){var n=this._private;return ib(e)?n.style=e.generateStyle(this):tt(e)?n.style=zt.fromJson(this,e):pe(e)?n.style=zt.fromString(this,e):n.style=zt(this),n.style},updateStyle:function(){this.mutableElements().updateStyle()}},IO="single",Mi={autolock:function(e){if(e!==void 0)this._private.autolock=!!e;else return this._private.autolock;return this},autoungrabify:function(e){if(e!==void 0)this._private.autoungrabify=!!e;else return this._private.autoungrabify;return this},autounselectify:function(e){if(e!==void 0)this._private.autounselectify=!!e;else return this._private.autounselectify;return this},selectionType:function(e){var n=this._private;if(n.selectionType==null&&(n.selectionType=IO),e!==void 0)(e==="additive"||e==="single")&&(n.selectionType=e);else return n.selectionType;return this},panningEnabled:function(e){if(e!==void 0)this._private.panningEnabled=!!e;else return this._private.panningEnabled;return this},userPanningEnabled:function(e){if(e!==void 0)this._private.userPanningEnabled=!!e;else return this._private.userPanningEnabled;return this},zoomingEnabled:function(e){if(e!==void 0)this._private.zoomingEnabled=!!e;else return this._private.zoomingEnabled;return this},userZoomingEnabled:function(e){if(e!==void 0)this._private.userZoomingEnabled=!!e;else return this._private.userZoomingEnabled;return this},boxSelectionEnabled:function(e){if(e!==void 0)this._private.boxSelectionEnabled=!!e;else return this._private.boxSelectionEnabled;return this},pan:function(){var e=arguments,n=this._private.pan,r,i,o,a,s;switch(e.length){case 0:return n;case 1:if(pe(e[0]))return r=e[0],n[r];if(He(e[0])){if(!this._private.panningEnabled)return this;o=e[0],a=o.x,s=o.y,ie(a)&&(n.x=a),ie(s)&&(n.y=s),this.emit("pan viewport")}break;case 2:if(!this._private.panningEnabled)return this;r=e[0],i=e[1],(r==="x"||r==="y")&&ie(i)&&(n[r]=i),this.emit("pan viewport");break}return this.notify("viewport"),this},panBy:function(e,n){var r=arguments,i=this._private.pan,o,a,s,u,l;if(!this._private.panningEnabled)return this;switch(r.length){case 1:He(e)&&(s=r[0],u=s.x,l=s.y,ie(u)&&(i.x+=u),ie(l)&&(i.y+=l),this.emit("pan viewport"));break;case 2:o=e,a=n,(o==="x"||o==="y")&&ie(a)&&(i[o]+=a),this.emit("pan viewport");break}return this.notify("viewport"),this},fit:function(e,n){var r=this.getFitViewport(e,n);if(r){var i=this._private;i.zoom=r.zoom,i.pan=r.pan,this.emit("pan zoom viewport"),this.notify("viewport")}return this},getFitViewport:function(e,n){if(ie(e)&&n===void 0&&(n=e,e=void 0),!(!this._private.panningEnabled||!this._private.zoomingEnabled)){var r;if(pe(e)){var i=e;e=this.$(i)}else if(x1(e)){var o=e;r={x1:o.x1,y1:o.y1,x2:o.x2,y2:o.y2},r.w=r.x2-r.x1,r.h=r.y2-r.y1}else pn(e)||(e=this.mutableElements());if(!(pn(e)&&e.empty())){r=r||e.boundingBox();var a=this.width(),s=this.height(),u;if(n=ie(n)?n:0,!isNaN(a)&&!isNaN(s)&&a>0&&s>0&&!isNaN(r.w)&&!isNaN(r.h)&&r.w>0&&r.h>0){u=Math.min((a-2*n)/r.w,(s-2*n)/r.h),u=u>this._private.maxZoom?this._private.maxZoom:u,u=u<this._private.minZoom?this._private.minZoom:u;var l={x:(a-u*(r.x1+r.x2))/2,y:(s-u*(r.y1+r.y2))/2};return{zoom:u,pan:l}}}}},zoomRange:function(e,n){var r=this._private;if(n==null){var i=e;e=i.min,n=i.max}return ie(e)&&ie(n)&&e<=n?(r.minZoom=e,r.maxZoom=n):ie(e)&&n===void 0&&e<=r.maxZoom?r.minZoom=e:ie(n)&&e===void 0&&n>=r.minZoom&&(r.maxZoom=n),this},minZoom:function(e){return e===void 0?this._private.minZoom:this.zoomRange({min:e})},maxZoom:function(e){return e===void 0?this._private.maxZoom:this.zoomRange({max:e})},getZoomedViewport:function(e){var n=this._private,r=n.pan,i=n.zoom,o,a,s=!1;if(n.zoomingEnabled||(s=!0),ie(e)?a=e:He(e)&&(a=e.level,e.position!=null?o=oc(e.position,i,r):e.renderedPosition!=null&&(o=e.renderedPosition),o!=null&&!n.panningEnabled&&(s=!0)),a=a>n.maxZoom?n.maxZoom:a,a=a<n.minZoom?n.minZoom:a,s||!ie(a)||a===i||o!=null&&(!ie(o.x)||!ie(o.y)))return null;if(o!=null){var u=r,l=i,c=a,d={x:-c/l*(o.x-u.x)+o.x,y:-c/l*(o.y-u.y)+o.y};return{zoomed:!0,panned:!0,zoom:c,pan:d}}else return{zoomed:!0,panned:!1,zoom:a,pan:r}},zoom:function(e){if(e===void 0)return this._private.zoom;var n=this.getZoomedViewport(e),r=this._private;return n==null||!n.zoomed?this:(r.zoom=n.zoom,n.panned&&(r.pan.x=n.pan.x,r.pan.y=n.pan.y),this.emit("zoom"+(n.panned?" pan":"")+" viewport"),this.notify("viewport"),this)},viewport:function(e){var n=this._private,r=!0,i=!0,o=[],a=!1,s=!1;if(!e)return this;if(ie(e.zoom)||(r=!1),He(e.pan)||(i=!1),!r&&!i)return this;if(r){var u=e.zoom;u<n.minZoom||u>n.maxZoom||!n.zoomingEnabled?a=!0:(n.zoom=u,o.push("zoom"))}if(i&&(!a||!e.cancelOnFailedZoom)&&n.panningEnabled){var l=e.pan;ie(l.x)&&(n.pan.x=l.x,s=!1),ie(l.y)&&(n.pan.y=l.y,s=!1),s||o.push("pan")}return o.length>0&&(o.push("viewport"),this.emit(o.join(" ")),this.notify("viewport")),this},center:function(e){var n=this.getCenterPan(e);return n&&(this._private.pan=n,this.emit("pan viewport"),this.notify("viewport")),this},getCenterPan:function(e,n){if(this._private.panningEnabled){if(pe(e)){var r=e;e=this.mutableElements().filter(r)}else pn(e)||(e=this.mutableElements());if(e.length!==0){var i=e.boundingBox(),o=this.width(),a=this.height();n=n===void 0?this._private.zoom:n;var s={x:(o-n*(i.x1+i.x2))/2,y:(a-n*(i.y1+i.y2))/2};return s}}},reset:function(){return!this._private.panningEnabled||!this._private.zoomingEnabled?this:(this.viewport({pan:{x:0,y:0},zoom:1}),this)},invalidateSize:function(){this._private.sizeCache=null},size:function(){var e=this._private,n=e.container,r=this;return e.sizeCache=e.sizeCache||(n?function(){var i=r.window().getComputedStyle(n),o=function(s){return parseFloat(i.getPropertyValue(s))};return{width:n.clientWidth-o("padding-left")-o("padding-right"),height:n.clientHeight-o("padding-top")-o("padding-bottom")}}():{width:1,height:1})},width:function(){return this.size().width},height:function(){return this.size().height},extent:function(){var e=this._private.pan,n=this._private.zoom,r=this.renderedExtent(),i={x1:(r.x1-e.x)/n,x2:(r.x2-e.x)/n,y1:(r.y1-e.y)/n,y2:(r.y2-e.y)/n};return i.w=i.x2-i.x1,i.h=i.y2-i.y1,i},renderedExtent:function(){var e=this.width(),n=this.height();return{x1:0,y1:0,x2:e,y2:n,w:e,h:n}},multiClickDebounceTime:function(e){if(e)this._private.multiClickDebounceTime=e;else return this._private.multiClickDebounceTime;return this}};Mi.centre=Mi.center;Mi.autolockNodes=Mi.autolock;Mi.autoungrabifyNodes=Mi.autoungrabify;var Es={data:Ze.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeData:Ze.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),scratch:Ze.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:Ze.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0})};Es.attr=Es.data;Es.removeAttr=Es.removeData;var Cs=function(e){var n=this;e=ye({},e);var r=e.container;r&&!Ul(r)&&Ul(r[0])&&(r=r[0]);var i=r?r._cyreg:null;i=i||{},i&&i.cy&&(i.cy.destroy(),i={});var o=i.readies=i.readies||[];r&&(r._cyreg=i),i.cy=n;var a=wt!==void 0&&r!==void 0&&!e.headless,s=e;s.layout=ye({name:a?"grid":"null"},s.layout),s.renderer=ye({name:a?"canvas":"null"},s.renderer);var u=function(p,m,g){return m!==void 0?m:g!==void 0?g:p},l=this._private={container:r,ready:!1,options:s,elements:new Ot(this),listeners:[],aniEles:new Ot(this),data:s.data||{},scratch:{},layout:null,renderer:null,destroyed:!1,notificationsEnabled:!0,minZoom:1e-50,maxZoom:1e50,zoomingEnabled:u(!0,s.zoomingEnabled),userZoomingEnabled:u(!0,s.userZoomingEnabled),panningEnabled:u(!0,s.panningEnabled),userPanningEnabled:u(!0,s.userPanningEnabled),boxSelectionEnabled:u(!0,s.boxSelectionEnabled),autolock:u(!1,s.autolock,s.autolockNodes),autoungrabify:u(!1,s.autoungrabify,s.autoungrabifyNodes),autounselectify:u(!1,s.autounselectify),styleEnabled:s.styleEnabled===void 0?a:s.styleEnabled,zoom:ie(s.zoom)?s.zoom:1,pan:{x:He(s.pan)&&ie(s.pan.x)?s.pan.x:0,y:He(s.pan)&&ie(s.pan.y)?s.pan.y:0},animation:{current:[],queue:[]},hasCompoundNodes:!1,multiClickDebounceTime:u(250,s.multiClickDebounceTime)};this.createEmitter(),this.selectionType(s.selectionType),this.zoomRange({min:s.minZoom,max:s.maxZoom});var c=function(p,m){var g=p.some(T1);if(g)return Ho.all(p).then(m);m(p)};l.styleEnabled&&n.setStyle([]);var d=ye({},s,s.renderer);n.initRenderer(d);var f=function(p,m,g){n.notifications(!1);var v=n.mutableElements();v.length>0&&v.remove(),p!=null&&(He(p)||tt(p))&&n.add(p),n.one("layoutready",function(w){n.notifications(!0),n.emit(w),n.one("load",m),n.emitAndNotify("load")}).one("layoutstop",function(){n.one("done",g),n.emit("done")});var y=ye({},n._private.options.layout);y.eles=n.elements(),n.layout(y).run()};c([s.style,s.elements],function(h){var p=h[0],m=h[1];l.styleEnabled&&n.style().append(p),f(m,function(){n.startAnimationLoop(),l.ready=!0,lt(s.ready)&&n.on("ready",s.ready);for(var g=0;g<o.length;g++){var v=o[g];n.on("ready",v)}i&&(i.readies=[]),n.emit("ready")},s.done)})},Ql=Cs.prototype;ye(Ql,{instanceString:function(){return"core"},isReady:function(){return this._private.ready},destroyed:function(){return this._private.destroyed},ready:function(e){return this.isReady()?this.emitter().emit("ready",[],e):this.on("ready",e),this},destroy:function(){var e=this;if(!e.destroyed())return e.stopAnimationLoop(),e.destroyRenderer(),this.emit("destroy"),e._private.destroyed=!0,e},hasElementWithId:function(e){return this._private.elements.hasElementWithId(e)},getElementById:function(e){return this._private.elements.getElementById(e)},hasCompoundNodes:function(){return this._private.hasCompoundNodes},headless:function(){return this._private.renderer.isHeadless()},styleEnabled:function(){return this._private.styleEnabled},addToPool:function(e){return this._private.elements.merge(e),this},removeFromPool:function(e){return this._private.elements.unmerge(e),this},container:function(){return this._private.container||null},window:function(){var e=this._private.container;if(e==null)return wt;var n=this._private.container.ownerDocument;return n===void 0||n==null?wt:n.defaultView||wt},mount:function(e){if(e!=null){var n=this,r=n._private,i=r.options;return!Ul(e)&&Ul(e[0])&&(e=e[0]),n.stopAnimationLoop(),n.destroyRenderer(),r.container=e,r.styleEnabled=!0,n.invalidateSize(),n.initRenderer(ye({},i,i.renderer,{name:i.renderer.name==="null"?"canvas":i.renderer.name})),n.startAnimationLoop(),n.style(i.style),n.emit("mount"),n}},unmount:function(){var e=this;return e.stopAnimationLoop(),e.destroyRenderer(),e.initRenderer({name:"null"}),e.emit("unmount"),e},options:function(){return Jn(this._private.options)},json:function(e){var n=this,r=n._private,i=n.mutableElements(),o=function(b){return n.getElementById(b.id())};if(He(e)){if(n.startBatch(),e.elements){var a={},s=function(b,I){for(var E=[],D=[],S=0;S<b.length;S++){var C=b[S];if(!C.data.id){Ye("cy.json() cannot handle elements without an ID attribute");continue}var A=""+C.data.id,M=n.getElementById(A);a[A]=!0,M.length!==0?D.push({ele:M,json:C}):(I&&(C.group=I),E.push(C))}n.add(E);for(var N=0;N<D.length;N++){var R=D[N],T=R.ele,O=R.json;T.json(O)}};if(tt(e.elements))s(e.elements);else for(var u=["nodes","edges"],l=0;l<u.length;l++){var c=u[l],d=e.elements[c];tt(d)&&s(d,c)}var f=n.collection();i.filter(function(w){return!a[w.id()]}).forEach(function(w){w.isParent()?f.merge(w):w.remove()}),f.forEach(function(w){return w.children().move({parent:null})}),f.forEach(function(w){return o(w).remove()})}e.style&&n.style(e.style),e.zoom!=null&&e.zoom!==r.zoom&&n.zoom(e.zoom),e.pan&&(e.pan.x!==r.pan.x||e.pan.y!==r.pan.y)&&n.pan(e.pan),e.data&&n.data(e.data);for(var h=["minZoom","maxZoom","zoomingEnabled","userZoomingEnabled","panningEnabled","userPanningEnabled","boxSelectionEnabled","autolock","autoungrabify","autounselectify","multiClickDebounceTime"],p=0;p<h.length;p++){var m=h[p];e[m]!=null&&n[m](e[m])}return n.endBatch(),this}else{var g=!!e,v={};g?v.elements=this.elements().map(function(w){return w.json()}):(v.elements={},i.forEach(function(w){var b=w.group();v.elements[b]||(v.elements[b]=[]),v.elements[b].push(w.json())})),this._private.styleEnabled&&(v.style=n.style().json()),v.data=Jn(n.data());var y=r.options;return v.zoomingEnabled=r.zoomingEnabled,v.userZoomingEnabled=r.userZoomingEnabled,v.zoom=r.zoom,v.minZoom=r.minZoom,v.maxZoom=r.maxZoom,v.panningEnabled=r.panningEnabled,v.userPanningEnabled=r.userPanningEnabled,v.pan=Jn(r.pan),v.boxSelectionEnabled=r.boxSelectionEnabled,v.renderer=Jn(y.renderer),v.hideEdgesOnViewport=y.hideEdgesOnViewport,v.textureOnViewport=y.textureOnViewport,v.wheelSensitivity=y.wheelSensitivity,v.motionBlur=y.motionBlur,v.multiClickDebounceTime=y.multiClickDebounceTime,v}}});Ql.$id=Ql.getElementById;[hO,yO,oD,np,$l,bO,rp,jl,CO,Mi,Es].forEach(function(t){ye(Ql,t)});var SO={fit:!0,directed:!1,padding:30,circle:!1,grid:!1,spacingFactor:1.75,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,roots:void 0,depthSort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,n){return!0},ready:void 0,stop:void 0,transform:function(e,n){return n}},xO={maximal:!1,acyclic:!1},Mo=function(e){return e.scratch("breadthfirst")},_w=function(e,n){return e.scratch("breadthfirst",n)};function aD(t){this.options=ye({},SO,xO,t)}aD.prototype.run=function(){var t=this.options,e=t,n=t.cy,r=e.eles,i=r.nodes().filter(function(ne){return!ne.isParent()}),o=r,a=e.directed,s=e.acyclic||e.maximal||e.maximalAdjustments>0,u=en(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:n.width(),h:n.height()}),l;if(pn(e.roots))l=e.roots;else if(tt(e.roots)){for(var c=[],d=0;d<e.roots.length;d++){var f=e.roots[d],h=n.getElementById(f);c.push(h)}l=n.collection(c)}else if(pe(e.roots))l=n.$(e.roots);else if(a)l=i.roots();else{var p=r.components();l=n.collection();for(var m=function(te){var de=p[te],ce=de.maxDegree(!1),se=de.filter(function(ge){return ge.degree(!1)===ce});l=l.add(se)},g=0;g<p.length;g++)m(g)}var v=[],y={},w=function(te,de){v[de]==null&&(v[de]=[]);var ce=v[de].length;v[de].push(te),_w(te,{index:ce,depth:de})},b=function(te,de){var ce=Mo(te),se=ce.depth,ge=ce.index;v[se][ge]=null,w(te,de)};o.bfs({roots:l,directed:e.directed,visit:function(te,de,ce,se,ge){var Ke=te[0],$e=Ke.id();w(Ke,ge),y[$e]=!0}});for(var I=[],E=0;E<i.length;E++){var D=i[E];y[D.id()]||I.push(D)}var S=function(te){for(var de=v[te],ce=0;ce<de.length;ce++){var se=de[ce];if(se==null){de.splice(ce,1),ce--;continue}_w(se,{depth:te,index:ce})}},C=function(){for(var te=0;te<v.length;te++)S(te)},A=function(te,de){for(var ce=Mo(te),se=te.incomers().filter(function(qe){return qe.isNode()&&r.has(qe)}),ge=-1,Ke=te.id(),$e=0;$e<se.length;$e++){var Re=se[$e],Qe=Mo(Re);ge=Math.max(ge,Qe.depth)}if(ce.depth<=ge){if(!e.acyclic&&de[Ke])return null;var ke=ge+1;return b(te,ke),de[Ke]=ke,!0}return!1};if(a&&s){var M=[],N={},R=function(te){return M.push(te)},T=function(){return M.shift()};for(i.forEach(function(ne){return M.push(ne)});M.length>0;){var O=T(),_=A(O,N);if(_)O.outgoers().filter(function(ne){return ne.isNode()&&r.has(ne)}).forEach(R);else if(_===null){Ye("Detected double maximal shift for node `"+O.id()+"`.  Bailing maximal adjustment due to cycle.  Use `options.maximal: true` only on DAGs.");break}}}C();var k=0;if(e.avoidOverlap)for(var P=0;P<i.length;P++){var V=i[P],z=V.layoutDimensions(e),B=z.w,$=z.h;k=Math.max(k,B,$)}var W={},K=function(te){if(W[te.id()])return W[te.id()];for(var de=Mo(te).depth,ce=te.neighborhood(),se=0,ge=0,Ke=0;Ke<ce.length;Ke++){var $e=ce[Ke];if(!($e.isEdge()||$e.isParent()||!i.has($e))){var Re=Mo($e);if(Re!=null){var Qe=Re.index,ke=Re.depth;if(!(Qe==null||ke==null)){var qe=v[ke].length;ke<de&&(se+=Qe/qe,ge++)}}}}return ge=Math.max(1,ge),se=se/ge,ge===0&&(se=0),W[te.id()]=se,se},Q=function(te,de){var ce=K(te),se=K(de),ge=ce-se;return ge===0?ab(te.id(),de.id()):ge};e.depthSort!==void 0&&(Q=e.depthSort);for(var X=0;X<v.length;X++)v[X].sort(Q),S(X);for(var J=[],q=0;q<I.length;q++)J.push(I[q]);v.unshift(J),C();for(var L=0,U=0;U<v.length;U++)L=Math.max(v[U].length,L);var Z={x:u.x1+u.w/2,y:u.x1+u.h/2},re=v.reduce(function(ne,te){return Math.max(ne,te.length)},0),ve=function(te){var de=Mo(te),ce=de.depth,se=de.index,ge=v[ce].length,Ke=Math.max(u.w/((e.grid?re:ge)+1),k),$e=Math.max(u.h/(v.length+1),k),Re=Math.min(u.w/2/v.length,u.h/2/v.length);if(Re=Math.max(Re,k),e.circle){var ke=Re*ce+Re-(v.length>0&&v[0].length<=3?Re/2:0),qe=2*Math.PI/v[ce].length*se;return ce===0&&v[0].length===1&&(ke=1),{x:Z.x+ke*Math.cos(qe),y:Z.y+ke*Math.sin(qe)}}else{var Qe={x:Z.x+(se+1-(ge+1)/2)*Ke,y:(ce+1)*$e};return Qe}};return r.nodes().layoutPositions(this,e,ve),this};var TO={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,radius:void 0,startAngle:3/2*Math.PI,sweep:void 0,clockwise:!0,sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,n){return!0},ready:void 0,stop:void 0,transform:function(e,n){return n}};function sD(t){this.options=ye({},TO,t)}sD.prototype.run=function(){var t=this.options,e=t,n=t.cy,r=e.eles,i=e.counterclockwise!==void 0?!e.counterclockwise:e.clockwise,o=r.nodes().not(":parent");e.sort&&(o=o.sort(e.sort));for(var a=en(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:n.width(),h:n.height()}),s={x:a.x1+a.w/2,y:a.y1+a.h/2},u=e.sweep===void 0?2*Math.PI-2*Math.PI/o.length:e.sweep,l=u/Math.max(1,o.length-1),c,d=0,f=0;f<o.length;f++){var h=o[f],p=h.layoutDimensions(e),m=p.w,g=p.h;d=Math.max(d,m,g)}if(ie(e.radius)?c=e.radius:o.length<=1?c=0:c=Math.min(a.h,a.w)/2-d,o.length>1&&e.avoidOverlap){d*=1.75;var v=Math.cos(l)-Math.cos(0),y=Math.sin(l)-Math.sin(0),w=Math.sqrt(d*d/(v*v+y*y));c=Math.max(w,c)}var b=function(E,D){var S=e.startAngle+D*l*(i?1:-1),C=c*Math.cos(S),A=c*Math.sin(S),M={x:s.x+C,y:s.y+A};return M};return r.nodes().layoutPositions(this,e,b),this};var MO={fit:!0,padding:30,startAngle:3/2*Math.PI,sweep:void 0,clockwise:!0,equidistant:!1,minNodeSpacing:10,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,height:void 0,width:void 0,spacingFactor:void 0,concentric:function(e){return e.degree()},levelWidth:function(e){return e.maxDegree()/4},animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,n){return!0},ready:void 0,stop:void 0,transform:function(e,n){return n}};function uD(t){this.options=ye({},MO,t)}uD.prototype.run=function(){for(var t=this.options,e=t,n=e.counterclockwise!==void 0?!e.counterclockwise:e.clockwise,r=t.cy,i=e.eles,o=i.nodes().not(":parent"),a=en(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()}),s={x:a.x1+a.w/2,y:a.y1+a.h/2},u=[],l=0,c=0;c<o.length;c++){var d=o[c],f=void 0;f=e.concentric(d),u.push({value:f,node:d}),d._private.scratch.concentric=f}o.updateStyle();for(var h=0;h<o.length;h++){var p=o[h],m=p.layoutDimensions(e);l=Math.max(l,m.w,m.h)}u.sort(function(ne,te){return te.value-ne.value});for(var g=e.levelWidth(o),v=[[]],y=v[0],w=0;w<u.length;w++){var b=u[w];if(y.length>0){var I=Math.abs(y[0].value-b.value);I>=g&&(y=[],v.push(y))}y.push(b)}var E=l+e.minNodeSpacing;if(!e.avoidOverlap){var D=v.length>0&&v[0].length>1,S=Math.min(a.w,a.h)/2-E,C=S/(v.length+D?1:0);E=Math.min(E,C)}for(var A=0,M=0;M<v.length;M++){var N=v[M],R=e.sweep===void 0?2*Math.PI-2*Math.PI/N.length:e.sweep,T=N.dTheta=R/Math.max(1,N.length-1);if(N.length>1&&e.avoidOverlap){var O=Math.cos(T)-Math.cos(0),_=Math.sin(T)-Math.sin(0),k=Math.sqrt(E*E/(O*O+_*_));A=Math.max(k,A)}N.r=A,A+=E}if(e.equidistant){for(var P=0,V=0,z=0;z<v.length;z++){var B=v[z],$=B.r-V;P=Math.max(P,$)}V=0;for(var W=0;W<v.length;W++){var K=v[W];W===0&&(V=K.r),K.r=V,V+=P}}for(var Q={},X=0;X<v.length;X++)for(var J=v[X],q=J.dTheta,L=J.r,U=0;U<J.length;U++){var Z=J[U],re=e.startAngle+(n?1:-1)*q*U,ve={x:s.x+L*Math.cos(re),y:s.y+L*Math.sin(re)};Q[Z.node.id()]=ve}return i.nodes().layoutPositions(this,e,function(ne){var te=ne.id();return Q[te]}),this};var Gh,NO={ready:function(){},stop:function(){},animate:!0,animationEasing:void 0,animationDuration:void 0,animateFilter:function(e,n){return!0},animationThreshold:250,refresh:20,fit:!0,padding:30,boundingBox:void 0,nodeDimensionsIncludeLabels:!1,randomize:!1,componentSpacing:40,nodeRepulsion:function(e){return 2048},nodeOverlap:4,idealEdgeLength:function(e){return 32},edgeElasticity:function(e){return 32},nestingFactor:1.2,gravity:1,numIter:1e3,initialTemp:1e3,coolingFactor:.99,minTemp:1};function vc(t){this.options=ye({},NO,t),this.options.layout=this;var e=this.options.eles.nodes(),n=this.options.eles.edges(),r=n.filter(function(i){var o=i.source().data("id"),a=i.target().data("id"),s=e.some(function(l){return l.data("id")===o}),u=e.some(function(l){return l.data("id")===a});return!s||!u});this.options.eles=this.options.eles.not(r)}vc.prototype.run=function(){var t=this.options,e=t.cy,n=this;n.stopped=!1,(t.animate===!0||t.animate===!1)&&n.emit({type:"layoutstart",layout:n}),t.debug===!0?Gh=!0:Gh=!1;var r=AO(e,n,t);Gh&&kO(r),t.randomize&&OO(r);var i=vr(),o=function(){PO(r,e,t),t.fit===!0&&e.fit(t.padding)},a=function(f){return!(n.stopped||f>=t.numIter||(LO(r,t),r.temperature=r.temperature*t.coolingFactor,r.temperature<t.minTemp))},s=function(){if(t.animate===!0||t.animate===!1)o(),n.one("layoutstop",t.stop),n.emit({type:"layoutstop",layout:n});else{var f=t.eles.nodes(),h=lD(r,t,f);f.layoutPositions(n,t,h)}},u=0,l=!0;if(t.animate===!0){var c=function d(){for(var f=0;l&&f<t.refresh;)l=a(u),u++,f++;if(!l)Ow(r,t),s();else{var h=vr();h-i>=t.animationThreshold&&o(),ql(d)}};c()}else{for(;l;)l=a(u),u++;Ow(r,t),s()}return this};vc.prototype.stop=function(){return this.stopped=!0,this.thread&&this.thread.stop(),this.emit("layoutstop"),this};vc.prototype.destroy=function(){return this.thread&&this.thread.stop(),this};var AO=function(e,n,r){for(var i=r.eles.edges(),o=r.eles.nodes(),a=en(r.boundingBox?r.boundingBox:{x1:0,y1:0,w:e.width(),h:e.height()}),s={isCompound:e.hasCompoundNodes(),layoutNodes:[],idToIndex:{},nodeSize:o.size(),graphSet:[],indexToGraph:[],layoutEdges:[],edgeSize:i.size(),temperature:r.initialTemp,clientWidth:a.w,clientHeight:a.h,boundingBox:a},u=r.eles.components(),l={},c=0;c<u.length;c++)for(var d=u[c],f=0;f<d.length;f++){var h=d[f];l[h.id()]=c}for(var c=0;c<s.nodeSize;c++){var p=o[c],m=p.layoutDimensions(r),g={};g.isLocked=p.locked(),g.id=p.data("id"),g.parentId=p.data("parent"),g.cmptId=l[p.id()],g.children=[],g.positionX=p.position("x"),g.positionY=p.position("y"),g.offsetX=0,g.offsetY=0,g.height=m.w,g.width=m.h,g.maxX=g.positionX+g.width/2,g.minX=g.positionX-g.width/2,g.maxY=g.positionY+g.height/2,g.minY=g.positionY-g.height/2,g.padLeft=parseFloat(p.style("padding")),g.padRight=parseFloat(p.style("padding")),g.padTop=parseFloat(p.style("padding")),g.padBottom=parseFloat(p.style("padding")),g.nodeRepulsion=lt(r.nodeRepulsion)?r.nodeRepulsion(p):r.nodeRepulsion,s.layoutNodes.push(g),s.idToIndex[g.id]=c}for(var v=[],y=0,w=-1,b=[],c=0;c<s.nodeSize;c++){var p=s.layoutNodes[c],I=p.parentId;I!=null?s.layoutNodes[s.idToIndex[I]].children.push(p.id):(v[++w]=p.id,b.push(p.id))}for(s.graphSet.push(b);y<=w;){var E=v[y++],D=s.idToIndex[E],h=s.layoutNodes[D],S=h.children;if(S.length>0){s.graphSet.push(S);for(var c=0;c<S.length;c++)v[++w]=S[c]}}for(var c=0;c<s.graphSet.length;c++)for(var C=s.graphSet[c],f=0;f<C.length;f++){var A=s.idToIndex[C[f]];s.indexToGraph[A]=c}for(var c=0;c<s.edgeSize;c++){var M=i[c],N={};N.id=M.data("id"),N.sourceId=M.data("source"),N.targetId=M.data("target");var R=lt(r.idealEdgeLength)?r.idealEdgeLength(M):r.idealEdgeLength,T=lt(r.edgeElasticity)?r.edgeElasticity(M):r.edgeElasticity,O=s.idToIndex[N.sourceId],_=s.idToIndex[N.targetId],k=s.indexToGraph[O],P=s.indexToGraph[_];if(k!=P){for(var V=RO(N.sourceId,N.targetId,s),z=s.graphSet[V],B=0,g=s.layoutNodes[O];z.indexOf(g.id)===-1;)g=s.layoutNodes[s.idToIndex[g.parentId]],B++;for(g=s.layoutNodes[_];z.indexOf(g.id)===-1;)g=s.layoutNodes[s.idToIndex[g.parentId]],B++;R*=B*r.nestingFactor}N.idealLength=R,N.elasticity=T,s.layoutEdges.push(N)}return s},RO=function(e,n,r){var i=_O(e,n,0,r);return 2>i.count?0:i.graph},_O=function t(e,n,r,i){var o=i.graphSet[r];if(-1<o.indexOf(e)&&-1<o.indexOf(n))return{count:2,graph:r};for(var a=0,s=0;s<o.length;s++){var u=o[s],l=i.idToIndex[u],c=i.layoutNodes[l].children;if(c.length!==0){var d=i.indexToGraph[i.idToIndex[c[0]]],f=t(e,n,d,i);if(f.count!==0)if(f.count===1){if(a++,a===2)break}else return f}}return{count:a,graph:r}},kO,OO=function(e,n){for(var r=e.clientWidth,i=e.clientHeight,o=0;o<e.nodeSize;o++){var a=e.layoutNodes[o];a.children.length===0&&!a.isLocked&&(a.positionX=Math.random()*r,a.positionY=Math.random()*i)}},lD=function(e,n,r){var i=e.boundingBox,o={x1:1/0,x2:-1/0,y1:1/0,y2:-1/0};return n.boundingBox&&(r.forEach(function(a){var s=e.layoutNodes[e.idToIndex[a.data("id")]];o.x1=Math.min(o.x1,s.positionX),o.x2=Math.max(o.x2,s.positionX),o.y1=Math.min(o.y1,s.positionY),o.y2=Math.max(o.y2,s.positionY)}),o.w=o.x2-o.x1,o.h=o.y2-o.y1),function(a,s){var u=e.layoutNodes[e.idToIndex[a.data("id")]];if(n.boundingBox){var l=(u.positionX-o.x1)/o.w,c=(u.positionY-o.y1)/o.h;return{x:i.x1+l*i.w,y:i.y1+c*i.h}}else return{x:u.positionX,y:u.positionY}}},PO=function(e,n,r){var i=r.layout,o=r.eles.nodes(),a=lD(e,r,o);o.positions(a),e.ready!==!0&&(e.ready=!0,i.one("layoutready",r.ready),i.emit({type:"layoutready",layout:this}))},LO=function(e,n,r){FO(e,n),$O(e),jO(e,n),HO(e),zO(e)},FO=function(e,n){for(var r=0;r<e.graphSet.length;r++)for(var i=e.graphSet[r],o=i.length,a=0;a<o;a++)for(var s=e.layoutNodes[e.idToIndex[i[a]]],u=a+1;u<o;u++){var l=e.layoutNodes[e.idToIndex[i[u]]];BO(s,l,e,n)}},kw=function(e){return-e+2*e*Math.random()},BO=function(e,n,r,i){var o=e.cmptId,a=n.cmptId;if(!(o!==a&&!r.isCompound)){var s=n.positionX-e.positionX,u=n.positionY-e.positionY,l=1;s===0&&u===0&&(s=kw(l),u=kw(l));var c=VO(e,n,s,u);if(c>0)var d=i.nodeOverlap*c,f=Math.sqrt(s*s+u*u),h=d*s/f,p=d*u/f;else var m=Xl(e,s,u),g=Xl(n,-1*s,-1*u),v=g.x-m.x,y=g.y-m.y,w=v*v+y*y,f=Math.sqrt(w),d=(e.nodeRepulsion+n.nodeRepulsion)/w,h=d*v/f,p=d*y/f;e.isLocked||(e.offsetX-=h,e.offsetY-=p),n.isLocked||(n.offsetX+=h,n.offsetY+=p)}},VO=function(e,n,r,i){if(r>0)var o=e.maxX-n.minX;else var o=n.maxX-e.minX;if(i>0)var a=e.maxY-n.minY;else var a=n.maxY-e.minY;return o>=0&&a>=0?Math.sqrt(o*o+a*a):0},Xl=function(e,n,r){var i=e.positionX,o=e.positionY,a=e.height||1,s=e.width||1,u=r/n,l=a/s,c={};return n===0&&0<r||n===0&&0>r?(c.x=i,c.y=o+a/2,c):0<n&&-1*l<=u&&u<=l?(c.x=i+s/2,c.y=o+s*r/2/n,c):0>n&&-1*l<=u&&u<=l?(c.x=i-s/2,c.y=o-s*r/2/n,c):0<r&&(u<=-1*l||u>=l)?(c.x=i+a*n/2/r,c.y=o+a/2,c):(0>r&&(u<=-1*l||u>=l)&&(c.x=i-a*n/2/r,c.y=o-a/2),c)},$O=function(e,n){for(var r=0;r<e.edgeSize;r++){var i=e.layoutEdges[r],o=e.idToIndex[i.sourceId],a=e.layoutNodes[o],s=e.idToIndex[i.targetId],u=e.layoutNodes[s],l=u.positionX-a.positionX,c=u.positionY-a.positionY;if(!(l===0&&c===0)){var d=Xl(a,l,c),f=Xl(u,-1*l,-1*c),h=f.x-d.x,p=f.y-d.y,m=Math.sqrt(h*h+p*p),g=Math.pow(i.idealLength-m,2)/i.elasticity;if(m!==0)var v=g*h/m,y=g*p/m;else var v=0,y=0;a.isLocked||(a.offsetX+=v,a.offsetY+=y),u.isLocked||(u.offsetX-=v,u.offsetY-=y)}}},jO=function(e,n){if(n.gravity!==0)for(var r=1,i=0;i<e.graphSet.length;i++){var o=e.graphSet[i],a=o.length;if(i===0)var s=e.clientHeight/2,u=e.clientWidth/2;else var l=e.layoutNodes[e.idToIndex[o[0]]],c=e.layoutNodes[e.idToIndex[l.parentId]],s=c.positionX,u=c.positionY;for(var d=0;d<a;d++){var f=e.layoutNodes[e.idToIndex[o[d]]];if(!f.isLocked){var h=s-f.positionX,p=u-f.positionY,m=Math.sqrt(h*h+p*p);if(m>r){var g=n.gravity*h/m,v=n.gravity*p/m;f.offsetX+=g,f.offsetY+=v}}}}},HO=function(e,n){var r=[],i=0,o=-1;for(r.push.apply(r,e.graphSet[0]),o+=e.graphSet[0].length;i<=o;){var a=r[i++],s=e.idToIndex[a],u=e.layoutNodes[s],l=u.children;if(0<l.length&&!u.isLocked){for(var c=u.offsetX,d=u.offsetY,f=0;f<l.length;f++){var h=e.layoutNodes[e.idToIndex[l[f]]];h.offsetX+=c,h.offsetY+=d,r[++o]=l[f]}u.offsetX=0,u.offsetY=0}}},zO=function(e,n){for(var r=0;r<e.nodeSize;r++){var i=e.layoutNodes[r];0<i.children.length&&(i.maxX=void 0,i.minX=void 0,i.maxY=void 0,i.minY=void 0)}for(var r=0;r<e.nodeSize;r++){var i=e.layoutNodes[r];if(!(0<i.children.length||i.isLocked)){var o=UO(i.offsetX,i.offsetY,e.temperature);i.positionX+=o.x,i.positionY+=o.y,i.offsetX=0,i.offsetY=0,i.minX=i.positionX-i.width,i.maxX=i.positionX+i.width,i.minY=i.positionY-i.height,i.maxY=i.positionY+i.height,qO(i,e)}}for(var r=0;r<e.nodeSize;r++){var i=e.layoutNodes[r];0<i.children.length&&!i.isLocked&&(i.positionX=(i.maxX+i.minX)/2,i.positionY=(i.maxY+i.minY)/2,i.width=i.maxX-i.minX,i.height=i.maxY-i.minY)}},UO=function(e,n,r){var i=Math.sqrt(e*e+n*n);if(i>r)var o={x:r*e/i,y:r*n/i};else var o={x:e,y:n};return o},qO=function t(e,n){var r=e.parentId;if(r!=null){var i=n.layoutNodes[n.idToIndex[r]],o=!1;if((i.maxX==null||e.maxX+i.padRight>i.maxX)&&(i.maxX=e.maxX+i.padRight,o=!0),(i.minX==null||e.minX-i.padLeft<i.minX)&&(i.minX=e.minX-i.padLeft,o=!0),(i.maxY==null||e.maxY+i.padBottom>i.maxY)&&(i.maxY=e.maxY+i.padBottom,o=!0),(i.minY==null||e.minY-i.padTop<i.minY)&&(i.minY=e.minY-i.padTop,o=!0),o)return t(i,n)}},Ow=function(e,n){for(var r=e.layoutNodes,i=[],o=0;o<r.length;o++){var a=r[o],s=a.cmptId,u=i[s]=i[s]||[];u.push(a)}for(var l=0,o=0;o<i.length;o++){var c=i[o];if(c){c.x1=1/0,c.x2=-1/0,c.y1=1/0,c.y2=-1/0;for(var d=0;d<c.length;d++){var f=c[d];c.x1=Math.min(c.x1,f.positionX-f.width/2),c.x2=Math.max(c.x2,f.positionX+f.width/2),c.y1=Math.min(c.y1,f.positionY-f.height/2),c.y2=Math.max(c.y2,f.positionY+f.height/2)}c.w=c.x2-c.x1,c.h=c.y2-c.y1,l+=c.w*c.h}}i.sort(function(y,w){return w.w*w.h-y.w*y.h});for(var h=0,p=0,m=0,g=0,v=Math.sqrt(l)*e.clientWidth/e.clientHeight,o=0;o<i.length;o++){var c=i[o];if(c){for(var d=0;d<c.length;d++){var f=c[d];f.isLocked||(f.positionX+=h-c.x1,f.positionY+=p-c.y1)}h+=c.w+n.componentSpacing,m+=c.w+n.componentSpacing,g=Math.max(g,c.h),m>v&&(p+=g+n.componentSpacing,h=0,m=0,g=0)}}},GO={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,avoidOverlapPadding:10,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,condense:!1,rows:void 0,cols:void 0,position:function(e){},sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,n){return!0},ready:void 0,stop:void 0,transform:function(e,n){return n}};function cD(t){this.options=ye({},GO,t)}cD.prototype.run=function(){var t=this.options,e=t,n=t.cy,r=e.eles,i=r.nodes().not(":parent");e.sort&&(i=i.sort(e.sort));var o=en(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:n.width(),h:n.height()});if(o.h===0||o.w===0)r.nodes().layoutPositions(this,e,function(W){return{x:o.x1,y:o.y1}});else{var a=i.size(),s=Math.sqrt(a*o.h/o.w),u=Math.round(s),l=Math.round(o.w/o.h*s),c=function(K){if(K==null)return Math.min(u,l);var Q=Math.min(u,l);Q==u?u=K:l=K},d=function(K){if(K==null)return Math.max(u,l);var Q=Math.max(u,l);Q==u?u=K:l=K},f=e.rows,h=e.cols!=null?e.cols:e.columns;if(f!=null&&h!=null)u=f,l=h;else if(f!=null&&h==null)u=f,l=Math.ceil(a/u);else if(f==null&&h!=null)l=h,u=Math.ceil(a/l);else if(l*u>a){var p=c(),m=d();(p-1)*m>=a?c(p-1):(m-1)*p>=a&&d(m-1)}else for(;l*u<a;){var g=c(),v=d();(v+1)*g>=a?d(v+1):c(g+1)}var y=o.w/l,w=o.h/u;if(e.condense&&(y=0,w=0),e.avoidOverlap)for(var b=0;b<i.length;b++){var I=i[b],E=I._private.position;(E.x==null||E.y==null)&&(E.x=0,E.y=0);var D=I.layoutDimensions(e),S=e.avoidOverlapPadding,C=D.w+S,A=D.h+S;y=Math.max(y,C),w=Math.max(w,A)}for(var M={},N=function(K,Q){return!!M["c-"+K+"-"+Q]},R=function(K,Q){M["c-"+K+"-"+Q]=!0},T=0,O=0,_=function(){O++,O>=l&&(O=0,T++)},k={},P=0;P<i.length;P++){var V=i[P],z=e.position(V);if(z&&(z.row!==void 0||z.col!==void 0)){var B={row:z.row,col:z.col};if(B.col===void 0)for(B.col=0;N(B.row,B.col);)B.col++;else if(B.row===void 0)for(B.row=0;N(B.row,B.col);)B.row++;k[V.id()]=B,R(B.row,B.col)}}var $=function(K,Q){var X,J;if(K.locked()||K.isParent())return!1;var q=k[K.id()];if(q)X=q.col*y+y/2+o.x1,J=q.row*w+w/2+o.y1;else{for(;N(T,O);)_();X=O*y+y/2+o.x1,J=T*w+w/2+o.y1,R(T,O),_()}return{x:X,y:J}};i.layoutPositions(this,e,$)}return this};var WO={ready:function(){},stop:function(){}};function Rp(t){this.options=ye({},WO,t)}Rp.prototype.run=function(){var t=this.options,e=t.eles,n=this;return t.cy,n.emit("layoutstart"),e.nodes().positions(function(){return{x:0,y:0}}),n.one("layoutready",t.ready),n.emit("layoutready"),n.one("layoutstop",t.stop),n.emit("layoutstop"),this};Rp.prototype.stop=function(){return this};var ZO={positions:void 0,zoom:void 0,pan:void 0,fit:!0,padding:30,spacingFactor:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,n){return!0},ready:void 0,stop:void 0,transform:function(e,n){return n}};function dD(t){this.options=ye({},ZO,t)}dD.prototype.run=function(){var t=this.options,e=t.eles,n=e.nodes(),r=lt(t.positions);function i(o){if(t.positions==null)return XN(o.position());if(r)return t.positions(o);var a=t.positions[o._private.data.id];return a??null}return n.layoutPositions(this,t,function(o,a){var s=i(o);return o.locked()||s==null?!1:s}),this};var YO={fit:!0,padding:30,boundingBox:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,n){return!0},ready:void 0,stop:void 0,transform:function(e,n){return n}};function fD(t){this.options=ye({},YO,t)}fD.prototype.run=function(){var t=this.options,e=t.cy,n=t.eles,r=en(t.boundingBox?t.boundingBox:{x1:0,y1:0,w:e.width(),h:e.height()}),i=function(a,s){return{x:r.x1+Math.round(Math.random()*r.w),y:r.y1+Math.round(Math.random()*r.h)}};return n.nodes().layoutPositions(this,t,i),this};var KO=[{name:"breadthfirst",impl:aD},{name:"circle",impl:sD},{name:"concentric",impl:uD},{name:"cose",impl:vc},{name:"grid",impl:cD},{name:"null",impl:Rp},{name:"preset",impl:dD},{name:"random",impl:fD}];function hD(t){this.options=t,this.notifications=0}var Pw=function(){},Lw=function(){throw new Error("A headless instance can not render images")};hD.prototype={recalculateRenderedStyle:Pw,notify:function(){this.notifications++},init:Pw,isHeadless:function(){return!0},png:Lw,jpg:Lw};var _p={};_p.arrowShapeWidth=.3;_p.registerArrowShapes=function(){var t=this.arrowShapes={},e=this,n=function(l,c,d,f,h,p,m){var g=h.x-d/2-m,v=h.x+d/2+m,y=h.y-d/2-m,w=h.y+d/2+m,b=g<=l&&l<=v&&y<=c&&c<=w;return b},r=function(l,c,d,f,h){var p=l*Math.cos(f)-c*Math.sin(f),m=l*Math.sin(f)+c*Math.cos(f),g=p*d,v=m*d,y=g+h.x,w=v+h.y;return{x:y,y:w}},i=function(l,c,d,f){for(var h=[],p=0;p<l.length;p+=2){var m=l[p],g=l[p+1];h.push(r(m,g,c,d,f))}return h},o=function(l){for(var c=[],d=0;d<l.length;d++){var f=l[d];c.push(f.x,f.y)}return c},a=function(l){return l.pstyle("width").pfValue*l.pstyle("arrow-scale").pfValue*2},s=function(l,c){pe(c)&&(c=t[c]),t[l]=ye({name:l,points:[-.15,-.3,.15,-.3,.15,.3,-.15,.3],collide:function(f,h,p,m,g,v){var y=o(i(this.points,p+2*v,m,g)),w=Jt(f,h,y);return w},roughCollide:n,draw:function(f,h,p,m){var g=i(this.points,h,p,m);e.arrowShapeImpl("polygon")(f,g)},spacing:function(f){return 0},gap:a},c)};s("none",{collide:Gl,roughCollide:Gl,draw:mp,spacing:G0,gap:G0}),s("triangle",{points:[-.15,-.3,0,0,.15,-.3]}),s("arrow","triangle"),s("triangle-backcurve",{points:t.triangle.points,controlPoint:[0,-.15],roughCollide:n,draw:function(l,c,d,f,h){var p=i(this.points,c,d,f),m=this.controlPoint,g=r(m[0],m[1],c,d,f);e.arrowShapeImpl(this.name)(l,p,g)},gap:function(l){return a(l)*.8}}),s("triangle-tee",{points:[0,0,.15,-.3,-.15,-.3,0,0],pointsTee:[-.15,-.4,-.15,-.5,.15,-.5,.15,-.4],collide:function(l,c,d,f,h,p,m){var g=o(i(this.points,d+2*m,f,h)),v=o(i(this.pointsTee,d+2*m,f,h)),y=Jt(l,c,g)||Jt(l,c,v);return y},draw:function(l,c,d,f,h){var p=i(this.points,c,d,f),m=i(this.pointsTee,c,d,f);e.arrowShapeImpl(this.name)(l,p,m)}}),s("circle-triangle",{radius:.15,pointsTr:[0,-.15,.15,-.45,-.15,-.45,0,-.15],collide:function(l,c,d,f,h,p,m){var g=h,v=Math.pow(g.x-l,2)+Math.pow(g.y-c,2)<=Math.pow((d+2*m)*this.radius,2),y=o(i(this.points,d+2*m,f,h));return Jt(l,c,y)||v},draw:function(l,c,d,f,h){var p=i(this.pointsTr,c,d,f);e.arrowShapeImpl(this.name)(l,p,f.x,f.y,this.radius*c)},spacing:function(l){return e.getArrowWidth(l.pstyle("width").pfValue,l.pstyle("arrow-scale").value)*this.radius}}),s("triangle-cross",{points:[0,0,.15,-.3,-.15,-.3,0,0],baseCrossLinePts:[-.15,-.4,-.15,-.4,.15,-.4,.15,-.4],crossLinePts:function(l,c){var d=this.baseCrossLinePts.slice(),f=c/l,h=3,p=5;return d[h]=d[h]-f,d[p]=d[p]-f,d},collide:function(l,c,d,f,h,p,m){var g=o(i(this.points,d+2*m,f,h)),v=o(i(this.crossLinePts(d,p),d+2*m,f,h)),y=Jt(l,c,g)||Jt(l,c,v);return y},draw:function(l,c,d,f,h){var p=i(this.points,c,d,f),m=i(this.crossLinePts(c,h),c,d,f);e.arrowShapeImpl(this.name)(l,p,m)}}),s("vee",{points:[-.15,-.3,0,0,.15,-.3,0,-.15],gap:function(l){return a(l)*.525}}),s("circle",{radius:.15,collide:function(l,c,d,f,h,p,m){var g=h,v=Math.pow(g.x-l,2)+Math.pow(g.y-c,2)<=Math.pow((d+2*m)*this.radius,2);return v},draw:function(l,c,d,f,h){e.arrowShapeImpl(this.name)(l,f.x,f.y,this.radius*c)},spacing:function(l){return e.getArrowWidth(l.pstyle("width").pfValue,l.pstyle("arrow-scale").value)*this.radius}}),s("tee",{points:[-.15,0,-.15,-.1,.15,-.1,.15,0],spacing:function(l){return 1},gap:function(l){return 1}}),s("square",{points:[-.15,0,.15,0,.15,-.3,-.15,-.3]}),s("diamond",{points:[-.15,-.15,0,-.3,.15,-.15,0,0],gap:function(l){return l.pstyle("width").pfValue*l.pstyle("arrow-scale").value}}),s("chevron",{points:[0,0,-.15,-.15,-.1,-.2,0,-.1,.1,-.2,.15,-.15],gap:function(l){return .95*l.pstyle("width").pfValue*l.pstyle("arrow-scale").value}})};var Ai={};Ai.projectIntoViewport=function(t,e){var n=this.cy,r=this.findContainerClientCoords(),i=r[0],o=r[1],a=r[4],s=n.pan(),u=n.zoom(),l=((t-i)/a-s.x)/u,c=((e-o)/a-s.y)/u;return[l,c]};Ai.findContainerClientCoords=function(){if(this.containerBB)return this.containerBB;var t=this.container,e=t.getBoundingClientRect(),n=this.cy.window().getComputedStyle(t),r=function(v){return parseFloat(n.getPropertyValue(v))},i={left:r("padding-left"),right:r("padding-right"),top:r("padding-top"),bottom:r("padding-bottom")},o={left:r("border-left-width"),right:r("border-right-width"),top:r("border-top-width"),bottom:r("border-bottom-width")},a=t.clientWidth,s=t.clientHeight,u=i.left+i.right,l=i.top+i.bottom,c=o.left+o.right,d=e.width/(a+c),f=a-u,h=s-l,p=e.left+i.left+o.left,m=e.top+i.top+o.top;return this.containerBB=[p,m,f,h,d]};Ai.invalidateContainerClientCoordsCache=function(){this.containerBB=null};Ai.findNearestElement=function(t,e,n,r){return this.findNearestElements(t,e,n,r)[0]};Ai.findNearestElements=function(t,e,n,r){var i=this,o=this,a=o.getCachedZSortedEles(),s=[],u=o.cy.zoom(),l=o.cy.hasCompoundNodes(),c=(r?24:8)/u,d=(r?8:2)/u,f=(r?8:2)/u,h=1/0,p,m;n&&(a=a.interactive);function g(D,S){if(D.isNode()){if(m)return;m=D,s.push(D)}if(D.isEdge()&&(S==null||S<h))if(p){if(p.pstyle("z-compound-depth").value===D.pstyle("z-compound-depth").value&&p.pstyle("z-compound-depth").value===D.pstyle("z-compound-depth").value){for(var C=0;C<s.length;C++)if(s[C].isEdge()){s[C]=D,p=D,h=S??h;break}}}else s.push(D),p=D,h=S??h}function v(D){var S=D.outerWidth()+2*d,C=D.outerHeight()+2*d,A=S/2,M=C/2,N=D.position(),R=D.pstyle("corner-radius").value==="auto"?"auto":D.pstyle("corner-radius").pfValue,T=D._private.rscratch;if(N.x-A<=t&&t<=N.x+A&&N.y-M<=e&&e<=N.y+M){var O=o.nodeShapes[i.getNodeShape(D)];if(O.checkPoint(t,e,0,S,C,N.x,N.y,R,T))return g(D,0),!0}}function y(D){var S=D._private,C=S.rscratch,A=D.pstyle("width").pfValue,M=D.pstyle("arrow-scale").value,N=A/2+c,R=N*N,T=N*2,P=S.source,V=S.target,O;if(C.edgeType==="segments"||C.edgeType==="straight"||C.edgeType==="haystack"){for(var _=C.allpts,k=0;k+3<_.length;k+=2)if(dA(t,e,_[k],_[k+1],_[k+2],_[k+3],T)&&R>(O=vA(t,e,_[k],_[k+1],_[k+2],_[k+3])))return g(D,O),!0}else if(C.edgeType==="bezier"||C.edgeType==="multibezier"||C.edgeType==="self"||C.edgeType==="compound"){for(var _=C.allpts,k=0;k+5<C.allpts.length;k+=4)if(fA(t,e,_[k],_[k+1],_[k+2],_[k+3],_[k+4],_[k+5],T)&&R>(O=gA(t,e,_[k],_[k+1],_[k+2],_[k+3],_[k+4],_[k+5])))return g(D,O),!0}for(var P=P||S.source,V=V||S.target,z=i.getArrowWidth(A,M),B=[{name:"source",x:C.arrowStartX,y:C.arrowStartY,angle:C.srcArrowAngle},{name:"target",x:C.arrowEndX,y:C.arrowEndY,angle:C.tgtArrowAngle},{name:"mid-source",x:C.midX,y:C.midY,angle:C.midsrcArrowAngle},{name:"mid-target",x:C.midX,y:C.midY,angle:C.midtgtArrowAngle}],k=0;k<B.length;k++){var $=B[k],W=o.arrowShapes[D.pstyle($.name+"-arrow-shape").value],K=D.pstyle("width").pfValue;if(W.roughCollide(t,e,z,$.angle,{x:$.x,y:$.y},K,c)&&W.collide(t,e,z,$.angle,{x:$.x,y:$.y},K,c))return g(D),!0}l&&s.length>0&&(v(P),v(V))}function w(D,S,C){return $n(D,S,C)}function b(D,S){var C=D._private,A=f,M;S?M=S+"-":M="",D.boundingBox();var N=C.labelBounds[S||"main"],R=D.pstyle(M+"label").value,T=D.pstyle("text-events").strValue==="yes";if(!(!T||!R)){var O=w(C.rscratch,"labelX",S),_=w(C.rscratch,"labelY",S),k=w(C.rscratch,"labelAngle",S),P=D.pstyle(M+"text-margin-x").pfValue,V=D.pstyle(M+"text-margin-y").pfValue,z=N.x1-A-P,B=N.x2+A-P,$=N.y1-A-V,W=N.y2+A-V;if(k){var K=Math.cos(k),Q=Math.sin(k),X=function(ve,ne){return ve=ve-O,ne=ne-_,{x:ve*K-ne*Q+O,y:ve*Q+ne*K+_}},J=X(z,$),q=X(z,W),L=X(B,$),U=X(B,W),Z=[J.x+P,J.y+V,L.x+P,L.y+V,U.x+P,U.y+V,q.x+P,q.y+V];if(Jt(t,e,Z))return g(D),!0}else if(Bo(N,t,e))return g(D),!0}}for(var I=a.length-1;I>=0;I--){var E=a[I];E.isNode()?v(E)||b(E):y(E)||b(E)||b(E,"source")||b(E,"target")}return s};Ai.getAllInBox=function(t,e,n,r){var i=this.getCachedZSortedEles().interactive,o=[],a=Math.min(t,n),s=Math.max(t,n),u=Math.min(e,r),l=Math.max(e,r);t=a,n=s,e=u,r=l;for(var c=en({x1:t,y1:e,x2:n,y2:r}),d=0;d<i.length;d++){var f=i[d];if(f.isNode()){var h=f,p=h.boundingBox({includeNodes:!0,includeEdges:!1,includeLabels:!1});bp(c,p)&&!Eb(p,c)&&o.push(h)}else{var m=f,g=m._private,v=g.rscratch;if(v.startX!=null&&v.startY!=null&&!Bo(c,v.startX,v.startY)||v.endX!=null&&v.endY!=null&&!Bo(c,v.endX,v.endY))continue;if(v.edgeType==="bezier"||v.edgeType==="multibezier"||v.edgeType==="self"||v.edgeType==="compound"||v.edgeType==="segments"||v.edgeType==="haystack"){for(var y=g.rstyle.bezierPts||g.rstyle.linePts||g.rstyle.haystackPts,w=!0,b=0;b<y.length;b++)if(!cA(c,y[b])){w=!1;break}w&&o.push(m)}else(v.edgeType==="haystack"||v.edgeType==="straight")&&o.push(m)}}return o};var Jl={};Jl.calculateArrowAngles=function(t){var e=t._private.rscratch,n=e.edgeType==="haystack",r=e.edgeType==="bezier",i=e.edgeType==="multibezier",o=e.edgeType==="segments",a=e.edgeType==="compound",s=e.edgeType==="self",u,l,c,d,f,h,v,y;if(n?(c=e.haystackPts[0],d=e.haystackPts[1],f=e.haystackPts[2],h=e.haystackPts[3]):(c=e.arrowStartX,d=e.arrowStartY,f=e.arrowEndX,h=e.arrowEndY),v=e.midX,y=e.midY,o)u=c-e.segpts[0],l=d-e.segpts[1];else if(i||a||s||r){var p=e.allpts,m=Tt(p[0],p[2],p[4],.1),g=Tt(p[1],p[3],p[5],.1);u=c-m,l=d-g}else u=c-v,l=d-y;e.srcArrowAngle=Il(u,l);var v=e.midX,y=e.midY;if(n&&(v=(c+f)/2,y=(d+h)/2),u=f-c,l=h-d,o){var p=e.allpts;if(p.length/2%2===0){var w=p.length/2,b=w-2;u=p[w]-p[b],l=p[w+1]-p[b+1]}else if(e.isRound)u=e.midVector[1],l=-e.midVector[0];else{var w=p.length/2-1,b=w-2;u=p[w]-p[b],l=p[w+1]-p[b+1]}}else if(i||a||s){var p=e.allpts,I=e.ctrlpts,E,D,S,C;if(I.length/2%2===0){var A=p.length/2-1,M=A+2,N=M+2;E=Tt(p[A],p[M],p[N],0),D=Tt(p[A+1],p[M+1],p[N+1],0),S=Tt(p[A],p[M],p[N],1e-4),C=Tt(p[A+1],p[M+1],p[N+1],1e-4)}else{var M=p.length/2-1,A=M-2,N=M+2;E=Tt(p[A],p[M],p[N],.4999),D=Tt(p[A+1],p[M+1],p[N+1],.4999),S=Tt(p[A],p[M],p[N],.5),C=Tt(p[A+1],p[M+1],p[N+1],.5)}u=S-E,l=C-D}if(e.midtgtArrowAngle=Il(u,l),e.midDispX=u,e.midDispY=l,u*=-1,l*=-1,o){var p=e.allpts;if(p.length/2%2!==0){if(!e.isRound){var w=p.length/2-1,R=w+2;u=-(p[R]-p[w]),l=-(p[R+1]-p[w+1])}}}if(e.midsrcArrowAngle=Il(u,l),o)u=f-e.segpts[e.segpts.length-2],l=h-e.segpts[e.segpts.length-1];else if(i||a||s||r){var p=e.allpts,T=p.length,m=Tt(p[T-6],p[T-4],p[T-2],.9),g=Tt(p[T-5],p[T-3],p[T-1],.9);u=f-m,l=h-g}else u=f-v,l=h-y;e.tgtArrowAngle=Il(u,l)};Jl.getArrowWidth=Jl.getArrowHeight=function(t,e){var n=this.arrowWidthCache=this.arrowWidthCache||{},r=n[t+", "+e];return r||(r=Math.max(Math.pow(t*13.37,.9),29)*e,n[t+", "+e]=r,r)};var ip,op,Xn={},En={},Fw,Bw,Di,Hl,gr,vi,bi,Qn,No,kl,pD,gD,ap,sp,Vw,$w=function(e,n,r){r.x=n.x-e.x,r.y=n.y-e.y,r.len=Math.sqrt(r.x*r.x+r.y*r.y),r.nx=r.x/r.len,r.ny=r.y/r.len,r.ang=Math.atan2(r.ny,r.nx)},QO=function(e,n){n.x=e.x*-1,n.y=e.y*-1,n.nx=e.nx*-1,n.ny=e.ny*-1,n.ang=e.ang>0?-(Math.PI-e.ang):Math.PI+e.ang},XO=function(e,n,r,i,o){if(e!==Vw?$w(n,e,Xn):QO(En,Xn),$w(n,r,En),Fw=Xn.nx*En.ny-Xn.ny*En.nx,Bw=Xn.nx*En.nx-Xn.ny*-En.ny,gr=Math.asin(Math.max(-1,Math.min(1,Fw))),Math.abs(gr)<1e-6){ip=n.x,op=n.y,bi=No=0;return}Di=1,Hl=!1,Bw<0?gr<0?gr=Math.PI+gr:(gr=Math.PI-gr,Di=-1,Hl=!0):gr>0&&(Di=-1,Hl=!0),n.radius!==void 0?No=n.radius:No=i,vi=gr/2,kl=Math.min(Xn.len/2,En.len/2),o?(Qn=Math.abs(Math.cos(vi)*No/Math.sin(vi)),Qn>kl?(Qn=kl,bi=Math.abs(Qn*Math.sin(vi)/Math.cos(vi))):bi=No):(Qn=Math.min(kl,No),bi=Math.abs(Qn*Math.sin(vi)/Math.cos(vi))),ap=n.x+En.nx*Qn,sp=n.y+En.ny*Qn,ip=ap-En.ny*bi*Di,op=sp+En.nx*bi*Di,pD=n.x+Xn.nx*Qn,gD=n.y+Xn.ny*Qn,Vw=n};function vD(t,e){e.radius===0?t.lineTo(e.cx,e.cy):t.arc(e.cx,e.cy,e.radius,e.startAngle,e.endAngle,e.counterClockwise)}function kp(t,e,n,r){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0;return r===0||e.radius===0?{cx:e.x,cy:e.y,radius:0,startX:e.x,startY:e.y,stopX:e.x,stopY:e.y,startAngle:void 0,endAngle:void 0,counterClockwise:void 0}:(XO(t,e,n,r,i),{cx:ip,cy:op,radius:bi,startX:pD,startY:gD,stopX:ap,stopY:sp,startAngle:Xn.ang+Math.PI/2*Di,endAngle:En.ang-Math.PI/2*Di,counterClockwise:Hl})}var Wt={};Wt.findMidptPtsEtc=function(t,e){var n=e.posPts,r=e.intersectionPts,i=e.vectorNormInverse,o,a=t.pstyle("source-endpoint"),s=t.pstyle("target-endpoint"),u=a.units!=null&&s.units!=null,l=function(I,E,D,S){var C=S-E,A=D-I,M=Math.sqrt(A*A+C*C);return{x:-C/M,y:A/M}},c=t.pstyle("edge-distances").value;switch(c){case"node-position":o=n;break;case"intersection":o=r;break;case"endpoints":{if(u){var d=this.manualEndptToPx(t.source()[0],a),f=Bn(d,2),h=f[0],p=f[1],m=this.manualEndptToPx(t.target()[0],s),g=Bn(m,2),v=g[0],y=g[1],w={x1:h,y1:p,x2:v,y2:y};i=l(h,p,v,y),o=w}else Ye("Edge ".concat(t.id()," has edge-distances:endpoints specified without manual endpoints specified via source-endpoint and target-endpoint.  Falling back on edge-distances:intersection (default).")),o=r;break}}return{midptPts:o,vectorNormInverse:i}};Wt.findHaystackPoints=function(t){for(var e=0;e<t.length;e++){var n=t[e],r=n._private,i=r.rscratch;if(!i.haystack){var o=Math.random()*2*Math.PI;i.source={x:Math.cos(o),y:Math.sin(o)},o=Math.random()*2*Math.PI,i.target={x:Math.cos(o),y:Math.sin(o)}}var a=r.source,s=r.target,u=a.position(),l=s.position(),c=a.width(),d=s.width(),f=a.height(),h=s.height(),p=n.pstyle("haystack-radius").value,m=p/2;i.haystackPts=i.allpts=[i.source.x*c*m+u.x,i.source.y*f*m+u.y,i.target.x*d*m+l.x,i.target.y*h*m+l.y],i.midX=(i.allpts[0]+i.allpts[2])/2,i.midY=(i.allpts[1]+i.allpts[3])/2,i.edgeType="haystack",i.haystack=!0,this.storeEdgeProjections(n),this.calculateArrowAngles(n),this.recalculateEdgeLabelProjections(n),this.calculateLabelAngles(n)}};Wt.findSegmentsPoints=function(t,e){var n=t._private.rscratch,r=t.pstyle("segment-weights"),i=t.pstyle("segment-distances"),o=t.pstyle("segment-radii"),a=t.pstyle("radius-type"),s=Math.min(r.pfValue.length,i.pfValue.length),u=o.pfValue[o.pfValue.length-1],l=a.pfValue[a.pfValue.length-1];n.edgeType="segments",n.segpts=[],n.radii=[],n.isArcRadius=[];for(var c=0;c<s;c++){var d=r.pfValue[c],f=i.pfValue[c],h=1-d,p=d,m=this.findMidptPtsEtc(t,e),g=m.midptPts,v=m.vectorNormInverse,y={x:g.x1*h+g.x2*p,y:g.y1*h+g.y2*p};n.segpts.push(y.x+v.x*f,y.y+v.y*f),n.radii.push(o.pfValue[c]!==void 0?o.pfValue[c]:u),n.isArcRadius.push((a.pfValue[c]!==void 0?a.pfValue[c]:l)==="arc-radius")}};Wt.findLoopPoints=function(t,e,n,r){var i=t._private.rscratch,o=e.dirCounts,a=e.srcPos,s=t.pstyle("control-point-distances"),u=s?s.pfValue[0]:void 0,l=t.pstyle("loop-direction").pfValue,c=t.pstyle("loop-sweep").pfValue,d=t.pstyle("control-point-step-size").pfValue;i.edgeType="self";var f=n,h=d;r&&(f=0,h=u);var p=l-Math.PI/2,m=p-c/2,g=p+c/2,v=l+"_"+c;f=o[v]===void 0?o[v]=0:++o[v],i.ctrlpts=[a.x+Math.cos(m)*1.4*h*(f/3+1),a.y+Math.sin(m)*1.4*h*(f/3+1),a.x+Math.cos(g)*1.4*h*(f/3+1),a.y+Math.sin(g)*1.4*h*(f/3+1)]};Wt.findCompoundLoopPoints=function(t,e,n,r){var i=t._private.rscratch;i.edgeType="compound";var o=e.srcPos,a=e.tgtPos,s=e.srcW,u=e.srcH,l=e.tgtW,c=e.tgtH,d=t.pstyle("control-point-step-size").pfValue,f=t.pstyle("control-point-distances"),h=f?f.pfValue[0]:void 0,p=n,m=d;r&&(p=0,m=h);var g=50,v={x:o.x-s/2,y:o.y-u/2},y={x:a.x-l/2,y:a.y-c/2},w={x:Math.min(v.x,y.x),y:Math.min(v.y,y.y)},b=.5,I=Math.max(b,Math.log(s*.01)),E=Math.max(b,Math.log(l*.01));i.ctrlpts=[w.x,w.y-(1+Math.pow(g,1.12)/100)*m*(p/3+1)*I,w.x-(1+Math.pow(g,1.12)/100)*m*(p/3+1)*E,w.y]};Wt.findStraightEdgePoints=function(t){t._private.rscratch.edgeType="straight"};Wt.findBezierPoints=function(t,e,n,r,i){var o=t._private.rscratch,a=t.pstyle("control-point-step-size").pfValue,s=t.pstyle("control-point-distances"),u=t.pstyle("control-point-weights"),l=s&&u?Math.min(s.value.length,u.value.length):1,c=s?s.pfValue[0]:void 0,d=u.value[0],f=r;o.edgeType=f?"multibezier":"bezier",o.ctrlpts=[];for(var h=0;h<l;h++){var p=(.5-e.eles.length/2+n)*a*(i?-1:1),m=void 0,g=bb(p);f&&(c=s?s.pfValue[h]:a,d=u.value[h]),r?m=c:m=c!==void 0?g*c:void 0;var v=m!==void 0?m:p,y=1-d,w=d,b=this.findMidptPtsEtc(t,e),I=b.midptPts,E=b.vectorNormInverse,D={x:I.x1*y+I.x2*w,y:I.y1*y+I.y2*w};o.ctrlpts.push(D.x+E.x*v,D.y+E.y*v)}};Wt.findTaxiPoints=function(t,e){var n=t._private.rscratch;n.edgeType="segments";var r="vertical",i="horizontal",o="leftward",a="rightward",s="downward",u="upward",l="auto",c=e.posPts,d=e.srcW,f=e.srcH,h=e.tgtW,p=e.tgtH,m=t.pstyle("edge-distances").value,g=m!=="node-position",v=t.pstyle("taxi-direction").value,y=v,w=t.pstyle("taxi-turn"),b=w.units==="%",I=w.pfValue,E=I<0,D=t.pstyle("taxi-turn-min-distance").pfValue,S=g?(d+h)/2:0,C=g?(f+p)/2:0,A=c.x2-c.x1,M=c.y2-c.y1,N=function(Y,ae){return Y>0?Math.max(Y-ae,0):Math.min(Y+ae,0)},R=N(A,S),T=N(M,C),O=!1;y===l?v=Math.abs(R)>Math.abs(T)?i:r:y===u||y===s?(v=r,O=!0):(y===o||y===a)&&(v=i,O=!0);var _=v===r,k=_?T:R,P=_?M:A,V=bb(P),z=!1;!(O&&(b||E))&&(y===s&&P<0||y===u&&P>0||y===o&&P>0||y===a&&P<0)&&(V*=-1,k=V*Math.abs(k),z=!0);var B;if(b){var $=I<0?1+I:I;B=$*k}else{var W=I<0?k:0;B=W+I*V}var K=function(Y){return Math.abs(Y)<D||Math.abs(Y)>=Math.abs(k)},Q=K(B),X=K(Math.abs(k)-Math.abs(B)),J=Q||X;if(J&&!z)if(_){var q=Math.abs(P)<=f/2,L=Math.abs(A)<=h/2;if(q){var U=(c.x1+c.x2)/2,Z=c.y1,re=c.y2;n.segpts=[U,Z,U,re]}else if(L){var ve=(c.y1+c.y2)/2,ne=c.x1,te=c.x2;n.segpts=[ne,ve,te,ve]}else n.segpts=[c.x1,c.y2]}else{var de=Math.abs(P)<=d/2,ce=Math.abs(M)<=p/2;if(de){var se=(c.y1+c.y2)/2,ge=c.x1,Ke=c.x2;n.segpts=[ge,se,Ke,se]}else if(ce){var $e=(c.x1+c.x2)/2,Re=c.y1,Qe=c.y2;n.segpts=[$e,Re,$e,Qe]}else n.segpts=[c.x2,c.y1]}else if(_){var ke=c.y1+B+(g?f/2*V:0),qe=c.x1,ee=c.x2;n.segpts=[qe,ke,ee,ke]}else{var x=c.x1+B+(g?d/2*V:0),j=c.y1,G=c.y2;n.segpts=[x,j,x,G]}if(n.isRound){var F=t.pstyle("taxi-radius").value,H=t.pstyle("radius-type").value[0]==="arc-radius";n.radii=new Array(n.segpts.length/2).fill(F),n.isArcRadius=new Array(n.segpts.length/2).fill(H)}};Wt.tryToCorrectInvalidPoints=function(t,e){var n=t._private.rscratch;if(n.edgeType==="bezier"){var r=e.srcPos,i=e.tgtPos,o=e.srcW,a=e.srcH,s=e.tgtW,u=e.tgtH,l=e.srcShape,c=e.tgtShape,d=e.srcCornerRadius,f=e.tgtCornerRadius,h=e.srcRs,p=e.tgtRs,m=!ie(n.startX)||!ie(n.startY),g=!ie(n.arrowStartX)||!ie(n.arrowStartY),v=!ie(n.endX)||!ie(n.endY),y=!ie(n.arrowEndX)||!ie(n.arrowEndY),w=3,b=this.getArrowWidth(t.pstyle("width").pfValue,t.pstyle("arrow-scale").value)*this.arrowShapeWidth,I=w*b,E=Si({x:n.ctrlpts[0],y:n.ctrlpts[1]},{x:n.startX,y:n.startY}),D=E<I,S=Si({x:n.ctrlpts[0],y:n.ctrlpts[1]},{x:n.endX,y:n.endY}),C=S<I,A=!1;if(m||g||D){A=!0;var M={x:n.ctrlpts[0]-r.x,y:n.ctrlpts[1]-r.y},N=Math.sqrt(M.x*M.x+M.y*M.y),R={x:M.x/N,y:M.y/N},T=Math.max(o,a),O={x:n.ctrlpts[0]+R.x*2*T,y:n.ctrlpts[1]+R.y*2*T},_=l.intersectLine(r.x,r.y,o,a,O.x,O.y,0,d,h);D?(n.ctrlpts[0]=n.ctrlpts[0]+R.x*(I-E),n.ctrlpts[1]=n.ctrlpts[1]+R.y*(I-E)):(n.ctrlpts[0]=_[0]+R.x*I,n.ctrlpts[1]=_[1]+R.y*I)}if(v||y||C){A=!0;var k={x:n.ctrlpts[0]-i.x,y:n.ctrlpts[1]-i.y},P=Math.sqrt(k.x*k.x+k.y*k.y),V={x:k.x/P,y:k.y/P},z=Math.max(o,a),B={x:n.ctrlpts[0]+V.x*2*z,y:n.ctrlpts[1]+V.y*2*z},$=c.intersectLine(i.x,i.y,s,u,B.x,B.y,0,f,p);C?(n.ctrlpts[0]=n.ctrlpts[0]+V.x*(I-S),n.ctrlpts[1]=n.ctrlpts[1]+V.y*(I-S)):(n.ctrlpts[0]=$[0]+V.x*I,n.ctrlpts[1]=$[1]+V.y*I)}A&&this.findEndpoints(t)}};Wt.storeAllpts=function(t){var e=t._private.rscratch;if(e.edgeType==="multibezier"||e.edgeType==="bezier"||e.edgeType==="self"||e.edgeType==="compound"){e.allpts=[],e.allpts.push(e.startX,e.startY);for(var n=0;n+1<e.ctrlpts.length;n+=2)e.allpts.push(e.ctrlpts[n],e.ctrlpts[n+1]),n+3<e.ctrlpts.length&&e.allpts.push((e.ctrlpts[n]+e.ctrlpts[n+2])/2,(e.ctrlpts[n+1]+e.ctrlpts[n+3])/2);e.allpts.push(e.endX,e.endY);var r,i;e.ctrlpts.length/2%2===0?(r=e.allpts.length/2-1,e.midX=e.allpts[r],e.midY=e.allpts[r+1]):(r=e.allpts.length/2-3,i=.5,e.midX=Tt(e.allpts[r],e.allpts[r+2],e.allpts[r+4],i),e.midY=Tt(e.allpts[r+1],e.allpts[r+3],e.allpts[r+5],i))}else if(e.edgeType==="straight")e.allpts=[e.startX,e.startY,e.endX,e.endY],e.midX=(e.startX+e.endX+e.arrowStartX+e.arrowEndX)/4,e.midY=(e.startY+e.endY+e.arrowStartY+e.arrowEndY)/4;else if(e.edgeType==="segments"){if(e.allpts=[],e.allpts.push(e.startX,e.startY),e.allpts.push.apply(e.allpts,e.segpts),e.allpts.push(e.endX,e.endY),e.isRound){e.roundCorners=[];for(var o=2;o+3<e.allpts.length;o+=2){var a=e.radii[o/2-1],s=e.isArcRadius[o/2-1];e.roundCorners.push(kp({x:e.allpts[o-2],y:e.allpts[o-1]},{x:e.allpts[o],y:e.allpts[o+1],radius:a},{x:e.allpts[o+2],y:e.allpts[o+3]},a,s))}}if(e.segpts.length%4===0){var u=e.segpts.length/2,l=u-2;e.midX=(e.segpts[l]+e.segpts[u])/2,e.midY=(e.segpts[l+1]+e.segpts[u+1])/2}else{var c=e.segpts.length/2-1;if(!e.isRound)e.midX=e.segpts[c],e.midY=e.segpts[c+1];else{var d={x:e.segpts[c],y:e.segpts[c+1]},f=e.roundCorners[c/2],h=[d.x-f.cx,d.y-f.cy],p=f.radius/Math.sqrt(Math.pow(h[0],2)+Math.pow(h[1],2));h=h.map(function(m){return m*p}),e.midX=f.cx+h[0],e.midY=f.cy+h[1],e.midVector=h}}}};Wt.checkForInvalidEdgeWarning=function(t){var e=t[0]._private.rscratch;e.nodesOverlap||ie(e.startX)&&ie(e.startY)&&ie(e.endX)&&ie(e.endY)?e.loggedErr=!1:e.loggedErr||(e.loggedErr=!0,Ye("Edge `"+t.id()+"` has invalid endpoints and so it is impossible to draw.  Adjust your edge style (e.g. control points) accordingly or use an alternative edge type.  This is expected behaviour when the source node and the target node overlap."))};Wt.findEdgeControlPoints=function(t){var e=this;if(!(!t||t.length===0)){for(var n=this,r=n.cy,i=r.hasCompoundNodes(),o={map:new er,get:function(D){var S=this.map.get(D[0]);return S!=null?S.get(D[1]):null},set:function(D,S){var C=this.map.get(D[0]);C==null&&(C=new er,this.map.set(D[0],C)),C.set(D[1],S)}},a=[],s=[],u=0;u<t.length;u++){var l=t[u],c=l._private,d=l.pstyle("curve-style").value;if(!(l.removed()||!l.takesUpSpace())){if(d==="haystack"){s.push(l);continue}var f=d==="unbundled-bezier"||d.endsWith("segments")||d==="straight"||d==="straight-triangle"||d.endsWith("taxi"),h=d==="unbundled-bezier"||d==="bezier",p=c.source,m=c.target,g=p.poolIndex(),v=m.poolIndex(),y=[g,v].sort(),w=o.get(y);w==null&&(w={eles:[]},o.set(y,w),a.push(y)),w.eles.push(l),f&&(w.hasUnbundled=!0),h&&(w.hasBezier=!0)}}for(var b=function(D){var S=a[D],C=o.get(S),A=void 0;if(!C.hasUnbundled){var M=C.eles[0].parallelEdges().filter(function(x){return x.isBundledBezier()});yp(C.eles),M.forEach(function(x){return C.eles.push(x)}),C.eles.sort(function(x,j){return x.poolIndex()-j.poolIndex()})}var N=C.eles[0],R=N.source(),T=N.target();if(R.poolIndex()>T.poolIndex()){var O=R;R=T,T=O}var _=C.srcPos=R.position(),k=C.tgtPos=T.position(),P=C.srcW=R.outerWidth(),V=C.srcH=R.outerHeight(),z=C.tgtW=T.outerWidth(),B=C.tgtH=T.outerHeight(),$=C.srcShape=n.nodeShapes[e.getNodeShape(R)],W=C.tgtShape=n.nodeShapes[e.getNodeShape(T)],K=C.srcCornerRadius=R.pstyle("corner-radius").value==="auto"?"auto":R.pstyle("corner-radius").pfValue,Q=C.tgtCornerRadius=T.pstyle("corner-radius").value==="auto"?"auto":T.pstyle("corner-radius").pfValue,X=C.tgtRs=T._private.rscratch,J=C.srcRs=R._private.rscratch;C.dirCounts={north:0,west:0,south:0,east:0,northwest:0,southwest:0,northeast:0,southeast:0};for(var q=0;q<C.eles.length;q++){var L=C.eles[q],U=L[0]._private.rscratch,Z=L.pstyle("curve-style").value,re=Z==="unbundled-bezier"||Z.endsWith("segments")||Z.endsWith("taxi"),ve=!R.same(L.source());if(!C.calculatedIntersection&&R!==T&&(C.hasBezier||C.hasUnbundled)){C.calculatedIntersection=!0;var ne=$.intersectLine(_.x,_.y,P,V,k.x,k.y,0,K,J),te=C.srcIntn=ne,de=W.intersectLine(k.x,k.y,z,B,_.x,_.y,0,Q,X),ce=C.tgtIntn=de,se=C.intersectionPts={x1:ne[0],x2:de[0],y1:ne[1],y2:de[1]},ge=C.posPts={x1:_.x,x2:k.x,y1:_.y,y2:k.y},Ke=de[1]-ne[1],$e=de[0]-ne[0],Re=Math.sqrt($e*$e+Ke*Ke),Qe=C.vector={x:$e,y:Ke},ke=C.vectorNorm={x:Qe.x/Re,y:Qe.y/Re},qe={x:-ke.y,y:ke.x};C.nodesOverlap=!ie(Re)||W.checkPoint(ne[0],ne[1],0,z,B,k.x,k.y,Q,X)||$.checkPoint(de[0],de[1],0,P,V,_.x,_.y,K,J),C.vectorNormInverse=qe,A={nodesOverlap:C.nodesOverlap,dirCounts:C.dirCounts,calculatedIntersection:!0,hasBezier:C.hasBezier,hasUnbundled:C.hasUnbundled,eles:C.eles,srcPos:k,srcRs:X,tgtPos:_,tgtRs:J,srcW:z,srcH:B,tgtW:P,tgtH:V,srcIntn:ce,tgtIntn:te,srcShape:W,tgtShape:$,posPts:{x1:ge.x2,y1:ge.y2,x2:ge.x1,y2:ge.y1},intersectionPts:{x1:se.x2,y1:se.y2,x2:se.x1,y2:se.y1},vector:{x:-Qe.x,y:-Qe.y},vectorNorm:{x:-ke.x,y:-ke.y},vectorNormInverse:{x:-qe.x,y:-qe.y}}}var ee=ve?A:C;U.nodesOverlap=ee.nodesOverlap,U.srcIntn=ee.srcIntn,U.tgtIntn=ee.tgtIntn,U.isRound=Z.startsWith("round"),i&&(R.isParent()||R.isChild()||T.isParent()||T.isChild())&&(R.parents().anySame(T)||T.parents().anySame(R)||R.same(T)&&R.isParent())?e.findCompoundLoopPoints(L,ee,q,re):R===T?e.findLoopPoints(L,ee,q,re):Z.endsWith("segments")?e.findSegmentsPoints(L,ee):Z.endsWith("taxi")?e.findTaxiPoints(L,ee):Z==="straight"||!re&&C.eles.length%2===1&&q===Math.floor(C.eles.length/2)?e.findStraightEdgePoints(L):e.findBezierPoints(L,ee,q,re,ve),e.findEndpoints(L),e.tryToCorrectInvalidPoints(L,ee),e.checkForInvalidEdgeWarning(L),e.storeAllpts(L),e.storeEdgeProjections(L),e.calculateArrowAngles(L),e.recalculateEdgeLabelProjections(L),e.calculateLabelAngles(L)}},I=0;I<a.length;I++)b(I);this.findHaystackPoints(s)}};function mD(t){var e=[];if(t!=null){for(var n=0;n<t.length;n+=2){var r=t[n],i=t[n+1];e.push({x:r,y:i})}return e}}Wt.getSegmentPoints=function(t){var e=t[0]._private.rscratch;this.recalculateRenderedStyle(t);var n=e.edgeType;if(n==="segments")return mD(e.segpts)};Wt.getControlPoints=function(t){var e=t[0]._private.rscratch;this.recalculateRenderedStyle(t);var n=e.edgeType;if(n==="bezier"||n==="multibezier"||n==="self"||n==="compound")return mD(e.ctrlpts)};Wt.getEdgeMidpoint=function(t){var e=t[0]._private.rscratch;return this.recalculateRenderedStyle(t),{x:e.midX,y:e.midY}};var As={};As.manualEndptToPx=function(t,e){var n=this,r=t.position(),i=t.outerWidth(),o=t.outerHeight(),a=t._private.rscratch;if(e.value.length===2){var s=[e.pfValue[0],e.pfValue[1]];return e.units[0]==="%"&&(s[0]=s[0]*i),e.units[1]==="%"&&(s[1]=s[1]*o),s[0]+=r.x,s[1]+=r.y,s}else{var u=e.pfValue[0];u=-Math.PI/2+u;var l=2*Math.max(i,o),c=[r.x+Math.cos(u)*l,r.y+Math.sin(u)*l];return n.nodeShapes[this.getNodeShape(t)].intersectLine(r.x,r.y,i,o,c[0],c[1],0,t.pstyle("corner-radius").value==="auto"?"auto":t.pstyle("corner-radius").pfValue,a)}};As.findEndpoints=function(t){var e=this,n,r=t.source()[0],i=t.target()[0],o=r.position(),a=i.position(),s=t.pstyle("target-arrow-shape").value,u=t.pstyle("source-arrow-shape").value,l=t.pstyle("target-distance-from-node").pfValue,c=t.pstyle("source-distance-from-node").pfValue,d=r._private.rscratch,f=i._private.rscratch,h=t.pstyle("curve-style").value,p=t._private.rscratch,m=p.edgeType,g=h==="taxi",v=m==="self"||m==="compound",y=m==="bezier"||m==="multibezier"||v,w=m!=="bezier",b=m==="straight"||m==="segments",I=m==="segments",E=y||w||b,D=v||g,S=t.pstyle("source-endpoint"),C=D?"outside-to-node":S.value,A=r.pstyle("corner-radius").value==="auto"?"auto":r.pstyle("corner-radius").pfValue,M=t.pstyle("target-endpoint"),N=D?"outside-to-node":M.value,R=i.pstyle("corner-radius").value==="auto"?"auto":i.pstyle("corner-radius").pfValue;p.srcManEndpt=S,p.tgtManEndpt=M;var T,O,_,k;if(y){var P=[p.ctrlpts[0],p.ctrlpts[1]],V=w?[p.ctrlpts[p.ctrlpts.length-2],p.ctrlpts[p.ctrlpts.length-1]]:P;T=V,O=P}else if(b){var z=I?p.segpts.slice(0,2):[a.x,a.y],B=I?p.segpts.slice(p.segpts.length-2):[o.x,o.y];T=B,O=z}if(N==="inside-to-node")n=[a.x,a.y];else if(M.units)n=this.manualEndptToPx(i,M);else if(N==="outside-to-line")n=p.tgtIntn;else if(N==="outside-to-node"||N==="outside-to-node-or-label"?_=T:(N==="outside-to-line"||N==="outside-to-line-or-label")&&(_=[o.x,o.y]),n=e.nodeShapes[this.getNodeShape(i)].intersectLine(a.x,a.y,i.outerWidth(),i.outerHeight(),_[0],_[1],0,R,f),N==="outside-to-node-or-label"||N==="outside-to-line-or-label"){var $=i._private.rscratch,W=$.labelWidth,K=$.labelHeight,Q=$.labelX,X=$.labelY,J=W/2,q=K/2,L=i.pstyle("text-valign").value;L==="top"?X-=q:L==="bottom"&&(X+=q);var U=i.pstyle("text-halign").value;U==="left"?Q-=J:U==="right"&&(Q+=J);var Z=ys(_[0],_[1],[Q-J,X-q,Q+J,X-q,Q+J,X+q,Q-J,X+q],a.x,a.y);if(Z.length>0){var re=o,ve=yi(re,Ro(n)),ne=yi(re,Ro(Z)),te=ve;if(ne<ve&&(n=Z,te=ne),Z.length>2){var de=yi(re,{x:Z[2],y:Z[3]});de<te&&(n=[Z[2],Z[3]])}}}var ce=Sl(n,T,e.arrowShapes[s].spacing(t)+l),se=Sl(n,T,e.arrowShapes[s].gap(t)+l);if(p.endX=se[0],p.endY=se[1],p.arrowEndX=ce[0],p.arrowEndY=ce[1],C==="inside-to-node")n=[o.x,o.y];else if(S.units)n=this.manualEndptToPx(r,S);else if(C==="outside-to-line")n=p.srcIntn;else if(C==="outside-to-node"||C==="outside-to-node-or-label"?k=O:(C==="outside-to-line"||C==="outside-to-line-or-label")&&(k=[a.x,a.y]),n=e.nodeShapes[this.getNodeShape(r)].intersectLine(o.x,o.y,r.outerWidth(),r.outerHeight(),k[0],k[1],0,A,d),C==="outside-to-node-or-label"||C==="outside-to-line-or-label"){var ge=r._private.rscratch,Ke=ge.labelWidth,$e=ge.labelHeight,Re=ge.labelX,Qe=ge.labelY,ke=Ke/2,qe=$e/2,ee=r.pstyle("text-valign").value;ee==="top"?Qe-=qe:ee==="bottom"&&(Qe+=qe);var x=r.pstyle("text-halign").value;x==="left"?Re-=ke:x==="right"&&(Re+=ke);var j=ys(k[0],k[1],[Re-ke,Qe-qe,Re+ke,Qe-qe,Re+ke,Qe+qe,Re-ke,Qe+qe],o.x,o.y);if(j.length>0){var G=a,F=yi(G,Ro(n)),H=yi(G,Ro(j)),oe=F;if(H<F&&(n=[j[0],j[1]],oe=H),j.length>2){var Y=yi(G,{x:j[2],y:j[3]});Y<oe&&(n=[j[2],j[3]])}}}var ae=Sl(n,O,e.arrowShapes[u].spacing(t)+c),me=Sl(n,O,e.arrowShapes[u].gap(t)+c);p.startX=me[0],p.startY=me[1],p.arrowStartX=ae[0],p.arrowStartY=ae[1],E&&(!ie(p.startX)||!ie(p.startY)||!ie(p.endX)||!ie(p.endY)?p.badLine=!0:p.badLine=!1)};As.getSourceEndpoint=function(t){var e=t[0]._private.rscratch;switch(this.recalculateRenderedStyle(t),e.edgeType){case"haystack":return{x:e.haystackPts[0],y:e.haystackPts[1]};default:return{x:e.arrowStartX,y:e.arrowStartY}}};As.getTargetEndpoint=function(t){var e=t[0]._private.rscratch;switch(this.recalculateRenderedStyle(t),e.edgeType){case"haystack":return{x:e.haystackPts[2],y:e.haystackPts[3]};default:return{x:e.arrowEndX,y:e.arrowEndY}}};var Op={};function JO(t,e,n){for(var r=function(l,c,d,f){return Tt(l,c,d,f)},i=e._private,o=i.rstyle.bezierPts,a=0;a<t.bezierProjPcts.length;a++){var s=t.bezierProjPcts[a];o.push({x:r(n[0],n[2],n[4],s),y:r(n[1],n[3],n[5],s)})}}Op.storeEdgeProjections=function(t){var e=t._private,n=e.rscratch,r=n.edgeType;if(e.rstyle.bezierPts=null,e.rstyle.linePts=null,e.rstyle.haystackPts=null,r==="multibezier"||r==="bezier"||r==="self"||r==="compound"){e.rstyle.bezierPts=[];for(var i=0;i+5<n.allpts.length;i+=4)JO(this,t,n.allpts.slice(i,i+6))}else if(r==="segments")for(var o=e.rstyle.linePts=[],i=0;i+1<n.allpts.length;i+=2)o.push({x:n.allpts[i],y:n.allpts[i+1]});else if(r==="haystack"){var a=n.haystackPts;e.rstyle.haystackPts=[{x:a[0],y:a[1]},{x:a[2],y:a[3]}]}e.rstyle.arrowWidth=this.getArrowWidth(t.pstyle("width").pfValue,t.pstyle("arrow-scale").value)*this.arrowShapeWidth};Op.recalculateEdgeProjections=function(t){this.findEdgeControlPoints(t)};var nr={};nr.recalculateNodeLabelProjection=function(t){var e=t.pstyle("label").strValue;if(!$r(e)){var n,r,i=t._private,o=t.width(),a=t.height(),s=t.padding(),u=t.position(),l=t.pstyle("text-halign").strValue,c=t.pstyle("text-valign").strValue,d=i.rscratch,f=i.rstyle;switch(l){case"left":n=u.x-o/2-s;break;case"right":n=u.x+o/2+s;break;default:n=u.x}switch(c){case"top":r=u.y-a/2-s;break;case"bottom":r=u.y+a/2+s;break;default:r=u.y}d.labelX=n,d.labelY=r,f.labelX=n,f.labelY=r,this.calculateLabelAngles(t),this.applyLabelDimensions(t)}};var yD=function(e,n){var r=Math.atan(n/e);return e===0&&r<0&&(r=r*-1),r},wD=function(e,n){var r=n.x-e.x,i=n.y-e.y;return yD(r,i)},eP=function(e,n,r,i){var o=ms(0,i-.001,1),a=ms(0,i+.001,1),s=ko(e,n,r,o),u=ko(e,n,r,a);return wD(s,u)};nr.recalculateEdgeLabelProjections=function(t){var e,n=t._private,r=n.rscratch,i=this,o={mid:t.pstyle("label").strValue,source:t.pstyle("source-label").strValue,target:t.pstyle("target-label").strValue};if(o.mid||o.source||o.target){e={x:r.midX,y:r.midY};var a=function(d,f,h){Lr(n.rscratch,d,f,h),Lr(n.rstyle,d,f,h)};a("labelX",null,e.x),a("labelY",null,e.y);var s=yD(r.midDispX,r.midDispY);a("labelAutoAngle",null,s);var u=function c(){if(c.cache)return c.cache;for(var d=[],f=0;f+5<r.allpts.length;f+=4){var h={x:r.allpts[f],y:r.allpts[f+1]},p={x:r.allpts[f+2],y:r.allpts[f+3]},m={x:r.allpts[f+4],y:r.allpts[f+5]};d.push({p0:h,p1:p,p2:m,startDist:0,length:0,segments:[]})}var g=n.rstyle.bezierPts,v=i.bezierProjPcts.length;function y(D,S,C,A,M){var N=Si(S,C),R=D.segments[D.segments.length-1],T={p0:S,p1:C,t0:A,t1:M,startDist:R?R.startDist+R.length:0,length:N};D.segments.push(T),D.length+=N}for(var w=0;w<d.length;w++){var b=d[w],I=d[w-1];I&&(b.startDist=I.startDist+I.length),y(b,b.p0,g[w*v],0,i.bezierProjPcts[0]);for(var E=0;E<v-1;E++)y(b,g[w*v+E],g[w*v+E+1],i.bezierProjPcts[E],i.bezierProjPcts[E+1]);y(b,g[w*v+v-1],b.p2,i.bezierProjPcts[v-1],1)}return c.cache=d},l=function(d){var f,h=d==="source";if(o[d]){var p=t.pstyle(d+"-text-offset").pfValue;switch(r.edgeType){case"self":case"compound":case"bezier":case"multibezier":{for(var m=u(),g,v=0,y=0,w=0;w<m.length;w++){for(var b=m[h?w:m.length-1-w],I=0;I<b.segments.length;I++){var E=b.segments[h?I:b.segments.length-1-I],D=w===m.length-1&&I===b.segments.length-1;if(v=y,y+=E.length,y>=p||D){g={cp:b,segment:E};break}}if(g)break}var S=g.cp,C=g.segment,A=(p-v)/C.length,M=C.t1-C.t0,N=h?C.t0+M*A:C.t1-M*A;N=ms(0,N,1),e=ko(S.p0,S.p1,S.p2,N),f=eP(S.p0,S.p1,S.p2,N);break}case"straight":case"segments":case"haystack":{for(var R=0,T,O,_,k,P=r.allpts.length,V=0;V+3<P&&(h?(_={x:r.allpts[V],y:r.allpts[V+1]},k={x:r.allpts[V+2],y:r.allpts[V+3]}):(_={x:r.allpts[P-2-V],y:r.allpts[P-1-V]},k={x:r.allpts[P-4-V],y:r.allpts[P-3-V]}),T=Si(_,k),O=R,R+=T,!(R>=p));V+=2);var z=p-O,B=z/T;B=ms(0,B,1),e=oA(_,k,B),f=wD(_,k);break}}a("labelX",d,e.x),a("labelY",d,e.y),a("labelAutoAngle",d,f)}};l("source"),l("target"),this.applyLabelDimensions(t)}};nr.applyLabelDimensions=function(t){this.applyPrefixedLabelDimensions(t),t.isEdge()&&(this.applyPrefixedLabelDimensions(t,"source"),this.applyPrefixedLabelDimensions(t,"target"))};nr.applyPrefixedLabelDimensions=function(t,e){var n=t._private,r=this.getLabelText(t,e),i=this.calculateLabelDimensions(t,r),o=t.pstyle("line-height").pfValue,a=t.pstyle("text-wrap").strValue,s=$n(n.rscratch,"labelWrapCachedLines",e)||[],u=a!=="wrap"?1:Math.max(s.length,1),l=i.height/u,c=l*o,d=i.width,f=i.height+(u-1)*(o-1)*l;Lr(n.rstyle,"labelWidth",e,d),Lr(n.rscratch,"labelWidth",e,d),Lr(n.rstyle,"labelHeight",e,f),Lr(n.rscratch,"labelHeight",e,f),Lr(n.rscratch,"labelLineHeight",e,c)};nr.getLabelText=function(t,e){var n=t._private,r=e?e+"-":"",i=t.pstyle(r+"label").strValue,o=t.pstyle("text-transform").value,a=function(W,K){return K?(Lr(n.rscratch,W,e,K),K):$n(n.rscratch,W,e)};if(!i)return"";o=="none"||(o=="uppercase"?i=i.toUpperCase():o=="lowercase"&&(i=i.toLowerCase()));var s=t.pstyle("text-wrap").value;if(s==="wrap"){var u=a("labelKey");if(u!=null&&a("labelWrapKey")===u)return a("labelWrapCachedText");for(var l="\u200B",c=i.split(`
`),d=t.pstyle("text-max-width").pfValue,f=t.pstyle("text-overflow-wrap").value,h=f==="anywhere",p=[],m=/[\s\u200b]+|$/g,g=0;g<c.length;g++){var v=c[g],y=this.calculateLabelDimensions(t,v),w=y.width;if(h){var b=v.split("").join(l);v=b}if(w>d){var I=v.matchAll(m),E="",D=0,S=tb(I),C;try{for(S.s();!(C=S.n()).done;){var A=C.value,M=A[0],N=v.substring(D,A.index);D=A.index+M.length;var R=E.length===0?N:E+N+M,T=this.calculateLabelDimensions(t,R),O=T.width;O<=d?E+=N+M:(E&&p.push(E),E=N+M)}}catch($){S.e($)}finally{S.f()}E.match(/^[\s\u200b]+$/)||p.push(E)}else p.push(v)}a("labelWrapCachedLines",p),i=a("labelWrapCachedText",p.join(`
`)),a("labelWrapKey",u)}else if(s==="ellipsis"){var _=t.pstyle("text-max-width").pfValue,k="",P="\u2026",V=!1;if(this.calculateLabelDimensions(t,i).width<_)return i;for(var z=0;z<i.length;z++){var B=this.calculateLabelDimensions(t,k+i[z]+P).width;if(B>_)break;k+=i[z],z===i.length-1&&(V=!0)}return V||(k+=P),k}return i};nr.getLabelJustification=function(t){var e=t.pstyle("text-justification").strValue,n=t.pstyle("text-halign").strValue;if(e==="auto")if(t.isNode())switch(n){case"left":return"right";case"right":return"left";default:return"center"}else return"center";else return e};nr.calculateLabelDimensions=function(t,e){var n=this,r=n.cy.window(),i=r.document,o=Ii(e,t._private.labelDimsKey),a=n.labelDimCache||(n.labelDimCache=[]),s=a[o];if(s!=null)return s;var u=0,l=t.pstyle("font-style").strValue,c=t.pstyle("font-size").pfValue,d=t.pstyle("font-family").strValue,f=t.pstyle("font-weight").strValue,h=this.labelCalcCanvas,p=this.labelCalcCanvasContext;if(!h){h=this.labelCalcCanvas=i.createElement("canvas"),p=this.labelCalcCanvasContext=h.getContext("2d");var m=h.style;m.position="absolute",m.left="-9999px",m.top="-9999px",m.zIndex="-1",m.visibility="hidden",m.pointerEvents="none"}p.font="".concat(l," ").concat(f," ").concat(c,"px ").concat(d);for(var g=0,v=0,y=e.split(`
`),w=0;w<y.length;w++){var b=y[w],I=p.measureText(b),E=Math.ceil(I.width),D=c;g=Math.max(E,g),v+=D}return g+=u,v+=u,a[o]={width:g,height:v}};nr.calculateLabelAngle=function(t,e){var n=t._private,r=n.rscratch,i=t.isEdge(),o=e?e+"-":"",a=t.pstyle(o+"text-rotation"),s=a.strValue;return s==="none"?0:i&&s==="autorotate"?r.labelAutoAngle:s==="autorotate"?0:a.pfValue};nr.calculateLabelAngles=function(t){var e=this,n=t.isEdge(),r=t._private,i=r.rscratch;i.labelAngle=e.calculateLabelAngle(t),n&&(i.sourceLabelAngle=e.calculateLabelAngle(t,"source"),i.targetLabelAngle=e.calculateLabelAngle(t,"target"))};var bD={},jw=28,Hw=!1;bD.getNodeShape=function(t){var e=this,n=t.pstyle("shape").value;if(n==="cutrectangle"&&(t.width()<jw||t.height()<jw))return Hw||(Ye("The `cutrectangle` node shape can not be used at small sizes so `rectangle` is used instead"),Hw=!0),"rectangle";if(t.isParent())return n==="rectangle"||n==="roundrectangle"||n==="round-rectangle"||n==="cutrectangle"||n==="cut-rectangle"||n==="barrel"?n:"rectangle";if(n==="polygon"){var r=t.pstyle("shape-polygon-points").value;return e.nodeShapes.makePolygon(r).name}return n};var mc={};mc.registerCalculationListeners=function(){var t=this.cy,e=t.collection(),n=this,r=function(a){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(e.merge(a),s)for(var u=0;u<a.length;u++){var l=a[u],c=l._private,d=c.rstyle;d.clean=!1,d.cleanConnected=!1}};n.binder(t).on("bounds.* dirty.*",function(a){var s=a.target;r(s)}).on("style.* background.*",function(a){var s=a.target;r(s,!1)});var i=function(a){if(a){var s=n.onUpdateEleCalcsFns;e.cleanStyle();for(var u=0;u<e.length;u++){var l=e[u],c=l._private.rstyle;l.isNode()&&!c.cleanConnected&&(r(l.connectedEdges()),c.cleanConnected=!0)}if(s)for(var d=0;d<s.length;d++){var f=s[d];f(a,e)}n.recalculateRenderedStyle(e),e=t.collection()}};n.flushRenderedStyleQueue=function(){i(!0)},n.beforeRender(i,n.beforeRenderPriorities.eleCalcs)};mc.onUpdateEleCalcs=function(t){var e=this.onUpdateEleCalcsFns=this.onUpdateEleCalcsFns||[];e.push(t)};mc.recalculateRenderedStyle=function(t,e){var n=function(b){return b._private.rstyle.cleanConnected},r=[],i=[];if(!this.destroyed){e===void 0&&(e=!0);for(var o=0;o<t.length;o++){var a=t[o],s=a._private,u=s.rstyle;a.isEdge()&&(!n(a.source())||!n(a.target()))&&(u.clean=!1),!(e&&u.clean||a.removed())&&a.pstyle("display").value!=="none"&&(s.group==="nodes"?i.push(a):r.push(a),u.clean=!0)}for(var l=0;l<i.length;l++){var c=i[l],d=c._private,f=d.rstyle,h=c.position();this.recalculateNodeLabelProjection(c),f.nodeX=h.x,f.nodeY=h.y,f.nodeW=c.pstyle("width").pfValue,f.nodeH=c.pstyle("height").pfValue}this.recalculateEdgeProjections(r);for(var p=0;p<r.length;p++){var m=r[p],g=m._private,v=g.rstyle,y=g.rscratch;v.srcX=y.arrowStartX,v.srcY=y.arrowStartY,v.tgtX=y.arrowEndX,v.tgtY=y.arrowEndY,v.midX=y.midX,v.midY=y.midY,v.labelAngle=y.labelAngle,v.sourceLabelAngle=y.sourceLabelAngle,v.targetLabelAngle=y.targetLabelAngle}}};var yc={};yc.updateCachedGrabbedEles=function(){var t=this.cachedZSortedEles;if(t){t.drag=[],t.nondrag=[];for(var e=[],n=0;n<t.length;n++){var r=t[n],i=r._private.rscratch;r.grabbed()&&!r.isParent()?e.push(r):i.inDragLayer?t.drag.push(r):t.nondrag.push(r)}for(var n=0;n<e.length;n++){var r=e[n];t.drag.push(r)}}};yc.invalidateCachedZSortedEles=function(){this.cachedZSortedEles=null};yc.getCachedZSortedEles=function(t){if(t||!this.cachedZSortedEles){var e=this.cy.mutableElements().toArray();e.sort(rD),e.interactive=e.filter(function(n){return n.interactive()}),this.cachedZSortedEles=e,this.updateCachedGrabbedEles()}else e=this.cachedZSortedEles;return e};var DD={};[Ai,Jl,Wt,As,Op,nr,bD,mc,yc].forEach(function(t){ye(DD,t)});var ED={};ED.getCachedImage=function(t,e,n){var r=this,i=r.imageCache=r.imageCache||{},o=i[t];if(o)return o.image.complete||o.image.addEventListener("load",n),o.image;o=i[t]=i[t]||{};var a=o.image=new Image;a.addEventListener("load",n),a.addEventListener("error",function(){a.error=!0});var s="data:",u=t.substring(0,s.length).toLowerCase()===s;return u||(e=e==="null"?null:e,a.crossOrigin=e),a.src=t,a};var Zo={};Zo.registerBinding=function(t,e,n,r){var i=Array.prototype.slice.apply(arguments,[1]);if(Array.isArray(t)){for(var o=[],a=0;a<t.length;a++){var s=t[a];if(s!==void 0){var u=this.binder(s);o.push(u.on.apply(u,i))}}return o}var u=this.binder(t);return u.on.apply(u,i)};Zo.binder=function(t){var e=this,n=e.cy.window(),r=t===n||t===n.document||t===n.document.body||S1(t);if(e.supportsPassiveEvents==null){var i=!1;try{var o=Object.defineProperty({},"passive",{get:function(){return i=!0,!0}});n.addEventListener("test",null,o)}catch{}e.supportsPassiveEvents=i}var a=function(u,l,c){var d=Array.prototype.slice.call(arguments);return r&&e.supportsPassiveEvents&&(d[2]={capture:c??!1,passive:!1,once:!1}),e.bindings.push({target:t,args:d}),(t.addEventListener||t.on).apply(t,d),this};return{on:a,addEventListener:a,addListener:a,bind:a}};Zo.nodeIsDraggable=function(t){return t&&t.isNode()&&!t.locked()&&t.grabbable()};Zo.nodeIsGrabbable=function(t){return this.nodeIsDraggable(t)&&t.interactive()};Zo.load=function(){var t=this,e=t.cy.window(),n=function(x){return x.selected()},r=function(x){var j=x.getRootNode();if(j&&j.nodeType===11&&j.host!==void 0)return j},i=function(x,j,G,F){x==null&&(x=t.cy);for(var H=0;H<j.length;H++){var oe=j[H];x.emit({originalEvent:G,type:oe,position:F})}},o=function(x){return x.shiftKey||x.metaKey||x.ctrlKey},a=function(x,j){var G=!0;if(t.cy.hasCompoundNodes()&&x&&x.pannable())for(var F=0;j&&F<j.length;F++){var x=j[F];if(x.isNode()&&x.isParent()&&!x.pannable()){G=!1;break}}else G=!0;return G},s=function(x){x[0]._private.grabbed=!0},u=function(x){x[0]._private.grabbed=!1},l=function(x){x[0]._private.rscratch.inDragLayer=!0},c=function(x){x[0]._private.rscratch.inDragLayer=!1},d=function(x){x[0]._private.rscratch.isGrabTarget=!0},f=function(x){x[0]._private.rscratch.isGrabTarget=!1},h=function(x,j){var G=j.addToList,F=G.has(x);!F&&x.grabbable()&&!x.locked()&&(G.merge(x),s(x))},p=function(x,j){if(x.cy().hasCompoundNodes()&&!(j.inDragLayer==null&&j.addToList==null)){var G=x.descendants();j.inDragLayer&&(G.forEach(l),G.connectedEdges().forEach(l)),j.addToList&&h(G,j)}},m=function(x,j){j=j||{};var G=x.cy().hasCompoundNodes();j.inDragLayer&&(x.forEach(l),x.neighborhood().stdFilter(function(F){return!G||F.isEdge()}).forEach(l)),j.addToList&&x.forEach(function(F){h(F,j)}),p(x,j),y(x,{inDragLayer:j.inDragLayer}),t.updateCachedGrabbedEles()},g=m,v=function(x){x&&(t.getCachedZSortedEles().forEach(function(j){u(j),c(j),f(j)}),t.updateCachedGrabbedEles())},y=function(x,j){if(!(j.inDragLayer==null&&j.addToList==null)&&x.cy().hasCompoundNodes()){var G=x.ancestors().orphans();if(!G.same(x)){var F=G.descendants().spawnSelf().merge(G).unmerge(x).unmerge(x.descendants()),H=F.connectedEdges();j.inDragLayer&&(H.forEach(l),F.forEach(l)),j.addToList&&F.forEach(function(oe){h(oe,j)})}}},w=function(){document.activeElement!=null&&document.activeElement.blur!=null&&document.activeElement.blur()},b=typeof MutationObserver<"u",I=typeof ResizeObserver<"u";b?(t.removeObserver=new MutationObserver(function(ee){for(var x=0;x<ee.length;x++){var j=ee[x],G=j.removedNodes;if(G)for(var F=0;F<G.length;F++){var H=G[F];if(H===t.container){t.destroy();break}}}}),t.container.parentNode&&t.removeObserver.observe(t.container.parentNode,{childList:!0})):t.registerBinding(t.container,"DOMNodeRemoved",function(ee){t.destroy()});var E=rc(function(){t.cy.resize()},100);b&&(t.styleObserver=new MutationObserver(E),t.styleObserver.observe(t.container,{attributes:!0})),t.registerBinding(e,"resize",E),I&&(t.resizeObserver=new ResizeObserver(E),t.resizeObserver.observe(t.container));var D=function(x,j){for(;x!=null;)j(x),x=x.parentNode},S=function(){t.invalidateContainerClientCoordsCache()};D(t.container,function(ee){t.registerBinding(ee,"transitionend",S),t.registerBinding(ee,"animationend",S),t.registerBinding(ee,"scroll",S)}),t.registerBinding(t.container,"contextmenu",function(ee){ee.preventDefault()});var C=function(){return t.selection[4]!==0},A=function(x){for(var j=t.findContainerClientCoords(),G=j[0],F=j[1],H=j[2],oe=j[3],Y=x.touches?x.touches:[x],ae=!1,me=0;me<Y.length;me++){var Ie=Y[me];if(G<=Ie.clientX&&Ie.clientX<=G+H&&F<=Ie.clientY&&Ie.clientY<=F+oe){ae=!0;break}}if(!ae)return!1;for(var he=t.container,De=x.target,Ce=De.parentNode,we=!1;Ce;){if(Ce===he){we=!0;break}Ce=Ce.parentNode}return!!we};t.registerBinding(t.container,"mousedown",function(x){if(A(x)&&!(t.hoverData.which===1&&x.which!==1)){x.preventDefault(),w(),t.hoverData.capture=!0,t.hoverData.which=x.which;var j=t.cy,G=[x.clientX,x.clientY],F=t.projectIntoViewport(G[0],G[1]),H=t.selection,oe=t.findNearestElements(F[0],F[1],!0,!1),Y=oe[0],ae=t.dragData.possibleDragElements;t.hoverData.mdownPos=F,t.hoverData.mdownGPos=G;var me=function(){t.hoverData.tapholdCancelled=!1,clearTimeout(t.hoverData.tapholdTimeout),t.hoverData.tapholdTimeout=setTimeout(function(){if(!t.hoverData.tapholdCancelled){var nt=t.hoverData.down;nt?nt.emit({originalEvent:x,type:"taphold",position:{x:F[0],y:F[1]}}):j.emit({originalEvent:x,type:"taphold",position:{x:F[0],y:F[1]}})}},t.tapholdDuration)};if(x.which==3){t.hoverData.cxtStarted=!0;var Ie={originalEvent:x,type:"cxttapstart",position:{x:F[0],y:F[1]}};Y?(Y.activate(),Y.emit(Ie),t.hoverData.down=Y):j.emit(Ie),t.hoverData.downTime=new Date().getTime(),t.hoverData.cxtDragged=!1}else if(x.which==1){Y&&Y.activate();{if(Y!=null&&t.nodeIsGrabbable(Y)){var he=function(nt){return{originalEvent:x,type:nt,position:{x:F[0],y:F[1]}}},De=function(nt){nt.emit(he("grab"))};if(d(Y),!Y.selected())ae=t.dragData.possibleDragElements=j.collection(),g(Y,{addToList:ae}),Y.emit(he("grabon")).emit(he("grab"));else{ae=t.dragData.possibleDragElements=j.collection();var Ce=j.$(function(we){return we.isNode()&&we.selected()&&t.nodeIsGrabbable(we)});m(Ce,{addToList:ae}),Y.emit(he("grabon")),Ce.forEach(De)}t.redrawHint("eles",!0),t.redrawHint("drag",!0)}t.hoverData.down=Y,t.hoverData.downs=oe,t.hoverData.downTime=new Date().getTime()}i(Y,["mousedown","tapstart","vmousedown"],x,{x:F[0],y:F[1]}),Y==null?(H[4]=1,t.data.bgActivePosistion={x:F[0],y:F[1]},t.redrawHint("select",!0),t.redraw()):Y.pannable()&&(H[4]=1),me()}H[0]=H[2]=F[0],H[1]=H[3]=F[1]}},!1);var M=r(t.container);t.registerBinding([e,M],"mousemove",function(x){var j=t.hoverData.capture;if(!(!j&&!A(x))){var G=!1,F=t.cy,H=F.zoom(),oe=[x.clientX,x.clientY],Y=t.projectIntoViewport(oe[0],oe[1]),ae=t.hoverData.mdownPos,me=t.hoverData.mdownGPos,Ie=t.selection,he=null;!t.hoverData.draggingEles&&!t.hoverData.dragging&&!t.hoverData.selecting&&(he=t.findNearestElement(Y[0],Y[1],!0,!1));var De=t.hoverData.last,Ce=t.hoverData.down,we=[Y[0]-Ie[2],Y[1]-Ie[3]],nt=t.dragData.possibleDragElements,ut;if(me){var tn=oe[0]-me[0],nn=tn*tn,pt=oe[1]-me[1],Ct=pt*pt,It=nn+Ct;t.hoverData.isOverThresholdDrag=ut=It>=t.desktopTapThreshold2}var Zt=o(x);ut&&(t.hoverData.tapholdCancelled=!0);var Yt=function(){var Un=t.hoverData.dragDelta=t.hoverData.dragDelta||[];Un.length===0?(Un.push(we[0]),Un.push(we[1])):(Un[0]+=we[0],Un[1]+=we[1])};G=!0,i(he,["mousemove","vmousemove","tapdrag"],x,{x:Y[0],y:Y[1]});var Hn=function(){t.data.bgActivePosistion=void 0,t.hoverData.selecting||F.emit({originalEvent:x,type:"boxstart",position:{x:Y[0],y:Y[1]}}),Ie[4]=1,t.hoverData.selecting=!0,t.redrawHint("select",!0),t.redraw()};if(t.hoverData.which===3){if(ut){var vn={originalEvent:x,type:"cxtdrag",position:{x:Y[0],y:Y[1]}};Ce?Ce.emit(vn):F.emit(vn),t.hoverData.cxtDragged=!0,(!t.hoverData.cxtOver||he!==t.hoverData.cxtOver)&&(t.hoverData.cxtOver&&t.hoverData.cxtOver.emit({originalEvent:x,type:"cxtdragout",position:{x:Y[0],y:Y[1]}}),t.hoverData.cxtOver=he,he&&he.emit({originalEvent:x,type:"cxtdragover",position:{x:Y[0],y:Y[1]}}))}}else if(t.hoverData.dragging){if(G=!0,F.panningEnabled()&&F.userPanningEnabled()){var zn;if(t.hoverData.justStartedPan){var ir=t.hoverData.mdownPos;zn={x:(Y[0]-ir[0])*H,y:(Y[1]-ir[1])*H},t.hoverData.justStartedPan=!1}else zn={x:we[0]*H,y:we[1]*H};F.panBy(zn),F.emit("dragpan"),t.hoverData.dragged=!0}Y=t.projectIntoViewport(x.clientX,x.clientY)}else if(Ie[4]==1&&(Ce==null||Ce.pannable())){if(ut){if(!t.hoverData.dragging&&F.boxSelectionEnabled()&&(Zt||!F.panningEnabled()||!F.userPanningEnabled()))Hn();else if(!t.hoverData.selecting&&F.panningEnabled()&&F.userPanningEnabled()){var or=a(Ce,t.hoverData.downs);or&&(t.hoverData.dragging=!0,t.hoverData.justStartedPan=!0,Ie[4]=0,t.data.bgActivePosistion=Ro(ae),t.redrawHint("select",!0),t.redraw())}Ce&&Ce.pannable()&&Ce.active()&&Ce.unactivate()}}else{if(Ce&&Ce.pannable()&&Ce.active()&&Ce.unactivate(),(!Ce||!Ce.grabbed())&&he!=De&&(De&&i(De,["mouseout","tapdragout"],x,{x:Y[0],y:Y[1]}),he&&i(he,["mouseover","tapdragover"],x,{x:Y[0],y:Y[1]}),t.hoverData.last=he),Ce)if(ut){if(F.boxSelectionEnabled()&&Zt)Ce&&Ce.grabbed()&&(v(nt),Ce.emit("freeon"),nt.emit("free"),t.dragData.didDrag&&(Ce.emit("dragfreeon"),nt.emit("dragfree"))),Hn();else if(Ce&&Ce.grabbed()&&t.nodeIsDraggable(Ce)){var Ft=!t.dragData.didDrag;Ft&&t.redrawHint("eles",!0),t.dragData.didDrag=!0,t.hoverData.draggingEles||m(nt,{inDragLayer:!0});var St={x:0,y:0};if(ie(we[0])&&ie(we[1])&&(St.x+=we[0],St.y+=we[1],Ft)){var Qt=t.hoverData.dragDelta;Qt&&ie(Qt[0])&&ie(Qt[1])&&(St.x+=Qt[0],St.y+=Qt[1])}t.hoverData.draggingEles=!0,nt.silentShift(St).emit("position drag"),t.redrawHint("drag",!0),t.redraw()}}else Yt();G=!0}if(Ie[2]=Y[0],Ie[3]=Y[1],G)return x.stopPropagation&&x.stopPropagation(),x.preventDefault&&x.preventDefault(),!1}},!1);var N,R,T;t.registerBinding(e,"mouseup",function(x){if(!(t.hoverData.which===1&&x.which!==1&&t.hoverData.capture)){var j=t.hoverData.capture;if(j){t.hoverData.capture=!1;var G=t.cy,F=t.projectIntoViewport(x.clientX,x.clientY),H=t.selection,oe=t.findNearestElement(F[0],F[1],!0,!1),Y=t.dragData.possibleDragElements,ae=t.hoverData.down,me=o(x);if(t.data.bgActivePosistion&&(t.redrawHint("select",!0),t.redraw()),t.hoverData.tapholdCancelled=!0,t.data.bgActivePosistion=void 0,ae&&ae.unactivate(),t.hoverData.which===3){var Ie={originalEvent:x,type:"cxttapend",position:{x:F[0],y:F[1]}};if(ae?ae.emit(Ie):G.emit(Ie),!t.hoverData.cxtDragged){var he={originalEvent:x,type:"cxttap",position:{x:F[0],y:F[1]}};ae?ae.emit(he):G.emit(he)}t.hoverData.cxtDragged=!1,t.hoverData.which=null}else if(t.hoverData.which===1){if(i(oe,["mouseup","tapend","vmouseup"],x,{x:F[0],y:F[1]}),!t.dragData.didDrag&&!t.hoverData.dragged&&!t.hoverData.selecting&&!t.hoverData.isOverThresholdDrag&&(i(ae,["click","tap","vclick"],x,{x:F[0],y:F[1]}),R=!1,x.timeStamp-T<=G.multiClickDebounceTime()?(N&&clearTimeout(N),R=!0,T=null,i(ae,["dblclick","dbltap","vdblclick"],x,{x:F[0],y:F[1]})):(N=setTimeout(function(){R||i(ae,["oneclick","onetap","voneclick"],x,{x:F[0],y:F[1]})},G.multiClickDebounceTime()),T=x.timeStamp)),ae==null&&!t.dragData.didDrag&&!t.hoverData.selecting&&!t.hoverData.dragged&&!o(x)&&(G.$(n).unselect(["tapunselect"]),Y.length>0&&t.redrawHint("eles",!0),t.dragData.possibleDragElements=Y=G.collection()),oe==ae&&!t.dragData.didDrag&&!t.hoverData.selecting&&oe!=null&&oe._private.selectable&&(t.hoverData.dragging||(G.selectionType()==="additive"||me?oe.selected()?oe.unselect(["tapunselect"]):oe.select(["tapselect"]):me||(G.$(n).unmerge(oe).unselect(["tapunselect"]),oe.select(["tapselect"]))),t.redrawHint("eles",!0)),t.hoverData.selecting){var De=G.collection(t.getAllInBox(H[0],H[1],H[2],H[3]));t.redrawHint("select",!0),De.length>0&&t.redrawHint("eles",!0),G.emit({type:"boxend",originalEvent:x,position:{x:F[0],y:F[1]}});var Ce=function(ut){return ut.selectable()&&!ut.selected()};G.selectionType()==="additive"||me||G.$(n).unmerge(De).unselect(),De.emit("box").stdFilter(Ce).select().emit("boxselect"),t.redraw()}if(t.hoverData.dragging&&(t.hoverData.dragging=!1,t.redrawHint("select",!0),t.redrawHint("eles",!0),t.redraw()),!H[4]){t.redrawHint("drag",!0),t.redrawHint("eles",!0);var we=ae&&ae.grabbed();v(Y),we&&(ae.emit("freeon"),Y.emit("free"),t.dragData.didDrag&&(ae.emit("dragfreeon"),Y.emit("dragfree")))}}H[4]=0,t.hoverData.down=null,t.hoverData.cxtStarted=!1,t.hoverData.draggingEles=!1,t.hoverData.selecting=!1,t.hoverData.isOverThresholdDrag=!1,t.dragData.didDrag=!1,t.hoverData.dragged=!1,t.hoverData.dragDelta=[],t.hoverData.mdownPos=null,t.hoverData.mdownGPos=null,t.hoverData.which=null}}},!1);var O=function(x){if(!t.scrollingPage){var j=t.cy,G=j.zoom(),F=j.pan(),H=t.projectIntoViewport(x.clientX,x.clientY),oe=[H[0]*G+F.x,H[1]*G+F.y];if(t.hoverData.draggingEles||t.hoverData.dragging||t.hoverData.cxtStarted||C()){x.preventDefault();return}if(j.panningEnabled()&&j.userPanningEnabled()&&j.zoomingEnabled()&&j.userZoomingEnabled()){x.preventDefault(),t.data.wheelZooming=!0,clearTimeout(t.data.wheelTimeout),t.data.wheelTimeout=setTimeout(function(){t.data.wheelZooming=!1,t.redrawHint("eles",!0),t.redraw()},150);var Y;x.deltaY!=null?Y=x.deltaY/-250:x.wheelDeltaY!=null?Y=x.wheelDeltaY/1e3:Y=x.wheelDelta/1e3,Y=Y*t.wheelSensitivity;var ae=x.deltaMode===1;ae&&(Y*=33);var me=j.zoom()*Math.pow(10,Y);x.type==="gesturechange"&&(me=t.gestureStartZoom*x.scale),j.zoom({level:me,renderedPosition:{x:oe[0],y:oe[1]}}),j.emit(x.type==="gesturechange"?"pinchzoom":"scrollzoom")}}};t.registerBinding(t.container,"wheel",O,!0),t.registerBinding(e,"scroll",function(x){t.scrollingPage=!0,clearTimeout(t.scrollingPageTimeout),t.scrollingPageTimeout=setTimeout(function(){t.scrollingPage=!1},250)},!0),t.registerBinding(t.container,"gesturestart",function(x){t.gestureStartZoom=t.cy.zoom(),t.hasTouchStarted||x.preventDefault()},!0),t.registerBinding(t.container,"gesturechange",function(ee){t.hasTouchStarted||O(ee)},!0),t.registerBinding(t.container,"mouseout",function(x){var j=t.projectIntoViewport(x.clientX,x.clientY);t.cy.emit({originalEvent:x,type:"mouseout",position:{x:j[0],y:j[1]}})},!1),t.registerBinding(t.container,"mouseover",function(x){var j=t.projectIntoViewport(x.clientX,x.clientY);t.cy.emit({originalEvent:x,type:"mouseover",position:{x:j[0],y:j[1]}})},!1);var _,k,P,V,z,B,$,W,K,Q,X,J,q,L=function(x,j,G,F){return Math.sqrt((G-x)*(G-x)+(F-j)*(F-j))},U=function(x,j,G,F){return(G-x)*(G-x)+(F-j)*(F-j)},Z;t.registerBinding(t.container,"touchstart",Z=function(x){if(t.hasTouchStarted=!0,!!A(x)){w(),t.touchData.capture=!0,t.data.bgActivePosistion=void 0;var j=t.cy,G=t.touchData.now,F=t.touchData.earlier;if(x.touches[0]){var H=t.projectIntoViewport(x.touches[0].clientX,x.touches[0].clientY);G[0]=H[0],G[1]=H[1]}if(x.touches[1]){var H=t.projectIntoViewport(x.touches[1].clientX,x.touches[1].clientY);G[2]=H[0],G[3]=H[1]}if(x.touches[2]){var H=t.projectIntoViewport(x.touches[2].clientX,x.touches[2].clientY);G[4]=H[0],G[5]=H[1]}if(x.touches[1]){t.touchData.singleTouchMoved=!0,v(t.dragData.touchDragEles);var oe=t.findContainerClientCoords();K=oe[0],Q=oe[1],X=oe[2],J=oe[3],_=x.touches[0].clientX-K,k=x.touches[0].clientY-Q,P=x.touches[1].clientX-K,V=x.touches[1].clientY-Q,q=0<=_&&_<=X&&0<=P&&P<=X&&0<=k&&k<=J&&0<=V&&V<=J;var Y=j.pan(),ae=j.zoom();z=L(_,k,P,V),B=U(_,k,P,V),$=[(_+P)/2,(k+V)/2],W=[($[0]-Y.x)/ae,($[1]-Y.y)/ae];var me=200,Ie=me*me;if(B<Ie&&!x.touches[2]){var he=t.findNearestElement(G[0],G[1],!0,!0),De=t.findNearestElement(G[2],G[3],!0,!0);he&&he.isNode()?(he.activate().emit({originalEvent:x,type:"cxttapstart",position:{x:G[0],y:G[1]}}),t.touchData.start=he):De&&De.isNode()?(De.activate().emit({originalEvent:x,type:"cxttapstart",position:{x:G[0],y:G[1]}}),t.touchData.start=De):j.emit({originalEvent:x,type:"cxttapstart",position:{x:G[0],y:G[1]}}),t.touchData.start&&(t.touchData.start._private.grabbed=!1),t.touchData.cxt=!0,t.touchData.cxtDragged=!1,t.data.bgActivePosistion=void 0,t.redraw();return}}if(x.touches[2])j.boxSelectionEnabled()&&x.preventDefault();else if(!x.touches[1]){if(x.touches[0]){var Ce=t.findNearestElements(G[0],G[1],!0,!0),we=Ce[0];if(we!=null&&(we.activate(),t.touchData.start=we,t.touchData.starts=Ce,t.nodeIsGrabbable(we))){var nt=t.dragData.touchDragEles=j.collection(),ut=null;t.redrawHint("eles",!0),t.redrawHint("drag",!0),we.selected()?(ut=j.$(function(It){return It.selected()&&t.nodeIsGrabbable(It)}),m(ut,{addToList:nt})):g(we,{addToList:nt}),d(we);var tn=function(Zt){return{originalEvent:x,type:Zt,position:{x:G[0],y:G[1]}}};we.emit(tn("grabon")),ut?ut.forEach(function(It){It.emit(tn("grab"))}):we.emit(tn("grab"))}i(we,["touchstart","tapstart","vmousedown"],x,{x:G[0],y:G[1]}),we==null&&(t.data.bgActivePosistion={x:H[0],y:H[1]},t.redrawHint("select",!0),t.redraw()),t.touchData.singleTouchMoved=!1,t.touchData.singleTouchStartTime=+new Date,clearTimeout(t.touchData.tapholdTimeout),t.touchData.tapholdTimeout=setTimeout(function(){t.touchData.singleTouchMoved===!1&&!t.pinching&&!t.touchData.selecting&&i(t.touchData.start,["taphold"],x,{x:G[0],y:G[1]})},t.tapholdDuration)}}if(x.touches.length>=1){for(var nn=t.touchData.startPosition=[null,null,null,null,null,null],pt=0;pt<G.length;pt++)nn[pt]=F[pt]=G[pt];var Ct=x.touches[0];t.touchData.startGPosition=[Ct.clientX,Ct.clientY]}}},!1);var re;t.registerBinding(e,"touchmove",re=function(x){var j=t.touchData.capture;if(!(!j&&!A(x))){var G=t.selection,F=t.cy,H=t.touchData.now,oe=t.touchData.earlier,Y=F.zoom();if(x.touches[0]){var ae=t.projectIntoViewport(x.touches[0].clientX,x.touches[0].clientY);H[0]=ae[0],H[1]=ae[1]}if(x.touches[1]){var ae=t.projectIntoViewport(x.touches[1].clientX,x.touches[1].clientY);H[2]=ae[0],H[3]=ae[1]}if(x.touches[2]){var ae=t.projectIntoViewport(x.touches[2].clientX,x.touches[2].clientY);H[4]=ae[0],H[5]=ae[1]}var me=t.touchData.startGPosition,Ie;if(j&&x.touches[0]&&me){for(var he=[],De=0;De<H.length;De++)he[De]=H[De]-oe[De];var Ce=x.touches[0].clientX-me[0],we=Ce*Ce,nt=x.touches[0].clientY-me[1],ut=nt*nt,tn=we+ut;Ie=tn>=t.touchTapThreshold2}if(j&&t.touchData.cxt){x.preventDefault();var nn=x.touches[0].clientX-K,pt=x.touches[0].clientY-Q,Ct=x.touches[1].clientX-K,It=x.touches[1].clientY-Q,Zt=U(nn,pt,Ct,It),Yt=Zt/B,Hn=150,vn=Hn*Hn,zn=1.5,ir=zn*zn;if(Yt>=ir||Zt>=vn){t.touchData.cxt=!1,t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);var or={originalEvent:x,type:"cxttapend",position:{x:H[0],y:H[1]}};t.touchData.start?(t.touchData.start.unactivate().emit(or),t.touchData.start=null):F.emit(or)}}if(j&&t.touchData.cxt){var or={originalEvent:x,type:"cxtdrag",position:{x:H[0],y:H[1]}};t.data.bgActivePosistion=void 0,t.redrawHint("select",!0),t.touchData.start?t.touchData.start.emit(or):F.emit(or),t.touchData.start&&(t.touchData.start._private.grabbed=!1),t.touchData.cxtDragged=!0;var Ft=t.findNearestElement(H[0],H[1],!0,!0);(!t.touchData.cxtOver||Ft!==t.touchData.cxtOver)&&(t.touchData.cxtOver&&t.touchData.cxtOver.emit({originalEvent:x,type:"cxtdragout",position:{x:H[0],y:H[1]}}),t.touchData.cxtOver=Ft,Ft&&Ft.emit({originalEvent:x,type:"cxtdragover",position:{x:H[0],y:H[1]}}))}else if(j&&x.touches[2]&&F.boxSelectionEnabled())x.preventDefault(),t.data.bgActivePosistion=void 0,this.lastThreeTouch=+new Date,t.touchData.selecting||F.emit({originalEvent:x,type:"boxstart",position:{x:H[0],y:H[1]}}),t.touchData.selecting=!0,t.touchData.didSelect=!0,G[4]=1,!G||G.length===0||G[0]===void 0?(G[0]=(H[0]+H[2]+H[4])/3,G[1]=(H[1]+H[3]+H[5])/3,G[2]=(H[0]+H[2]+H[4])/3+1,G[3]=(H[1]+H[3]+H[5])/3+1):(G[2]=(H[0]+H[2]+H[4])/3,G[3]=(H[1]+H[3]+H[5])/3),t.redrawHint("select",!0),t.redraw();else if(j&&x.touches[1]&&!t.touchData.didSelect&&F.zoomingEnabled()&&F.panningEnabled()&&F.userZoomingEnabled()&&F.userPanningEnabled()){x.preventDefault(),t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);var St=t.dragData.touchDragEles;if(St){t.redrawHint("drag",!0);for(var Qt=0;Qt<St.length;Qt++){var ks=St[Qt]._private;ks.grabbed=!1,ks.rscratch.inDragLayer=!1}}var Un=t.touchData.start,nn=x.touches[0].clientX-K,pt=x.touches[0].clientY-Q,Ct=x.touches[1].clientX-K,It=x.touches[1].clientY-Q,Lp=L(nn,pt,Ct,It),$D=Lp/z;if(q){var jD=nn-_,HD=pt-k,zD=Ct-P,UD=It-V,qD=(jD+zD)/2,GD=(HD+UD)/2,Qo=F.zoom(),bc=Qo*$D,Os=F.pan(),Fp=W[0]*Qo+Os.x,Bp=W[1]*Qo+Os.y,WD={x:-bc/Qo*(Fp-Os.x-qD)+Fp,y:-bc/Qo*(Bp-Os.y-GD)+Bp};if(Un&&Un.active()){var St=t.dragData.touchDragEles;v(St),t.redrawHint("drag",!0),t.redrawHint("eles",!0),Un.unactivate().emit("freeon"),St.emit("free"),t.dragData.didDrag&&(Un.emit("dragfreeon"),St.emit("dragfree"))}F.viewport({zoom:bc,pan:WD,cancelOnFailedZoom:!0}),F.emit("pinchzoom"),z=Lp,_=nn,k=pt,P=Ct,V=It,t.pinching=!0}if(x.touches[0]){var ae=t.projectIntoViewport(x.touches[0].clientX,x.touches[0].clientY);H[0]=ae[0],H[1]=ae[1]}if(x.touches[1]){var ae=t.projectIntoViewport(x.touches[1].clientX,x.touches[1].clientY);H[2]=ae[0],H[3]=ae[1]}if(x.touches[2]){var ae=t.projectIntoViewport(x.touches[2].clientX,x.touches[2].clientY);H[4]=ae[0],H[5]=ae[1]}}else if(x.touches[0]&&!t.touchData.didSelect){var Sn=t.touchData.start,Dc=t.touchData.last,Ft;if(!t.hoverData.draggingEles&&!t.swipePanning&&(Ft=t.findNearestElement(H[0],H[1],!0,!0)),j&&Sn!=null&&x.preventDefault(),j&&Sn!=null&&t.nodeIsDraggable(Sn))if(Ie){var St=t.dragData.touchDragEles,Vp=!t.dragData.didDrag;Vp&&m(St,{inDragLayer:!0}),t.dragData.didDrag=!0;var Xo={x:0,y:0};if(ie(he[0])&&ie(he[1])&&(Xo.x+=he[0],Xo.y+=he[1],Vp)){t.redrawHint("eles",!0);var xn=t.touchData.dragDelta;xn&&ie(xn[0])&&ie(xn[1])&&(Xo.x+=xn[0],Xo.y+=xn[1])}t.hoverData.draggingEles=!0,St.silentShift(Xo).emit("position drag"),t.redrawHint("drag",!0),t.touchData.startPosition[0]==oe[0]&&t.touchData.startPosition[1]==oe[1]&&t.redrawHint("eles",!0),t.redraw()}else{var xn=t.touchData.dragDelta=t.touchData.dragDelta||[];xn.length===0?(xn.push(he[0]),xn.push(he[1])):(xn[0]+=he[0],xn[1]+=he[1])}if(i(Sn||Ft,["touchmove","tapdrag","vmousemove"],x,{x:H[0],y:H[1]}),(!Sn||!Sn.grabbed())&&Ft!=Dc&&(Dc&&Dc.emit({originalEvent:x,type:"tapdragout",position:{x:H[0],y:H[1]}}),Ft&&Ft.emit({originalEvent:x,type:"tapdragover",position:{x:H[0],y:H[1]}})),t.touchData.last=Ft,j)for(var Qt=0;Qt<H.length;Qt++)H[Qt]&&t.touchData.startPosition[Qt]&&Ie&&(t.touchData.singleTouchMoved=!0);if(j&&(Sn==null||Sn.pannable())&&F.panningEnabled()&&F.userPanningEnabled()){var ZD=a(Sn,t.touchData.starts);ZD&&(x.preventDefault(),t.data.bgActivePosistion||(t.data.bgActivePosistion=Ro(t.touchData.startPosition)),t.swipePanning?(F.panBy({x:he[0]*Y,y:he[1]*Y}),F.emit("dragpan")):Ie&&(t.swipePanning=!0,F.panBy({x:Ce*Y,y:nt*Y}),F.emit("dragpan"),Sn&&(Sn.unactivate(),t.redrawHint("select",!0),t.touchData.start=null)));var ae=t.projectIntoViewport(x.touches[0].clientX,x.touches[0].clientY);H[0]=ae[0],H[1]=ae[1]}}for(var De=0;De<H.length;De++)oe[De]=H[De];j&&x.touches.length>0&&!t.hoverData.draggingEles&&!t.swipePanning&&t.data.bgActivePosistion!=null&&(t.data.bgActivePosistion=void 0,t.redrawHint("select",!0),t.redraw())}},!1);var ve;t.registerBinding(e,"touchcancel",ve=function(x){var j=t.touchData.start;t.touchData.capture=!1,j&&j.unactivate()});var ne,te,de,ce;if(t.registerBinding(e,"touchend",ne=function(x){var j=t.touchData.start,G=t.touchData.capture;if(G)x.touches.length===0&&(t.touchData.capture=!1),x.preventDefault();else return;var F=t.selection;t.swipePanning=!1,t.hoverData.draggingEles=!1;var H=t.cy,oe=H.zoom(),Y=t.touchData.now,ae=t.touchData.earlier;if(x.touches[0]){var me=t.projectIntoViewport(x.touches[0].clientX,x.touches[0].clientY);Y[0]=me[0],Y[1]=me[1]}if(x.touches[1]){var me=t.projectIntoViewport(x.touches[1].clientX,x.touches[1].clientY);Y[2]=me[0],Y[3]=me[1]}if(x.touches[2]){var me=t.projectIntoViewport(x.touches[2].clientX,x.touches[2].clientY);Y[4]=me[0],Y[5]=me[1]}j&&j.unactivate();var Ie;if(t.touchData.cxt){if(Ie={originalEvent:x,type:"cxttapend",position:{x:Y[0],y:Y[1]}},j?j.emit(Ie):H.emit(Ie),!t.touchData.cxtDragged){var he={originalEvent:x,type:"cxttap",position:{x:Y[0],y:Y[1]}};j?j.emit(he):H.emit(he)}t.touchData.start&&(t.touchData.start._private.grabbed=!1),t.touchData.cxt=!1,t.touchData.start=null,t.redraw();return}if(!x.touches[2]&&H.boxSelectionEnabled()&&t.touchData.selecting){t.touchData.selecting=!1;var De=H.collection(t.getAllInBox(F[0],F[1],F[2],F[3]));F[0]=void 0,F[1]=void 0,F[2]=void 0,F[3]=void 0,F[4]=0,t.redrawHint("select",!0),H.emit({type:"boxend",originalEvent:x,position:{x:Y[0],y:Y[1]}});var Ce=function(vn){return vn.selectable()&&!vn.selected()};De.emit("box").stdFilter(Ce).select().emit("boxselect"),De.nonempty()&&t.redrawHint("eles",!0),t.redraw()}if(j?.unactivate(),x.touches[2])t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);else if(!x.touches[1]){if(!x.touches[0]){if(!x.touches[0]){t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);var we=t.dragData.touchDragEles;if(j!=null){var nt=j._private.grabbed;v(we),t.redrawHint("drag",!0),t.redrawHint("eles",!0),nt&&(j.emit("freeon"),we.emit("free"),t.dragData.didDrag&&(j.emit("dragfreeon"),we.emit("dragfree"))),i(j,["touchend","tapend","vmouseup","tapdragout"],x,{x:Y[0],y:Y[1]}),j.unactivate(),t.touchData.start=null}else{var ut=t.findNearestElement(Y[0],Y[1],!0,!0);i(ut,["touchend","tapend","vmouseup","tapdragout"],x,{x:Y[0],y:Y[1]})}var tn=t.touchData.startPosition[0]-Y[0],nn=tn*tn,pt=t.touchData.startPosition[1]-Y[1],Ct=pt*pt,It=nn+Ct,Zt=It*oe*oe;t.touchData.singleTouchMoved||(j||H.$(":selected").unselect(["tapunselect"]),i(j,["tap","vclick"],x,{x:Y[0],y:Y[1]}),te=!1,x.timeStamp-ce<=H.multiClickDebounceTime()?(de&&clearTimeout(de),te=!0,ce=null,i(j,["dbltap","vdblclick"],x,{x:Y[0],y:Y[1]})):(de=setTimeout(function(){te||i(j,["onetap","voneclick"],x,{x:Y[0],y:Y[1]})},H.multiClickDebounceTime()),ce=x.timeStamp)),j!=null&&!t.dragData.didDrag&&j._private.selectable&&Zt<t.touchTapThreshold2&&!t.pinching&&(H.selectionType()==="single"?(H.$(n).unmerge(j).unselect(["tapunselect"]),j.select(["tapselect"])):j.selected()?j.unselect(["tapunselect"]):j.select(["tapselect"]),t.redrawHint("eles",!0)),t.touchData.singleTouchMoved=!0}}}for(var Yt=0;Yt<Y.length;Yt++)ae[Yt]=Y[Yt];t.dragData.didDrag=!1,x.touches.length===0&&(t.touchData.dragDelta=[],t.touchData.startPosition=[null,null,null,null,null,null],t.touchData.startGPosition=null,t.touchData.didSelect=!1),x.touches.length<2&&(x.touches.length===1&&(t.touchData.startGPosition=[x.touches[0].clientX,x.touches[0].clientY]),t.pinching=!1,t.redrawHint("eles",!0),t.redraw())},!1),typeof TouchEvent>"u"){var se=[],ge=function(x){return{clientX:x.clientX,clientY:x.clientY,force:1,identifier:x.pointerId,pageX:x.pageX,pageY:x.pageY,radiusX:x.width/2,radiusY:x.height/2,screenX:x.screenX,screenY:x.screenY,target:x.target}},Ke=function(x){return{event:x,touch:ge(x)}},$e=function(x){se.push(Ke(x))},Re=function(x){for(var j=0;j<se.length;j++){var G=se[j];if(G.event.pointerId===x.pointerId){se.splice(j,1);return}}},Qe=function(x){var j=se.filter(function(G){return G.event.pointerId===x.pointerId})[0];j.event=x,j.touch=ge(x)},ke=function(x){x.touches=se.map(function(j){return j.touch})},qe=function(x){return x.pointerType==="mouse"||x.pointerType===4};t.registerBinding(t.container,"pointerdown",function(ee){qe(ee)||(ee.preventDefault(),$e(ee),ke(ee),Z(ee))}),t.registerBinding(t.container,"pointerup",function(ee){qe(ee)||(Re(ee),ke(ee),ne(ee))}),t.registerBinding(t.container,"pointercancel",function(ee){qe(ee)||(Re(ee),ke(ee),ve(ee))}),t.registerBinding(t.container,"pointermove",function(ee){qe(ee)||(ee.preventDefault(),Qe(ee),ke(ee),re(ee))})}};var wr={};wr.generatePolygon=function(t,e){return this.nodeShapes[t]={renderer:this,name:t,points:e,draw:function(r,i,o,a,s,u){this.renderer.nodeShapeImpl("polygon",r,i,o,a,s,this.points)},intersectLine:function(r,i,o,a,s,u,l,c){return ys(s,u,this.points,r,i,o/2,a/2,l)},checkPoint:function(r,i,o,a,s,u,l,c){return mr(r,i,this.points,u,l,a,s,[0,-1],o)}}};wr.generateEllipse=function(){return this.nodeShapes.ellipse={renderer:this,name:"ellipse",draw:function(e,n,r,i,o,a){this.renderer.nodeShapeImpl(this.name,e,n,r,i,o)},intersectLine:function(e,n,r,i,o,a,s,u){return yA(o,a,e,n,r/2+s,i/2+s)},checkPoint:function(e,n,r,i,o,a,s,u){return Ei(e,n,i,o,a,s,r)}}};wr.generateRoundPolygon=function(t,e){return this.nodeShapes[t]={renderer:this,name:t,points:e,getOrCreateCorners:function(r,i,o,a,s,u,l){if(u[l]!==void 0&&u[l+"-cx"]===r&&u[l+"-cy"]===i)return u[l];u[l]=new Array(e.length/2),u[l+"-cx"]=r,u[l+"-cy"]=i;var c=o/2,d=a/2;s=s==="auto"?Sb(o,a):s;for(var f=new Array(e.length/2),h=0;h<e.length/2;h++)f[h]={x:r+c*e[h*2],y:i+d*e[h*2+1]};var p,m,g,v,y=f.length;for(m=f[y-1],p=0;p<y;p++)g=f[p%y],v=f[(p+1)%y],u[l][p]=kp(m,g,v,s),m=g,g=v;return u[l]},draw:function(r,i,o,a,s,u,l){this.renderer.nodeShapeImpl("round-polygon",r,i,o,a,s,this.points,this.getOrCreateCorners(i,o,a,s,u,l,"drawCorners"))},intersectLine:function(r,i,o,a,s,u,l,c,d){return wA(s,u,this.points,r,i,o,a,l,this.getOrCreateCorners(r,i,o,a,c,d,"corners"))},checkPoint:function(r,i,o,a,s,u,l,c,d){return mA(r,i,this.points,u,l,a,s,this.getOrCreateCorners(u,l,a,s,c,d,"corners"))}}};wr.generateRoundRectangle=function(){return this.nodeShapes["round-rectangle"]=this.nodeShapes.roundrectangle={renderer:this,name:"round-rectangle",points:Kt(4,0),draw:function(e,n,r,i,o,a){this.renderer.nodeShapeImpl(this.name,e,n,r,i,o,this.points,a)},intersectLine:function(e,n,r,i,o,a,s,u){return Cb(o,a,e,n,r,i,s,u)},checkPoint:function(e,n,r,i,o,a,s,u){var l=i/2,c=o/2;u=u==="auto"?xi(i,o):u,u=Math.min(l,c,u);var d=u*2;return!!(mr(e,n,this.points,a,s,i,o-d,[0,-1],r)||mr(e,n,this.points,a,s,i-d,o,[0,-1],r)||Ei(e,n,d,d,a-l+u,s-c+u,r)||Ei(e,n,d,d,a+l-u,s-c+u,r)||Ei(e,n,d,d,a+l-u,s+c-u,r)||Ei(e,n,d,d,a-l+u,s+c-u,r))}}};wr.generateCutRectangle=function(){return this.nodeShapes["cut-rectangle"]=this.nodeShapes.cutrectangle={renderer:this,name:"cut-rectangle",cornerLength:Dp(),points:Kt(4,0),draw:function(e,n,r,i,o,a){this.renderer.nodeShapeImpl(this.name,e,n,r,i,o,null,a)},generateCutTrianglePts:function(e,n,r,i,o){var a=o==="auto"?this.cornerLength:o,s=n/2,u=e/2,l=r-u,c=r+u,d=i-s,f=i+s;return{topLeft:[l,d+a,l+a,d,l+a,d+a],topRight:[c-a,d,c,d+a,c-a,d+a],bottomRight:[c,f-a,c-a,f,c-a,f-a],bottomLeft:[l+a,f,l,f-a,l+a,f-a]}},intersectLine:function(e,n,r,i,o,a,s,u){var l=this.generateCutTrianglePts(r+2*s,i+2*s,e,n,u),c=[].concat.apply([],[l.topLeft.splice(0,4),l.topRight.splice(0,4),l.bottomRight.splice(0,4),l.bottomLeft.splice(0,4)]);return ys(o,a,c,e,n)},checkPoint:function(e,n,r,i,o,a,s,u){var l=u==="auto"?this.cornerLength:u;if(mr(e,n,this.points,a,s,i,o-2*l,[0,-1],r)||mr(e,n,this.points,a,s,i-2*l,o,[0,-1],r))return!0;var c=this.generateCutTrianglePts(i,o,a,s);return Jt(e,n,c.topLeft)||Jt(e,n,c.topRight)||Jt(e,n,c.bottomRight)||Jt(e,n,c.bottomLeft)}}};wr.generateBarrel=function(){return this.nodeShapes.barrel={renderer:this,name:"barrel",points:Kt(4,0),draw:function(e,n,r,i,o,a){this.renderer.nodeShapeImpl(this.name,e,n,r,i,o)},intersectLine:function(e,n,r,i,o,a,s,u){var l=.15,c=.5,d=.85,f=this.generateBarrelBezierPts(r+2*s,i+2*s,e,n),h=function(g){var v=ko({x:g[0],y:g[1]},{x:g[2],y:g[3]},{x:g[4],y:g[5]},l),y=ko({x:g[0],y:g[1]},{x:g[2],y:g[3]},{x:g[4],y:g[5]},c),w=ko({x:g[0],y:g[1]},{x:g[2],y:g[3]},{x:g[4],y:g[5]},d);return[g[0],g[1],v.x,v.y,y.x,y.y,w.x,w.y,g[4],g[5]]},p=[].concat(h(f.topLeft),h(f.topRight),h(f.bottomRight),h(f.bottomLeft));return ys(o,a,p,e,n)},generateBarrelBezierPts:function(e,n,r,i){var o=n/2,a=e/2,s=r-a,u=r+a,l=i-o,c=i+o,d=Qh(e,n),f=d.heightOffset,h=d.widthOffset,p=d.ctrlPtOffsetPct*e,m={topLeft:[s,l+f,s+p,l,s+h,l],topRight:[u-h,l,u-p,l,u,l+f],bottomRight:[u,c-f,u-p,c,u-h,c],bottomLeft:[s+h,c,s+p,c,s,c-f]};return m.topLeft.isTop=!0,m.topRight.isTop=!0,m.bottomLeft.isBottom=!0,m.bottomRight.isBottom=!0,m},checkPoint:function(e,n,r,i,o,a,s,u){var l=Qh(i,o),c=l.heightOffset,d=l.widthOffset;if(mr(e,n,this.points,a,s,i,o-2*c,[0,-1],r)||mr(e,n,this.points,a,s,i-2*d,o,[0,-1],r))return!0;for(var f=this.generateBarrelBezierPts(i,o,a,s),h=function(S,C,A){var M=A[4],N=A[2],R=A[0],T=A[5],O=A[1],_=Math.min(M,R),k=Math.max(M,R),P=Math.min(T,O),V=Math.max(T,O);if(_<=S&&S<=k&&P<=C&&C<=V){var z=bA(M,N,R),B=hA(z[0],z[1],z[2],S),$=B.filter(function(W){return 0<=W&&W<=1});if($.length>0)return $[0]}return null},p=Object.keys(f),m=0;m<p.length;m++){var g=p[m],v=f[g],y=h(e,n,v);if(y!=null){var w=v[5],b=v[3],I=v[1],E=Tt(w,b,I,y);if(v.isTop&&E<=n||v.isBottom&&n<=E)return!0}}return!1}}};wr.generateBottomRoundrectangle=function(){return this.nodeShapes["bottom-round-rectangle"]=this.nodeShapes.bottomroundrectangle={renderer:this,name:"bottom-round-rectangle",points:Kt(4,0),draw:function(e,n,r,i,o,a){this.renderer.nodeShapeImpl(this.name,e,n,r,i,o,this.points,a)},intersectLine:function(e,n,r,i,o,a,s,u){var l=e-(r/2+s),c=n-(i/2+s),d=c,f=e+(r/2+s),h=Fr(o,a,e,n,l,c,f,d,!1);return h.length>0?h:Cb(o,a,e,n,r,i,s,u)},checkPoint:function(e,n,r,i,o,a,s,u){u=u==="auto"?xi(i,o):u;var l=2*u;if(mr(e,n,this.points,a,s,i,o-l,[0,-1],r)||mr(e,n,this.points,a,s,i-l,o,[0,-1],r))return!0;var c=i/2+2*r,d=o/2+2*r,f=[a-c,s-d,a-c,s,a+c,s,a+c,s-d];return!!(Jt(e,n,f)||Ei(e,n,l,l,a+i/2-u,s+o/2-u,r)||Ei(e,n,l,l,a-i/2+u,s+o/2-u,r))}}};wr.registerNodeShapes=function(){var t=this.nodeShapes={},e=this;this.generateEllipse(),this.generatePolygon("triangle",Kt(3,0)),this.generateRoundPolygon("round-triangle",Kt(3,0)),this.generatePolygon("rectangle",Kt(4,0)),t.square=t.rectangle,this.generateRoundRectangle(),this.generateCutRectangle(),this.generateBarrel(),this.generateBottomRoundrectangle();{var n=[0,1,1,0,0,-1,-1,0];this.generatePolygon("diamond",n),this.generateRoundPolygon("round-diamond",n)}this.generatePolygon("pentagon",Kt(5,0)),this.generateRoundPolygon("round-pentagon",Kt(5,0)),this.generatePolygon("hexagon",Kt(6,0)),this.generateRoundPolygon("round-hexagon",Kt(6,0)),this.generatePolygon("heptagon",Kt(7,0)),this.generateRoundPolygon("round-heptagon",Kt(7,0)),this.generatePolygon("octagon",Kt(8,0)),this.generateRoundPolygon("round-octagon",Kt(8,0));var r=new Array(20);{var i=Kh(5,0),o=Kh(5,Math.PI/5),a=.5*(3-Math.sqrt(5));a*=1.57;for(var s=0;s<o.length/2;s++)o[s*2]*=a,o[s*2+1]*=a;for(var s=0;s<20/4;s++)r[s*4]=i[s*2],r[s*4+1]=i[s*2+1],r[s*4+2]=o[s*2],r[s*4+3]=o[s*2+1]}r=Ib(r),this.generatePolygon("star",r),this.generatePolygon("vee",[-1,-1,0,-.333,1,-1,0,1]),this.generatePolygon("rhomboid",[-1,-1,.333,-1,1,1,-.333,1]),this.generatePolygon("right-rhomboid",[-.333,-1,1,-1,.333,1,-1,1]),this.nodeShapes.concavehexagon=this.generatePolygon("concave-hexagon",[-1,-.95,-.75,0,-1,.95,1,.95,.75,0,1,-.95]);{var u=[-1,-1,.25,-1,1,0,.25,1,-1,1];this.generatePolygon("tag",u),this.generateRoundPolygon("round-tag",u)}t.makePolygon=function(l){var c=l.join("$"),d="polygon-"+c,f;return(f=this[d])?f:e.generatePolygon(d,l)}};var Rs={};Rs.timeToRender=function(){return this.redrawTotalTime/this.redrawCount};Rs.redraw=function(t){t=t||yb();var e=this;e.averageRedrawTime===void 0&&(e.averageRedrawTime=0),e.lastRedrawTime===void 0&&(e.lastRedrawTime=0),e.lastDrawTime===void 0&&(e.lastDrawTime=0),e.requestedFrame=!0,e.renderOptions=t};Rs.beforeRender=function(t,e){if(!this.destroyed){e==null&&dt("Priority is not optional for beforeRender");var n=this.beforeRenderCallbacks;n.push({fn:t,priority:e}),n.sort(function(r,i){return i.priority-r.priority})}};var zw=function(e,n,r){for(var i=e.beforeRenderCallbacks,o=0;o<i.length;o++)i[o].fn(n,r)};Rs.startRenderLoop=function(){var t=this,e=t.cy;if(!t.renderLoopStarted){t.renderLoopStarted=!0;var n=function r(i){if(!t.destroyed){if(!e.batching())if(t.requestedFrame&&!t.skipFrame){zw(t,!0,i);var o=vr();t.render(t.renderOptions);var a=t.lastDrawTime=vr();t.averageRedrawTime===void 0&&(t.averageRedrawTime=a-o),t.redrawCount===void 0&&(t.redrawCount=0),t.redrawCount++,t.redrawTotalTime===void 0&&(t.redrawTotalTime=0);var s=a-o;t.redrawTotalTime+=s,t.lastRedrawTime=s,t.averageRedrawTime=t.averageRedrawTime/2+s/2,t.requestedFrame=!1}else zw(t,!1,i);t.skipFrame=!1,ql(r)}};ql(n)}};var tP=function(e){this.init(e)},CD=tP,Yo=CD.prototype;Yo.clientFunctions=["redrawHint","render","renderTo","matchCanvasSize","nodeShapeImpl","arrowShapeImpl"];Yo.init=function(t){var e=this;e.options=t,e.cy=t.cy;var n=e.container=t.cy.container(),r=e.cy.window();if(r){var i=r.document,o=i.head,a="__________cytoscape_stylesheet",s="__________cytoscape_container",u=i.getElementById(a)!=null;if(n.className.indexOf(s)<0&&(n.className=(n.className||"")+" "+s),!u){var l=i.createElement("style");l.id=a,l.textContent="."+s+" { position: relative; }",o.insertBefore(l,o.children[0])}var c=r.getComputedStyle(n),d=c.getPropertyValue("position");d==="static"&&Ye("A Cytoscape container has style position:static and so can not use UI extensions properly")}e.selection=[void 0,void 0,void 0,void 0,0],e.bezierProjPcts=[.05,.225,.4,.5,.6,.775,.95],e.hoverData={down:null,last:null,downTime:null,triggerMode:null,dragging:!1,initialPan:[null,null],capture:!1},e.dragData={possibleDragElements:[]},e.touchData={start:null,capture:!1,startPosition:[null,null,null,null,null,null],singleTouchStartTime:null,singleTouchMoved:!0,now:[null,null,null,null,null,null],earlier:[null,null,null,null,null,null]},e.redraws=0,e.showFps=t.showFps,e.debug=t.debug,e.hideEdgesOnViewport=t.hideEdgesOnViewport,e.textureOnViewport=t.textureOnViewport,e.wheelSensitivity=t.wheelSensitivity,e.motionBlurEnabled=t.motionBlur,e.forcedPixelRatio=ie(t.pixelRatio)?t.pixelRatio:null,e.motionBlur=t.motionBlur,e.motionBlurOpacity=t.motionBlurOpacity,e.motionBlurTransparency=1-e.motionBlurOpacity,e.motionBlurPxRatio=1,e.mbPxRBlurry=1,e.minMbLowQualFrames=4,e.fullQualityMb=!1,e.clearedForMotionBlur=[],e.desktopTapThreshold=t.desktopTapThreshold,e.desktopTapThreshold2=t.desktopTapThreshold*t.desktopTapThreshold,e.touchTapThreshold=t.touchTapThreshold,e.touchTapThreshold2=t.touchTapThreshold*t.touchTapThreshold,e.tapholdDuration=500,e.bindings=[],e.beforeRenderCallbacks=[],e.beforeRenderPriorities={animations:400,eleCalcs:300,eleTxrDeq:200,lyrTxrDeq:150,lyrTxrSkip:100},e.registerNodeShapes(),e.registerArrowShapes(),e.registerCalculationListeners()};Yo.notify=function(t,e){var n=this,r=n.cy;if(!this.destroyed){if(t==="init"){n.load();return}if(t==="destroy"){n.destroy();return}(t==="add"||t==="remove"||t==="move"&&r.hasCompoundNodes()||t==="load"||t==="zorder"||t==="mount")&&n.invalidateCachedZSortedEles(),t==="viewport"&&n.redrawHint("select",!0),(t==="load"||t==="resize"||t==="mount")&&(n.invalidateContainerClientCoordsCache(),n.matchCanvasSize(n.container)),n.redrawHint("eles",!0),n.redrawHint("drag",!0),this.startRenderLoop(),this.redraw()}};Yo.destroy=function(){var t=this;t.destroyed=!0,t.cy.stopAnimationLoop();for(var e=0;e<t.bindings.length;e++){var n=t.bindings[e],r=n,i=r.target;(i.off||i.removeEventListener).apply(i,r.args)}if(t.bindings=[],t.beforeRenderCallbacks=[],t.onUpdateEleCalcsFns=[],t.removeObserver&&t.removeObserver.disconnect(),t.styleObserver&&t.styleObserver.disconnect(),t.resizeObserver&&t.resizeObserver.disconnect(),t.labelCalcDiv)try{document.body.removeChild(t.labelCalcDiv)}catch{}};Yo.isHeadless=function(){return!1};[_p,DD,ED,Zo,wr,Rs].forEach(function(t){ye(Yo,t)});var Wh=1e3/60,ID={setupDequeueing:function(e){return function(){var r=this,i=this.renderer;if(!r.dequeueingSetup){r.dequeueingSetup=!0;var o=rc(function(){i.redrawHint("eles",!0),i.redrawHint("drag",!0),i.redraw()},e.deqRedrawThreshold),a=function(l,c){var d=vr(),f=i.averageRedrawTime,h=i.lastRedrawTime,p=[],m=i.cy.extent(),g=i.getPixelRatio();for(l||i.flushRenderedStyleQueue();;){var v=vr(),y=v-d,w=v-c;if(h<Wh){var b=Wh-(l?f:0);if(w>=e.deqFastCost*b)break}else if(l){if(y>=e.deqCost*h||y>=e.deqAvgCost*f)break}else if(w>=e.deqNoDrawCost*Wh)break;var I=e.deq(r,g,m);if(I.length>0)for(var E=0;E<I.length;E++)p.push(I[E]);else break}p.length>0&&(e.onDeqd(r,p),!l&&e.shouldRedraw(r,p,g,m)&&o())},s=e.priority||mp;i.beforeRender(a,s(r))}}}},nP=function(){function t(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Gl;fp(this,t),this.idsByKey=new er,this.keyForId=new er,this.cachesByLvl=new er,this.lvls=[],this.getKey=e,this.doesEleInvalidateKey=n}return hp(t,[{key:"getIdsFor",value:function(n){n==null&&dt("Can not get id list for null key");var r=this.idsByKey,i=this.idsByKey.get(n);return i||(i=new jo,r.set(n,i)),i}},{key:"addIdForKey",value:function(n,r){n!=null&&this.getIdsFor(n).add(r)}},{key:"deleteIdForKey",value:function(n,r){n!=null&&this.getIdsFor(n).delete(r)}},{key:"getNumberOfIdsForKey",value:function(n){return n==null?0:this.getIdsFor(n).size}},{key:"updateKeyMappingFor",value:function(n){var r=n.id(),i=this.keyForId.get(r),o=this.getKey(n);this.deleteIdForKey(i,r),this.addIdForKey(o,r),this.keyForId.set(r,o)}},{key:"deleteKeyMappingFor",value:function(n){var r=n.id(),i=this.keyForId.get(r);this.deleteIdForKey(i,r),this.keyForId.delete(r)}},{key:"keyHasChangedFor",value:function(n){var r=n.id(),i=this.keyForId.get(r),o=this.getKey(n);return i!==o}},{key:"isInvalid",value:function(n){return this.keyHasChangedFor(n)||this.doesEleInvalidateKey(n)}},{key:"getCachesAt",value:function(n){var r=this.cachesByLvl,i=this.lvls,o=r.get(n);return o||(o=new er,r.set(n,o),i.push(n)),o}},{key:"getCache",value:function(n,r){return this.getCachesAt(r).get(n)}},{key:"get",value:function(n,r){var i=this.getKey(n),o=this.getCache(i,r);return o!=null&&this.updateKeyMappingFor(n),o}},{key:"getForCachedKey",value:function(n,r){var i=this.keyForId.get(n.id()),o=this.getCache(i,r);return o}},{key:"hasCache",value:function(n,r){return this.getCachesAt(r).has(n)}},{key:"has",value:function(n,r){var i=this.getKey(n);return this.hasCache(i,r)}},{key:"setCache",value:function(n,r,i){i.key=n,this.getCachesAt(r).set(n,i)}},{key:"set",value:function(n,r,i){var o=this.getKey(n);this.setCache(o,r,i),this.updateKeyMappingFor(n)}},{key:"deleteCache",value:function(n,r){this.getCachesAt(r).delete(n)}},{key:"delete",value:function(n,r){var i=this.getKey(n);this.deleteCache(i,r)}},{key:"invalidateKey",value:function(n){var r=this;this.lvls.forEach(function(i){return r.deleteCache(n,i)})}},{key:"invalidate",value:function(n){var r=n.id(),i=this.keyForId.get(r);this.deleteKeyMappingFor(n);var o=this.doesEleInvalidateKey(n);return o&&this.invalidateKey(i),o||this.getNumberOfIdsForKey(i)===0}}]),t}(),Uw=25,Ol=50,zl=-4,up=3,rP=7.99,iP=8,oP=1024,aP=1024,sP=1024,uP=.2,lP=.8,cP=10,dP=.15,fP=.1,hP=.9,pP=.9,gP=100,vP=1,_o={dequeue:"dequeue",downscale:"downscale",highQuality:"highQuality"},mP=Pt({getKey:null,doesEleInvalidateKey:Gl,drawElement:null,getBoundingBox:null,getRotationPoint:null,getRotationOffset:null,isVisible:gb,allowEdgeTxrCaching:!0,allowParentTxrCaching:!0}),cs=function(e,n){var r=this;r.renderer=e,r.onDequeues=[];var i=mP(n);ye(r,i),r.lookup=new nP(i.getKey,i.doesEleInvalidateKey),r.setupDequeueing()},Et=cs.prototype;Et.reasons=_o;Et.getTextureQueue=function(t){var e=this;return e.eleImgCaches=e.eleImgCaches||{},e.eleImgCaches[t]=e.eleImgCaches[t]||[]};Et.getRetiredTextureQueue=function(t){var e=this,n=e.eleImgCaches.retired=e.eleImgCaches.retired||{},r=n[t]=n[t]||[];return r};Et.getElementQueue=function(){var t=this,e=t.eleCacheQueue=t.eleCacheQueue||new Ts(function(n,r){return r.reqs-n.reqs});return e};Et.getElementKeyToQueue=function(){var t=this,e=t.eleKeyToCacheQueue=t.eleKeyToCacheQueue||{};return e};Et.getElement=function(t,e,n,r,i){var o=this,a=this.renderer,s=a.cy.zoom(),u=this.lookup;if(!e||e.w===0||e.h===0||isNaN(e.w)||isNaN(e.h)||!t.visible()||t.removed()||!o.allowEdgeTxrCaching&&t.isEdge()||!o.allowParentTxrCaching&&t.isParent())return null;if(r==null&&(r=Math.ceil(wp(s*n))),r<zl)r=zl;else if(s>=rP||r>up)return null;var l=Math.pow(2,r),c=e.h*l,d=e.w*l,f=a.eleTextBiggerThanMin(t,l);if(!this.isVisible(t,f))return null;var h=u.get(t,r);if(h&&h.invalidated&&(h.invalidated=!1,h.texture.invalidatedWidth-=h.width),h)return h;var p;if(c<=Uw?p=Uw:c<=Ol?p=Ol:p=Math.ceil(c/Ol)*Ol,c>sP||d>aP)return null;var m=o.getTextureQueue(p),g=m[m.length-2],v=function(){return o.recycleTexture(p,d)||o.addTexture(p,d)};g||(g=m[m.length-1]),g||(g=v()),g.width-g.usedWidth<d&&(g=v());for(var y=function(_){return _&&_.scaledLabelShown===f},w=i&&i===_o.dequeue,b=i&&i===_o.highQuality,I=i&&i===_o.downscale,E,D=r+1;D<=up;D++){var S=u.get(t,D);if(S){E=S;break}}var C=E&&E.level===r+1?E:null,A=function(){g.context.drawImage(C.texture.canvas,C.x,0,C.width,C.height,g.usedWidth,0,d,c)};if(g.context.setTransform(1,0,0,1,0,0),g.context.clearRect(g.usedWidth,0,d,p),y(C))A();else if(y(E))if(b){for(var M=E.level;M>r;M--)C=o.getElement(t,e,n,M,_o.downscale);A()}else return o.queueElement(t,E.level-1),E;else{var N;if(!w&&!b&&!I)for(var R=r-1;R>=zl;R--){var T=u.get(t,R);if(T){N=T;break}}if(y(N))return o.queueElement(t,r),N;g.context.translate(g.usedWidth,0),g.context.scale(l,l),this.drawElement(g.context,t,e,f,!1),g.context.scale(1/l,1/l),g.context.translate(-g.usedWidth,0)}return h={x:g.usedWidth,texture:g,level:r,scale:l,width:d,height:c,scaledLabelShown:f},g.usedWidth+=Math.ceil(d+iP),g.eleCaches.push(h),u.set(t,r,h),o.checkTextureFullness(g),h};Et.invalidateElements=function(t){for(var e=0;e<t.length;e++)this.invalidateElement(t[e])};Et.invalidateElement=function(t){var e=this,n=e.lookup,r=[],i=n.isInvalid(t);if(i){for(var o=zl;o<=up;o++){var a=n.getForCachedKey(t,o);a&&r.push(a)}var s=n.invalidate(t);if(s)for(var u=0;u<r.length;u++){var l=r[u],c=l.texture;c.invalidatedWidth+=l.width,l.invalidated=!0,e.checkTextureUtility(c)}e.removeFromQueue(t)}};Et.checkTextureUtility=function(t){t.invalidatedWidth>=uP*t.width&&this.retireTexture(t)};Et.checkTextureFullness=function(t){var e=this,n=e.getTextureQueue(t.height);t.usedWidth/t.width>lP&&t.fullnessChecks>=cP?jr(n,t):t.fullnessChecks++};Et.retireTexture=function(t){var e=this,n=t.height,r=e.getTextureQueue(n),i=this.lookup;jr(r,t),t.retired=!0;for(var o=t.eleCaches,a=0;a<o.length;a++){var s=o[a];i.deleteCache(s.key,s.level)}yp(o);var u=e.getRetiredTextureQueue(n);u.push(t)};Et.addTexture=function(t,e){var n=this,r=n.getTextureQueue(t),i={};return r.push(i),i.eleCaches=[],i.height=t,i.width=Math.max(oP,e),i.usedWidth=0,i.invalidatedWidth=0,i.fullnessChecks=0,i.canvas=n.renderer.makeOffscreenCanvas(i.width,i.height),i.context=i.canvas.getContext("2d"),i};Et.recycleTexture=function(t,e){for(var n=this,r=n.getTextureQueue(t),i=n.getRetiredTextureQueue(t),o=0;o<i.length;o++){var a=i[o];if(a.width>=e)return a.retired=!1,a.usedWidth=0,a.invalidatedWidth=0,a.fullnessChecks=0,yp(a.eleCaches),a.context.setTransform(1,0,0,1,0,0),a.context.clearRect(0,0,a.width,a.height),jr(i,a),r.push(a),a}};Et.queueElement=function(t,e){var n=this,r=n.getElementQueue(),i=n.getElementKeyToQueue(),o=this.getKey(t),a=i[o];if(a)a.level=Math.max(a.level,e),a.eles.merge(t),a.reqs++,r.updateItem(a);else{var s={eles:t.spawn().merge(t),level:e,reqs:1,key:o};r.push(s),i[o]=s}};Et.dequeue=function(t){for(var e=this,n=e.getElementQueue(),r=e.getElementKeyToQueue(),i=[],o=e.lookup,a=0;a<vP&&n.size()>0;a++){var s=n.pop(),u=s.key,l=s.eles[0],c=o.hasCache(l,s.level);if(r[u]=null,c)continue;i.push(s);var d=e.getBoundingBox(l);e.getElement(l,d,t,s.level,_o.dequeue)}return i};Et.removeFromQueue=function(t){var e=this,n=e.getElementQueue(),r=e.getElementKeyToQueue(),i=this.getKey(t),o=r[i];o!=null&&(o.eles.length===1?(o.reqs=vp,n.updateItem(o),n.pop(),r[i]=null):o.eles.unmerge(t))};Et.onDequeue=function(t){this.onDequeues.push(t)};Et.offDequeue=function(t){jr(this.onDequeues,t)};Et.setupDequeueing=ID.setupDequeueing({deqRedrawThreshold:gP,deqCost:dP,deqAvgCost:fP,deqNoDrawCost:hP,deqFastCost:pP,deq:function(e,n,r){return e.dequeue(n,r)},onDeqd:function(e,n){for(var r=0;r<e.onDequeues.length;r++){var i=e.onDequeues[r];i(n)}},shouldRedraw:function(e,n,r,i){for(var o=0;o<n.length;o++)for(var a=n[o].eles,s=0;s<a.length;s++){var u=a[s].boundingBox();if(bp(u,i))return!0}return!1},priority:function(e){return e.renderer.beforeRenderPriorities.eleTxrDeq}});var yP=1,fs=-4,ec=2,wP=3.99,bP=50,DP=50,EP=.15,CP=.1,IP=.9,SP=.9,xP=1,qw=250,TP=4e3*4e3,Gw=32767,MP=!0,SD=function(e){var n=this,r=n.renderer=e,i=r.cy;n.layersByLevel={},n.firstGet=!0,n.lastInvalidationTime=vr()-2*qw,n.skipping=!1,n.eleTxrDeqs=i.collection(),n.scheduleElementRefinement=rc(function(){n.refineElementTextures(n.eleTxrDeqs),n.eleTxrDeqs.unmerge(n.eleTxrDeqs)},DP),r.beforeRender(function(a,s){s-n.lastInvalidationTime<=qw?n.skipping=!0:n.skipping=!1},r.beforeRenderPriorities.lyrTxrSkip);var o=function(s,u){return u.reqs-s.reqs};n.layersQueue=new Ts(o),n.setupDequeueing()},Lt=SD.prototype,Ww=0,NP=Math.pow(2,53)-1;Lt.makeLayer=function(t,e){var n=Math.pow(2,e),r=Math.ceil(t.w*n),i=Math.ceil(t.h*n),o=this.renderer.makeOffscreenCanvas(r,i),a={id:Ww=++Ww%NP,bb:t,level:e,width:r,height:i,canvas:o,context:o.getContext("2d"),eles:[],elesQueue:[],reqs:0},s=a.context,u=-a.bb.x1,l=-a.bb.y1;return s.scale(n,n),s.translate(u,l),a};Lt.getLayers=function(t,e,n){var r=this,i=r.renderer,o=i.cy,a=o.zoom(),s=r.firstGet;if(r.firstGet=!1,n==null){if(n=Math.ceil(wp(a*e)),n<fs)n=fs;else if(a>=wP||n>ec)return null}r.validateLayersElesOrdering(n,t);var u=r.layersByLevel,l=Math.pow(2,n),c=u[n]=u[n]||[],d,f=r.levelIsComplete(n,t),h,p=function(){var A=function(O){if(r.validateLayersElesOrdering(O,t),r.levelIsComplete(O,t))return h=u[O],!0},M=function(O){if(!h)for(var _=n+O;fs<=_&&_<=ec&&!A(_);_+=O);};M(1),M(-1);for(var N=c.length-1;N>=0;N--){var R=c[N];R.invalid&&jr(c,R)}};if(!f)p();else return c;var m=function(){if(!d){d=en();for(var A=0;A<t.length;A++)Db(d,t[A].boundingBox())}return d},g=function(A){A=A||{};var M=A.after;m();var N=Math.ceil(d.w*l),R=Math.ceil(d.h*l);if(N>Gw||R>Gw)return null;var T=N*R;if(T>TP)return null;var O=r.makeLayer(d,n);if(M!=null){var _=c.indexOf(M)+1;c.splice(_,0,O)}else(A.insert===void 0||A.insert)&&c.unshift(O);return O};if(r.skipping&&!s)return null;for(var v=null,y=t.length/yP,w=!s,b=0;b<t.length;b++){var I=t[b],E=I._private.rscratch,D=E.imgLayerCaches=E.imgLayerCaches||{},S=D[n];if(S){v=S;continue}if((!v||v.eles.length>=y||!Eb(v.bb,I.boundingBox()))&&(v=g({insert:!0,after:v}),!v))return null;h||w?r.queueLayer(v,I):r.drawEleInLayer(v,I,n,e),v.eles.push(I),D[n]=v}return h||(w?null:c)};Lt.getEleLevelForLayerLevel=function(t,e){return t};Lt.drawEleInLayer=function(t,e,n,r){var i=this,o=this.renderer,a=t.context,s=e.boundingBox();s.w===0||s.h===0||!e.visible()||(n=i.getEleLevelForLayerLevel(n,r),o.setImgSmoothing(a,!1),o.drawCachedElement(a,e,null,null,n,MP),o.setImgSmoothing(a,!0))};Lt.levelIsComplete=function(t,e){var n=this,r=n.layersByLevel[t];if(!r||r.length===0)return!1;for(var i=0,o=0;o<r.length;o++){var a=r[o];if(a.reqs>0||a.invalid)return!1;i+=a.eles.length}return i===e.length};Lt.validateLayersElesOrdering=function(t,e){var n=this.layersByLevel[t];if(n)for(var r=0;r<n.length;r++){for(var i=n[r],o=-1,a=0;a<e.length;a++)if(i.eles[0]===e[a]){o=a;break}if(o<0){this.invalidateLayer(i);continue}for(var s=o,a=0;a<i.eles.length;a++)if(i.eles[a]!==e[s+a]){this.invalidateLayer(i);break}}};Lt.updateElementsInLayers=function(t,e){for(var n=this,r=Ss(t[0]),i=0;i<t.length;i++)for(var o=r?null:t[i],a=r?t[i]:t[i].ele,s=a._private.rscratch,u=s.imgLayerCaches=s.imgLayerCaches||{},l=fs;l<=ec;l++){var c=u[l];c&&(o&&n.getEleLevelForLayerLevel(c.level)!==o.level||e(c,a,o))}};Lt.haveLayers=function(){for(var t=this,e=!1,n=fs;n<=ec;n++){var r=t.layersByLevel[n];if(r&&r.length>0){e=!0;break}}return e};Lt.invalidateElements=function(t){var e=this;t.length!==0&&(e.lastInvalidationTime=vr(),!(t.length===0||!e.haveLayers())&&e.updateElementsInLayers(t,function(r,i,o){e.invalidateLayer(r)}))};Lt.invalidateLayer=function(t){if(this.lastInvalidationTime=vr(),!t.invalid){var e=t.level,n=t.eles,r=this.layersByLevel[e];jr(r,t),t.elesQueue=[],t.invalid=!0,t.replacement&&(t.replacement.invalid=!0);for(var i=0;i<n.length;i++){var o=n[i]._private.rscratch.imgLayerCaches;o&&(o[e]=null)}}};Lt.refineElementTextures=function(t){var e=this;e.updateElementsInLayers(t,function(r,i,o){var a=r.replacement;if(a||(a=r.replacement=e.makeLayer(r.bb,r.level),a.replaces=r,a.eles=r.eles),!a.reqs)for(var s=0;s<a.eles.length;s++)e.queueLayer(a,a.eles[s])})};Lt.enqueueElementRefinement=function(t){this.eleTxrDeqs.merge(t),this.scheduleElementRefinement()};Lt.queueLayer=function(t,e){var n=this,r=n.layersQueue,i=t.elesQueue,o=i.hasId=i.hasId||{};if(!t.replacement){if(e){if(o[e.id()])return;i.push(e),o[e.id()]=!0}t.reqs?(t.reqs++,r.updateItem(t)):(t.reqs=1,r.push(t))}};Lt.dequeue=function(t){for(var e=this,n=e.layersQueue,r=[],i=0;i<xP&&n.size()!==0;){var o=n.peek();if(o.replacement){n.pop();continue}if(o.replaces&&o!==o.replaces.replacement){n.pop();continue}if(o.invalid){n.pop();continue}var a=o.elesQueue.shift();a&&(e.drawEleInLayer(o,a,o.level,t),i++),r.length===0&&r.push(!0),o.elesQueue.length===0&&(n.pop(),o.reqs=0,o.replaces&&e.applyLayerReplacement(o),e.requestRedraw())}return r};Lt.applyLayerReplacement=function(t){var e=this,n=e.layersByLevel[t.level],r=t.replaces,i=n.indexOf(r);if(!(i<0||r.invalid)){n[i]=t;for(var o=0;o<t.eles.length;o++){var a=t.eles[o]._private,s=a.imgLayerCaches=a.imgLayerCaches||{};s&&(s[t.level]=t)}e.requestRedraw()}};Lt.requestRedraw=rc(function(){var t=this.renderer;t.redrawHint("eles",!0),t.redrawHint("drag",!0),t.redraw()},100);Lt.setupDequeueing=ID.setupDequeueing({deqRedrawThreshold:bP,deqCost:EP,deqAvgCost:CP,deqNoDrawCost:IP,deqFastCost:SP,deq:function(e,n){return e.dequeue(n)},onDeqd:mp,shouldRedraw:gb,priority:function(e){return e.renderer.beforeRenderPriorities.lyrTxrDeq}});var xD={},Zw;function AP(t,e){for(var n=0;n<e.length;n++){var r=e[n];t.lineTo(r.x,r.y)}}function RP(t,e,n){for(var r,i=0;i<e.length;i++){var o=e[i];i===0&&(r=o),t.lineTo(o.x,o.y)}t.quadraticCurveTo(n.x,n.y,r.x,r.y)}function Yw(t,e,n){t.beginPath&&t.beginPath();for(var r=e,i=0;i<r.length;i++){var o=r[i];t.lineTo(o.x,o.y)}var a=n,s=n[0];t.moveTo(s.x,s.y);for(var i=1;i<a.length;i++){var o=a[i];t.lineTo(o.x,o.y)}t.closePath&&t.closePath()}function _P(t,e,n,r,i){t.beginPath&&t.beginPath(),t.arc(n,r,i,0,Math.PI*2,!1);var o=e,a=o[0];t.moveTo(a.x,a.y);for(var s=0;s<o.length;s++){var u=o[s];t.lineTo(u.x,u.y)}t.closePath&&t.closePath()}function kP(t,e,n,r){t.arc(e,n,r,0,Math.PI*2,!1)}xD.arrowShapeImpl=function(t){return(Zw||(Zw={polygon:AP,"triangle-backcurve":RP,"triangle-tee":Yw,"circle-triangle":_P,"triangle-cross":Yw,circle:kP}))[t]};var rr={};rr.drawElement=function(t,e,n,r,i,o){var a=this;e.isNode()?a.drawNode(t,e,n,r,i,o):a.drawEdge(t,e,n,r,i,o)};rr.drawElementOverlay=function(t,e){var n=this;e.isNode()?n.drawNodeOverlay(t,e):n.drawEdgeOverlay(t,e)};rr.drawElementUnderlay=function(t,e){var n=this;e.isNode()?n.drawNodeUnderlay(t,e):n.drawEdgeUnderlay(t,e)};rr.drawCachedElementPortion=function(t,e,n,r,i,o,a,s){var u=this,l=n.getBoundingBox(e);if(!(l.w===0||l.h===0)){var c=n.getElement(e,l,r,i,o);if(c!=null){var d=s(u,e);if(d===0)return;var f=a(u,e),h=l.x1,p=l.y1,m=l.w,g=l.h,v,y,w,b,I;if(f!==0){var E=n.getRotationPoint(e);w=E.x,b=E.y,t.translate(w,b),t.rotate(f),I=u.getImgSmoothing(t),I||u.setImgSmoothing(t,!0);var D=n.getRotationOffset(e);v=D.x,y=D.y}else v=h,y=p;var S;d!==1&&(S=t.globalAlpha,t.globalAlpha=S*d),t.drawImage(c.texture.canvas,c.x,0,c.width,c.height,v,y,m,g),d!==1&&(t.globalAlpha=S),f!==0&&(t.rotate(-f),t.translate(-w,-b),I||u.setImgSmoothing(t,!1))}else n.drawElement(t,e)}};var OP=function(){return 0},PP=function(e,n){return e.getTextAngle(n,null)},LP=function(e,n){return e.getTextAngle(n,"source")},FP=function(e,n){return e.getTextAngle(n,"target")},BP=function(e,n){return n.effectiveOpacity()},Zh=function(e,n){return n.pstyle("text-opacity").pfValue*n.effectiveOpacity()};rr.drawCachedElement=function(t,e,n,r,i,o){var a=this,s=a.data,u=s.eleTxrCache,l=s.lblTxrCache,c=s.slbTxrCache,d=s.tlbTxrCache,f=e.boundingBox(),h=o===!0?u.reasons.highQuality:null;if(!(f.w===0||f.h===0||!e.visible())&&(!r||bp(f,r))){var p=e.isEdge(),m=e.element()._private.rscratch.badLine;a.drawElementUnderlay(t,e),a.drawCachedElementPortion(t,e,u,n,i,h,OP,BP),(!p||!m)&&a.drawCachedElementPortion(t,e,l,n,i,h,PP,Zh),p&&!m&&(a.drawCachedElementPortion(t,e,c,n,i,h,LP,Zh),a.drawCachedElementPortion(t,e,d,n,i,h,FP,Zh)),a.drawElementOverlay(t,e)}};rr.drawElements=function(t,e){for(var n=this,r=0;r<e.length;r++){var i=e[r];n.drawElement(t,i)}};rr.drawCachedElements=function(t,e,n,r){for(var i=this,o=0;o<e.length;o++){var a=e[o];i.drawCachedElement(t,a,n,r)}};rr.drawCachedNodes=function(t,e,n,r){for(var i=this,o=0;o<e.length;o++){var a=e[o];a.isNode()&&i.drawCachedElement(t,a,n,r)}};rr.drawLayeredElements=function(t,e,n,r){var i=this,o=i.data.lyrTxrCache.getLayers(e,n);if(o)for(var a=0;a<o.length;a++){var s=o[a],u=s.bb;u.w===0||u.h===0||t.drawImage(s.canvas,u.x1,u.y1,u.w,u.h)}else i.drawCachedElements(t,e,n,r)};var br={};br.drawEdge=function(t,e,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,a=this,s=e._private.rscratch;if(!(o&&!e.visible())&&!(s.badLine||s.allpts==null||isNaN(s.allpts[0]))){var u;n&&(u=n,t.translate(-u.x1,-u.y1));var l=o?e.pstyle("opacity").value:1,c=o?e.pstyle("line-opacity").value:1,d=e.pstyle("curve-style").value,f=e.pstyle("line-style").value,h=e.pstyle("width").pfValue,p=e.pstyle("line-cap").value,m=e.pstyle("line-outline-width").value,g=e.pstyle("line-outline-color").value,v=l*c,y=l*c,w=function(){var O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:v;d==="straight-triangle"?(a.eleStrokeStyle(t,e,O),a.drawEdgeTrianglePath(e,t,s.allpts)):(t.lineWidth=h,t.lineCap=p,a.eleStrokeStyle(t,e,O),a.drawEdgePath(e,t,s.allpts,f),t.lineCap="butt")},b=function(){var O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:v;if(t.lineWidth=h+m,t.lineCap=p,m>0)a.colorStrokeStyle(t,g[0],g[1],g[2],O);else{t.lineCap="butt";return}d==="straight-triangle"?a.drawEdgeTrianglePath(e,t,s.allpts):(a.drawEdgePath(e,t,s.allpts,f),t.lineCap="butt")},I=function(){i&&a.drawEdgeOverlay(t,e)},E=function(){i&&a.drawEdgeUnderlay(t,e)},D=function(){var O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:y;a.drawArrowheads(t,e,O)},S=function(){a.drawElementText(t,e,null,r)};t.lineJoin="round";var C=e.pstyle("ghost").value==="yes";if(C){var A=e.pstyle("ghost-offset-x").pfValue,M=e.pstyle("ghost-offset-y").pfValue,N=e.pstyle("ghost-opacity").value,R=v*N;t.translate(A,M),w(R),D(R),t.translate(-A,-M)}else b();E(),w(),D(),I(),S(),n&&t.translate(u.x1,u.y1)}};var TD=function(e){if(!["overlay","underlay"].includes(e))throw new Error("Invalid state");return function(n,r){if(r.visible()){var i=r.pstyle("".concat(e,"-opacity")).value;if(i!==0){var o=this,a=o.usePaths(),s=r._private.rscratch,u=r.pstyle("".concat(e,"-padding")).pfValue,l=2*u,c=r.pstyle("".concat(e,"-color")).value;n.lineWidth=l,s.edgeType==="self"&&!a?n.lineCap="butt":n.lineCap="round",o.colorStrokeStyle(n,c[0],c[1],c[2],i),o.drawEdgePath(r,n,s.allpts,"solid")}}}};br.drawEdgeOverlay=TD("overlay");br.drawEdgeUnderlay=TD("underlay");br.drawEdgePath=function(t,e,n,r){var i=t._private.rscratch,o=e,a,s=!1,u=this.usePaths(),l=t.pstyle("line-dash-pattern").pfValue,c=t.pstyle("line-dash-offset").pfValue;if(u){var d=n.join("$"),f=i.pathCacheKey&&i.pathCacheKey===d;f?(a=e=i.pathCache,s=!0):(a=e=new Path2D,i.pathCacheKey=d,i.pathCache=a)}if(o.setLineDash)switch(r){case"dotted":o.setLineDash([1,1]);break;case"dashed":o.setLineDash(l),o.lineDashOffset=c;break;case"solid":o.setLineDash([]);break}if(!s&&!i.badLine)switch(e.beginPath&&e.beginPath(),e.moveTo(n[0],n[1]),i.edgeType){case"bezier":case"self":case"compound":case"multibezier":for(var h=2;h+3<n.length;h+=4)e.quadraticCurveTo(n[h],n[h+1],n[h+2],n[h+3]);break;case"straight":case"haystack":for(var p=2;p+1<n.length;p+=2)e.lineTo(n[p],n[p+1]);break;case"segments":if(i.isRound){var m=tb(i.roundCorners),g;try{for(m.s();!(g=m.n()).done;){var v=g.value;vD(e,v)}}catch(w){m.e(w)}finally{m.f()}e.lineTo(n[n.length-2],n[n.length-1])}else for(var y=2;y+1<n.length;y+=2)e.lineTo(n[y],n[y+1]);break}e=o,u?e.stroke(a):e.stroke(),e.setLineDash&&e.setLineDash([])};br.drawEdgeTrianglePath=function(t,e,n){e.fillStyle=e.strokeStyle;for(var r=t.pstyle("width").pfValue,i=0;i+1<n.length;i+=2){var o=[n[i+2]-n[i],n[i+3]-n[i+1]],a=Math.sqrt(o[0]*o[0]+o[1]*o[1]),s=[o[1]/a,-o[0]/a],u=[s[0]*r/2,s[1]*r/2];e.beginPath(),e.moveTo(n[i]-u[0],n[i+1]-u[1]),e.lineTo(n[i]+u[0],n[i+1]+u[1]),e.lineTo(n[i+2],n[i+3]),e.closePath(),e.fill()}};br.drawArrowheads=function(t,e,n){var r=e._private.rscratch,i=r.edgeType==="haystack";i||this.drawArrowhead(t,e,"source",r.arrowStartX,r.arrowStartY,r.srcArrowAngle,n),this.drawArrowhead(t,e,"mid-target",r.midX,r.midY,r.midtgtArrowAngle,n),this.drawArrowhead(t,e,"mid-source",r.midX,r.midY,r.midsrcArrowAngle,n),i||this.drawArrowhead(t,e,"target",r.arrowEndX,r.arrowEndY,r.tgtArrowAngle,n)};br.drawArrowhead=function(t,e,n,r,i,o,a){if(!(isNaN(r)||r==null||isNaN(i)||i==null||isNaN(o)||o==null)){var s=this,u=e.pstyle(n+"-arrow-shape").value;if(u!=="none"){var l=e.pstyle(n+"-arrow-fill").value==="hollow"?"both":"filled",c=e.pstyle(n+"-arrow-fill").value,d=e.pstyle("width").pfValue,f=e.pstyle(n+"-arrow-width"),h=f.value==="match-line"?d:f.pfValue;f.units==="%"&&(h*=d);var p=e.pstyle("opacity").value;a===void 0&&(a=p);var m=t.globalCompositeOperation;(a!==1||c==="hollow")&&(t.globalCompositeOperation="destination-out",s.colorFillStyle(t,255,255,255,1),s.colorStrokeStyle(t,255,255,255,1),s.drawArrowShape(e,t,l,d,u,h,r,i,o),t.globalCompositeOperation=m);var g=e.pstyle(n+"-arrow-color").value;s.colorFillStyle(t,g[0],g[1],g[2],a),s.colorStrokeStyle(t,g[0],g[1],g[2],a),s.drawArrowShape(e,t,c,d,u,h,r,i,o)}}};br.drawArrowShape=function(t,e,n,r,i,o,a,s,u){var l=this,c=this.usePaths()&&i!=="triangle-cross",d=!1,f,h=e,p={x:a,y:s},m=t.pstyle("arrow-scale").value,g=this.getArrowWidth(r,m),v=l.arrowShapes[i];if(c){var y=l.arrowPathCache=l.arrowPathCache||[],w=Ii(i),b=y[w];b!=null?(f=e=b,d=!0):(f=e=new Path2D,y[w]=f)}d||(e.beginPath&&e.beginPath(),c?v.draw(e,1,0,{x:0,y:0},1):v.draw(e,g,u,p,r),e.closePath&&e.closePath()),e=h,c&&(e.translate(a,s),e.rotate(u),e.scale(g,g)),(n==="filled"||n==="both")&&(c?e.fill(f):e.fill()),(n==="hollow"||n==="both")&&(e.lineWidth=o/(c?g:1),e.lineJoin="miter",c?e.stroke(f):e.stroke()),c&&(e.scale(1/g,1/g),e.rotate(-u),e.translate(-a,-s))};var Pp={};Pp.safeDrawImage=function(t,e,n,r,i,o,a,s,u,l){if(!(i<=0||o<=0||u<=0||l<=0))try{t.drawImage(e,n,r,i,o,a,s,u,l)}catch(c){Ye(c)}};Pp.drawInscribedImage=function(t,e,n,r,i){var o=this,a=n.position(),s=a.x,u=a.y,l=n.cy().style(),c=l.getIndexedStyle.bind(l),d=c(n,"background-fit","value",r),f=c(n,"background-repeat","value",r),h=n.width(),p=n.height(),m=n.padding()*2,g=h+(c(n,"background-width-relative-to","value",r)==="inner"?0:m),v=p+(c(n,"background-height-relative-to","value",r)==="inner"?0:m),y=n._private.rscratch,w=c(n,"background-clip","value",r),b=w==="node",I=c(n,"background-image-opacity","value",r)*i,E=c(n,"background-image-smoothing","value",r),D=n.pstyle("corner-radius").value;D!=="auto"&&(D=n.pstyle("corner-radius").pfValue);var S=e.width||e.cachedW,C=e.height||e.cachedH;(S==null||C==null)&&(document.body.appendChild(e),S=e.cachedW=e.width||e.offsetWidth,C=e.cachedH=e.height||e.offsetHeight,document.body.removeChild(e));var A=S,M=C;if(c(n,"background-width","value",r)!=="auto"&&(c(n,"background-width","units",r)==="%"?A=c(n,"background-width","pfValue",r)*g:A=c(n,"background-width","pfValue",r)),c(n,"background-height","value",r)!=="auto"&&(c(n,"background-height","units",r)==="%"?M=c(n,"background-height","pfValue",r)*v:M=c(n,"background-height","pfValue",r)),!(A===0||M===0)){if(d==="contain"){var N=Math.min(g/A,v/M);A*=N,M*=N}else if(d==="cover"){var N=Math.max(g/A,v/M);A*=N,M*=N}var R=s-g/2,T=c(n,"background-position-x","units",r),O=c(n,"background-position-x","pfValue",r);T==="%"?R+=(g-A)*O:R+=O;var _=c(n,"background-offset-x","units",r),k=c(n,"background-offset-x","pfValue",r);_==="%"?R+=(g-A)*k:R+=k;var P=u-v/2,V=c(n,"background-position-y","units",r),z=c(n,"background-position-y","pfValue",r);V==="%"?P+=(v-M)*z:P+=z;var B=c(n,"background-offset-y","units",r),$=c(n,"background-offset-y","pfValue",r);B==="%"?P+=(v-M)*$:P+=$,y.pathCache&&(R-=s,P-=u,s=0,u=0);var W=t.globalAlpha;t.globalAlpha=I;var K=o.getImgSmoothing(t),Q=!1;if(E==="no"&&K?(o.setImgSmoothing(t,!1),Q=!0):E==="yes"&&!K&&(o.setImgSmoothing(t,!0),Q=!0),f==="no-repeat")b&&(t.save(),y.pathCache?t.clip(y.pathCache):(o.nodeShapes[o.getNodeShape(n)].draw(t,s,u,g,v,D,y),t.clip())),o.safeDrawImage(t,e,0,0,S,C,R,P,A,M),b&&t.restore();else{var X=t.createPattern(e,f);t.fillStyle=X,o.nodeShapes[o.getNodeShape(n)].draw(t,s,u,g,v,D,y),t.translate(R,P),t.fill(),t.translate(-R,-P)}t.globalAlpha=W,Q&&o.setImgSmoothing(t,K)}};var Ri={};Ri.eleTextBiggerThanMin=function(t,e){if(!e){var n=t.cy().zoom(),r=this.getPixelRatio(),i=Math.ceil(wp(n*r));e=Math.pow(2,i)}var o=t.pstyle("font-size").pfValue*e,a=t.pstyle("min-zoomed-font-size").pfValue;return!(o<a)};Ri.drawElementText=function(t,e,n,r,i){var o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,a=this;if(r==null){if(o&&!a.eleTextBiggerThanMin(e))return}else if(r===!1)return;if(e.isNode()){var s=e.pstyle("label");if(!s||!s.value)return;var u=a.getLabelJustification(e);t.textAlign=u,t.textBaseline="bottom"}else{var l=e.element()._private.rscratch.badLine,c=e.pstyle("label"),d=e.pstyle("source-label"),f=e.pstyle("target-label");if(l||(!c||!c.value)&&(!d||!d.value)&&(!f||!f.value))return;t.textAlign="center",t.textBaseline="bottom"}var h=!n,p;n&&(p=n,t.translate(-p.x1,-p.y1)),i==null?(a.drawText(t,e,null,h,o),e.isEdge()&&(a.drawText(t,e,"source",h,o),a.drawText(t,e,"target",h,o))):a.drawText(t,e,i,h,o),n&&t.translate(p.x1,p.y1)};Ri.getFontCache=function(t){var e;this.fontCaches=this.fontCaches||[];for(var n=0;n<this.fontCaches.length;n++)if(e=this.fontCaches[n],e.context===t)return e;return e={context:t},this.fontCaches.push(e),e};Ri.setupTextStyle=function(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,r=e.pstyle("font-style").strValue,i=e.pstyle("font-size").pfValue+"px",o=e.pstyle("font-family").strValue,a=e.pstyle("font-weight").strValue,s=n?e.effectiveOpacity()*e.pstyle("text-opacity").value:1,u=e.pstyle("text-outline-opacity").value*s,l=e.pstyle("color").value,c=e.pstyle("text-outline-color").value;t.font=r+" "+a+" "+i+" "+o,t.lineJoin="round",this.colorFillStyle(t,l[0],l[1],l[2],s),this.colorStrokeStyle(t,c[0],c[1],c[2],u)};function Yh(t,e,n,r,i){var o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:5,a=arguments.length>6?arguments[6]:void 0;t.beginPath(),t.moveTo(e+o,n),t.lineTo(e+r-o,n),t.quadraticCurveTo(e+r,n,e+r,n+o),t.lineTo(e+r,n+i-o),t.quadraticCurveTo(e+r,n+i,e+r-o,n+i),t.lineTo(e+o,n+i),t.quadraticCurveTo(e,n+i,e,n+i-o),t.lineTo(e,n+o),t.quadraticCurveTo(e,n,e+o,n),t.closePath(),a?t.stroke():t.fill()}Ri.getTextAngle=function(t,e){var n,r=t._private,i=r.rscratch,o=e?e+"-":"",a=t.pstyle(o+"text-rotation"),s=$n(i,"labelAngle",e);return a.strValue==="autorotate"?n=t.isEdge()?s:0:a.strValue==="none"?n=0:n=a.pfValue,n};Ri.drawText=function(t,e,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,o=e._private,a=o.rscratch,s=i?e.effectiveOpacity():1;if(!(i&&(s===0||e.pstyle("text-opacity").value===0))){n==="main"&&(n=null);var u=$n(a,"labelX",n),l=$n(a,"labelY",n),c,d,f=this.getLabelText(e,n);if(f!=null&&f!==""&&!isNaN(u)&&!isNaN(l)){this.setupTextStyle(t,e,i);var h=n?n+"-":"",p=$n(a,"labelWidth",n),m=$n(a,"labelHeight",n),g=e.pstyle(h+"text-margin-x").pfValue,v=e.pstyle(h+"text-margin-y").pfValue,y=e.isEdge(),w=e.pstyle("text-halign").value,b=e.pstyle("text-valign").value;y&&(w="center",b="center"),u+=g,l+=v;var I;switch(r?I=this.getTextAngle(e,n):I=0,I!==0&&(c=u,d=l,t.translate(c,d),t.rotate(I),u=0,l=0),b){case"top":break;case"center":l+=m/2;break;case"bottom":l+=m;break}var E=e.pstyle("text-background-opacity").value,D=e.pstyle("text-border-opacity").value,S=e.pstyle("text-border-width").pfValue,C=e.pstyle("text-background-padding").pfValue,A=e.pstyle("text-background-shape").strValue,M=A.indexOf("round")===0,N=2;if(E>0||S>0&&D>0){var R=u-C;switch(w){case"left":R-=p;break;case"center":R-=p/2;break}var T=l-m-C,O=p+2*C,_=m+2*C;if(E>0){var k=t.fillStyle,P=e.pstyle("text-background-color").value;t.fillStyle="rgba("+P[0]+","+P[1]+","+P[2]+","+E*s+")",M?Yh(t,R,T,O,_,N):t.fillRect(R,T,O,_),t.fillStyle=k}if(S>0&&D>0){var V=t.strokeStyle,z=t.lineWidth,B=e.pstyle("text-border-color").value,$=e.pstyle("text-border-style").value;if(t.strokeStyle="rgba("+B[0]+","+B[1]+","+B[2]+","+D*s+")",t.lineWidth=S,t.setLineDash)switch($){case"dotted":t.setLineDash([1,1]);break;case"dashed":t.setLineDash([4,2]);break;case"double":t.lineWidth=S/4,t.setLineDash([]);break;case"solid":t.setLineDash([]);break}if(M?Yh(t,R,T,O,_,N,"stroke"):t.strokeRect(R,T,O,_),$==="double"){var W=S/2;M?Yh(t,R+W,T+W,O-W*2,_-W*2,N,"stroke"):t.strokeRect(R+W,T+W,O-W*2,_-W*2)}t.setLineDash&&t.setLineDash([]),t.lineWidth=z,t.strokeStyle=V}}var K=2*e.pstyle("text-outline-width").pfValue;if(K>0&&(t.lineWidth=K),e.pstyle("text-wrap").value==="wrap"){var Q=$n(a,"labelWrapCachedLines",n),X=$n(a,"labelLineHeight",n),J=p/2,q=this.getLabelJustification(e);switch(q==="auto"||(w==="left"?q==="left"?u+=-p:q==="center"&&(u+=-J):w==="center"?q==="left"?u+=-J:q==="right"&&(u+=J):w==="right"&&(q==="center"?u+=J:q==="right"&&(u+=p))),b){case"top":l-=(Q.length-1)*X;break;case"center":case"bottom":l-=(Q.length-1)*X;break}for(var L=0;L<Q.length;L++)K>0&&t.strokeText(Q[L],u,l),t.fillText(Q[L],u,l),l+=X}else K>0&&t.strokeText(f,u,l),t.fillText(f,u,l);I!==0&&(t.rotate(-I),t.translate(-c,-d))}}};var Ko={};Ko.drawNode=function(t,e,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,a=this,s,u,l=e._private,c=l.rscratch,d=e.position();if(!(!ie(d.x)||!ie(d.y))&&!(o&&!e.visible())){var f=o?e.effectiveOpacity():1,h=a.usePaths(),p,m=!1,g=e.padding();s=e.width()+2*g,u=e.height()+2*g;var v;n&&(v=n,t.translate(-v.x1,-v.y1));for(var y=e.pstyle("background-image"),w=y.value,b=new Array(w.length),I=new Array(w.length),E=0,D=0;D<w.length;D++){var S=w[D],C=b[D]=S!=null&&S!=="none";if(C){var A=e.cy().style().getIndexedStyle(e,"background-image-crossorigin","value",D);E++,I[D]=a.getCachedImage(S,A,function(){l.backgroundTimestamp=Date.now(),e.emitAndNotify("background")})}}var M=e.pstyle("background-blacken").value,N=e.pstyle("border-width").pfValue,R=e.pstyle("background-opacity").value*f,T=e.pstyle("border-color").value,O=e.pstyle("border-style").value,_=e.pstyle("border-join").value,k=e.pstyle("border-cap").value,P=e.pstyle("border-position").value,V=e.pstyle("border-dash-pattern").pfValue,z=e.pstyle("border-dash-offset").pfValue,B=e.pstyle("border-opacity").value*f,$=e.pstyle("outline-width").pfValue,W=e.pstyle("outline-color").value,K=e.pstyle("outline-style").value,Q=e.pstyle("outline-opacity").value*f,X=e.pstyle("outline-offset").value,J=e.pstyle("corner-radius").value;J!=="auto"&&(J=e.pstyle("corner-radius").pfValue);var q=function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:R;a.eleFillStyle(t,e,F)},L=function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:B;a.colorStrokeStyle(t,T[0],T[1],T[2],F)},U=function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Q;a.colorStrokeStyle(t,W[0],W[1],W[2],F)},Z=function(F,H,oe,Y){var ae=a.nodePathCache=a.nodePathCache||[],me=pb(oe==="polygon"?oe+","+Y.join(","):oe,""+H,""+F,""+J),Ie=ae[me],he,De=!1;return Ie!=null?(he=Ie,De=!0,c.pathCache=he):(he=new Path2D,ae[me]=c.pathCache=he),{path:he,cacheHit:De}},re=e.pstyle("shape").strValue,ve=e.pstyle("shape-polygon-points").pfValue;if(h){t.translate(d.x,d.y);var ne=Z(s,u,re,ve);p=ne.path,m=ne.cacheHit}var te=function(){if(!m){var F=d;h&&(F={x:0,y:0}),a.nodeShapes[a.getNodeShape(e)].draw(p||t,F.x,F.y,s,u,J,c)}h?t.fill(p):t.fill()},de=function(){for(var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:f,H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,oe=l.backgrounding,Y=0,ae=0;ae<I.length;ae++){var me=e.cy().style().getIndexedStyle(e,"background-image-containment","value",ae);if(H&&me==="over"||!H&&me==="inside"){Y++;continue}b[ae]&&I[ae].complete&&!I[ae].error&&(Y++,a.drawInscribedImage(t,I[ae],e,ae,F))}l.backgrounding=Y!==E,oe!==l.backgrounding&&e.updateStyle(!1)},ce=function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:f;a.hasPie(e)&&(a.drawPie(t,e,H),F&&(h||a.nodeShapes[a.getNodeShape(e)].draw(t,d.x,d.y,s,u,J,c)))},se=function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:f,H=(M>0?M:-M)*F,oe=M>0?0:255;M!==0&&(a.colorFillStyle(t,oe,oe,oe,H),h?t.fill(p):t.fill())},ge=function(){if(N>0){if(t.lineWidth=N,t.lineCap=k,t.lineJoin=_,t.setLineDash)switch(O){case"dotted":t.setLineDash([1,1]);break;case"dashed":t.setLineDash(V),t.lineDashOffset=z;break;case"solid":case"double":t.setLineDash([]);break}if(P!=="center"){if(t.save(),t.lineWidth*=2,P==="inside")h?t.clip(p):t.clip();else{var F=new Path2D;F.rect(-s/2-N,-u/2-N,s+2*N,u+2*N),F.addPath(p),t.clip(F,"evenodd")}h?t.stroke(p):t.stroke(),t.restore()}else h?t.stroke(p):t.stroke();if(O==="double"){t.lineWidth=N/3;var H=t.globalCompositeOperation;t.globalCompositeOperation="destination-out",h?t.stroke(p):t.stroke(),t.globalCompositeOperation=H}t.setLineDash&&t.setLineDash([])}},Ke=function(){if($>0){if(t.lineWidth=$,t.lineCap="butt",t.setLineDash)switch(K){case"dotted":t.setLineDash([1,1]);break;case"dashed":t.setLineDash([4,2]);break;case"solid":case"double":t.setLineDash([]);break}var F=d;h&&(F={x:0,y:0});var H=a.getNodeShape(e),oe=N;P==="inside"&&(oe=0),P==="outside"&&(oe*=2);var Y=(s+oe+($+X))/s,ae=(u+oe+($+X))/u,me=s*Y,Ie=u*ae,he=a.nodeShapes[H].points,De;if(h){var Ce=Z(me,Ie,H,he);De=Ce.path}if(H==="ellipse")a.drawEllipsePath(De||t,F.x,F.y,me,Ie);else if(["round-diamond","round-heptagon","round-hexagon","round-octagon","round-pentagon","round-polygon","round-triangle","round-tag"].includes(H)){var we=0,nt=0,ut=0;H==="round-diamond"?we=(oe+X+$)*1.4:H==="round-heptagon"?(we=(oe+X+$)*1.075,ut=-(oe/2+X+$)/35):H==="round-hexagon"?we=(oe+X+$)*1.12:H==="round-pentagon"?(we=(oe+X+$)*1.13,ut=-(oe/2+X+$)/15):H==="round-tag"?(we=(oe+X+$)*1.12,nt=(oe/2+$+X)*.07):H==="round-triangle"&&(we=(oe+X+$)*(Math.PI/2),ut=-(oe+X/2+$)/Math.PI),we!==0&&(Y=(s+we)/s,me=s*Y,["round-hexagon","round-tag"].includes(H)||(ae=(u+we)/u,Ie=u*ae)),J=J==="auto"?Sb(me,Ie):J;for(var tn=me/2,nn=Ie/2,pt=J+(oe+$+X)/2,Ct=new Array(he.length/2),It=new Array(he.length/2),Zt=0;Zt<he.length/2;Zt++)Ct[Zt]={x:F.x+nt+tn*he[Zt*2],y:F.y+ut+nn*he[Zt*2+1]};var Yt,Hn,vn,zn,ir=Ct.length;for(Hn=Ct[ir-1],Yt=0;Yt<ir;Yt++)vn=Ct[Yt%ir],zn=Ct[(Yt+1)%ir],It[Yt]=kp(Hn,vn,zn,pt),Hn=vn,vn=zn;a.drawRoundPolygonPath(De||t,F.x+nt,F.y+ut,s*Y,u*ae,he,It)}else if(["roundrectangle","round-rectangle"].includes(H))J=J==="auto"?xi(me,Ie):J,a.drawRoundRectanglePath(De||t,F.x,F.y,me,Ie,J+(oe+$+X)/2);else if(["cutrectangle","cut-rectangle"].includes(H))J=J==="auto"?Dp():J,a.drawCutRectanglePath(De||t,F.x,F.y,me,Ie,null,J+(oe+$+X)/4);else if(["bottomroundrectangle","bottom-round-rectangle"].includes(H))J=J==="auto"?xi(me,Ie):J,a.drawBottomRoundRectanglePath(De||t,F.x,F.y,me,Ie,J+(oe+$+X)/2);else if(H==="barrel")a.drawBarrelPath(De||t,F.x,F.y,me,Ie);else if(H.startsWith("polygon")||["rhomboid","right-rhomboid","round-tag","tag","vee"].includes(H)){var or=(oe+$+X)/s;he=Wl(Zl(he,or)),a.drawPolygonPath(De||t,F.x,F.y,s,u,he)}else{var Ft=(oe+$+X)/s;he=Wl(Zl(he,-Ft)),a.drawPolygonPath(De||t,F.x,F.y,s,u,he)}if(h?t.stroke(De):t.stroke(),K==="double"){t.lineWidth=oe/3;var St=t.globalCompositeOperation;t.globalCompositeOperation="destination-out",h?t.stroke(De):t.stroke(),t.globalCompositeOperation=St}t.setLineDash&&t.setLineDash([])}},$e=function(){i&&a.drawNodeOverlay(t,e,d,s,u)},Re=function(){i&&a.drawNodeUnderlay(t,e,d,s,u)},Qe=function(){a.drawElementText(t,e,null,r)},ke=e.pstyle("ghost").value==="yes";if(ke){var qe=e.pstyle("ghost-offset-x").pfValue,ee=e.pstyle("ghost-offset-y").pfValue,x=e.pstyle("ghost-opacity").value,j=x*f;t.translate(qe,ee),U(),Ke(),q(x*R),te(),de(j,!0),L(x*B),ge(),ce(M!==0||N!==0),de(j,!1),se(j),t.translate(-qe,-ee)}h&&t.translate(-d.x,-d.y),Re(),h&&t.translate(d.x,d.y),U(),Ke(),q(),te(),de(f,!0),L(),ge(),ce(M!==0||N!==0),de(f,!1),se(),h&&t.translate(-d.x,-d.y),Qe(),$e(),n&&t.translate(v.x1,v.y1)}};var MD=function(e){if(!["overlay","underlay"].includes(e))throw new Error("Invalid state");return function(n,r,i,o,a){var s=this;if(r.visible()){var u=r.pstyle("".concat(e,"-padding")).pfValue,l=r.pstyle("".concat(e,"-opacity")).value,c=r.pstyle("".concat(e,"-color")).value,d=r.pstyle("".concat(e,"-shape")).value,f=r.pstyle("".concat(e,"-corner-radius")).value;if(l>0){if(i=i||r.position(),o==null||a==null){var h=r.padding();o=r.width()+2*h,a=r.height()+2*h}s.colorFillStyle(n,c[0],c[1],c[2],l),s.nodeShapes[d].draw(n,i.x,i.y,o+u*2,a+u*2,f),n.fill()}}}};Ko.drawNodeOverlay=MD("overlay");Ko.drawNodeUnderlay=MD("underlay");Ko.hasPie=function(t){return t=t[0],t._private.hasPie};Ko.drawPie=function(t,e,n,r){e=e[0],r=r||e.position();var i=e.cy().style(),o=e.pstyle("pie-size"),a=r.x,s=r.y,u=e.width(),l=e.height(),c=Math.min(u,l)/2,d=0,f=this.usePaths();f&&(a=0,s=0),o.units==="%"?c=c*o.pfValue:o.pfValue!==void 0&&(c=o.pfValue/2);for(var h=1;h<=i.pieBackgroundN;h++){var p=e.pstyle("pie-"+h+"-background-size").value,m=e.pstyle("pie-"+h+"-background-color").value,g=e.pstyle("pie-"+h+"-background-opacity").value*n,v=p/100;v+d>1&&(v=1-d);var y=1.5*Math.PI+2*Math.PI*d,w=2*Math.PI*v,b=y+w;p===0||d>=1||d+v>1||(t.beginPath(),t.moveTo(a,s),t.arc(a,s,c,y,b),t.closePath(),this.colorFillStyle(t,m[0],m[1],m[2],g),t.fill(),d+=v)}};var gn={},VP=100;gn.getPixelRatio=function(){var t=this.data.contexts[0];if(this.forcedPixelRatio!=null)return this.forcedPixelRatio;var e=this.cy.window(),n=t.backingStorePixelRatio||t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1;return(e.devicePixelRatio||1)/n};gn.paintCache=function(t){for(var e=this.paintCaches=this.paintCaches||[],n=!0,r,i=0;i<e.length;i++)if(r=e[i],r.context===t){n=!1;break}return n&&(r={context:t},e.push(r)),r};gn.createGradientStyleFor=function(t,e,n,r,i){var o,a=this.usePaths(),s=n.pstyle(e+"-gradient-stop-colors").value,u=n.pstyle(e+"-gradient-stop-positions").pfValue;if(r==="radial-gradient")if(n.isEdge()){var l=n.sourceEndpoint(),c=n.targetEndpoint(),d=n.midpoint(),f=Si(l,d),h=Si(c,d);o=t.createRadialGradient(d.x,d.y,0,d.x,d.y,Math.max(f,h))}else{var p=a?{x:0,y:0}:n.position(),m=n.paddedWidth(),g=n.paddedHeight();o=t.createRadialGradient(p.x,p.y,0,p.x,p.y,Math.max(m,g))}else if(n.isEdge()){var v=n.sourceEndpoint(),y=n.targetEndpoint();o=t.createLinearGradient(v.x,v.y,y.x,y.y)}else{var w=a?{x:0,y:0}:n.position(),b=n.paddedWidth(),I=n.paddedHeight(),E=b/2,D=I/2,S=n.pstyle("background-gradient-direction").value;switch(S){case"to-bottom":o=t.createLinearGradient(w.x,w.y-D,w.x,w.y+D);break;case"to-top":o=t.createLinearGradient(w.x,w.y+D,w.x,w.y-D);break;case"to-left":o=t.createLinearGradient(w.x+E,w.y,w.x-E,w.y);break;case"to-right":o=t.createLinearGradient(w.x-E,w.y,w.x+E,w.y);break;case"to-bottom-right":case"to-right-bottom":o=t.createLinearGradient(w.x-E,w.y-D,w.x+E,w.y+D);break;case"to-top-right":case"to-right-top":o=t.createLinearGradient(w.x-E,w.y+D,w.x+E,w.y-D);break;case"to-bottom-left":case"to-left-bottom":o=t.createLinearGradient(w.x+E,w.y-D,w.x-E,w.y+D);break;case"to-top-left":case"to-left-top":o=t.createLinearGradient(w.x+E,w.y+D,w.x-E,w.y-D);break}}if(!o)return null;for(var C=u.length===s.length,A=s.length,M=0;M<A;M++)o.addColorStop(C?u[M]:M/(A-1),"rgba("+s[M][0]+","+s[M][1]+","+s[M][2]+","+i+")");return o};gn.gradientFillStyle=function(t,e,n,r){var i=this.createGradientStyleFor(t,"background",e,n,r);if(!i)return null;t.fillStyle=i};gn.colorFillStyle=function(t,e,n,r,i){t.fillStyle="rgba("+e+","+n+","+r+","+i+")"};gn.eleFillStyle=function(t,e,n){var r=e.pstyle("background-fill").value;if(r==="linear-gradient"||r==="radial-gradient")this.gradientFillStyle(t,e,r,n);else{var i=e.pstyle("background-color").value;this.colorFillStyle(t,i[0],i[1],i[2],n)}};gn.gradientStrokeStyle=function(t,e,n,r){var i=this.createGradientStyleFor(t,"line",e,n,r);if(!i)return null;t.strokeStyle=i};gn.colorStrokeStyle=function(t,e,n,r,i){t.strokeStyle="rgba("+e+","+n+","+r+","+i+")"};gn.eleStrokeStyle=function(t,e,n){var r=e.pstyle("line-fill").value;if(r==="linear-gradient"||r==="radial-gradient")this.gradientStrokeStyle(t,e,r,n);else{var i=e.pstyle("line-color").value;this.colorStrokeStyle(t,i[0],i[1],i[2],n)}};gn.matchCanvasSize=function(t){var e=this,n=e.data,r=e.findContainerClientCoords(),i=r[2],o=r[3],a=e.getPixelRatio(),s=e.motionBlurPxRatio;(t===e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_NODE]||t===e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_DRAG])&&(a=s);var u=i*a,l=o*a,c;if(!(u===e.canvasWidth&&l===e.canvasHeight)){e.fontCaches=null;var d=n.canvasContainer;d.style.width=i+"px",d.style.height=o+"px";for(var f=0;f<e.CANVAS_LAYERS;f++)c=n.canvases[f],c.width=u,c.height=l,c.style.width=i+"px",c.style.height=o+"px";for(var f=0;f<e.BUFFER_COUNT;f++)c=n.bufferCanvases[f],c.width=u,c.height=l,c.style.width=i+"px",c.style.height=o+"px";e.textureMult=1,a<=1&&(c=n.bufferCanvases[e.TEXTURE_BUFFER],e.textureMult=2,c.width=u*e.textureMult,c.height=l*e.textureMult),e.canvasWidth=u,e.canvasHeight=l}};gn.renderTo=function(t,e,n,r){this.render({forcedContext:t,forcedZoom:e,forcedPan:n,drawAllLayers:!0,forcedPxRatio:r})};gn.render=function(t){t=t||yb();var e=t.forcedContext,n=t.drawAllLayers,r=t.drawOnlyNodeLayer,i=t.forcedZoom,o=t.forcedPan,a=this,s=t.forcedPxRatio===void 0?this.getPixelRatio():t.forcedPxRatio,u=a.cy,l=a.data,c=l.canvasNeedsRedraw,d=a.textureOnViewport&&!e&&(a.pinching||a.hoverData.dragging||a.swipePanning||a.data.wheelZooming),f=t.motionBlur!==void 0?t.motionBlur:a.motionBlur,h=a.motionBlurPxRatio,p=u.hasCompoundNodes(),m=a.hoverData.draggingEles,g=!!(a.hoverData.selecting||a.touchData.selecting);f=f&&!e&&a.motionBlurEnabled&&!g;var v=f;e||(a.prevPxRatio!==s&&(a.invalidateContainerClientCoordsCache(),a.matchCanvasSize(a.container),a.redrawHint("eles",!0),a.redrawHint("drag",!0)),a.prevPxRatio=s),!e&&a.motionBlurTimeout&&clearTimeout(a.motionBlurTimeout),f&&(a.mbFrames==null&&(a.mbFrames=0),a.mbFrames++,a.mbFrames<3&&(v=!1),a.mbFrames>a.minMbLowQualFrames&&(a.motionBlurPxRatio=a.mbPxRBlurry)),a.clearingMotionBlur&&(a.motionBlurPxRatio=1),a.textureDrawLastFrame&&!d&&(c[a.NODE]=!0,c[a.SELECT_BOX]=!0);var y=u.style(),w=u.zoom(),b=i!==void 0?i:w,I=u.pan(),E={x:I.x,y:I.y},D={zoom:w,pan:{x:I.x,y:I.y}},S=a.prevViewport,C=S===void 0||D.zoom!==S.zoom||D.pan.x!==S.pan.x||D.pan.y!==S.pan.y;!C&&!(m&&!p)&&(a.motionBlurPxRatio=1),o&&(E=o),b*=s,E.x*=s,E.y*=s;var A=a.getCachedZSortedEles();function M(ne,te,de,ce,se){var ge=ne.globalCompositeOperation;ne.globalCompositeOperation="destination-out",a.colorFillStyle(ne,255,255,255,a.motionBlurTransparency),ne.fillRect(te,de,ce,se),ne.globalCompositeOperation=ge}function N(ne,te){var de,ce,se,ge;!a.clearingMotionBlur&&(ne===l.bufferContexts[a.MOTIONBLUR_BUFFER_NODE]||ne===l.bufferContexts[a.MOTIONBLUR_BUFFER_DRAG])?(de={x:I.x*h,y:I.y*h},ce=w*h,se=a.canvasWidth*h,ge=a.canvasHeight*h):(de=E,ce=b,se=a.canvasWidth,ge=a.canvasHeight),ne.setTransform(1,0,0,1,0,0),te==="motionBlur"?M(ne,0,0,se,ge):!e&&(te===void 0||te)&&ne.clearRect(0,0,se,ge),n||(ne.translate(de.x,de.y),ne.scale(ce,ce)),o&&ne.translate(o.x,o.y),i&&ne.scale(i,i)}if(d||(a.textureDrawLastFrame=!1),d){if(a.textureDrawLastFrame=!0,!a.textureCache){a.textureCache={},a.textureCache.bb=u.mutableElements().boundingBox(),a.textureCache.texture=a.data.bufferCanvases[a.TEXTURE_BUFFER];var R=a.data.bufferContexts[a.TEXTURE_BUFFER];R.setTransform(1,0,0,1,0,0),R.clearRect(0,0,a.canvasWidth*a.textureMult,a.canvasHeight*a.textureMult),a.render({forcedContext:R,drawOnlyNodeLayer:!0,forcedPxRatio:s*a.textureMult});var D=a.textureCache.viewport={zoom:u.zoom(),pan:u.pan(),width:a.canvasWidth,height:a.canvasHeight};D.mpan={x:(0-D.pan.x)/D.zoom,y:(0-D.pan.y)/D.zoom}}c[a.DRAG]=!1,c[a.NODE]=!1;var T=l.contexts[a.NODE],O=a.textureCache.texture,D=a.textureCache.viewport;T.setTransform(1,0,0,1,0,0),f?M(T,0,0,D.width,D.height):T.clearRect(0,0,D.width,D.height);var _=y.core("outside-texture-bg-color").value,k=y.core("outside-texture-bg-opacity").value;a.colorFillStyle(T,_[0],_[1],_[2],k),T.fillRect(0,0,D.width,D.height);var w=u.zoom();N(T,!1),T.clearRect(D.mpan.x,D.mpan.y,D.width/D.zoom/s,D.height/D.zoom/s),T.drawImage(O,D.mpan.x,D.mpan.y,D.width/D.zoom/s,D.height/D.zoom/s)}else a.textureOnViewport&&!e&&(a.textureCache=null);var P=u.extent(),V=a.pinching||a.hoverData.dragging||a.swipePanning||a.data.wheelZooming||a.hoverData.draggingEles||a.cy.animated(),z=a.hideEdgesOnViewport&&V,B=[];if(B[a.NODE]=!c[a.NODE]&&f&&!a.clearedForMotionBlur[a.NODE]||a.clearingMotionBlur,B[a.NODE]&&(a.clearedForMotionBlur[a.NODE]=!0),B[a.DRAG]=!c[a.DRAG]&&f&&!a.clearedForMotionBlur[a.DRAG]||a.clearingMotionBlur,B[a.DRAG]&&(a.clearedForMotionBlur[a.DRAG]=!0),c[a.NODE]||n||r||B[a.NODE]){var $=f&&!B[a.NODE]&&h!==1,T=e||($?a.data.bufferContexts[a.MOTIONBLUR_BUFFER_NODE]:l.contexts[a.NODE]),W=f&&!$?"motionBlur":void 0;N(T,W),z?a.drawCachedNodes(T,A.nondrag,s,P):a.drawLayeredElements(T,A.nondrag,s,P),a.debug&&a.drawDebugPoints(T,A.nondrag),!n&&!f&&(c[a.NODE]=!1)}if(!r&&(c[a.DRAG]||n||B[a.DRAG])){var $=f&&!B[a.DRAG]&&h!==1,T=e||($?a.data.bufferContexts[a.MOTIONBLUR_BUFFER_DRAG]:l.contexts[a.DRAG]);N(T,f&&!$?"motionBlur":void 0),z?a.drawCachedNodes(T,A.drag,s,P):a.drawCachedElements(T,A.drag,s,P),a.debug&&a.drawDebugPoints(T,A.drag),!n&&!f&&(c[a.DRAG]=!1)}if(a.showFps||!r&&c[a.SELECT_BOX]&&!n){var T=e||l.contexts[a.SELECT_BOX];if(N(T),a.selection[4]==1&&(a.hoverData.selecting||a.touchData.selecting)){var w=a.cy.zoom(),K=y.core("selection-box-border-width").value/w;T.lineWidth=K,T.fillStyle="rgba("+y.core("selection-box-color").value[0]+","+y.core("selection-box-color").value[1]+","+y.core("selection-box-color").value[2]+","+y.core("selection-box-opacity").value+")",T.fillRect(a.selection[0],a.selection[1],a.selection[2]-a.selection[0],a.selection[3]-a.selection[1]),K>0&&(T.strokeStyle="rgba("+y.core("selection-box-border-color").value[0]+","+y.core("selection-box-border-color").value[1]+","+y.core("selection-box-border-color").value[2]+","+y.core("selection-box-opacity").value+")",T.strokeRect(a.selection[0],a.selection[1],a.selection[2]-a.selection[0],a.selection[3]-a.selection[1]))}if(l.bgActivePosistion&&!a.hoverData.selecting){var w=a.cy.zoom(),Q=l.bgActivePosistion;T.fillStyle="rgba("+y.core("active-bg-color").value[0]+","+y.core("active-bg-color").value[1]+","+y.core("active-bg-color").value[2]+","+y.core("active-bg-opacity").value+")",T.beginPath(),T.arc(Q.x,Q.y,y.core("active-bg-size").pfValue/w,0,2*Math.PI),T.fill()}var X=a.lastRedrawTime;if(a.showFps&&X){X=Math.round(X);var J=Math.round(1e3/X);T.setTransform(1,0,0,1,0,0),T.fillStyle="rgba(255, 0, 0, 0.75)",T.strokeStyle="rgba(255, 0, 0, 0.75)",T.lineWidth=1,T.fillText("1 frame = "+X+" ms = "+J+" fps",0,20);var q=60;T.strokeRect(0,30,250,20),T.fillRect(0,30,250*Math.min(J/q,1),20)}n||(c[a.SELECT_BOX]=!1)}if(f&&h!==1){var L=l.contexts[a.NODE],U=a.data.bufferCanvases[a.MOTIONBLUR_BUFFER_NODE],Z=l.contexts[a.DRAG],re=a.data.bufferCanvases[a.MOTIONBLUR_BUFFER_DRAG],ve=function(te,de,ce){te.setTransform(1,0,0,1,0,0),ce||!v?te.clearRect(0,0,a.canvasWidth,a.canvasHeight):M(te,0,0,a.canvasWidth,a.canvasHeight);var se=h;te.drawImage(de,0,0,a.canvasWidth*se,a.canvasHeight*se,0,0,a.canvasWidth,a.canvasHeight)};(c[a.NODE]||B[a.NODE])&&(ve(L,U,B[a.NODE]),c[a.NODE]=!1),(c[a.DRAG]||B[a.DRAG])&&(ve(Z,re,B[a.DRAG]),c[a.DRAG]=!1)}a.prevViewport=D,a.clearingMotionBlur&&(a.clearingMotionBlur=!1,a.motionBlurCleared=!0,a.motionBlur=!0),f&&(a.motionBlurTimeout=setTimeout(function(){a.motionBlurTimeout=null,a.clearedForMotionBlur[a.NODE]=!1,a.clearedForMotionBlur[a.DRAG]=!1,a.motionBlur=!1,a.clearingMotionBlur=!d,a.mbFrames=0,c[a.NODE]=!0,c[a.DRAG]=!0,a.redraw()},VP)),e||u.emit("render")};var Wr={};Wr.drawPolygonPath=function(t,e,n,r,i,o){var a=r/2,s=i/2;t.beginPath&&t.beginPath(),t.moveTo(e+a*o[0],n+s*o[1]);for(var u=1;u<o.length/2;u++)t.lineTo(e+a*o[u*2],n+s*o[u*2+1]);t.closePath()};Wr.drawRoundPolygonPath=function(t,e,n,r,i,o,a){a.forEach(function(s){return vD(t,s)}),t.closePath()};Wr.drawRoundRectanglePath=function(t,e,n,r,i,o){var a=r/2,s=i/2,u=o==="auto"?xi(r,i):Math.min(o,s,a);t.beginPath&&t.beginPath(),t.moveTo(e,n-s),t.arcTo(e+a,n-s,e+a,n,u),t.arcTo(e+a,n+s,e,n+s,u),t.arcTo(e-a,n+s,e-a,n,u),t.arcTo(e-a,n-s,e,n-s,u),t.lineTo(e,n-s),t.closePath()};Wr.drawBottomRoundRectanglePath=function(t,e,n,r,i,o){var a=r/2,s=i/2,u=o==="auto"?xi(r,i):o;t.beginPath&&t.beginPath(),t.moveTo(e,n-s),t.lineTo(e+a,n-s),t.lineTo(e+a,n),t.arcTo(e+a,n+s,e,n+s,u),t.arcTo(e-a,n+s,e-a,n,u),t.lineTo(e-a,n-s),t.lineTo(e,n-s),t.closePath()};Wr.drawCutRectanglePath=function(t,e,n,r,i,o,a){var s=r/2,u=i/2,l=a==="auto"?Dp():a;t.beginPath&&t.beginPath(),t.moveTo(e-s+l,n-u),t.lineTo(e+s-l,n-u),t.lineTo(e+s,n-u+l),t.lineTo(e+s,n+u-l),t.lineTo(e+s-l,n+u),t.lineTo(e-s+l,n+u),t.lineTo(e-s,n+u-l),t.lineTo(e-s,n-u+l),t.closePath()};Wr.drawBarrelPath=function(t,e,n,r,i){var o=r/2,a=i/2,s=e-o,u=e+o,l=n-a,c=n+a,d=Qh(r,i),f=d.widthOffset,h=d.heightOffset,p=d.ctrlPtOffsetPct*f;t.beginPath&&t.beginPath(),t.moveTo(s,l+h),t.lineTo(s,c-h),t.quadraticCurveTo(s+p,c,s+f,c),t.lineTo(u-f,c),t.quadraticCurveTo(u-p,c,u,c-h),t.lineTo(u,l+h),t.quadraticCurveTo(u-p,l,u-f,l),t.lineTo(s+f,l),t.quadraticCurveTo(s+p,l,s,l+h),t.closePath()};var Kw=Math.sin(0),Qw=Math.cos(0),lp={},cp={},ND=Math.PI/40;for(mi=0*Math.PI;mi<2*Math.PI;mi+=ND)lp[mi]=Math.sin(mi),cp[mi]=Math.cos(mi);var mi;Wr.drawEllipsePath=function(t,e,n,r,i){if(t.beginPath&&t.beginPath(),t.ellipse)t.ellipse(e,n,r/2,i/2,0,0,2*Math.PI);else for(var o,a,s=r/2,u=i/2,l=0*Math.PI;l<2*Math.PI;l+=ND)o=e-s*lp[l]*Kw+s*cp[l]*Qw,a=n+u*cp[l]*Kw+u*lp[l]*Qw,l===0?t.moveTo(o,a):t.lineTo(o,a);t.closePath()};var _s={};_s.createBuffer=function(t,e){var n=document.createElement("canvas");return n.width=t,n.height=e,[n,n.getContext("2d")]};_s.bufferCanvasImage=function(t){var e=this.cy,n=e.mutableElements(),r=n.boundingBox(),i=this.findContainerClientCoords(),o=t.full?Math.ceil(r.w):i[2],a=t.full?Math.ceil(r.h):i[3],s=ie(t.maxWidth)||ie(t.maxHeight),u=this.getPixelRatio(),l=1;if(t.scale!==void 0)o*=t.scale,a*=t.scale,l=t.scale;else if(s){var c=1/0,d=1/0;ie(t.maxWidth)&&(c=l*t.maxWidth/o),ie(t.maxHeight)&&(d=l*t.maxHeight/a),l=Math.min(c,d),o*=l,a*=l}s||(o*=u,a*=u,l*=u);var f=document.createElement("canvas");f.width=o,f.height=a,f.style.width=o+"px",f.style.height=a+"px";var h=f.getContext("2d");if(o>0&&a>0){h.clearRect(0,0,o,a),h.globalCompositeOperation="source-over";var p=this.getCachedZSortedEles();if(t.full)h.translate(-r.x1*l,-r.y1*l),h.scale(l,l),this.drawElements(h,p),h.scale(1/l,1/l),h.translate(r.x1*l,r.y1*l);else{var m=e.pan(),g={x:m.x*l,y:m.y*l};l*=e.zoom(),h.translate(g.x,g.y),h.scale(l,l),this.drawElements(h,p),h.scale(1/l,1/l),h.translate(-g.x,-g.y)}t.bg&&(h.globalCompositeOperation="destination-over",h.fillStyle=t.bg,h.rect(0,0,o,a),h.fill())}return f};function $P(t,e){for(var n=atob(t),r=new ArrayBuffer(n.length),i=new Uint8Array(r),o=0;o<n.length;o++)i[o]=n.charCodeAt(o);return new Blob([r],{type:e})}function Xw(t){var e=t.indexOf(",");return t.substr(e+1)}function AD(t,e,n){var r=function(){return e.toDataURL(n,t.quality)};switch(t.output){case"blob-promise":return new Ho(function(i,o){try{e.toBlob(function(a){a!=null?i(a):o(new Error("`canvas.toBlob()` sent a null value in its callback"))},n,t.quality)}catch(a){o(a)}});case"blob":return $P(Xw(r()),n);case"base64":return Xw(r());case"base64uri":default:return r()}}_s.png=function(t){return AD(t,this.bufferCanvasImage(t),"image/png")};_s.jpg=function(t){return AD(t,this.bufferCanvasImage(t),"image/jpeg")};var RD={};RD.nodeShapeImpl=function(t,e,n,r,i,o,a,s){switch(t){case"ellipse":return this.drawEllipsePath(e,n,r,i,o);case"polygon":return this.drawPolygonPath(e,n,r,i,o,a);case"round-polygon":return this.drawRoundPolygonPath(e,n,r,i,o,a,s);case"roundrectangle":case"round-rectangle":return this.drawRoundRectanglePath(e,n,r,i,o,s);case"cutrectangle":case"cut-rectangle":return this.drawCutRectanglePath(e,n,r,i,o,a,s);case"bottomroundrectangle":case"bottom-round-rectangle":return this.drawBottomRoundRectanglePath(e,n,r,i,o,s);case"barrel":return this.drawBarrelPath(e,n,r,i,o)}};var jP=_D,ze=_D.prototype;ze.CANVAS_LAYERS=3;ze.SELECT_BOX=0;ze.DRAG=1;ze.NODE=2;ze.BUFFER_COUNT=3;ze.TEXTURE_BUFFER=0;ze.MOTIONBLUR_BUFFER_NODE=1;ze.MOTIONBLUR_BUFFER_DRAG=2;function _D(t){var e=this,n=e.cy.window(),r=n.document;e.data={canvases:new Array(ze.CANVAS_LAYERS),contexts:new Array(ze.CANVAS_LAYERS),canvasNeedsRedraw:new Array(ze.CANVAS_LAYERS),bufferCanvases:new Array(ze.BUFFER_COUNT),bufferContexts:new Array(ze.CANVAS_LAYERS)};var i="-webkit-tap-highlight-color",o="rgba(0,0,0,0)";e.data.canvasContainer=r.createElement("div");var a=e.data.canvasContainer.style;e.data.canvasContainer.style[i]=o,a.position="relative",a.zIndex="0",a.overflow="hidden";var s=t.cy.container();s.appendChild(e.data.canvasContainer),s.style[i]=o;var u={"-webkit-user-select":"none","-moz-user-select":"-moz-none","user-select":"none","-webkit-tap-highlight-color":"rgba(0,0,0,0)","outline-style":"none"};M1()&&(u["-ms-touch-action"]="none",u["touch-action"]="none");for(var l=0;l<ze.CANVAS_LAYERS;l++){var c=e.data.canvases[l]=r.createElement("canvas");e.data.contexts[l]=c.getContext("2d"),Object.keys(u).forEach(function(q){c.style[q]=u[q]}),c.style.position="absolute",c.setAttribute("data-id","layer"+l),c.style.zIndex=String(ze.CANVAS_LAYERS-l),e.data.canvasContainer.appendChild(c),e.data.canvasNeedsRedraw[l]=!1}e.data.topCanvas=e.data.canvases[0],e.data.canvases[ze.NODE].setAttribute("data-id","layer"+ze.NODE+"-node"),e.data.canvases[ze.SELECT_BOX].setAttribute("data-id","layer"+ze.SELECT_BOX+"-selectbox"),e.data.canvases[ze.DRAG].setAttribute("data-id","layer"+ze.DRAG+"-drag");for(var l=0;l<ze.BUFFER_COUNT;l++)e.data.bufferCanvases[l]=r.createElement("canvas"),e.data.bufferContexts[l]=e.data.bufferCanvases[l].getContext("2d"),e.data.bufferCanvases[l].style.position="absolute",e.data.bufferCanvases[l].setAttribute("data-id","buffer"+l),e.data.bufferCanvases[l].style.zIndex=String(-l-1),e.data.bufferCanvases[l].style.visibility="hidden";e.pathsEnabled=!0;var d=en(),f=function(L){return{x:(L.x1+L.x2)/2,y:(L.y1+L.y2)/2}},h=function(L){return{x:-L.w/2,y:-L.h/2}},p=function(L){var U=L[0]._private,Z=U.oldBackgroundTimestamp===U.backgroundTimestamp;return!Z},m=function(L){return L[0]._private.nodeKey},g=function(L){return L[0]._private.labelStyleKey},v=function(L){return L[0]._private.sourceLabelStyleKey},y=function(L){return L[0]._private.targetLabelStyleKey},w=function(L,U,Z,re,ve){return e.drawElement(L,U,Z,!1,!1,ve)},b=function(L,U,Z,re,ve){return e.drawElementText(L,U,Z,re,"main",ve)},I=function(L,U,Z,re,ve){return e.drawElementText(L,U,Z,re,"source",ve)},E=function(L,U,Z,re,ve){return e.drawElementText(L,U,Z,re,"target",ve)},D=function(L){return L.boundingBox(),L[0]._private.bodyBounds},S=function(L){return L.boundingBox(),L[0]._private.labelBounds.main||d},C=function(L){return L.boundingBox(),L[0]._private.labelBounds.source||d},A=function(L){return L.boundingBox(),L[0]._private.labelBounds.target||d},M=function(L,U){return U},N=function(L){return f(D(L))},R=function(L,U,Z){var re=L?L+"-":"";return{x:U.x+Z.pstyle(re+"text-margin-x").pfValue,y:U.y+Z.pstyle(re+"text-margin-y").pfValue}},T=function(L,U,Z){var re=L[0]._private.rscratch;return{x:re[U],y:re[Z]}},O=function(L){return R("",T(L,"labelX","labelY"),L)},_=function(L){return R("source",T(L,"sourceLabelX","sourceLabelY"),L)},k=function(L){return R("target",T(L,"targetLabelX","targetLabelY"),L)},P=function(L){return h(D(L))},V=function(L){return h(C(L))},z=function(L){return h(A(L))},B=function(L){var U=S(L),Z=h(S(L));if(L.isNode()){switch(L.pstyle("text-halign").value){case"left":Z.x=-U.w-(U.leftPad||0);break;case"right":Z.x=-(U.rightPad||0);break}switch(L.pstyle("text-valign").value){case"top":Z.y=-U.h-(U.topPad||0);break;case"bottom":Z.y=-(U.botPad||0);break}}return Z},$=e.data.eleTxrCache=new cs(e,{getKey:m,doesEleInvalidateKey:p,drawElement:w,getBoundingBox:D,getRotationPoint:N,getRotationOffset:P,allowEdgeTxrCaching:!1,allowParentTxrCaching:!1}),W=e.data.lblTxrCache=new cs(e,{getKey:g,drawElement:b,getBoundingBox:S,getRotationPoint:O,getRotationOffset:B,isVisible:M}),K=e.data.slbTxrCache=new cs(e,{getKey:v,drawElement:I,getBoundingBox:C,getRotationPoint:_,getRotationOffset:V,isVisible:M}),Q=e.data.tlbTxrCache=new cs(e,{getKey:y,drawElement:E,getBoundingBox:A,getRotationPoint:k,getRotationOffset:z,isVisible:M}),X=e.data.lyrTxrCache=new SD(e);e.onUpdateEleCalcs(function(L,U){$.invalidateElements(U),W.invalidateElements(U),K.invalidateElements(U),Q.invalidateElements(U),X.invalidateElements(U);for(var Z=0;Z<U.length;Z++){var re=U[Z]._private;re.oldBackgroundTimestamp=re.backgroundTimestamp}});var J=function(L){for(var U=0;U<L.length;U++)X.enqueueElementRefinement(L[U].ele)};$.onDequeue(J),W.onDequeue(J),K.onDequeue(J),Q.onDequeue(J)}ze.redrawHint=function(t,e){var n=this;switch(t){case"eles":n.data.canvasNeedsRedraw[ze.NODE]=e;break;case"drag":n.data.canvasNeedsRedraw[ze.DRAG]=e;break;case"select":n.data.canvasNeedsRedraw[ze.SELECT_BOX]=e;break}};var HP=typeof Path2D<"u";ze.path2dEnabled=function(t){if(t===void 0)return this.pathsEnabled;this.pathsEnabled=!!t};ze.usePaths=function(){return HP&&this.pathsEnabled};ze.setImgSmoothing=function(t,e){t.imageSmoothingEnabled!=null?t.imageSmoothingEnabled=e:(t.webkitImageSmoothingEnabled=e,t.mozImageSmoothingEnabled=e,t.msImageSmoothingEnabled=e)};ze.getImgSmoothing=function(t){return t.imageSmoothingEnabled!=null?t.imageSmoothingEnabled:t.webkitImageSmoothingEnabled||t.mozImageSmoothingEnabled||t.msImageSmoothingEnabled};ze.makeOffscreenCanvas=function(t,e){var n;if((typeof OffscreenCanvas>"u"?"undefined":Dt(OffscreenCanvas))!=="undefined")n=new OffscreenCanvas(t,e);else{var r=this.cy.window(),i=r.document;n=i.createElement("canvas"),n.width=t,n.height=e}return n};[xD,rr,br,Pp,Ri,Ko,gn,Wr,_s,RD].forEach(function(t){ye(ze,t)});var zP=[{name:"null",impl:hD},{name:"base",impl:CD},{name:"canvas",impl:jP}],UP=[{type:"layout",extensions:KO},{type:"renderer",extensions:zP}],kD={},OD={};function PD(t,e,n){var r=n,i=function(S){Ye("Can not register `"+e+"` for `"+t+"` since `"+S+"` already exists in the prototype and can not be overridden")};if(t==="core"){if(Cs.prototype[e])return i(e);Cs.prototype[e]=n}else if(t==="collection"){if(Ot.prototype[e])return i(e);Ot.prototype[e]=n}else if(t==="layout"){for(var o=function(S){this.options=S,n.call(this,S),He(this._private)||(this._private={}),this._private.cy=S.cy,this._private.listeners=[],this.createEmitter()},a=o.prototype=Object.create(n.prototype),s=[],u=0;u<s.length;u++){var l=s[u];a[l]=a[l]||function(){return this}}a.start&&!a.run?a.run=function(){return this.start(),this}:!a.start&&a.run&&(a.start=function(){return this.run(),this});var c=n.prototype.stop;a.stop=function(){var D=this.options;if(D&&D.animate){var S=this.animations;if(S)for(var C=0;C<S.length;C++)S[C].stop()}return c?c.call(this):this.emit("layoutstop"),this},a.destroy||(a.destroy=function(){return this}),a.cy=function(){return this._private.cy};var d=function(S){return S._private.cy},f={addEventFields:function(S,C){C.layout=S,C.cy=d(S),C.target=S},bubble:function(){return!0},parent:function(S){return d(S)}};ye(a,{createEmitter:function(){return this._private.emitter=new dc(f,this),this},emitter:function(){return this._private.emitter},on:function(S,C){return this.emitter().on(S,C),this},one:function(S,C){return this.emitter().one(S,C),this},once:function(S,C){return this.emitter().one(S,C),this},removeListener:function(S,C){return this.emitter().removeListener(S,C),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},emit:function(S,C){return this.emitter().emit(S,C),this}}),Ze.eventAliasesOn(a),r=o}else if(t==="renderer"&&e!=="null"&&e!=="base"){var h=LD("renderer","base"),p=h.prototype,m=n,g=n.prototype,v=function(){h.apply(this,arguments),m.apply(this,arguments)},y=v.prototype;for(var w in p){var b=p[w],I=g[w]!=null;if(I)return i(w);y[w]=b}for(var E in g)y[E]=g[E];p.clientFunctions.forEach(function(D){y[D]=y[D]||function(){dt("Renderer does not implement `renderer."+D+"()` on its prototype")}}),r=v}else if(t==="__proto__"||t==="constructor"||t==="prototype")return dt(t+" is an illegal type to be registered, possibly lead to prototype pollutions");return sb({map:kD,keys:[t,e],value:r})}function LD(t,e){return ub({map:kD,keys:[t,e]})}function qP(t,e,n,r,i){return sb({map:OD,keys:[t,e,n,r],value:i})}function GP(t,e,n,r){return ub({map:OD,keys:[t,e,n,r]})}var dp=function(){if(arguments.length===2)return LD.apply(null,arguments);if(arguments.length===3)return PD.apply(null,arguments);if(arguments.length===4)return GP.apply(null,arguments);if(arguments.length===5)return qP.apply(null,arguments);dt("Invalid extension access syntax")};Cs.prototype.extension=dp;UP.forEach(function(t){t.extensions.forEach(function(e){PD(t.type,e.name,e.impl)})});var FD=function t(){if(!(this instanceof t))return new t;this.length=0},Ni=FD.prototype;Ni.instanceString=function(){return"stylesheet"};Ni.selector=function(t){var e=this.length++;return this[e]={selector:t,properties:[]},this};Ni.css=function(t,e){var n=this.length-1;if(pe(t))this[n].properties.push({name:t,value:e});else if(He(t))for(var r=t,i=Object.keys(r),o=0;o<i.length;o++){var a=i[o],s=r[a];if(s!=null){var u=zt.properties[a]||zt.properties[tc(a)];if(u!=null){var l=u.name,c=s;this[n].properties.push({name:l,value:c})}}}return this};Ni.style=Ni.css;Ni.generateStyle=function(t){var e=new zt(t);return this.appendToStyle(e)};Ni.appendToStyle=function(t){for(var e=0;e<this.length;e++){var n=this[e],r=n.selector,i=n.properties;t.selector(r);for(var o=0;o<i.length;o++){var a=i[o];t.css(a.name,a.value)}}return t};var WP="3.30.4",qr=function(e){if(e===void 0&&(e={}),He(e))return new Cs(e);if(pe(e))return dp.apply(dp,arguments)};qr.use=function(t){var e=Array.prototype.slice.call(arguments,1);return e.unshift(qr),t.apply(null,e),this};qr.warnings=function(t){return vb(t)};qr.version=WP;qr.stylesheet=qr.Stylesheet=FD;function BD(t,e="#666",n={}){return{data:fe({id:t,color:e},n)}}function VD(t,e,n,r={}){return{data:fe({id:t,source:e,target:n},r)}}var ZP=["cytoscape"];function YP(t,e){if(t&1&&co(0),t&2){let n=Ff().$implicit;$f(" ",n.name," ")}}function KP(t,e){t&1&&co(0," Empty ")}function QP(t,e){if(t&1){let n=Lf();Rr(0,"div",5),ci("click",function(){let i=ba(n).$index,o=Ff();return Da(o.powerClicked(i))}),Of(1,YP,1,1)(2,KP,1,0),li()}if(t&2){let n=e.$implicit;If(),by(n?1:2)}}var wc=class t{title="PathOfAchraGraph";powers=new Array(8).fill(null);cytoscape;cytoscapeContainer;constructor(){this.powers[0]=Lh.find(e=>e.name=="Toxokinesis")}ngAfterViewInit(){this.cytoscape=qr({container:this.cytoscapeContainer.nativeElement,style:[{selector:"node",style:{label:"data(id)","background-color":"data(color)"}},{selector:"edge",style:{"curve-style":"bezier",label:"data(id)","target-arrow-shape":"triangle"}}]})}powerClicked(e){this.powers[e]=null}addRandomPower(){let e=this.powers.findIndex(r=>!r),n=Lh.filter(r=>!this.powers.some(i=>i?.name==r.name));if(n.length==0){console.log("No more powers.");return}this.powers[e]=n[Math.floor(Math.random()*n.length)]}randomizeAllPowers(){this.powers.fill(null);for(let e=0;e<this.powers.length;e++)this.addRandomPower()}getElementsFromPowers(){let e=[],n=this.powers.filter(r=>r).map(r=>r);for(let r of n){e.push(BD(r.name,r.getColor()));for(let i of r.effects)for(let o of n)for(let a of o.effects)a.isTriggeredBy(i)&&e.push(VD(i.toString(),r.name,o.name))}return e}buildGraph(){this.cytoscape.elements().remove(),this.cytoscape.add(this.getElementsFromPowers()),this.cytoscape.layout({name:"breadthfirst"}).run()}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Zu({type:t,selectors:[["app-root"]],viewQuery:function(n,r){if(n&1&&Iy(ZP,5),n&2){let i;Bf(i=Vf())&&(r.cytoscapeContainer=i.first)}},decls:11,vars:0,consts:[["cytoscape",""],[1,"d-flex"],[1,"border","text-center","align-content-center",2,"width","100px","height","100px"],[3,"click"],[1,"d-block","border","w-100",2,"height","500px"],[1,"border","text-center","align-content-center",2,"width","100px","height","100px",3,"click"]],template:function(n,r){if(n&1){let i=Lf();Rr(0,"div",1),Ey(1,QP,3,1,"div",2,Dy),Rr(3,"button",3),ci("click",function(){return ba(i),Da(r.addRandomPower())}),co(4,"Add Random"),li(),Rr(5,"button",3),ci("click",function(){return ba(i),Da(r.randomizeAllPowers())}),co(6,"All Random"),li()(),Rr(7,"button",3),ci("click",function(){return ba(i),Da(r.buildGraph())}),co(8,"Build Graph"),li(),xa(9,"div",4,0)}n&2&&(If(),Cy(r.powers))},encapsulation:2})};Qy(wc,F0).catch(t=>console.error(t));
